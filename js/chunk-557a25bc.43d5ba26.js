(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-557a25bc","chunk-0a468065"],{"498a":function(t,e,n){"use strict";var o=n("23e7"),r=n("58a8").trim,a=n("c8d2");o({target:"String",proto:!0,forced:a("trim")},{trim:function(){return r(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var o=n("1d80"),r=n("5899"),a="["+r+"]",s=RegExp("^"+a+a+"*"),i=RegExp(a+a+"*$"),m=function(t){return function(e){var n=String(o(e));return 1&t&&(n=n.replace(s,"")),2&t&&(n=n.replace(i,"")),n}};t.exports={start:m(1),end:m(2),trim:m(3)}},"6d79":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("caad"),n("d3b7"),n("ac1f"),n("25f0"),n("2532"),n("841c");var o=n("54f8"),r={name:"cassUtil",data:function(){return{}},methods:{getOrganizationByEcPk:function(t,e,n){var r=t.toPem(),a={size:1e4};EcOrganization.search(window.repo,"",(function(t){var a,s=Object(o["a"])(t);try{for(s.s();!(a=s.n()).done;){var i=a.value;try{var m,c=i.getOrgKeys(),d=Object(o["a"])(c);try{for(d.s();!(m=d.n()).done;){var l=m.value;if(l&&l.toPk().toPem().equals(r))return void e(i)}}catch(u){d.e(u)}finally{d.f()}}catch(f){n(f.toString())}}}catch(u){s.e(u)}finally{s.f()}e(null)}),(function(t){n(t)}),a)},getOrganizationEcPk:function(t){try{return t.getCurrentOrgKey().toPk()}catch(e){return null}},getPersonEcPk:function(t){var e=this.generateProbablePersonFingerprintFromShortId(t.shortId());if(t.owner){var n,r=Object(o["a"])(t.owner);try{for(r.s();!(n=r.n()).done;){var a=n.value,s=EcPk.fromPem(a);if(e.equals(s.fingerprint()))return s}}catch(i){r.e(i)}finally{r.f()}}return null},addAllOwnersFromObjectToObject:function(t,e){if(t&&t.owner){var n,r=Object(o["a"])(t.owner);try{for(r.s();!(n=r.n()).done;){var a=n.value,s=EcPk.fromPem(a);e.addOwner(s)}}catch(i){r.e(i)}finally{r.f()}}},setDefaultBrowserConfigId:function(t){localStorage.setItem("cassAuthoringToolDefaultBrowserConfigId",t)},removeDefaultBrowserConfig:function(){localStorage.removeItem("cassAuthoringToolDefaultBrowserConfigId")},getDefaultBrowserConfigId:function(){return localStorage.getItem("cassAuthoringToolDefaultBrowserConfigId")},getBooleanValue:function(t){return"boolean"===typeof t?t:"string"===typeof t&&!!t.equalsIgnoreCase("true")},addAllIdentityPksAsOwners:function(t){if(EcIdentityManager&&EcIdentityManager.ids&&EcIdentityManager.ids.length>0)for(var e=0;e<EcIdentityManager.ids.length;e++)t.addOwner(EcIdentityManager.ids[e].ppk.toPk())},isObjectOwnerless:function(t){return!t.owner||0===t.owner.length},doesAnyIdentityOwnObject:function(t){if(!EcIdentityManager||!EcIdentityManager.ids||EcIdentityManager.ids.length<=0)return!1;for(var e=0;e<EcIdentityManager.ids.length;e++)if(t.hasOwner(EcIdentityManager.ids[e].ppk.toPk()))return!0;return!1},generateProbablePersonFingerprintFromShortId:function(t){return t.substring(t.lastIndexOf("/")+1)},isPersonIdAnObjectOwner:function(t,e){if(!e.owner||0===e.owner.length)return!1;var n,r=this.generateProbablePersonFingerprintFromShortId(t),a=Object(o["a"])(e.owner);try{for(a.s();!(n=a.n()).done;){var s=n.value,i=EcPk.fromPem(s).fingerprint();if(i.equals(r))return!0}}catch(m){a.e(m)}finally{a.f()}return!1},isPersonIdAnObjectReader:function(t,e){if(!e.reader||0===e.reader.length)return!1;var n,r=this.generateProbablePersonFingerprintFromShortId(t),a=Object(o["a"])(e.reader);try{for(a.s();!(n=a.n()).done;){var s=n.value,i=EcPk.fromPem(s).fingerprint();if(i.equals(r))return!0}}catch(m){a.e(m)}finally{a.f()}return!1},areAnyIdentitiesThisPerson:function(t){var e=t.getFingerprint();if(EcIdentityManager&&EcIdentityManager.ids&&EcIdentityManager.ids.length>0)for(var n=0;n<EcIdentityManager.ids.length;n++)if(EcIdentityManager.ids[n].ppk.toPk().fingerprint().equals(e))return!0;return!1},isPersonalIdentityAnObjectOwner:function(t){if(!t.owner||0===t.owner.length)return!1;var e=this.getPersonalIdentityPk().toPem();return t.owner.includes(e)},getPersonalIdentityPk:function(){return EcIdentityManager&&EcIdentityManager.ids&&EcIdentityManager.ids.length>0?EcIdentityManager.ids[0].ppk.toPk():null},buildEcAlignmentsFromRemoteLinkedData:function(t){var e,n=[],r=Object(o["a"])(t);try{for(r.s();!(e=r.n()).done;){var a=e.value,s=new EcAlignment;s.copyFrom(a),n.push(s)}}catch(i){r.e(i)}finally{r.f()}return n}},computed:{amLoggedIn:function(){return!!(EcIdentityManager&&EcIdentityManager.ids&&EcIdentityManager.ids.length>0)}}}},"8a30":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal-template",{attrs:{type:"info",active:!0},on:{close:t.closeModal}},[n("template",{slot:"modal-header"},[t.isCommentNew||t.isCommentReply?n("span",[t._v("New Comment")]):t._e(),t.isCommentEdit?n("span",[t._v("Edit Comment")]):t._e()]),n("template",{slot:"modal-body"},[t.isCommentNew?n("span",{staticClass:"comment-modal__details__header"},[t._v("Commenting on")]):t._e(),t.isCommentReply?n("span",{staticClass:"comment-modal__details__header"},[t._v("Replying to comments about")]):t._e(),t.isCommentEdit?n("span",{staticClass:"comment-modal__details__header"},[t._v("Editing comment on")]):t._e(),n("p",{staticClass:"comment-modal__details__framework"},[n("b",[t._v("framework: ")]),t._v(t._s(t.commentFrameworkName)+" ")]),t.isCommentOnCompetency?n("p",{staticClass:"comment-modal__details__competency"},[n("b",[t._v("competency:")]),t._v(" "+t._s(t.commentSubject.getName())+" ")]):t._e(),n("div",{staticClass:"field"},[n("div",{staticClass:"control"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentText,expression:"commentText"}],staticClass:"textarea",attrs:{row:"3"},domProps:{value:t.commentText},on:{input:function(e){e.target.composing||(t.commentText=e.target.value)}}})])]),t.commentIsBusy?n("div",{staticClass:"has-text-centered"},[n("span",{staticClass:"icon is-large has-text-center has-text-link"},[n("i",{staticClass:"fas fa-2x fa-spinner is-info fa-pulse"})])]):t._e()]),n("template",{slot:"modal-foot"},[n("div",{staticClass:"buttons is-spaced"},[n("button",{staticClass:"button is-dark is-outlined",on:{click:t.closeModal}},[t._v(" Cancel ")]),n("button",{staticClass:"button is-outlined is-primary",attrs:{disabled:t.commentIsBusy},on:{click:t.saveComment}},[t._v(" Save comment ")])])])],2)},r=[],a=(n("498a"),n("54f8")),s=n("6d79"),i=n("af07"),m={mixins:[s["a"]],name:"AddComment",components:{ModalTemplate:i["a"]},data:function(){return{commentSubject:{},commentSubjectType:"",commentText:"",loggedInPersonEcPk:{},commentToSave:{},commentIsBusy:!1}},methods:{closeModal:function(){this.$store.commit("app/closeModal")},buildNewCommentObject:function(){var t=new EcComment;return t.generateId(window.repo.selectedServer),t.setCreator(this.loggedInPerson),this.isCommentReply?t.setSubjectIds(this.commentFrameworkId,this.commentToReply.shortId()):t.setSubjectIds(this.commentFrameworkId,this.commentAboutId),t.setDateCreated(Date.now()+""),t.text=this.commentText,t.addOwner(this.loggedInPersonEcPk),this.addAllOwnersFromObjectToObject(this.commentFramework,t),this.isCommentReply&&this.addAllOwnersFromObjectToObject(this.commentToReply,t),this.isCommentOnFramework||this.addAllOwnersFromObjectToObject(this.commentSubject,t),t},buildEditCommentObject:function(){var t=this.commentToEdit;return t.text=this.commentText,t.lastEditDate=Date.now()+"",t},buildCommentObject:function(){return this.isCommentEdit?this.buildEditCommentObject():this.buildNewCommentObject()},updateStoredFrameworkCommentPersonMap:function(){var t=this.$store.getters["editor/frameworkCommentPersonMap"];t[this.loggedInPerson.shortId()]=this.loggedInPerson,this.$store.commit("editor/setFrameworkCommentPersonMap",t)},insertEditedCommentObjectIntoStoreFrameworkCommentList:function(){var t,e=[],n=this.$store.getters["editor/frameworkCommentList"],o=Object(a["a"])(n);try{for(o.s();!(t=o.n()).done;){var r=t.value;r.shortId().equals(this.commentToSave.shortId())?e.push(this.commentToSave):e.push(r)}}catch(s){o.e(s)}finally{o.f()}this.$store.commit("editor/setFrameworkCommentList",e)},updateStoreFrameworkCommentList:function(){if(this.isCommentEdit)this.insertEditedCommentObjectIntoStoreFrameworkCommentList();else{var t=this.$store.getters["editor/frameworkCommentList"];t.push(this.commentToSave),this.$store.commit("editor/setFrameworkCommentList",t)}},updateStoredFrameworkCommentData:function(){this.frameworkCommentDataAlreadyLoaded&&(this.updateStoredFrameworkCommentPersonMap(),this.updateStoreFrameworkCommentList())},saveCommentSuccess:function(){appLog("Save comment succeeded"),this.updateStoredFrameworkCommentData(),this.commentIsBusy=!1,this.closeModal(),this.$store.commit("app/showRightAside","Comments")},saveCommentFailed:function(t){this.commentIsBusy=!1,appLog("Save comment failed: "+t)},saveComment:function(){this.commentText.trim().length>0?this.loggedInPerson&&this.loggedInPerson.id?(this.loggedInPersonEcPk=this.getPersonEcPk(this.loggedInPerson),this.loggedInPersonEcPk?(this.commentIsBusy=!0,this.commentToSave=this.buildCommentObject(),appLog("commentToSave"),appLog(this.commentToSave),EcRepository.save(this.commentToSave,this.saveCommentSuccess,this.saveCommentFailed)):appLog("Could not determine person EcPk for comment")):alert("Not logged in. How did you get here?"):this.closeModal()}},computed:{commentFramework:function(){return this.$store.getters["editor/framework"]},commentFrameworkName:function(){var t=this.$store.getters["editor/framework"];return t?t.getName():"Unknown"},commentFrameworkId:function(){var t=this.$store.getters["editor/framework"];return t?t.shortId():"Unknown"},commentAboutId:function(){return this.$store.getters["editor/addCommentAboutId"]},commentType:function(){return this.$store.getters["editor/addCommentType"]},commentToEdit:function(){return this.$store.getters["editor/commentToEdit"]},commentToReply:function(){return this.$store.getters["editor/commentToReply"]},frameworkCommentDataAlreadyLoaded:function(){return this.$store.getters["editor/frameworkCommentDataLoaded"]},isCommentReply:function(){return this.commentType.equalsIgnoreCase("reply")},isCommentEdit:function(){return this.commentType.equalsIgnoreCase("edit")},isCommentNew:function(){return this.commentType.equalsIgnoreCase("new")},isCommentOnFramework:function(){return this.commentSubjectType.equalsIgnoreCase("framework")},isCommentOnCompetency:function(){return this.commentSubjectType.equalsIgnoreCase("competency")},loggedInPerson:function(){return this.$store.state.user.loggedOnPerson}},mounted:function(){if(this.commentFrameworkId.equals(this.commentAboutId))this.commentSubjectType="framework";else{var t=EcRepository.getBlocking(this.commentAboutId);this.commentSubject=t,this.commentSubjectType=t.type.toLowerCase()}this.isCommentEdit&&(this.commentText=this.commentToEdit.text)}},c=m,d=(n("b8b4"),n("2877")),l=Object(d["a"])(c,o,r,!1,null,null,null);e["default"]=l.exports},"984b":function(t,e,n){},a907:function(t,e,n){},a989:function(t,e,n){},ad86:function(t,e,n){"use strict";var o=n("a907"),r=n.n(o);r.a},af07:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal cass-editor___modal",class:[{"is-active":t.active},"is-"+t.size,"cass-editor__modal--"+t.content],attrs:{id:"cass-modal"}},[n("div",{staticClass:"modal-background"}),n("div",{staticClass:"modal-card",class:"cass-editor__modal-card--"+t.size},[n("header",{staticClass:"modal-card-head is-size-4 has-text-weight-bold",class:["has-background-"+t.type,"has-text-"+t.fontColor]},[n("p",{staticClass:"modal-card-title"},[t._t("modal-header")],2),t.canClose?n("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(e){t.$store.commit("app/closeModal"),t.$emit("close")}}}):t._e()]),n("div",{staticClass:"modal-card-body has-text-dark"},[t._t("modal-body")],2),n("footer",{staticClass:"modal-card-foot has-background-white"},[t._t("modal-foot")],2)])])},r=[],a=(n("984b"),{name:"ModalTemplate",props:{canClose:{type:Boolean,default:!0},active:{type:Boolean,default:!1},type:{default:"primary",type:String},fontColor:{type:String,default:"white"},size:{type:String,default:"medium"},content:{defualt:"default",type:String}},data:function(){return{}},computed:{}}),s=a,i=(n("ad86"),n("2877")),m=Object(i["a"])(s,o,r,!1,null,null,null);e["a"]=m.exports},b8b4:function(t,e,n){"use strict";var o=n("a989"),r=n.n(o);r.a},c8d2:function(t,e,n){var o=n("d039"),r=n("5899"),a="​᠎";t.exports=function(t){return o((function(){return!!r[t]()||a[t]()!=a||r[t].name!==t}))}}}]);
//# sourceMappingURL=chunk-557a25bc.43d5ba26.js.map