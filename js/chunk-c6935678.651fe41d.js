(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c6935678"],{5650:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{},[i("div",{staticClass:"px-1"},[i("h2",{staticClass:"title is-size-2 has-text-weight-light"},[e._v(" Adding property ")]),""===e.selectedPropertyToAdd?i("p",{staticClass:"subtitle is-size-5"},[e._v(" Select a property from one of the following groups. ")]):""===e.selectedPropertyToAdd||e.selectedPropertyToAddIsTextValue?e._e():i("p",{staticClass:"subtitle is-size-5"},[e._v(" When adding relationships or levels, you can either search for existing relationships/levels or add one via url. Choose one. ")])]),""!==e.selectedPropertyToAdd?i("div",{staticClass:"py-4 px-1"},[""!==e.selectedPropertyToAdd?i("p",{staticClass:"title is-size-3 has-text-weight-normal"},[e._v(" "+e._s(e.selectedPropertyToAdd.label)+" "),i("span",{staticClass:"button is-pulled-right is-text has-text-primary",on:{click:function(t){e.selectedPropertyToAdd="",e.addRelationBy=""}}},[e._m(0),i("span",[e._v("back")])])]):e._e(),e.selectedPropertyToAddIsTextValue||"url"===e.addRelationBy?i("div",{staticClass:"add-property-field"},[i("div",{staticClass:"add-property__input-type"},[i("div",{staticClass:"add-property__select-type"},[i("div",{staticClass:"field is-expanded"},[e.checkedOptions&&e.profile&&e.profile[e.selectedPropertyToAdd.value]&&e.profile[e.selectedPropertyToAdd.value]["options"]?[i("p",{staticClass:"subtitle is-size-6"},[e._v(" Choose one or more of the following levels. ")]),e._l(e.optionsArray,(function(t){return i("div",{key:t,staticClass:"field"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedOptions,expression:"checkedOptions"}],staticClass:"is-checkradio",attrs:{type:"checkbox",name:t.val,id:t.val},domProps:{value:t.val,checked:Array.isArray(e.checkedOptions)?e._i(e.checkedOptions,t.val)>-1:e.checkedOptions},on:{change:function(i){var s=e.checkedOptions,r=i.target,o=!!r.checked;if(Array.isArray(s)){var a=t.val,n=e._i(s,a);r.checked?n<0&&(e.checkedOptions=s.concat([a])):n>-1&&(e.checkedOptions=s.slice(0,n).concat(s.slice(n+1)))}else e.checkedOptions=o}}}),i("label",{staticClass:"label",attrs:{for:t.val}},[e._v(" "+e._s(t.name)+" ")])])}))]:i("PropertyString",{attrs:{index:"null",expandedProperty:e.selectedPropertyToAdd.value,langString:e.selectedPropertyToAddIsLangString,range:e.selectedPropertyRange,newProperty:!0,profile:e.profile,addSingle:!0,valueFromSearching:e.selectedPropertyToAddValue,options:e.profile&&e.profile[e.selectedPropertyToAdd.value]&&e.profile[e.selectedPropertyToAdd.value]["options"]?e.profile[e.selectedPropertyToAdd.value]["options"]:null}})],2)])])]):""===e.selectedPropertyToAdd||e.selectedPropertyToAddIsTextValue?e._e():i("div",{staticClass:"add-property__field"},[i("div",{staticClass:"buttons is-left"},[e.selectedPropertyRange&&-1!==e.selectedPropertyRange[0].toLowerCase().indexOf("level")&&!e.editingMultipleCompetencies?i("div",{staticClass:"button is-outlined is-primary",attrs:{type:"text"},on:{click:e.addNewLevel}},[e._m(1),i("span",[e._v(" create new Level ")])]):e._e(),i("div",{staticClass:"button is-outlined is-primary",attrs:{type:"text"},on:{click:function(t){e.addRelationBy="url"}}},[i("span",[e._v(" Add "+e._s(e.selectedPropertyToAdd.label)+" by url ")]),e._m(2)]),i("div",{staticClass:"button is-outlined is-primary",attrs:{type:"button"},on:{click:e.search}},[i("span",[e._v(" Search for "+e._s(e.selectedPropertyToAdd.label)+" to add ")]),e._m(3)])])])]):e._e(),i("div",{},[i("div",{staticClass:"columns my-2"},[i("div",{staticClass:"column is-6"},[""===e.selectedPropertyToAdd?i("div",{staticClass:"buttons"},[i("div",{staticClass:"button is-small",class:"all"===e.filterProperties?"is-primary":"",on:{click:function(t){e.filterProperties="all"}}},[e._v(" all ")]),i("div",{staticClass:"button is-small",class:"relationships"===e.filterProperties?"is-primary":"",on:{click:function(t){e.filterProperties="relationships"}}},[e._v(" relationships ")]),i("div",{staticClass:"button is-small",class:"general"===e.filterProperties?"is-primary":"",on:{click:function(t){e.filterProperties="general"}}},[e._v(" general ")])]):e._e()]),i("div",{staticClass:"column is-6"},[""===e.selectedPropertyToAdd?i("div",{staticClass:"buttons is-right"},[i("div",{staticClass:"button is-small",class:"list"===e.propertyView?"is-primary":"",on:{click:function(t){e.propertyView="list"}}},[e._m(4)]),i("div",{staticClass:"button is-small",class:"grid"===e.propertyView?"is-primary":"",on:{click:function(t){e.propertyView="grid"}}},[e._m(5)])]):e._e()])]),""===e.selectedPropertyToAdd?[i("div",{staticClass:"columns is-multiline property-columns px-1"},[i("div",{staticClass:"column is-12 slide px-4",class:{collapsed:!e.showGeneral}},[i("div",{staticClass:"columns is-mobile is-multiline"},e._l(e.showProperties,(function(t){return i("div",{key:t,staticClass:"column property",class:"grid"===e.propertyView?"is-3":"is-12"},[i("div",{staticClass:"property-button",class:{selected:t===e.selectedPropertyToAdd},attrs:{title:t.description},on:{click:function(i){e.selectedPropertyToAdd=t}}},[i("p",{staticClass:"has-text-weight-semibold is-size-6"},[e._v(" "+e._s(t.label)+" ")]),i("p",{staticClass:"is-size-7 property-description"},[e._v(" "+e._s(t.description)+" ")])])])})),0)])])]:e._e(),i("p",{staticClass:"help is-danger"},[e._v(" "+e._s(e.errorMessage[0])+" ")])],2),e.$store.state.featuresEnabled.configurationsEnabled?i("div",{staticClass:"px-1"},[i("p",{staticClass:"subtitle"},[e._v(" Note: Property options are determined by your "),i("router-link",{attrs:{target:"_blank",to:"/configuration"}},[e._v(" configuration settings. ")]),e._v(" If a property is unavailable to you here, please refer to your configuration settings or contact your administrator. ")],1)]):e._e()])},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-arrow-left"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-plus"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-link"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-search"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-list-alt"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-th"})])}],o=(i("b0c0"),i("a9e3"),i("159b"),i("d17f")),a={name:"AddProperty",props:{profile:Object,expandedThing:Object,editingMultipleCompetencies:Boolean,idx:Number,addedPropertiesAndValuesFromSearching:Object,errorMessage:{type:Array,default:function(){return[]}}},components:{PropertyString:o["default"]},data:function(){return{filterProperties:"all",propertyView:"list",showGeneral:!0,showRelationships:!0,showResources:!0,addRelationBy:"",selectedPropertyToAdd:"",selectedPropertyRange:null,selectedPropertyToAddIsLangString:!1,selectedPropertyToAddValue:null,checkedOptions:null,skipConfigProperties:["alwaysProperties","headings","primaryProperties","secondaryProperties","tertiaryProperties","relationshipsHeading","relationshipsPriority"],optionsArray:[]}},mounted:function(){this.editingMultipleCompetencies&&this.addedPropertiesAndValuesFromSearching.value.length&&(this.selectedPropertyToAdd=this.addedPropertiesAndValuesFromSearching.property,this.selectedPropertyToAddValue=this.addedPropertiesAndValuesFromSearching.value,this.addRelationBy="url")},computed:{showProperties:function(){var e=this.allProperties;return"all"===this.filterProperties?e=this.allProperties:"relationships"===this.filterProperties?e=this.relationshipProperties:"general"===this.filterProperties&&(e=this.generalProperties),e},allProperties:function(){var e=[];return this.propertyOptions.forEach((function(t){e.push(t)})),e},generalProperties:function(){var e=[];return this.propertyOptions.forEach((function(t){"relationship"!==t.type&&"resource"!==t.type&&e.push(t)})),e},relationshipProperties:function(){var e=[];return this.propertyOptions.forEach((function(t){"relationship"===t.type&&e.push(t)})),e},resourceProperties:function(){var e=[];return this.propertyOptions.forEach((function(t){"resource"===t.type&&e.push(t)})),e},propertyOptions:function(){var e=[];if(this.profile)for(var t in this.profile)if(!EcArray.has(this.skipConfigProperties,t)){if("true"===this.profile[t]["readOnly"]||!0===this.profile[t]["readOnly"])continue;if(!this.editingMultipleCompetencies&&1===this.profile[t]["max"])if(this.profile[t]["valuesIndexed"]){var i=this.profile[t]["valuesIndexed"];if(i=i(),i&&i[this.obj.shortId()])continue}else if(null!=this.expandedThing[t]&&this.expandedThing[t].length>0)continue;var s=this.profile[t]["http://www.w3.org/2000/01/rdf-schema#label"][0]["@value"],r=this.profile[t]["http://www.w3.org/2000/01/rdf-schema#comment"][0]["@value"],o="property";-1!==this.profile[t]["http://schema.org/rangeIncludes"][0]["@id"].toLowerCase().indexOf("competency")?o="relationship":-1!==this.profile[t]["http://schema.org/rangeIncludes"][0]["@id"].toLowerCase().indexOf("level")&&(o="level"),!0===this.profile[t]["resource"]&&(o="resource"),e.push({value:t,label:s,description:r,type:o})}return e},selectedPropertyToAddIsTextValue:function(){var e,t=this.selectedPropertyToAdd.value;return this.profile&&this.profile[t]&&(e=this.profile[t]["http://schema.org/rangeIncludes"][0]["@id"]),!!e&&(-1===e.toLowerCase().indexOf("competency")&&-1===e.toLowerCase().indexOf("concept")&&((-1===e.toLowerCase().indexOf("level")||"checkedOptions"===this.profile[t]["add"])&&("https://purl.org/ctdlasn/terms/knowledgeEmbodied"!==this.selectedPropertyToAdd.value&&"https://purl.org/ctdlasn/terms/skillEmbodied"!==this.selectedPropertyToAdd.value&&"https://purl.org/ctdlasn/terms/taskEmbodied"!==this.selectedPropertyToAdd.value&&"https://purl.org/ctdlasn/terms/abilityEmbodied"!==this.selectedPropertyToAdd.value)))}},methods:{updatePropertyString:function(e,t){this.selectedPropertyToAddValue=e,this.$emit("property-string-updated",this.selectedPropertyToAdd,e,this.selectedPropertyRange,this.idx)},addNewLevel:function(){var e=this.profile[this.selectedPropertyToAdd.value]["add"],t=EcRemoteLinkedData.trimVersionFromUrl(this.expandedThing["@id"]);e(t)},removeValueAtIndex:function(){this.$store.commit("lode/removeAddingValueAtIndex",this.idx)},search:function(){if(this.addRelationBy="search",this.$emit("is-searching",!0),-1!==this.selectedPropertyRange[0].toLowerCase().indexOf("concept")?(this.$store.commit("lode/searchType","Concept"),this.$store.commit("lode/copyOrLink",!1)):-1!==this.selectedPropertyRange[0].toLowerCase().indexOf("level")?(this.$store.commit("lode/searchType","Level"),this.$store.commit("lode/copyOrLink",!0)):(this.$store.commit("lode/searchType","Competency"),this.$store.commit("lode/copyOrLink",!1)),this.$store.state.editor){var e=this.expandedThing?EcRepository.getBlocking(EcRemoteLinkedData.trimVersionFromUrl(this.expandedThing["@id"])):null;this.$store.commit("editor/selectedCompetency",e),this.$store.commit("editor/selectCompetencyRelation",this.selectedPropertyToAdd.value)}this.$store.commit("lode/competencySearchModalOpen",!0)}},watch:{selectedPropertyToAdd:function(){if(this.selectedPropertyToAddIsLangString=!1,this.profile&&this.profile[this.selectedPropertyToAdd.value]){var e=[],t=this.profile[this.selectedPropertyToAdd.value]["http://schema.org/rangeIncludes"];if(null!=t||void 0!==t)for(var i=0;i<t.length;i++)e.push(t[i]["@id"]),"http://www.w3.org/2000/01/rdf-schema#langString"===t[i]["@id"]&&(this.selectedPropertyToAddIsLangString=!0);this.selectedPropertyRange=e,this.$store.commit("lode/setAddingProperty",this.selectedPropertyToAdd.value)}if(this.selectedPropertyToAdd.value&&-1!==this.selectedPropertyToAdd.value.toLowerCase().indexOf("level")&&this.profile&&this.profile[this.selectedPropertyToAdd.value]&&this.profile[this.selectedPropertyToAdd.value]["options"]?this.checkedOptions=[]:this.checkedOptions=null,this.profile&&this.profile[this.selectedPropertyToAdd.value]&&this.profile[this.selectedPropertyToAdd.value]["options"]&&this.checkedOptions)for(var s=0;s<this.profile[this.selectedPropertyToAdd.value]["options"].length;s++){var r=this.profile[this.selectedPropertyToAdd.value]["options"][s];r.name=EcRepository.getBlocking(r.val).name,this.optionsArray.push(r)}},checkedOptions:function(){this.$store.commit("lode/setAddingChecked",this.checkedOptions),this.updatePropertyString(this.checkedOptions)},selectedPropertyToAddValue:function(){this.$store.commit("lode/setAddingValue",this.selectedPropertyToAddValue)},selectedPropertyRange:function(){this.$store.commit("lode/setAddingRange",this.selectedPropertyRange)},addedPropertiesAndValuesFromSearching:function(){this.editingMultipleCompetencies&&this.addedPropertiesAndValuesFromSearching.value.length&&(this.selectedPropertyToAdd=this.addedPropertiesAndValuesFromSearching.property,this.selectedPropertyToAddValue=this.addedPropertiesAndValuesFromSearching.value,this.addRelationBy="url")}}},n=a,l=(i("639d"),i("2877")),c=Object(l["a"])(n,s,r,!1,null,null,null);t["a"]=c.exports},"639d":function(e,t,i){"use strict";var s=i("cd8e"),r=i.n(s);r.a},"6ffa4":function(e,t,i){"use strict";i("fb6a");var s=i("872c");t["a"]={mixins:[s["a"]],methods:{removeObject:function(e){appLog("removing "+e.id);var t=this,i=this.$store.getters["editor/framework"],s=i.competency?i.competency.slice():null,r=i.relation?i.relation.slice():null,o=i.level?i.level.slice():null;i["schema:dateModified"]=(new Date).toISOString(),i.removeCompetency(e.shortId(),(function(){var e=t.framework;t.$store.commit("editor/addEditsToUndo",[{operation:"update",id:e.shortId(),fieldChanged:["competency","relation","level"],initialValue:[s,r,o]}]),!0===t.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[f.id]&&(e=EcEncryptedValue.toEncryptedValue(e)),window.repo.saveTo(e,(function(){t.$store.commit("editor/framework",i)}),appError)}),appLog)},deleteObject:function(e){appLog("deleting "+e.id);var t=this,i=this.$store.getters["editor/framework"];if(e.shortId()===i.shortId())window.repo.deleteRegistered(i,(function(e){if(t.spitEvent("frameworkDeleted",i.shortId(),"editFrameworkSection"),null!=i.competency)for(var s=0;s<i.competency.length;s++)t.conditionalDelete(i.competency[s]);if(null!=i.relation)for(s=0;s<i.relation.length;s++)t.conditionalDelete(i.relation[s]);if(null!=i.level)for(s=0;s<i.level.length;s++)t.conditionalDelete(i.level[s]);t.$store.commit("editor/framework",null),t.importType?t.$store.commit("app/importFramework",null):t.$router.push({name:"frameworks"})}),appLog);else{var s=i.competency?i.competency.slice():null,r=i.relation?i.relation.slice():null,o=i.level?i.level.slice():null;this.$store.commit("editor/selectedCompetency",e),i["schema:dateModified"]=(new Date).toISOString(),i.removeCompetency(e.shortId(),(function(){i.removeLevel(e.shortId()),t.$store.commit("editor/addEditsToUndo",[{operation:"delete",obj:e},{operation:"update",id:i.shortId(),fieldChanged:["competency","relation","level"],initialValue:[s,r,o],changedValue:[i.competency,i.relation,i.level]}]),t.conditionalDelete(e.shortId()),t.spitEvent("competencyDeleted",e.shortId(),"editFrameworkSection"),t.$store.commit("editor/selectedCompetency",null);var a=i;!0===t.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[i.id]&&(a=EcEncryptedValue.toEncryptedValue(i)),window.repo.saveTo(a,(function(){t.$store.commit("editor/framework",i)}),appError)}),appLog)}}}}},"713e":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cass--list--container",class:e.parent},[e.firstSearchProcessing?i("div",{staticClass:"section has-text-centered"},[e._m(0)]):e._e(),[i("div",{staticClass:"container is-desktop"},[i("ul",{staticClass:"cass--list"},[e._l(e.results,(function(t){return i("li",{key:t.id,staticClass:"cass--list--item",class:[{"source-framework":e.crosswalkAlignmentSource&&t.id===e.crosswalkAlignmentSource.id},e.rightAsideObjectId&&e.rightAsideObjectId===t.shortId()?"cass--list--item--selected":""],on:{click:function(i){return e.click(t)}}},[i("div",{staticClass:"cass--list-item--icon"},[i("div",{staticClass:"cass--list-item--icon-wrap has-background-dark"},[i("span",{staticClass:"icon"},["Directory"===t.type?i("i",{staticClass:"fa fa-folder",attrs:{title:"Directory"}}):"Framework"===t.type?i("i",{staticClass:"fa fa-file-alt",attrs:{title:"Framework"}}):"Competency"===t.type?i("i",{staticClass:"fa fa-list-alt",attrs:{title:"Competency"}}):"ConceptScheme"===t.type?i("i",{staticClass:"fa fa-book",attrs:{title:"Concept Scheme"}}):e._e()])])]),i("div",{staticClass:"cass--list-item--content"},[e.selectingCompetency||t.parentDirectory?i("Breadcrumbs",{attrs:{competency:t}}):e._e(),i("Thing",{staticClass:"cass--list--thing",attrs:{parent:e.parent,obj:t,view:e.view,profile:e.profile,parentNotEditable:e.disallowEdits},nativeOn:{dblclick:function(i){return e.$emit("dblclick",t)}},scopedSlots:e._u([{key:"frameworkTags",fn:function(){return[e._t("frameworkTags",null,{item:t})]},proxy:!0}],null,!0)})],1),i("div",{staticClass:"cass--list-item--hover"},[e.selectingCompetency&&e.isClicked(t.shortId())&&"search"===e.view?i("span",{staticClass:"search-selection__icon"},[e._m(1,!0)]):"search"===e.view&&"crosswalk"!==e.view?i("span",{staticClass:"search-selection__add-icon"},[e._m(2,!0)]):e._e(),"search"!==e.view?i("div",{staticClass:"icon has-text-primary arrow-icon"},[i("i",{staticClass:"fa fa-arrow-right"})]):e._e()])])})),e._l(e.subResults,(function(t){return i("li",{key:t.id,staticClass:"cass--list--item",class:e.rightAsideObjectId&&e.rightAsideObjectId===t.shortId()?"cass-list-item--selected":"",on:{click:function(i){return e.subObjectClick(t)}}},[i("div",{staticClass:"cass--list-item--icon"},[i("div",{staticClass:"cass--list-item--icon-wrap has-background-dark"},[i("span",{staticClass:"icon"},["Directory"===t.type?i("i",{staticClass:"fa fa-folder",attrs:{title:"Directory"}}):"Framework"===t.type?i("i",{staticClass:"fa fa-file-alt",attrs:{title:"Framework"}}):"Competency"===t.type?i("i",{staticClass:"fa fa-list-alt",attrs:{title:"Competency"}}):"Concept"===t.type?i("i",{staticClass:"fa fa-book",attrs:{title:"Concept Scheme"}}):e._e()])])]),i("div",{staticClass:"cass--list-item--content"},[i("Breadcrumbs",{ref:t.id,refInFor:!0,attrs:{competency:t}}),i("Thing",{staticClass:"list-thing",attrs:{obj:t,view:e.view,profile:e.profile,parentNotEditable:e.disallowEdits},nativeOn:{dblclick:function(i){return e.$emit("dblclick",t)}}})],1),i("div",{staticClass:"cass--list-item--hover"},["search"!==e.view?i("div",{staticClass:"icon has-text-primary arrow-icon"},[i("i",{staticClass:"fa fa-arrow-right"})]):e._e()])])}))],2),e.results.length>0?i("infinite-loading",{attrs:{spinner:"circles",distance:10},on:{infinite:e.loadMore}},[i("div",{attrs:{slot:"no-more"},slot:"no-more"},[e._v(" All results loaded ")]),i("div",{attrs:{slot:"no-results"},slot:"no-results"},[e._v(" All results loaded ")])]):e._e()],1)]],2)},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon is-large"},[i("i",{staticClass:"fa fa-spinner fa-2x fa-pulse"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"icon is-primary is-small"},[i("i",{staticClass:"fa fa-check has-text-primary",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"icon is-primary is-small"},[i("i",{staticClass:"fa fa-plus has-text-primary",attrs:{"aria-hidden":"true"}})])}],o=(i("99af"),i("4de4"),i("a434"),i("b0c0"),i("ac1f"),i("5319"),i("841c"),i("098b")),a=i("30d6"),n=i("6d79"),l={name:"List",props:{parent:{type:String,default:""},type:String,repo:Object,profile:Object,click:Function,searchOptions:String,paramObj:Object,disallowEdits:Boolean,selectingCompetency:Boolean,selected:Array,displayFirst:Array,view:{type:String,default:""},filterToEditable:{type:Boolean,default:!1},idsNotPermittedInSearch:{type:Array,default:null}},components:{Thing:o["default"],Breadcrumbs:a["a"]},mixins:[n["a"]],created:function(){var e=this;this.$nextTick((function(){return e.searchRepo()}))},data:function(){return{results:[],start:0,subResults:[],subStart:0,searchFrameworks:!0,searchCompetencies:!0,searchDirectories:!1,searchingForCompetencies:!1,searchingForDirectories:!1,applySearchToOwner:!1,firstSearchProcessing:!0,resultIds:[],nonDirectoryResults:!1}},watch:{text:function(e,t){},paramObj:function(){this.searchRepo()},searchOptions:function(){this.searchRepo()},searchTerm:function(e){this.searchRepo()},applySearchTo:function(){if(this.applySearchToOwner=!1,"crosswalk"===this.view)this.searchFrameworks=!0,this.searchCompetencies=!1,this.searchDirectories=!1;else if(this.applySearchTo&&this.applySearchTo.length>0){this.searchFrameworks=!1,this.searchCompetencies=!1,this.searchDirectories=!1;for(var e=0;e<this.applySearchTo.length;e++)"frameworkName"===this.applySearchTo[e].id||"frameworkDescription"===this.applySearchTo[e].id?this.searchFrameworks=!0:"competencyName"===this.applySearchTo[e].id||"competencyDescription"===this.applySearchTo[e].id||"competencyLabel"===this.applySearchTo[e].id?this.searchCompetencies=!0:"ownerName"===this.applySearchTo[e].id?(this.searchFrameworks=!0,this.searchCompetencies=!0,this.applySearchToOwner=!0):"directoryName"===this.applySearchTo[e].id||"directoryDescription"===this.applySearchTo[e].id?this.searchDirectories=!0:this.searchFrameworks=!0}else this.searchFrameworks=!0,this.searchCompetencies=!0,"Framework"===this.type?this.searchDirectories=!0:this.searchDirectories=!1;this.searchRepo()},type:function(){this.searchRepo()},refreshSearch:function(){this.refreshSearch&&(this.searchRepo(),this.$store.commit("app/refreshSearch",!1))}},computed:{crosswalkAlignmentSource:function(){return this.$store.getters["crosswalk/frameworkSource"]},searchTerm:function(e){return this.$store.getters["app/searchTerm"]},refreshSearch:function(e){return this.$store.getters["app/refreshSearch"]},applySearchTo:function(){var e=this.$store.getters["app/applySearchTo"];if(!e)return null;var t=e.filter((function(e){return!0===e.checked}));return t.length<=0?null:t},rightAsideObjectId:function(){return this.$store.getters["app/rightAsideObject"]?this.$store.getters["app/rightAsideObject"].shortId():null}},methods:{subObjectClick:function(e){var t=this.$refs[e.id][0].frameworks;if(t.length>0)this.click(t[0]);else{var i={component:"Single",uri:e.id,type:e.type,objectType:e.type,parentName:null,canEdit:!1};this.$store.commit("app/showModal",i)}},buildSearch:function(e,t){var i=this,s="",r=!1;if(this.applySearchTo&&""!==this.searchTerm){s="((@type:"+e+" OR (EncryptedValue AND \\*encryptedType:"+e+")) AND (";for(var o=0;o<this.applySearchTo.length;o++)"Framework"===e&&"frameworkName"===this.applySearchTo[o].id||"Competency"===e&&"competencyName"===this.applySearchTo[o].id||"Directory"===e&&"directoryName"===this.applySearchTo[o].id?(r&&(s+=" OR "),s+="name:"+this.searchTerm,r=!0):"Framework"===e&&"frameworkDescription"===this.applySearchTo[o].id||"Competency"===e&&"competencyDescription"===this.applySearchTo[o].id||"Directory"===e&&"directoryDescription"===this.applySearchTo[o].id?(r&&(s+=" OR "),s+="description:"+this.searchTerm,r=!0):"Framework"===e?(r&&(s+=" OR "),s+=this.applySearchTo[o].id+":"+this.searchTerm,r=!0):"Competency"===e&&"competencyLabel"===this.applySearchTo[o].id?(r&&(s+=" OR "),s+="ceasn\\:competencyLabel:"+this.searchTerm,r=!0):"ownerName"===this.applySearchTo[o].id&&function(){var e={size:10},o=i;EcPerson.search(window.repo,"name:"+i.searchTerm,(function(i){r&&i.length>0&&(s+=" OR "),appLog(i);for(var a=0;a<i.length;a++)s+='\\*owner:"'+o.getPersonEcPk(i[a]).toPem()+'"',a<i.length-1&&(s+=" OR ");EcOrganization.search(window.repo,"name:"+o.searchTerm,(function(e){appLog(e);for(var i=0;i<e.length;i++)s+='\\*owner:"'+o.getOrganizationEcPk(e[i]).toPem()+'"',r=!0,i<e.length-1&&(s+=" OR ");s+="))"+(null==o.searchOptions?"":o.searchOptions),-1!==s.indexOf("AND ())")&&(s=null),t(s)}),(function(e){appError(e),t(null)}),e)}),(function(e){appError(e),t(null)}),e)}();this.applySearchToOwner||(s+="))"+(null==this.searchOptions?"":this.searchOptions))}else s="((@type:"+e+" OR (EncryptedValue AND \\*encryptedType:"+e+"))"+(null!=this.searchTerm&&""!==this.searchTerm?" AND "+this.searchTerm:"")+")"+(null==this.searchOptions||""===this.searchOptions?"":this.searchOptions);this.applySearchToOwner||t(s)},searchForDirectories:function(e){var t=this;this.searchingForDirectories=!0,t.buildSearch("Directory",(function(i){var s=null;t.paramObj&&(s=Object.assign({},t.paramObj)),t.firstSearchProcessing||(t.start+=t.paramObj.size),s.start=t.start;var r=[];t.repo.searchWithParams(i,s,(function(e){if((!t.filterToEditable||t.filterToEditable&&e.canEditAny(EcIdentityManager.getMyPks()))&&!EcArray.has(t.resultIds,e.id)&&(!t.idsNotPermittedInSearch||0===t.idsNotPermittedInSearch.length||!EcArray.has(t.idsNotPermittedInSearch,e.shortId()))&&(!e.parentDirectory||""!==t.searchTerm)){if(e.isAny((new EcEncryptedValue).getTypes())){var i="Ec"+e.encryptedType,s=new EcEncryptedValue;s.copyFrom(e);var o=new window[i];o.copyFrom(s.decryptIntoObject()),e=o}r.push(e),t.resultIds.push(e.id)}}),(function(i){t.firstSearchProcessing=!1,r&&r.length>0?(t.results=t.results.concat(r),e&&e.loaded()):0===i.length?(t.searchingForDirectories=!1,t.start=0,t.loadMore(e)):i.length>0&&e?e.loaded():e&&e.complete()}),(function(i){appError(i),t.firstSearchProcessing=!1,e&&e.complete()}))}))},searchRepo:function(){var e=this;if(this.start=0,this.subStart=0,this.firstSearchProcessing=!0,this.results.splice(0,this.results.length),this.subResults.splice(0,this.subResults.length),this.resultIds.splice(0,this.resultIds.length),this.searchingForCompetencies=!1,this.nonDirectoryResults=!1,this.applySearchTo||("frameworks"===this.view&&"Framework"===this.type?this.searchDirectories=!0:this.searchDirectories=!1),""===this.searchTerm&&this.displayFirst&&this.displayFirst.length>0)for(var t=0;t<20;t++)this.displayFirst[0]&&(this.results.push(this.displayFirst[0]),this.resultIds.push(this.displayFirst[0].id),this.displayFirst.shift(),this.nonDirectoryResults=!0);if(!0===this.searchDirectories?this.searchForDirectories():!this.searchFrameworks||""===this.searchTerm&&this.displayFirst&&0!==this.displayFirst.length?e.firstSearchProcessing=!1:e.buildSearch(this.type,(function(t){var i=null;e.paramObj&&(i=Object.assign({},e.paramObj)),e.repo.searchWithParams(t,i,(function(t){if((!e.filterToEditable||e.filterToEditable&&t.canEditAny(EcIdentityManager.getMyPks()))&&!EcArray.has(e.resultIds,t.id)&&(!e.idsNotPermittedInSearch||0===e.idsNotPermittedInSearch.length||!EcArray.has(e.idsNotPermittedInSearch,t.shortId()))){if(t.isAny((new EcEncryptedValue).getTypes())){var i="Ec"+t.encryptedType,s=new EcEncryptedValue;s.copyFrom(t);var r=new window[i];r.copyFrom(s.decryptIntoObject()),t=r}""!==t.name&&(e.results.push(t),e.resultIds.push(t.id),e.nonDirectoryResults=!0)}}),(function(t){e.firstSearchProcessing=!1,t.length<10&&("Framework"===e.type||"ConceptScheme"===e.type)&&e.searchCompetencies&&e.searchForSubObjects()}),(function(t){appError(t),e.firstSearchProcessing=!1}))})),!this.searchFrameworks&&!this.searchDirectories&&(""!==this.searchTerm||!this.displayFirst||0===this.displayFirst.length))return this.searchForSubObjects()},loadMore:function(e){if(""===this.searchTerm&&this.displayFirst&&this.displayFirst.length>0)for(var t=0;t<20;t++)this.displayFirst[t]&&(this.results.push(this.displayFirst[t]),this.resultIds.push(this.displayFirst[t].id),this.displayFirst.shift());if(this.searchingForDirectories)this.searchForDirectories(e);else if(!this.paramObj||""===this.searchTerm&&this.displayFirst&&0!==this.displayFirst.length)e.loaded();else{var i,s=this,r=Object.assign({},this.paramObj);s.nonDirectoryResults&&(this.start+=this.paramObj.size),r.start=this.start,i=this.searchingForCompetencies?"ConceptScheme"===this.type?"Concept":"Competency":this.type,this.buildSearch(i,(function(t){s.repo.searchWithParams(t,r,(function(e){if(!s.filterToEditable||s.filterToEditable&&e.canEditAny(EcIdentityManager.getMyPks()))if(s.searchingForCompetencies){if(!EcArray.has(s.resultIds,e.id)&&(!s.idsNotPermittedInSearch||0===s.idsNotPermittedInSearch.length||!EcArray.has(s.idsNotPermittedInSearch,e.shortId()))){if(e.isAny((new EcEncryptedValue).getTypes())){var t="Ec"+e.encryptedType,i=new EcEncryptedValue;i.copyFrom(e);var r=new window[t];r.copyFrom(i.decryptIntoObject()),e=r}s.subResults.push(e),s.resultIds.push(e.id)}}else if(!EcArray.has(s.resultIds,e.id)&&(!s.idsNotPermittedInSearch||0===s.idsNotPermittedInSearch.length||!EcArray.has(s.idsNotPermittedInSearch,e.shortId()))){if(e.isAny((new EcEncryptedValue).getTypes())){t="Ec"+e.encryptedType,i=new EcEncryptedValue;i.copyFrom(e);var o=new window[t];o.copyFrom(i.decryptIntoObject()),e=o}s.results.push(e),s.resultIds.push(e.id)}}),(function(t){0!==t.length||"Framework"!==s.type&&"ConceptScheme"!==s.type?t.length>0?(s.nonDirectoryResults=!0,e&&e.loaded()):e&&e.complete():s.searchCompetencies?s.searchForSubObjects(e):e&&e.complete()}),(function(t){appError(t),e.complete()}))}))}},searchForSubObjects:function(e){var t=this;this.searchingForCompetencies=!0;var i=Object.assign({},t.paramObj);i.start=t.subStart,-1!==i.sort.indexOf("dcterms:title")&&(i.sort=i.sort.replace("dcterms:title","skos:prefLabel"));var s="Framework"===t.type?"Competency":"Concept";t.buildSearch(s,(function(s){t.repo.searchWithParams(s,i,(function(e){if((!t.filterToEditable||t.filterToEditable&&e.canEditAny(EcIdentityManager.getMyPks()))&&!EcArray.has(t.resultIds,e.id)&&(!t.idsNotPermittedInSearch||0===t.idsNotPermittedInSearch.length||!EcArray.has(t.idsNotPermittedInSearch,e.shortId()))){if(e.isAny((new EcEncryptedValue).getTypes())){var i="Ec"+e.encryptedType,s=new EcEncryptedValue;s.copyFrom(e);var r=new window[i];r.copyFrom(s.decryptIntoObject()),e=r}t.subResults.push(e),t.resultIds.push(e.id),t.nonDirectoryResults=!0}}),(function(i){i.length>0&&e?e.loaded():e&&e.complete(),t.subStart+=t.paramObj.size}),(function(t){appError(t),e&&e.complete()}))}))},isClicked:function(e){return!!EcArray.has(this.selected,e)}},mounted:function(){"crosswalk"===this.view&&(this.searchFrameworks=!0,this.searchCompetencies=!1,this.searchDirectories=!1)}},c=l,d=i("2877"),h=Object(d["a"])(c,s,r,!1,null,null,null);t["a"]=h.exports},"78bf":function(e,t,i){"use strict";var s=i("a222"),r=i.n(s);r.a},8051:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"modal lode__thing-editing is-active"},[i("div",{staticClass:"modal-background"}),i("div",{staticClass:"modal-card  has-text-dark"},[i("header",{staticClass:"modal-card-head has-background-primary has-text-white"},[i("p",{staticClass:"modal-card-title is-size-3 has-text-white"},[e.newFramework&&"Framework"===e.shortType?i("span",{staticClass:"pr-2"},[e._v("Create framework")]):e.newFramework&&"ConceptScheme"===e.shortType?i("span",{staticClass:"pr-2"},["true"===e.queryParams.ceasnDataFields?i("span",[e._v(" Create Concept Scheme ")]):i("span",[e._v(" Create Taxonomy ")])]):i("span",{staticClass:"pr-2"},[e._v("Edit "+e._s(e.shortType))]),i("span",{},[i("span",{staticClass:"tag has-text-dark is-rounded is-medium-grey is-small",attrs:{title:"Auto saving"}},[e.saved?i("span",{staticClass:"is-small export icon has-text-success"},[i("i",{staticClass:"fa fa-check"})]):e._e(),e.saving?i("span",{staticClass:"is-small export icon has-text-primary"},[i("i",{staticClass:"fa fa-spinner fa-pulse"})]):e._e(),e.errorSaving?i("span",{staticClass:"is-small export icon has-text-link"},[i("i",{staticClass:"fa fa-exclamation"})]):e._e(),e.saving?i("span",[e._v("saving")]):e._e(),e.saved?i("span",[e._v(e._s(e.saved))]):e._e(),e.errorSaving?i("span",[e._v("error saving")]):e._e()])])]),i("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:e.closeWithoutSaving}})]),e.showAddPropertyContent?e._e():i("section",{staticClass:"modal-card-body"},e._l(e.headings,(function(t){return i("div",{key:t,staticClass:"lode__thing-heading"},[e.displayHeading(t)?i("label",{staticClass:"label is-large is-family-secondary"},[e._v(" "+e._s(e.displayHeading(t))+" ")]):e._e(),e.showAlwaysProperties&&e.alwaysProperties[t]?[e._l(e.alwaysProperties[t],(function(t,s){return i("Property",{key:s,attrs:{expandedThing:e.expandedThing,expandedProperty:s,schema:t,canEdit:e.allowPropertyEdits(s),profile:e.profile,editingThing:e.editingThing,validate:e.validate,view:e.view},on:{"editing-property-event":function(t){return e.handleEditingEvent(t)},select:e.select,validated:e.validated,invalid:function(t){e.validate=!1,e.errorValidating=!0}}})})),e._t("frameworkTags")]:e.showPossibleProperties&&e.possibleProperties[t]?e._l(e.possibleProperties[t],(function(t,s){return i("Property",{key:s,attrs:{expandedThing:e.expandedThing,expandedProperty:s,schema:t,canEdit:e.allowPropertyEdits(s),profile:e.profile,editingThing:e.editingThing,validate:e.validate,view:e.view},on:{"editing-property-event":function(t){return e.handleEditingEvent(t)},select:e.select,validated:e.validated,invalid:function(t){e.validate=!1,e.errorValidating=!0}}})})):e.showViewProperties&&e.viewProperties[t]?e._l(e.viewProperties[t],(function(t,s){return i("Property",{key:s,attrs:{expandedThing:e.expandedThing,expandedProperty:s,schema:t,canEdit:e.allowPropertyEdits(s),profile:e.profile,editingThing:e.editingThing,validate:e.validate,view:e.view},on:{"editing-property-event":function(t){return e.handleEditingEvent(t)},select:e.select,validated:e.validated,invalid:function(t){e.validate=!1,e.errorValidating=!0}}})})):e._e()],2)})),0),e.isSearching&&e.showAddPropertyContent?i("section",{staticClass:"modal-card-body"},[i("h4",{staticClass:"is-size-4 subtitle"},[e._v(" Searching for "),i("b",[e._v(e._s(e.addingPropertyLabel))]),e._v(" property on "),i("b",[e._v(e._s(e.nameOfSelectedCompetency))])]),i("Search",{attrs:{view:"thing-editing",idsNotPermittedInSearch:e.idsNotPermittedInSearch}})],1):e._e(),e.showAddPropertyContent&&!e.isSearching?i("section",{staticClass:"modal-card-body"},[i("AddProperty",{attrs:{profile:e.profile,errorMessage:e.errorMessage,expandedThing:e.expandedThing},on:{"is-searching":function(t){e.isSearching=!0}}})],1):e._e(),i("footer",{staticClass:"modal-card-foot has-background-light"},[e.frameworkEditable||e.editingThing?i("div",{staticClass:"buttons"},[e.canEdit&&!e.isSearching?i("div",{staticClass:"button is-outlined is-danger",attrs:{title:"Delete this "+(e.shortType?e.shortType.toLowerCase():"")},on:{click:function(t){return t.stopPropagation(),e.clickToDelete(t)}}},[e.newFramework&&"Framework"===e.shortType?[e._m(0),i("span",[e._v("Cancel create new framework")])]:e.newFramework&&"ConceptScheme"===e.shortType?[e._m(1),"true"===e.queryParams.ceasnDataFields?i("span",[e._v(" Cancel Create Concept Scheme ")]):i("span",[e._v(" Cancel Create Taxonomy ")])]:[e._m(2)]],2):e._e(),!e.frameworkEditable||"Competency"!==e.shortType||e.newFramework||e.isSearching?e._e():i("div",{staticClass:"button is-outlined is-warning",attrs:{title:"Remove competency from framework"},on:{click:function(t){return t.stopPropagation(),e.showModal("removeObject")}}},[e._m(3)]),e.isSearching||"Level"===e.shortType?e._e():i("div",{staticClass:"button is-outlined is-info",attrs:{title:"Export "+e.shortType},on:{click:function(t){return t.stopPropagation(),e.showModal("export")}}},[e._m(4)]),e.showAddPropertyContent||"framework"!==e.view&&"concept"!==e.view||!e.hasAdditionalProperty||e.errorValidating?e._e():i("div",{staticClass:"button is-outlined is-primary",on:{click:e.onClickToAddProperty}},[e._m(5),i("span",[e._v(" Add property ")])]),e.showAddPropertyContent?i("div",{staticClass:"button is-outlined is-dark",on:{click:e.onCancelAddProperty}},[e.isSearching?i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-arrow-left"})]):i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-times"})]),e.isSearching?i("span",[e._v(" back ")]):i("span",[e._v(" cancel ")])]):e._e(),e.showAddPropertyContent&&!e.isSearching?i("div",{staticClass:"button is-outlined is-primary",on:{click:e.saveNewProperty}},[e._m(6),i("span",[e._v(" save property ")])]):e._e(),e.showAddPropertyContent?e._e():i("div",{staticClass:"button is-outlined is-dark",attrs:{disabled:e.disableDoneEditingButton,title:"Done editing"},on:{click:e.doneEditing}},[e._m(7),i("span",[e._v("done")])]),!e.showAddPropertyContent&&e.$store.state.editor.newCompetency?i("div",{staticClass:"button is-outlined is-dark",attrs:{title:"Done editing"},on:{click:e.saveAndAddAnother}},[e._m(8),i("span",[e._v("save and add another")])]):e._e(),e.isSearching?[i("div",{staticClass:"button is-outlined is-primary",attrs:{title:"Add Competency as Property"},on:{click:e.addSelected}},[e._m(9),i("span",[e._v("Add Selected")])])]:e._e()],2):e._e()])])])},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon delete-thing"},[i("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon delete-thing"},[i("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon is-danger delete-thing"},[i("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon remove"},[i("i",{staticClass:"fa fa-minus-circle",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"is-small export icon"},[i("i",{staticClass:"fa fa-file-export"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-plus"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-save"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"export icon"},[i("i",{staticClass:"fa fa-check"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"export icon"},[i("i",{staticClass:"fa fa-check"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-check"})])}],o=(i("99af"),i("caad"),i("a15b"),i("a434"),i("b0c0"),i("a9e3"),i("b64b"),i("d3b7"),i("ac1f"),i("8a79"),i("5319"),i("1276"),i("2ca0"),i("498a"),i("ddb0"),i("54f8")),a=i("f3f3"),n=i("2f62"),l=i("5e26"),c=i("5650"),d=i("3dcd"),h=i("872c"),p={name:"ThingEditing",props:{obj:Object,children:Number,expandedObj:Object,uri:String,clickToLoad:Boolean,parentNotEditable:Boolean,profile:Object,highlightList:Array,childrenExpanded:{type:Boolean,default:!0},newFramework:Boolean,index:Number,frameworkEditable:Boolean,cantMoveUp:Boolean,cantMoveDown:Boolean,cantMoveRight:Boolean,cantMoveLeft:Boolean,editingNode:Boolean,properties:String,view:{type:String,default:"framework"}},components:{Property:l["default"],AddProperty:c["a"],Search:d["a"]},mixins:[h["a"]],data:function(){return{showAddPropertyContent:!1,isSearching:!1,selectedMove:"",saving:!1,saved:"saved",errorSaving:!1,editingThing:!0,editingClass:"thing-editing",hoverClass:"",expandedThing:null,originalThing:null,showAlways:!1,showPossible:!0,uriAndNameOnly:!1,name:null,skipConfigProperties:["alwaysProperties","headings","primaryProperties","secondaryProperties","tertiaryProperties","relationshipsHeading","relationshipsPriority"],validate:!1,validateCount:0,repo:window.repo,doneValidating:!1,doneSaving:!1,errorMessage:[],idsNotPermittedInSearch:[],addAnother:!1,disableDoneEditingButton:!1,errorValidating:null}},created:function(){!1===this.clickToLoad&&this.load()},mounted:function(){this.uri&&this.$store.state.editor&&this.resolveNameFromUrl(this.uri);var e=this.originalThing["schema:dateModified"];e&&(this.saved="last saved "+new Date(e).toLocaleString()),this.obj&&this.obj.shortId()===this.changedObject&&this.$store.commit("editor/changedObject",null)},beforeDestroy:function(){this.$store.commit("editor/selectedCompetency",null),this.$store.commit("lode/setAddingProperty",""),this.$store.commit("lode/setAddingValue",""),this.$store.commit("lode/setIsAddingProperty",!1)},computed:Object(a["a"])(Object(a["a"])({},Object(n["c"])({selectedCompetency:function(e){return e.editor.selectedCompetency},framework:function(e){return e.editor.framework},queryParams:function(e){return e.editor.queryParams},addingProperty:function(e){return e.lode.addingProperty},isSavingProperty:function(e){return e.lode.isSavingProperty},isSavingThing:function(e){return e.lode.isSavingThing},addingValue:function(e){return e.lode.addingValue},addingRange:function(e){return e.lode.addingRange},addingChecked:function(e){return e.lode.addingChecked}})),{},{addingPropertyLabel:function(){return this.addingProperty&&this.profile&&this.profile[this.addingProperty]?this.profile[this.addingProperty]["http://www.w3.org/2000/01/rdf-schema#label"][0]["@value"]:this.addingProperty},nameOfSelectedCompetency:function(){return this.selectedCompetency&&this.selectedCompetency.name?this.selectedCompetency.getName?this.selectedCompetency.getName():Thing.getDisplayStringFrom(this.selectedCompetency.name):this.selectedCompetency?this.selectedCompetency["skos:prefLabel"]?Thing.getDisplayStringFrom(this.selectedCompetency["skos:prefLabel"]):Thing.getDisplayStringFrom(this.selectedCompetency["dcterms:title"]):""},showAlwaysProperties:function(){return!0===this.showAlways&&null!==this.expandedThing&&void 0!==this.expandedThing},showPossibleProperties:function(){return!0===this.showPossible&&null!=this.expandedThing&&void 0!==this.expandedThing},showViewProperties:function(){return null!==this.expandedThing&&void 0!==this.expandedThing},headings:function(){return this.profile&&this.profile["headings"]&&0!==this.profile["headings"].length?this.profile["headings"]:[""]},minimizeButtonClass:function(){return!0===this.showAlways&&!1===this.showPossible?"is-text has-text-info ":"is-text has-text-dark"},allPropertiesButtonClass:function(){return!1===this.showAlways&&null===this.showPossible?"is-info has-text-white ":"is-text has-text-dark"},globalButtonClass:function(){return!1===this.showAlways&&!0===this.showPossible?"is-info has-text-white ":"is-text has-text-dark"},type:function(){return null==this.expandedThing?null:this.expandedThing["@type"][0]},shortType:function(){return null==this.expandedThing?null:this.expandedThing["@type"][0].split("/").pop()},context:function(){if(this.type){var e=this.type.split("/");return e.pop(),e.join("/")}return null},canEdit:function(){return!0},schema:function(){var e=this.$store.state.lode.schemata[this.type];null==e&&(e=this.$store.state.lode.schemata[this.context]);var t={};if(null!==e&&void 0!==e)for(var i=0;i<e.length;i++){var s=e[i];t[s["@id"]]=s}return t},alwaysProperties:function(){var e={};if(this.profile&&this.profile["alwaysProperties"])return this.getPropertiesFromProfile(e,"alwaysProperties");if(this.profile&&this.profile["primaryProperties"])return this.getPropertiesFromProfile(e,"primaryProperties");for(var t=["http://schema.org/name","http://schema.org/description","http://purl.org/dc/terms/title","http://purl.org/dc/terms/description","http://www.w3.org/2004/02/skos/core#prefLabel","http://www.w3.org/2004/02/skos/core#definition"],i=0;i<t.length;i++){var s=t[i];if((null==this.profile||null!=this.profile&&void 0!==this.profile[s])&&null!=this.schema[s]&&null!=this.expandedThing[s]&&0!==this.expandedThing[s].length){var r="";null!=this.profile?(this.profile[s]["heading"]&&(r=this.profile[s]["heading"]),null!=e[r]&&void 0!==e[r]||(e[r]={}),e[r][s]=this.profile[s]):(null!=e[r]&&void 0!==e[r]||(e[r]={}),e[r][s]=this.schema[s])}}return e},viewProperties:function(){var e={};for(var t in this.alwaysProperties)for(var i in e[t]={},this.alwaysProperties[t])e[t][i]=this.alwaysProperties[t][i];if(this.profile&&this.profile["secondaryProperties"])return this.getPropertiesFromProfile(e,"secondaryProperties");for(var t in this.expandedThing)if("constructor"!==t&&"@id"!==t&&"@type"!==t&&"@context"!==t&&!t.endsWith("owner")&&!t.endsWith("reader")&&!t.endsWith("signature")&&(null==this.profile||void 0!==this.profile[t])&&null!=this.expandedThing[t]&&0!==this.expandedThing[t].length)if(null==this.profile)null==this.schema[t]||void 0===this.schema[t]?(null!=e[""]&&void 0!==e[""]||(e[""]={}),e[""][t]=this.$store.state.lode.schemaFallback[t]):(null!=e[""]&&void 0!==e[""]||(e[""]={}),e[""][t]=this.schema[t]);else{var s="";this.profile[t]["heading"]&&(s=this.profile[t]["heading"]),null!=e[s]&&void 0!==e[s]||(e[s]={}),e[s][t]=this.profile[t]}if(this.profile)for(var t in this.profile){s="";if(this.profile[t]["heading"]&&(s=this.profile[t]["heading"]),null==e[s]&&void 0===e[s]&&(e[s]={}),this.profile[t]["valuesIndexed"]){var r=this.profile[t]["valuesIndexed"];r=r(),r&&r[this.obj.shortId()]&&(e[s][t]=this.profile[t])}else null!=this.expandedThing[t]&&0!==this.expandedThing[t].length&&(e[s][t]=this.profile[t])}return e},possibleProperties:function(){var e={};for(var t in this.viewProperties)for(var i in e[t]={},this.viewProperties[t])e[t][i]=this.viewProperties[t][i];if(this.profile&&this.profile["tertiaryProperties"])return this.getPropertiesFromProfile(e,"tertiaryProperties");if(null!=this.profile){for(var t in this.profile)if(!EcArray.has(this.skipConfigProperties,t))if(this.profile["headings"]&&0!==this.profile["headings"].length){var s=this.profile[t]["heading"];null!=e[s]&&void 0!==e[s]||(e[s]={}),e[s][t]=this.profile[t]}else null!=e[""]&&void 0!==e[""]||(e[""]={}),e[""][t]=this.profile[t]}else for(var t in this.schema)"constructor"!==t&&"@id"!==t&&"@type"!==t&&"@context"!==t&&(t.endsWith("owner")||t.endsWith("reader")||t.endsWith("signature")||null!=this.profile&&void 0===this.profile[t]||void 0===this.schema[t]["@type"]&&void 0===this.schema[t]["http://schema.org/domainIncludes"]||null!=this.schema[t]["@type"]&&-1===this.schema[t]["@type"][0].indexOf("Property")||(null==this.schema[t]||void 0===this.schema[t]?(null!=e[""]&&void 0!==e[""]||(e[""]={}),e[""][t]=this.$store.state.lode.schemaFallback[t]):(null!=e[""]&&void 0!==e[""]||(e[""]={}),e[""][t]=this.schema[t])));return e},iconClass:function(){return"fas fa-"+this.shortType.toLowerCase()},highlighted:function(){if(this.highlightList)for(var e=0;e<this.highlightList.length;e++)if(this.obj.shortId()===this.highlightList[e]||this.obj.id===this.highlightList[e])return!0;return!1},changedObject:function(){return this.$store.state.editor?this.$store.state.editor.changedObject:null},isAddingProperty:function(){return this.$store.getters["lode/isAddingProperty"]},hasAdditionalProperty:function(){if(this.profile)for(var e in this.profile)if(!EcArray.has(this.skipConfigProperties,e)){if("true"===this.profile[e]["readOnly"]||!0===this.profile[e]["readOnly"])continue;if(1===this.profile[e]["max"]){if("true"===this.profile[e]["isRequired"]||!0===this.profile[e]["isRequired"])continue;if(this.profile[e]["valuesIndexed"]){var t=this.profile[e]["valuesIndexed"];if(t=t(),t&&t[this.obj.shortId()])continue}else if(this.expandedThing&&null!=this.expandedThing[e]&&this.expandedThing[e].length>0)continue}return!0}return!1}}),methods:{onClickToAddProperty:function(){this.showAddPropertyContent=!0,this.$store.commit("lode/setAddingProperty",""),this.$store.commit("lode/setAddingValue",""),this.$store.commit("lode/setIsAddingProperty",!0)},onCancelAddProperty:function(){this.showAddPropertyContent=!1,this.isSearching=!1,this.$store.commit("lode/setIsAddingProperty",!1),this.errorMessage=[]},saveNewProperty:function(){var e=this.addingProperty,t=this.addingValue,i=this.addingRange;this.errorMessage=[],this.errorMessage=[];var s,r=!1;if(this.profile&&this.profile[e]&&this.profile[e]["resource"]&&(r=!0),!e)return this.errorMessage.push("Property type is required.");if((!t||null!==t&&void 0!==t&&null!==t["@value"]&&void 0!==t["@value"]&&0===t["@value"].trim().length)&&(!this.addingChecked||0===this.addingChecked.length))return this.errorMessage.push("Value is required to save.");if(t&&r){if(!t["@value"]||!t["name"])return this.errorMessage.push("This property must have a URL and a name.");if(-1===t["@value"].indexOf("http"))return this.errorMessage.push("This property must be a URL. For example: https://credentialengineregistry.org/, https://eduworks.com, https://case.georgiastandards.org/.")}if(t&&!r&&1===i.length&&("http://schema.org/URL"===i[0]||-1!==i[0].toLowerCase().indexOf("concept")||-1!==i[0].toLowerCase().indexOf("competency")||-1!==i[0].toLowerCase().indexOf("level"))&&-1===t.indexOf("http"))return this.errorMessage.push("This property must be a URL. For example: https://credentialengineregistry.org/, https://eduworks.com, https://case.georgiastandards.org/.");if(t&&-1!==i[0].toLowerCase().indexOf("level")){var o=EcLevel.getBlocking(t);if(!o)return this.errorMessage.push("This URL must be a Level that is already in the system.")}if(t&&1===i.length&&-1!==i[0].toLowerCase().indexOf("langstring")){if(null==t["@language"]||void 0===t["@language"]||0===t["@language"].trim().length)return this.errorMessage.push("This field can only have one entry per language.");if(this.profile&&this.profile[e]&&("true"===this.profile[e]["onePerLanguage"]||!0===this.profile[e]["onePerLanguage"])&&this.expandedThing[e]){for(var a=[],n=0;n<this.expandedThing[e].length;n++){if(a.includes(this.expandedThing[e][n]["@language"].toLowerCase()))return this.errorMessage.push("This field can only have one entry per language.");a.push(this.expandedThing[e][n]["@language"].toLowerCase())}if(a.includes(t["@language"].toLowerCase()))return this.errorMessage.push("This field can only have one entry per language.")}}if(this.profile&&this.profile[e]["add"]){var l=this.profile[e]["add"];if("checkedOptions"!==l){var c=EcRemoteLinkedData.trimVersionFromUrl(this.expandedThing["@id"]);l(c,[t])}}else this.expandedThing[e]&&(s=JSON.parse(JSON.stringify(this.expandedThing[e]))),this.add();if(this.profile&&this.profile[e]["save"]){l=this.profile[e]["save"];this.addingChecked&&this.addingChecked.length>0?l(this.expandedThing,this.addingChecked,this.profile[e]["options"]):l()}else s&&this.$store.commit("editor/addEditsToUndo",{operation:"update",id:EcRemoteLinkedData.trimVersionFromUrl(this.expandedThing["@id"]),fieldChanged:[e],initialValue:[s],changedValue:[this.expandedThing[e]],expandedProperty:!0}),this.saveThing();this.showAddPropertyContent=!1,this.$store.commit("lode/setIsAddingProperty",!1),this.$store.commit("lode/setAddingProperty",""),this.$store.commit("lode/setAddingValue","")},handleMove:function(e){appLog(e);var t=e.target.value;"movedown"===t?this.moveDown():"moveleft"===t?this.moveLeft():"moveright"===t?this.moveRight():"moveup"===t?this.moveUp():appLog("error: move not allowed"),this.selectedMove=""},showEnteredProperties:function(){appLog("showing entered properties"),this.showAlways=!1,this.showPossible=null},showGlobal:function(){this.showAlways=!1,this.showPossible=!0},emitExpandEvent:function(e){appLog("expand",e.target),this.$emit("expand-event")},handleMouseOverThing:function(){this.hoverClass="showHoverItems"},handleMouseOutThing:function(){this.hoverClass=""},showModal:function(e){"deleteObject"===e?"Competency"===this.shortType?this.$store.commit("app/showModal",{component:"DeleteCompetencyConfirm"}):"Level"===this.shortType?this.$store.commit("app/showModal",{component:"DeleteLevelConfirm"}):"Concept"===this.shortType?this.$store.commit("app/showModal",{component:"DeleteConceptConfirm"}):"ConceptScheme"===this.shortType?this.$store.commit("app/showModal",{component:"DeleteConceptSchemeConfirm"}):"Framework"===this.shortType?this.$store.commit("app/showModal",{component:"DeleteFrameworkConfirm"}):"Directory"===this.shortType&&this.$store.commit("app/showModal",{component:"DeleteDirectoryConfirm"}):("removeObject"===e&&(this.$store.commit("editor/setItemToRemove",this.obj),this.$store.commit("app/showModal",{component:"RemoveCompetencyConfirm"})),"export"===e&&(this.$store.commit("editor/setItemToExport",this.obj),this.$store.commit("app/showModal",{title:"Export "+this.shortType,component:"ExportOptionsModal"})))},load:function(){var e=this;if(e.clickToLoad=!1,null!=this.uri)EcRepository.get(this.uri,(function(t){if(e.originalThing=t,EcObject.isObject(t)){var i=e.getAllTypes(t);null!=t.context&&void 0!==t.context&&i.push(t.context),(new EcAsyncHelper).each(i,(function(t,i){e.loadSchema(i,t)}),(function(){e.expand(t,(function(){}))}))}else e.resolveNameFromUrl(e.uri),e.uriAndNameOnly=!0}),(function(){e.resolveNameFromUrl(e.uri),e.uriAndNameOnly=!0}));else if(null!=this.expandedObj&&void 0!==this.expandedObj)this.loadSchema((function(){e.expandedThing=e.expandedObj,!e.$store.state.editor||EcRemoteLinkedData.trimVersionFromUrl(e.expandedThing["@id"])!==e.$store.state.editor.newCompetency&&EcRemoteLinkedData.trimVersionFromUrl(e.expandedThing["@id"])!==e.$store.state.editor.newFramework||e.populateRequiredFields()}),this.expandedObj["@type"][0]);else{e.originalThing=this.obj;var t=e.getAllTypes(this.obj);null!=this.obj.context&&void 0!==this.obj.context&&t.push(this.obj.context),(new EcAsyncHelper).each(t,(function(t,i){e.loadSchema(i,t)}),(function(){e.expand(e.obj,(function(){}))}))}},reactify:function(e){for(var t in e)if(EcArray.isArray(e[t])){var i,s=Object(o["a"])(e[t]);try{for(s.s();!(i=s.n()).done;){var r=i.value;EcObject.isObject(r)&&null!=r["@type"]&&this.reactify(r)}}catch(d){s.e(d)}finally{s.f()}}var a=null,n=e["@type"];EcArray.isArray(n)&&n.length>0&&(n=n[0]);a=this.$store.state.lode.objectModel[n];if(null!=a)for(var l in a)null==e[l]&&(e[l]=[]);if(this.profile)for(var c in this.profile)null!=e[c]||this.profile[c]["valuesIndexed"]||EcArray.has(this.skipConfigProperties,c)||(e[c]=[]);return e},expand:function(e,t){var i=this,s=JSON.parse(e.toJson());null!=s["@context"]&&s["@context"].startsWith("http://")&&(s["@context"]=s["@context"].replace("http://","https://")),null!=s["@context"]&&-1!==s["@context"].indexOf("skos")&&(s["@context"]="https://schema.cassproject.org/0.4/skos/"),jsonld.expand(s,(function(e,t){null==e?(i.expandedThing=i.reactify(t[0]),!i.$store.state.editor||EcRemoteLinkedData.trimVersionFromUrl(i.expandedThing["@id"])!==i.$store.state.editor.newCompetency&&EcRemoteLinkedData.trimVersionFromUrl(i.expandedThing["@id"])!==i.$store.state.editor.newFramework||i.populateRequiredFields()):appError(e)}))},loadSchema:function(e,t){var i=this;if(null==t&&(t=this.type),t.startsWith("http://schema.org/"))null!=e&&e();else if(-1!==t.indexOf("ConceptScheme")?t="https://schema.cassproject.org/0.4/skos/ConceptScheme":-1!==t.indexOf("Concept")?t="https://schema.cassproject.org/0.4/skos/Concept":-1!==t.indexOf("skos")&&(t="https://schema.cassproject.org/0.4/skos"),void 0===this.$store.state.lode.schemata[t]&&-1===t.indexOf("EncryptedValue")){var s=t;s+=-1!==t.indexOf("schema.org")?".jsonld":"",EcRemote.getExpectingObject("",s,(function(s){i.$store.commit("lode/rawSchemata",{id:t,obj:s}),jsonld.expand(s,(function(s,r){null==s?(i.$store.dispatch("lode/schemata",{id:t,obj:r}),null!=e&&e()):e()}))}),e)}else null!=e&&e()},add:function(e,t){var i=e||this.addingProperty,s=t||this.addingValue;null!=s["@value"]&&void 0!==s["@value"]||(s={"@value":s});var r=this;(new EcAsyncHelper).each(r.getAllTypes(s),(function(e,t){r.loadSchema(t,e)}),(function(){void 0!==r.expandedThing[i]&&null!=r.expandedThing[i]||(r.expandedThing[i]=[]),EcArray.isArray(r.expandedThing[i])||(r.expandedThing[i]=[r.expandedThing[i]]),null==s["@value"]?jsonld.expand(JSON.parse(s.toJson()),(function(e,t){null!=e?appError(e):r.expandedThing[i].push(r.reactify(t[0]))})):r.expandedThing[i].push(s)}))},remove:function(e,t){var i=JSON.parse(JSON.stringify(this.expandedThing[e]));EcArray.isArray(this.expandedThing[e])||(this.expandedThing[e]=[this.expandedThing[e]]),this.expandedThing[e].splice(t,1),this.$store.commit("editor/addEditsToUndo",{operation:"update",id:EcRemoteLinkedData.trimVersionFromUrl(this.expandedThing["@id"]),fieldChanged:[e],initialValue:i,changedValue:this.expandedThing[e],expandedProperty:!0}),this.saveThing()},update:function(e,t,i,s){if(this.errorValidating=null,this.profile&&this.profile[e]&&this.profile[e]["update"]){if(i["name"]&&i["@value"]){var r=this.profile[e]["update"];r(i)}}else null==t?this.expandedThing[e]=i:this.expandedThing[e][t]=i;s&&s()},saveThing:function(){this.saving=!0,this.doneSaving=!1,this.saved=!1,this.errorSaving=!1;var e=this,t=this;while(null==e.expandedThing["@id"]||void 0===e.expandedThing["@id"])if(e=e.$parent.$parent,null==e.expandedThing)return"Could not save.";jsonld.compact(this.stripEmptyArrays(this.expandedThing),this.$store.state.lode.rawSchemata[this.context],(function(e,i){if(null!=e&&appError(e),i){i=t.turnFieldsBackIntoArrays(i);var s=new EcRemoteLinkedData;s.copyFrom(i),s.context=t.context,delete s["@context"],t.$store.state.editor&&!0===t.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[s.id]&&(s=EcEncryptedValue.toEncryptedValue(s)),s["schema:dateModified"]=(new Date).toISOString(),repo.saveTo(s,(function(){t.doneSaving=!0,t.saving=!1,t.saved="last saved "+new Date(s["schema:dateModified"]).toLocaleString(),t.$store.commit("editor/changedObject",s.shortId()),t.doneValidating&&(t.addAnother&&(t.$store.commit("editor/addAnother",!0),t.addAnother=!1),t.$emit("done-editing-node-event")),"Framework"===s.type?(t.$store.commit("editor/framework",EcFramework.getBlocking(s.shortId())),t.spitEvent("viewChanged")):"ConceptScheme"===s.type&&(t.$store.commit("editor/framework",EcConceptScheme.getBlocking(s.shortId())),t.spitEvent("viewChanged"))}),(function(e){appError(e),t.errorSaving=!0}))}}))},turnFieldsBackIntoArrays:function(e){for(var t=["owner","reader","signature","competency","level","relation","skos:hasTopConcept","skos:narrower","skos:broader","skos:broadMatch","skos:closeMatch","skos:exactMatch","skos:narrowMatch","skos:related"],i=0;i<t.length;i++){var s=t[i];e[s]&&!EcArray.isArray(e[s])&&(e[s]=[e[s]])}return e},stripEmptyArrays:function(e){if(EcArray.isArray(e)){if(0===e.length)return null;for(var t=0;t<e.length;t++)e[t]=this.stripEmptyArrays(e[t]),null==e[t]&&e.splice(t--,1)}else if(EcObject.isObject(e))for(var i in e){var s=this.stripEmptyArrays(e[i]);null==s&&delete e[i]}return e},getAllTypes:function(e,t){var i=[];if(null!=e&&null!=e.context&&(t=e.context),EcArray.isArray(e))for(var s=0;s<e.length;s++)i=i.concat(this.getAllTypes(e[s],t));else if(EcObject.isObject(e))for(var r in null!=e.type&&(null==e.context&&(e.context=t),i.push(e.context+(e.context.endsWith("/")?"":"/")+e.type)),null!=e["@type"]&&(null==e["@context"]&&(e["@context"]=t),-1===e["@type"].indexOf("schema:")&&i.push(e["@context"]+(e["@context"].endsWith("/")?"":"/")+e["@type"])),e)i=i.concat(this.getAllTypes(e[r],t));return i},deleteObject:function(e){e?this.$emit("delete-object",e):this.$emit("delete-object",this.originalThing)},removeObject:function(){this.$emit("remove-object",this.originalThing)},resolveNameFromUrl:function(e){var t=this;this.get(e,null,null,(function(e){var i=null;if(e){if("<"===e[0])return;if(e=JSON.parse(e),e["ceterms:name"]?i=e["ceterms:name"]:e["ceasn:competencyText"]?i=e["ceasn:competencyText"]:e["name"]?i=e["name"]:e["schema:name"]?i=e["schema:name"]:e["title"]?i=e["title"]:e["skos:prefLabel"]?i=e["skos:prefLabel"]:e["title"]?i=e["title"]:e["@graph"]&&e["@graph"][0]&&(e["@graph"][0]["ceterms:name"]?i=e["@graph"][0]["ceterms:name"]:e["@graph"][0]["name"]?i=e["@graph"][0]["name"]:e["@graph"][0]["schema:name"]?i=e["@graph"][0]["schema:name"]:e["@graph"][0]["title"]?i=e["@graph"][0]["title"]:e["@graph"][0]["skos:prefLabel"]&&(i=e["@graph"][0]["skos:prefLabel"])),i=Thing.getDisplayStringFrom(i),EcObject.isObject(i)){var s=Object.keys(i);i=i[s[0]]}}t.name=i}),(function(e){appLog(e)}))},get:function(e,t,i,s,r){var o=EcRemote.urlAppend(e,t);o=EcRemote.upgradeHttpToHttps(o);var a=null;if("undefined"===typeof httpStatus){if(a=new XMLHttpRequest,a.open("GET",o,EcRemote.async),null!=i)for(var n=EcObject.keys(i),l=0;l<n.length;l++)a.setRequestHeader(n[l],i[n[l]]);var c=a;a.onreadystatechange=function(){4===c.readyState&&200===c.status&&(null!=s?s(c.responseText):4===c.readyState&&null!=r&&r(c.responseText))}}null!=a&&EcRemote.async&&(a["timeout"]=EcRemote.timeout),"undefined"!==typeof httpStatus?null!=s&&s(JSON.stringify(httpGet(o))):a.send()},allowPropertyEdits:function(e){return"@id"!==e&&"ctid"!==e&&"registryURL"!==e&&((!this.profile||!this.profile[e]||!0!==this.profile[e]["readOnly"])&&this.canEdit)},moveUp:function(){this.$emit("move-up",this.originalThing.shortId(),this.index)},moveDown:function(){this.$emit("move-down",this.originalThing.shortId(),this.index)},moveRight:function(){this.$emit("move-right",this.originalThing.shortId(),this.index)},moveLeft:function(){this.$emit("move-left",this.originalThing.shortId(),this.index)},displayHeading:function(e){if(!0===this.showAlways&&!1===this.showPossible){if(this.alwaysProperties[e]&&EcObject.keys(this.alwaysProperties[e]).length>0)return e}else if(!1===this.showAlways&&null==this.showPossible){if(this.viewProperties[e]&&EcObject.keys(this.viewProperties[e]).length>0)return e}else if(!0===this.showPossible&&EcObject.keys(this.possibleProperties[e]).length>0)return e;return null},select:function(e,t){this.$emit("select",e,t)},getPropertiesFromProfile:function(e,t){for(var i=0;i<this.profile[t].length;i++){var s=this.profile[t][i],r="";if(this.profile[s]["heading"]&&(r=this.profile[s]["heading"]),null==e[r]&&void 0===e[r]&&(e[r]={}),this.profile[s]["valuesIndexed"]){var o=this.profile[s]["valuesIndexed"];o=o(),o&&o[this.obj.shortId()]&&(e[r][s]=this.profile[s])}else this.expandedThing&&null!=this.expandedThing[s]&&0!==this.expandedThing[s].length&&(e[r][s]=this.profile[s])}return e},closeWithoutSaving:function(){if(this.newFramework)return this.clickToDelete();this.$emit("done-editing-node-event")},doneEditing:function(){if(this.disableDoneEditingButton=!0,!0===this.showAddPropertyContent)return this.onCancelAddProperty();this.doneValidating=!1,this.validate=!0,this.errorValidating=null,this.doneSaving=!0,this.addAnother&&this.doneValidating&&(this.$store.commit("editor/addAnother",!0),this.addAnother=!1)},saveAndAddAnother:function(){this.addAnother=!0,this.doneEditing()},validated:function(){this.validateCount++,this.validateCount===this.$store.state.lode.numPropertyComponentsVisible[EcRemoteLinkedData.trimVersionFromUrl(this.expandedThing["@id"])]&&(this.doneValidating=!0,this.validateCount=0,this.doneSaving&&(this.addAnother&&(this.$store.commit("editor/addAnother",!0),this.addAnother=!1),this.$emit("done-editing-node-event")))},populateRequiredFields:function(){for(var e in this.profile)if(!EcArray.has(this.skipConfigProperties,this.profile[e])&&!this.profile[e].valuesIndexed&&("true"===this.profile[e]["isRequired"]||!0===this.profile[e]["isRequired"])&&this.expandedThing[e].length<1){var t=this.profile[e]["http://schema.org/rangeIncludes"][0]["@id"];-1!==t.toLowerCase().indexOf("langstring")?this.add(e,{"@language":this.$store.getters["editor/defaultLanguage"],"@value":""}):this.add(e,{"@value":""})}},addSelected:function(){var e=this.$store.getters["editor/selectedCompetenciesAsProperties"],t=this.$store.state.editor.selectCompetencyRelation;if("Concept"===this.$store.state.lode.searchType||"https://purl.org/ctdlasn/terms/knowledgeEmbodied"===t||"https://purl.org/ctdlasn/terms/abilityEmbodied"===t||"https://purl.org/ctdlasn/terms/taskEmbodied"===t||"https://purl.org/ctdlasn/terms/skillEmbodied"===t)this.attachUrlProperties(e);else if("Competency"===this.$store.state.lode.searchType)this.addAlignments(e,this.$store.state.editor.selectedCompetency,t);else for(var i=0;i<e.length;i++)this.addLevel(this.$store.getters["editor/selectedCompetency"].shortId(),[e[i]]);this.isSearching=!1,this.showAddPropertyContent=!1},attachUrlProperties:function(e){var t=this.$store.state.editor.framework;null!=this.$store.state.editor.selectedCompetency&&(t=this.$store.state.editor.selectedCompetency);for(var i=0;i<e.length;i++){var s=EcRepository.getBlocking(e[i]);if(s.isAny((new EcConcept).getTypes())||s.isAny((new EcCompetency).getTypes())){var r=this.$store.state.editor.selectCompetencyRelation;-1!==r.indexOf("http")?(this.$store.commit("lode/setAddingProperty",r),this.$store.commit("lode/setAddingValue",{"@value":e[i]}),this.add(),this.saveThing()):(EcArray.isArray(t[this.$store.state.editor.selectCompetencyRelation])||(t[this.$store.state.editor.selectCompetencyRelation]=[]),EcArray.setAdd(t[this.$store.state.editor.selectCompetencyRelation],s.shortId()))}}t["schema:dateModified"]=(new Date).toISOString(),!0===this.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[t.id]&&(t=EcEncryptedValue.toEncryptedValue(t)),this.repo.saveTo(t,(function(){}),appError)},clickToDelete:function(){this.$store.getters["app/editDirectory"]?(this.$store.commit("app/editDirectory",!1),this.$store.commit("app/showModal",{component:"DeleteDirectoryConfirm"})):(this.$store.commit("editor/setItemToDelete",this.obj?this.obj:this.originalThing),this.showModal("deleteObject"))}},watch:{addingProperty:function(e){e&&(this.errorMessage=[])},isSavingThing:function(e){if(e)return this.saveThing()},canEdit:function(){this.showAlways=!0,this.showPossible=!1},changedObject:function(){if(this.originalThing&&this.shortType&&this.changedObject===this.originalThing.shortId()){var e="Ec"+this.shortType;if(e){var t=window[e].getBlocking(this.changedObject);this.obj=t,!1===this.clickToLoad&&this.load()}this.$store.commit("editor/changedObject",null)}},isAddingProperty:function(){!1===this.isAddingProperty&&(this.showAddPropertyContent=!1)},originalThing:function(){this.originalThing&&("Competency"!==this.shortType&&"Concept"!==this.shortType&&"Level"!==this.shortType||this.$store.commit("editor/selectedCompetency",this.originalThing))},isSearching:function(){if(this.isSearching){var e=["narrows","broadens","hasChild","isChildOf"];if(EcArray.has(e,this.addingProperty))for(var t=this.$store.getters["editor/relations"],i=0;i<e.length;i++)if(t[e[i]]&&t[e[i]][this.obj.shortId()]){var s=t[e[i]][this.obj.shortId()];if(s)for(var r=0;r<s.length;r++)this.idsNotPermittedInSearch.push(s[r]["@id"])}}else this.idsNotPermittedInSearch=[]},profile:function(){this.populateRequiredFields()},validate:function(){this.validate||(this.disableDoneEditingButton=!1,this.validateCount=0)}}},u=p,f=(i("78bf"),i("2877")),m=Object(f["a"])(u,s,r,!1,null,null,null);t["default"]=m.exports},a222:function(e,t,i){},cd8e:function(e,t,i){}}]);
//# sourceMappingURL=chunk-c6935678.651fe41d.js.map