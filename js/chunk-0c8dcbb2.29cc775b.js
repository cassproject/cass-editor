(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c8dcbb2","chunk-62fb7533","chunk-83807946","chunk-83807946","chunk-74a95bb3"],{"2f8b":function(e,t,o){},"6ffa4":function(e,t,o){"use strict";o("fb6a"),o("14d9");var a=o("c7eb"),n=o("1da1"),i=o("872c");t["a"]={mixins:[i["a"]],methods:{removeObject:function(e){appLog("removing "+e.id);var t=this,o=this.$store.getters["editor/framework"],i=o.competency?o.competency.slice():null,r=o.relation?o.relation.slice():null,s=o.level?o.level.slice():null;o["schema:dateModified"]=(new Date).toISOString(),o.removeCompetency(e.shortId(),Object(n["a"])(Object(a["a"])().mark((function e(){var n;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.framework,t.$store.commit("editor/addEditsToUndo",[{operation:"update",id:n.shortId(),fieldChanged:["competency","relation","level"],initialValue:[i,r,s]}]),!0!==t.$store.state.editor.private||!0===EcEncryptedValue.encryptOnSaveMap[f.id]){e.next=6;break}return e.next=5,EcEncryptedValue.toEncryptedValue(n);case 5:n=e.sent;case 6:window.repo.saveTo(n,(function(){t.$store.commit("editor/framework",o)}),appError);case 7:case"end":return e.stop()}}),e)}))),appLog)},deleteObject:function(e){appLog("deleting "+e.id);var t=this,o=this.$store.getters["editor/framework"];if(e.shortId()===o.shortId())window.repo.deleteRegistered(o,(function(e){if(t.spitEvent("frameworkDeleted",o.shortId(),"editFrameworkSection"),null!=o.competency)for(var a=0;a<o.competency.length;a++)t.conditionalDelete(o.competency[a]);if(null!=o.relation)for(a=0;a<o.relation.length;a++)t.conditionalDelete(o.relation[a]);if(null!=o.level)for(a=0;a<o.level.length;a++)t.conditionalDelete(o.level[a]);t.$store.commit("editor/framework",null),t.importType?t.$store.commit("app/importFramework",null):t.$router.push({name:"frameworks"})}),appLog);else{var i=o.competency?o.competency.slice():null,r=o.relation?o.relation.slice():null,s=o.level?o.level.slice():null;this.$store.commit("editor/selectedCompetency",e),o["schema:dateModified"]=(new Date).toISOString(),o.removeCompetency(e.shortId(),Object(n["a"])(Object(a["a"])().mark((function n(){var c;return Object(a["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o.removeLevel(e.shortId()),t.$store.commit("editor/addEditsToUndo",[{operation:"delete",obj:e},{operation:"update",id:o.shortId(),fieldChanged:["competency","relation","level"],initialValue:[i,r,s],changedValue:[o.competency,o.relation,o.level]}]),t.conditionalDelete(e.shortId()),t.spitEvent("competencyDeleted",e.shortId(),"editFrameworkSection"),t.$store.commit("editor/selectedCompetency",null),c=o,!0!==t.$store.state.editor.private||!0===EcEncryptedValue.encryptOnSaveMap[o.id]){a.next=10;break}return a.next=9,EcEncryptedValue.toEncryptedValue(o);case 9:c=a.sent;case 10:window.repo.saveTo(c,(function(){t.$store.commit("editor/framework",o)}),appError);case 11:case"end":return a.stop()}}),n)}))),appLog)}}}}},"840c":function(e,t,o){"use strict";o("2f8b")},"984b":function(e,t,o){},af07:function(e,t,o){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal cass-editor___modal",class:[{"is-active":e.active},"is-"+e.size,"cass-editor__modal--"+e.content],attrs:{id:"cass-modal"}},[t("div",{staticClass:"modal-background"}),t("div",{staticClass:"modal-card",class:"cass-editor__modal-card--"+e.size},[t("header",{staticClass:"modal-card-head is-size-4 has-text-weight-bold",class:["has-background-"+e.type,"has-text-"+e.fontColor]},[t("p",{staticClass:"modal-card-title"},[e._t("modal-header")],2),e.canClose?t("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(t){e.$store.commit("app/closeModal"),e.$emit("close")}}}):e._e()]),t("div",{staticClass:"modal-card-body has-text-dark"},[e._t("modal-body")],2),t("footer",{staticClass:"modal-card-foot has-background-white"},[e._t("modal-foot")],2)])])},n=[],i=(o("984b"),{name:"ModalTemplate",props:{canClose:{type:Boolean,default:!0},active:{type:Boolean,default:!1},type:{default:"primary",type:String},fontColor:{type:String,default:"white"},size:{type:String,default:"medium"},content:{defualt:"default",type:String}},data:function(){return{}},computed:{}}),r=i,s=(o("840c"),o("2877")),c=Object(s["a"])(r,a,n,!1,null,null,null);t["a"]=c.exports},b5c7:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e._self._c;return t("modal-template",{attrs:{type:"danger",size:"small",active:!0},on:{close:e.closeModal}},[t("template",{slot:"modal-header"},[e._v(" Confirm Delete Competency ")]),t("template",{slot:"modal-body"},[t("section",[t("b",[e._v(" Warning! This action deletes all instances of this competency. ")])]),t("p",{staticClass:"help is-danger"},[e._v(" This action will remove the competency from "),t("b",[e._v(e._s(e.numFrameworks))]),e._v(" frameworks and impact "),t("b",[e._v(e._s(e.numRelationships))]),e._v(" relationships. ")]),t("section",{staticClass:"pt-2"},[t("p",[e._v(' If you wish to keep this content you can use the "remove" button instead to safely remove rather than delete. ')])])]),t("template",{slot:"modal-foot"},[t("button",{staticClass:"is-danger is-outlined button",on:{click:function(t){return e.deleteItem()}}},[e._v(" Delete Competency ")]),t("button",{staticClass:"is-dark button",on:{click:function(t){return e.closeModal()}}},[e._v(" Cancel ")])])],2)},n=[],i=(o("ac1f"),o("841c"),o("af07")),r=o("6ffa4"),s={name:"DeleteCompetencyConfirm",mixins:[r["a"]],components:{ModalTemplate:i["a"]},data:function(){return{numFrameworks:0,numRelationships:0}},computed:{obj:function(){return this.$store.getters["editor/itemToDelete"]}},mounted:function(){this.getNums()},methods:{getNums:function(){var e=this;repo.search('@type:Framework AND competency:"'+this.obj.shortId()+'"',(function(e){}),(function(t){e.numFrameworks=t.length,repo.search('@type:Relation AND (source:"'+e.obj.shortId()+'" OR target:"'+e.obj.shortId()+'")',(function(e){}),(function(t){e.numRelationships=t.length}),(function(){}))}),(function(){}))},deleteItem:function(){this.deleteObject(this.obj),this.closeModal(),this.$store.commit("editor/setItemToDelete",{})},closeModal:function(){this.$store.commit("app/closeModal"),this.$store.commit("editor/setItemToDelete",{})}}},c=s,l=o("2877"),d=Object(l["a"])(c,a,n,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-0c8dcbb2.29cc775b.js.map