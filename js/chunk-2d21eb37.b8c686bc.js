(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21eb37"],{d74b:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:{callback:e.initialize,once:!0},expression:"{callback: initialize,once: true}"}],staticClass:"assertion"},[e.icon?n("span",[e.negative?n("i",{staticClass:"mdi mdi-18px mdi-close-box-outline",attrs:{"aria-hidden":"true",title:e.statement}}):n("i",{staticClass:"mdi mdi-18px mdi-checkbox-marked-circle-outline",attrs:{"aria-hidden":"true",title:e.statement}})]):e.short?n("span",[e.ok?n("li",[e.fingerprintUrl?n("img",{staticStyle:{"vertical-align":"sub"},attrs:{src:e.fingerprintUrl,title:e.agent}}):e._e(),e._v(" "),n("span",{staticStyle:{color:"blue"}},[e._v(e._s(e.agent))]),e.timestamp?n("span",[e._v("claimed "+e._s(e.timeAgo)+":")]):e._e(),n("span",{staticClass:"statement antitile"},[e.negative?n("span",[e._v(e._s(e.subject)+" can't do this")]):n("span",[e._v(e._s(e.subject)+" can do this")]),e.evidenceText?n("span",[e._v(" because they "),e._l(e.evidenceText,(function(t,i){return n("span",{key:i},[0!=i?n("span",[e._v(" and they ")]):e._e(),t.url?n("a",{attrs:{href:t.url,target:"_blank"}},[e._v(" "+e._s(t.text))]):n("span",[e._v(" "+e._s(t.text))])])}))],2):e._e(),e.badged?n("span",[e._v(" and I issued them a "),n("a",{attrs:{href:e.badgeUrl}},[e._v("badge")])]):e._e(),e._v(". ")])]):e._e()]):n("span",[e.ok?n("li",[e.timestamp?n("span",[e._v(e._s(e.timeAgo)+", ")]):e._e(),e._v(" "+e._s(e.agent)+" claimed "+e._s(e.subject)+" "),e.negative?n("span",[e._v("could not")]):n("span",[e._v("could")]),e._v(" demonstrate "),n("a",{attrs:{href:"#",title:e.assertion.competency},on:{click:e.gotoCompetency}},[e._v(e._s(e.competencyText))]),e.evidenceText?n("span",[e._v(" because they "),e._l(e.evidenceText,(function(t,i){return n("span",{key:i},[0!=i?n("span",[e._v(" and they ")]):e._e(),t.url?n("a",{attrs:{href:t.url,target:"_blank"}},[e._v(e._s(t.text))]):n("span",[e._v(e._s(t.text))])])}))],2):e._e(),e.badged?n("a",{attrs:{href:e.badgeUrl}},[e._v("Badge")]):e._e()]):e._e()])])},a=[],s=(n("b0c0"),{name:"Assertion",props:{uri:String,icon:Boolean,short:Boolean},data:function(){return{assertion:null,subject:null,subjectPk:null,agentPk:null,agent:null,timestamp:null,expiry:null,competency:null,negative:null,agentPerson:null,evidence:null,evidenceExplanation:null}},computed:{ok:function(){return null!=this.subject&&(null!=this.agent&&null!=this.competency)},statement:function(){if(null==this.subject)return"Decrypting...";if(null==this.agent)return"Decrypting...";if(null==this.competency)return"Decrypting...";var e="";return null!=this.timestamp&&(e+=moment(this.timestamp).fromNow()+", "),e+=this.agent+" claimed "+this.subject,!0===this.negative?e+=" could not ":e+=" could ",e+='demonstrate "'+this.competencyText+'".',e},timeAgo:function(){return null==this.timestamp?null:moment(this.timestamp).fromNow()},competencyText:function(){return null==this.competency?null:this.competency.name},evidenceText:function(){return this.evidenceExplanation},fingerprintUrl:function(){return null==this.agentPerson?null:null!=this.agentPerson.email?"https://www.gravatar.com/avatar/"+EcCrypto.md5(this.agentPerson.email.toLowerCase())+"?s=22":"http://tinygraphs.com/spaceinvaders/"+this.agentPerson.getGuid()+"?theme=base&numcolors=16&size=22&fmt=svg"},badged:function(){return null!=this.assertion&&this.assertion.hasReader(this.$store.getters["editor/badgePk"])},badgeUrl:function(){return null!=this.assertion&&this.assertion.hasReader(this.$store.getters["editor/badgePk"])?EcRemote.urlAppend(window.repo.selectedServer,"badge/assertion/")+this.assertion.getGuid():""}},watch:{evidence:function(e,t){var n=this;evidenceExplanation=null,null!=this.evidence&&this.evidence.length>0&&this.$store.dispatch("editor/computeBecause",this.evidence).then((function(e){n.$nextTick((function(){n.evidenceExplanation=e}))}))}},methods:{initialize:function(e,t){var n=this;e&&EcAssertion.get(this.uri,(function(e){if(n.assertion=e,null==e.subject?n.subject="nobody":(e.getSubjectNameAsync((function(e){n.subject=e}),appError),e.getSubjectAsync((function(e){n.subjectPk=e.toPem()}),appError)),null==e.agent?n.agent="nobody":e.getAgentNameAsync((function(e){n.agent=e}),appError),e.getAgentAsync((function(e){n.agentPk=e.toPem(),n.getAgent()}),appError),null!=e.assertionDate&&e.getAssertionDateAsync((function(e){n.timestamp=e}),appError),null!=e.expirationDate&&e.getExpirationDateAsync((function(e){n.expiry=e}),appError),null!=e.negative?e.getNegativeAsync((function(e){n.negative=e}),appError):n.negative=!1,null!=e.evidence)for(var t=0;t<e.getEvidenceCount();t++)(function(t){e.getEvidenceAsync(t,(function(e){null==n.evidence&&(n.evidence=[]),n.evidence.push(e),n.evidenceExplanation=null}),appError)})(t);EcCompetency.get(e.competency,(function(e){n.competency=e}),appError)}),appError)},gotoCompetency:function(){},getAgent:function(){var e=this;this.agentPerson=null,EcRepository.get(window.repo.selectedServer+"data/schema.org.Person/"+EcPk.fromPem(me.agentPk).fingerprint(),(function(t){var n=new EcEncryptedValue;if(t.isAny(n.getTypes()))n.copyFrom(t),n.decryptIntoObjectAsync((function(t){var n=new Person;n.copyFrom(t),e.agentPerson=n}),appError);else{var i=new Person;i.copyFrom(t),e.agentPerson=i}}),(function(t){var n=EcPk.fromPem(me.agentPk),i=new Person;i.assignId(window.repo.selectedServer,n.fingerprint()),i.addOwner(n),null===e.displayName?i.name="Unknown Person.":i.name=e.displayName,e.agentPerson=i}))}}}),r=s,o=n("2877"),c=Object(o["a"])(r,i,a,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d21eb37.b8c686bc.js.map