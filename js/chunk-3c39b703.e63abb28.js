(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c39b703","chunk-25a2af2a","chunk-25a2af2a"],{"0dd5":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("modal-template",{attrs:{active:!0,type:"primary"},on:{close:function(e){return t.$emit("close")}}},[e("template",{slot:"modal-header"},[e("span",{staticClass:"title has-text-white"},[t._v("Logged Out")])]),e("template",{slot:"modal-body"},[e("div",{staticClass:"section has-background-white has-text-centered"},[e("p",[e("strong",[t._v("You have been logged out.")])])])]),e("template",{slot:"modal-foot"},[e("div",{staticClass:"buttons is-spaced"},[e("button",{staticClass:"button is-secondary is-outlined",on:{click:function(e){return t.$store.commit("app/closeModal")}}},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-times-circle"})]),e("span",[t._v("close")])]),e("button",{staticClass:"button is-primary is-outlined",on:{click:t.close}},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-sign-in-alt"})]),e("span",[t._v("login")])])])])],2)},n=[],s=a("af07"),i=a("f3d2"),r={name:"LogoutSuccessModal",mixins:[i["a"]],props:{isActive:Boolean},components:{ModalTemplate:s["a"]},methods:{close:function(){this.$store.commit("app/closeModal"),this.$store.getters["featuresEnabled/apiLoginEnabled"]?this.redirectToExternalLogout():this.goToLogin()}}},c=r,l=a("2877"),d=Object(l["a"])(c,o,n,!1,null,null,null);e["default"]=d.exports},"62af":function(t,e,a){},"8d7e":function(t,e,a){"use strict";a("62af")},"984b":function(t,e,a){},af07:function(t,e,a){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal cass-editor___modal",class:[{"is-active":t.active},"is-"+t.size,"cass-editor__modal--"+t.content],attrs:{id:"cass-modal"}},[e("div",{staticClass:"modal-background"}),e("div",{staticClass:"modal-card",class:"cass-editor__modal-card--"+t.size},[e("header",{staticClass:"modal-card-head is-size-4 has-text-weight-bold",class:["has-background-"+t.type,"has-text-"+t.fontColor]},[e("p",{staticClass:"modal-card-title"},[t._t("modal-header")],2),t.canClose?e("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(e){t.$store.commit("app/closeModal"),t.$emit("close")}}}):t._e()]),e("div",{staticClass:"modal-card-body has-text-dark"},[t._t("modal-body")],2),e("footer",{staticClass:"modal-card-foot has-background-white"},[t._t("modal-foot")],2)])])},n=[],s=(a("984b"),{name:"ModalTemplate",props:{canClose:{type:Boolean,default:!0},active:{type:Boolean,default:!1},type:{default:"primary",type:String},fontColor:{type:String,default:"white"},size:{type:String,default:"medium"},content:{defualt:"default",type:String}},data:function(){return{}},computed:{}}),i=s,r=(a("8d7e"),a("2877")),c=Object(r["a"])(i,o,n,!1,null,null,null);e["a"]=c.exports},f3d2:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("b64b"),a("b0c0"),a("e9c4"),a("14d9"),a("d3b7"),a("ddb0");var o={name:"cassApi",data:function(){return{USER_PROFILE_SERVICE:"user/profile",USER_CREATE_SERVICE:"user",USER_LOGIN_SERVICE:"login",USER_LOGOUT_SERVICE:"logout",LOGOUT_REDIRECT_URL:window.location.origin+"/cass-editor/#/login"}},methods:{parseCredentialsFromProfileResponse:function(t){var e=JSON.parse(t.responseText),a={};return a.username=e["preferred_username"],a.password=e["cass_password"],e["email"]?a.email=e["email"]:a.email="n/a",e["name"]?a.name=e["name"]:e["given_name"]&&e["family_name"]?a.name=e["given_name"]+" "+e["family_name"]:a.name=e["preferred_username"],a},performCreateUser:function(t,e){var a=new XMLHttpRequest;a.addEventListener("load",(function(t){return e(t.currentTarget)})),a.withCredentials=!0;var o=this.cassApiLocation+this.USER_CREATE_SERVICE;a.open("POST",o),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.send(JSON.stringify({username:t.username,password:t.password,email:t.email,firstName:t.firstName,lastName:t.lastName}))},getUserProfile:function(t){var e=new XMLHttpRequest;e.addEventListener("load",(function(e){return t(e.currentTarget)})),e.withCredentials=!0;var a=this.cassApiLocation+this.USER_PROFILE_SERVICE;e.open("GET",a),e.send()},redirectToExternalLogin:function(){appLog("Redirecting to external login..."),window.location=this.repositorySsoOptions.ssoLogin+"?redirectUrl="+encodeURIComponent(window.location)},redirectToExternalLogout:function(){appLog("Redirecting to external logout..."),window.location=this.repositorySsoOptions.ssoLogout+"?redirectUrl="+encodeURIComponent(window.location)},goToLogin:function(){this.apiLoginEnabled?this.$router.push({path:"/login"}):this.$router.push({path:"/legacyLogin"})},checkExternalLogoutStatus:function(t){200!==t.status&&appLog("Logout fired but returned an unexpected response code: "+t.status),this.goToLogin()},performExternalLogout:function(){var t=this;appLog("Performing external logout...");var e=new XMLHttpRequest;e.addEventListener("load",(function(e){return t.checkExternalLogoutStatus(e.currentTarget)})),e.withCredentials=!0;var a=this.cassApiLocation+this.USER_LOGOUT_SERVICE;e.open("GET",a),e.send()},performApplicationLogout:function(){appLog("Performing application logout..."),EcIdentityManager.default.clearContacts(),EcIdentityManager.default.clearIdentities();var t={};this.$store.commit("user/loggedOnPerson",t),this.$store.commit("app/showModal",{component:"LogoutSuccess"})},performApplicationLogin:function(){appLog("Performing application login..."),EcIdentityManager.default.clearContacts(),EcIdentityManager.default.clearIdentities();var t={};this.$store.commit("user/loggedOnPerson",t),this.apiLoginEnabled?this.redirectToExternalLogin():this.goToLogin()},addQueryParams:function(){var t=this.$store.getters["editor/queryParams"],e=EcObject.keys(t);if(t&&e.length){var a="?";for(var o in e){0!==o&&(a+="&");var n=e[o],s=t[n];if(EcArray.isArray(s))for(var i in s)0!==i&&(a+="&"),a+=n+"="+s[i];else a+=n+"="+s}return a}return""}},computed:{cassApiLocation:function(){return this.$store.getters["environment/cassApiLocation"]},repositorySsoOptions:function(){return this.$store.getters["user/repositorySsoOptions"]},apiLoginEnabled:function(){return this.$store.getters["featuresEnabled/apiLoginEnabled"]}}}}}]);
//# sourceMappingURL=chunk-3c39b703.e63abb28.js.map