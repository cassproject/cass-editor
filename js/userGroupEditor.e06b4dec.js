(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["userGroupEditor","chunk-2d0dab46","chunk-f3b8fe20","chunk-f3b8fe20","chunk-2d0dab46"],{"0393":function(e,r,s){},1622:function(e,r,s){"use strict";var t=s("0393"),a=s.n(t);a.a},1877:function(e,r,s){"use strict";var t=s("8fdc"),a=s.n(t);a.a},"334a":function(e,r,s){},"4a5b":function(e,r,s){"use strict";s.r(r);var t=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"cass-users-and-groups",attrs:{id:"user-groups"}},[s("div",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"columns is-mobile is-multiline"},[s("div",{staticClass:"column is-narrow is-hidden-touch"},[s("div",{staticClass:"cass-left-panel"},[s("div",{staticClass:"cass-left-panel---container"},[s("h3",{staticClass:"title is-size-4 is-family-primary"},[e._v(" My User Groups ")]),s("div",{staticClass:"buttons"},[s("div",{staticClass:"button is-rounded is-primary is-small",attrs:{disabled:!e.amLoggedIn,title:e.getCreateUserGroupButtonTitle},on:{click:function(r){return e.createNewUserGroup(null)}}},[e._m(0),s("span",[e._v(" create new group ")])])]),s("cass-panel",[s("cass-panel-item",{key:"all-members",attrs:{depth:0,label:"Member List",nodes:[],id:"all-members"},on:{showDetails:e.showMemberListView}}),e._l(e.userGroupDisplayList,(function(r){return s("cass-panel-item",{key:r,attrs:{depth:0,label:r.name,nodes:r.subGroups,id:r.id},on:{showDetails:e.showGroupDetailsById}})}))],2)],1)])]),s("div",{staticClass:"column is-12 is-hidden-desktop"},[s("cass-dropdown",{attrs:{label:e.currentUserGroupName,active:e.groupsDropdownActive},on:{closeDropdown:function(r){e.groupsDropdownActive=!1},click:function(r){e.groupsDropdownActive=!0},showDropdown:function(r){e.groupsDropdownActive=!0}}},[s("cass-dropdown-item",{key:"all-members",attrs:{depth:0,label:"Member List",nodes:[],id:"all-members"},on:{showDetails:e.showMemberListView}}),e._l(e.userGroupDisplayList,(function(r){return s("cass-dropdown-item",{key:r,attrs:{depth:0,label:e.truncateString(r.name,40),nodes:r.subGroups,id:r.id},on:{showDetails:e.showGroupDetailsById}})}))],2)],1),s("div",{staticClass:"column"},[s("div",{staticClass:"px-2"},["memberList"===e.viewMode?s("div",[s("h3",{staticClass:"title is-size-1 is-family-secondary"},[e._v(" All Group Members ")]),s("p",[e._v(" A view of all members within your groups and sub-groups. Click a group name to view the group details. ")]),0===e.allGroupMembersList.length?s("div",[e._m(1)]):e._e(),e.allGroupMembersList.length>0?s("div",{},[s("div",{staticClass:"table-container"},[s("table",{staticClass:"table is-hoverable is-fullwidth"},[e._m(2),s("tbody",e._l(e.allGroupMembersList,(function(r,t){return s("tr",{key:t},[s("th",[e._v(" "+e._s(r.name)+" ")]),s("td",[e._v(" "+e._s(r.email)+" ")]),s("td",[r.managerOf.length>0?s("div",[s("b",[e._v("Manager of")]),s("br"),e._l(r.managerOf,(function(r,t){return s("span",[t>0?s("span",[e._v(", ")]):e._e(),s("a",{on:{click:function(s){return e.showGroupDetailsById(r.id)}}},[e._v(" "+e._s(r.name)+" ")])])}))],2):e._e(),r.memberOf.length>0?s("div",[s("b",[e._v("Member of")]),s("br"),e._l(r.memberOf,(function(r,t){return s("span",[t>0?s("span",[e._v(", ")]):e._e(),s("a",{on:{click:function(s){return e.showGroupDetailsById(r.id)}}},[e._v(" "+e._s(r.name)+" ")])])}))],2):e._e()])])})),0)])])]):e._e()]):e._e(),"groupDetail"===e.viewMode?s("div",[e.currentUserGroupLineage&&e.currentUserGroupLineage.length>1?s("nav",{staticClass:"breadcrumb pb-2",attrs:{"aria-label":"breadcrumbs"}},[s("ul",e._l(e.currentUserGroupLineage,(function(r){return s("li",{key:r.id},[s("a",{on:{click:function(s){return e.showGroupDetailsById(r.id)}}},[e._v(" "+e._s(r.name)+" ")])])})),0)]):e._e(),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-8"},[s("h2",{staticClass:"is-size-1 is-family-secondary"},[e._v(" Group Details ")]),e.isEditingCurrentGroupName?e._e():s("div",{staticClass:"columns is-multiline is-mobile"},[e._m(3),s("div",{staticClass:"column pt-0"},[s("h3",{staticClass:"subtitle is-size-3"},[e._v(" "+e._s(e.currentUserGroupName)+" ")]),e.currentUserGroupName.length>60?s("p",{staticClass:"help is-danger"},[e._v(" Group name length max is 60 characters. Please choose a shorter name ")]):e._e()]),s("div",{staticClass:"column is-narrow"},[e.currentUserGroupIsManager?s("span",{staticClass:"icon is-size-7 users-edit-icon",on:{click:function(r){e.isEditingCurrentGroupName=!0}}},[s("i",{staticClass:"fa fa-pencil-alt has-text-dark"})]):e._e()])]),e.isEditingCurrentGroupName?s("div",{staticClass:"pb-2"},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[e._v("Group Name")]),s("p",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.currentUserGroupName,expression:"currentUserGroupName"}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.currentUserGroupName},on:{keypress:e.setCurrentUserGroupAsChanged,input:function(r){r.target.composing||(e.currentUserGroupName=r.target.value)}}})]),e.currentUserGroupName.length>60?s("p",{staticClass:"help is-danger"},[e._v(" Group name length max is 60 characters. Please choose a shorter name ")]):e._e()]),s("span",{staticClass:"button is-primary is-rounded is-small is-outlined",attrs:{disabled:e.currentUserGroupName.length>60},on:{click:function(r){e.isEditingCurrentGroupName=!1}}},[e._v(" done editing ")])]):e._e(),e.currentUserGroupNameInvalid?s("div",{staticClass:"field has-text-danger"},[s("div",{staticClass:"label has-text-danger"},[e._v(" Group name is required ")])]):e._e(),s("div",{staticClass:"description pb-2"},[e.isEditingCurrentGroupDescription?e._e():s("div",[s("div",{staticClass:"columns is-multiline is-mobile"},[e._m(4),s("div",{staticClass:"column"},[e.currentUserGroupDescription&&e.currentUserGroupDescription.trim().length>0?s("div",{class:e.showMore&&e.currentUserGroupDescription.trim().length>300?"cass__user-groups--description":"cass__user-groups--description-overflow"},[e.showMore?s("span",[e._v(" "+e._s(e.currentUserGroupDescription)+" ")]):s("span",[e._v(" "+e._s(e.currentUserGroupDescription.trim(0,300))+" ")]),e.showMore&&e.currentUserGroupDescription.trim().length>300?s("span",{staticClass:"button is-small is-text has-text-primary",attrs:{title:"Show more"},on:{click:function(r){e.showMore=!1}}},[s("b",[e._v("hide")])]):e.currentUserGroupDescription.trim().length>300?s("span",{staticClass:"button is-small is-text has-text-primary",attrs:{title:"Show more"},on:{click:function(r){e.showMore=!0}}},[s("b",[e._v("...")])]):e._e()]):s("div",[s("i",[e._v("No description")])])]),s("div",{staticClass:"column is-narrow"},[e.currentUserGroupIsManager?s("span",{staticClass:"icon",on:{click:function(r){e.isEditingCurrentGroupDescription=!0}}},[s("i",{staticClass:"fa fa-pencil-alt is-size-7 has-text-dark"})]):e._e()])])]),e.isEditingCurrentGroupDescription?s("div",{staticClass:"pt-2"},[s("label",{staticClass:"label"},[e._v("Group Description")]),s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.currentUserGroupDescription,expression:"currentUserGroupDescription"}],staticClass:"textarea",attrs:{type:"text",rows:3},domProps:{value:e.currentUserGroupDescription},on:{keyup:e.setCurrentUserGroupAsChanged,input:function(r){r.target.composing||(e.currentUserGroupDescription=r.target.value)}}})])]),s("div",{staticClass:"buttons"},[s("span",{staticClass:"button is-rounded is-primary is-small is-outlined",class:e.currentUserGroupChanged?"":"is-disabled",attrs:{disabled:!e.currentUserGroupChanged},on:{click:function(r){e.isEditingCurrentGroupDescription=!1}}},[e._v(" done editing ")])])]):e._e(),e.currentUserGroupDescriptionInvalid?s("div",{staticClass:"field has-text-danger"},[s("div",{staticClass:"label has-text-danger"},[e._v(" Group description is required ")])]):e._e()])]),s("div",{staticClass:"column is-1"}),s("div",{staticClass:"column is-3 pt-3 pr-3"},[s("div",{staticClass:"columns is-multiline px-2"},[e.currentUserGroupIsManager?s("div",{staticClass:"cass-group--actions"},[s("h5",{staticClass:"title is-size-5"},[e._v(" Group actions ")]),e.currentUserGroupIsManager?s("div",{staticClass:"button my-1 is-small is-rounded is-small  is-fullwidth is-primary",attrs:{title:"Add group members"},on:{click:e.showAddGroupMembersModal}},[e._m(5),s("span",[e._v(" member ")])]):e._e(),e.currentUserGroupIsManager&&e.currentUserGroupChanged?s("div",{staticClass:"button is-rounded my-1 is-fullwidth is-primary is-small",class:e.currentUserGroupIsManager&&e.currentUserGroupChanged?"":"is-disabled",attrs:{disabled:!e.currentUserGroupChanged,title:"Save group"},on:{click:e.saveCurrentUserGroup}},[e._m(6),s("span",[e._v(" save ")])]):e._e(),e.currentUserGroupIsManager&&e.currentUserGroupChanged?s("div",{staticClass:"button is-fullwidth my-1 is-outlined is-rounded is-small",class:e.currentUserGroupIsManager&&e.currentUserGroupChanged?"":"is-disbaled",attrs:{disabled:!e.currentUserGroupChanged,title:"Cancel group changes"},on:{click:e.cancelCurrentUserGroupChanges}},[e._m(7),s("span",[e._v(" Discard ")])]):e._e(),e.currentUserGroupIsManager&&!e.currentUserGroupIsNewGroup?s("div",{staticClass:"button my-1 is-fullwidth is-rounded is-primary is-small",attrs:{title:"Create sub-group"},on:{click:e.createSubGroupForCurrentUserGroup}},[e._m(8),s("span",[e._v(" sub-group ")])]):e._e(),e.currentUserGroupIsManager&&!e.currentUserGroupIsNewGroup?s("div",{staticClass:"button my-1 is-outlined is-fullwidth is-rounded is-small is-danger",attrs:{title:"Delete group and sub-groups"},on:{click:e.showDeleteCurrentUserGroupConfirmModal}},[e._m(9),s("span",[e._v(" Delete ")])]):e._e()]):e._e()])])]),s("div",{staticClass:"pt-3"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("span",{staticClass:"subtitle is-size-4"},[e._v(" "+e._s(e.currentUserGroupName)+" Members ")])])]),s("div",{staticClass:"table-container"},[s("table",{staticClass:"table is-hoverable is-fullwidth"},[s("thead",[s("tr",[s("th",[e._v(" name ")]),s("th",[e._v(" email ")]),s("th",[e._v(" role ")]),e.currentUserGroupIsManager?s("th"):e._e()])]),s("tbody",[e._l(e.currentUserGroupManagers,(function(r,t){return s("tr",{key:t+"_mgr"},[s("th",[e._v(" "+e._s(r.name)+" ")]),s("td",[e._v(" "+e._s(r.email)+" ")]),e._m(10,!0),e.currentUserGroupIsManager?s("td",[e.areAnyIdentitiesThisPerson(r)?e._e():s("div",{staticClass:"buttons is-right"},[s("div",{staticClass:"button is-small is-outlined is-primary",attrs:{title:"Change role to member"},on:{click:function(s){e.changeManagerToMember(r.shortId())}}},[e._m(11,!0),s("span",[e._v(" change role ")])]),e.isPersonRemovableFromCurrentUserGroup(r.shortId())?s("div",{staticClass:"button is-small is-outlined is-warning",attrs:{title:"Remove manager"},on:{click:function(s){e.removeMemberFromCurrentUserGroup(r.shortId())}}},[e._m(12,!0)]):s("button",{staticClass:"button is-small is-outlined is-disabled",attrs:{disabled:"",title:"Cannot remove: member of sub-group you do not manage."}},[e._m(13,!0)])])]):e._e()])})),e._l(e.currentUserGroupMembers,(function(r,t){return s("tr",{key:t+"_mem"},[s("th",[e._v(" "+e._s(r.name)+" ")]),s("td",[e._v(" "+e._s(r.email)+" ")]),s("td",[e._v(" member ")]),e.currentUserGroupIsManager?s("td",[s("div",{staticClass:"buttons is-right"},[s("div",{staticClass:"button is-small is-outlined is-primary",attrs:{title:"Change role to manager"},on:{click:function(s){e.changeMemberToManager(r.shortId())}}},[e._m(14,!0),s("span",[e._v(" change role ")])]),e.isPersonRemovableFromCurrentUserGroup(r.shortId())?s("div",{staticClass:"button is-small is-outlined is-warning",attrs:{title:"Remove member"},on:{click:function(s){e.removeMemberFromCurrentUserGroup(r.shortId())}}},[e._m(15,!0)]):s("button",{staticClass:"button is-small is-outlined is-disabled",attrs:{disabled:"",title:"Cannot remove: member of sub-group you do not manage."}},[e._m(16,!0)])])]):e._e()])}))],2)])])])]):e._e()])])])])]),s("modal-template",{attrs:{size:"small",active:e.showConfirmLoseChangesModal},on:{close:e.cancelLoseChanges}},[s("template",{slot:"modal-header"},[e._v(" Discard Unsaved Changes? ")]),s("template",{slot:"modal-body"},[e._v(" You have unsaved changes. Cancel to return to group and save changes, or confirm to discard changes. ")]),s("template",{slot:"modal-foot"},[""!==e.toRoute?s("button",{staticClass:"button is-primary is-outlined",on:{click:e.confirmLoseChangesAndNav}},[e._v(" Confirm ")]):s("button",{staticClass:"button is-primary is-outlined",on:{click:e.confirmLoseChanges}},[e._v(" Confirm ")]),s("button",{staticClass:"button is-info",on:{click:e.cancelLoseChanges}},[e._v(" cancel ")])])],2),s("modal-template",{attrs:{header:!1,active:e.userGroupBusy}},[s("template",{slot:"modal-header"},[e._v(" Processing Request ")]),s("template",{slot:"modal-body"},[s("div",{staticClass:"modal-content has-text-centered"},[s("span",{staticClass:"icon is-large has-text-center has-text-link"},[s("i",{staticClass:"fas fa-2x fa-spinner is-info fa-pulse"})])])])],2),s("modal-template",{attrs:{active:e.showAddMemberModal},on:{close:e.closeAddGroupMemberModal}},[s("template",{slot:"modal-header"},[s("p",{staticClass:"is-size-3 modal-card-title has-text-white"},[e._v(" Add members to '"+e._s(e.currentUserGroupName)+"' ")])]),s("template",{slot:"modal-body"},[0!==e.filteredAvailablePersonsForMembership.length||""!==e.addMemberPersonFilter?s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.addMemberPersonFilter,expression:"addMemberPersonFilter"}],staticClass:"input",attrs:{type:"text",placeholder:"search for person..."},domProps:{value:e.addMemberPersonFilter},on:{input:function(r){r.target.composing||(e.addMemberPersonFilter=r.target.value)}}})]):e._e(),0===e.filteredAvailablePersonsForMembership.length&&""===e.addMemberPersonFilter?s("div",[s("i",{staticClass:"fa fa-info-circle"}),e._v(" No group members available. Users must be managers or members of any parent groups in order to be available for sub-groups. ")]):e._e(),e.filteredAvailablePersonsForMembership.length>0?s("div",[s("h4",{staticClass:"header is-size-3"},[e._v(" Available members ")]),s("div",{staticClass:"table-container"},[s("table",{staticClass:"table is-hoverable is-fullwidth"},[s("thead",[s("tr",[s("th",{attrs:{title:"Add as member"}},[s("i",{staticClass:"fa fa-user"})]),s("th",{attrs:{title:"Add as manager"}},[s("i",{staticClass:"fa fa-user-shield"})]),s("th",[e._v("name")]),s("th",[e._v("email")])])]),s("tbody",e._l(e.filteredAvailablePersonsForMembership,(function(r,t){return s("tr",{key:t},[s("th",[s("div",{staticClass:"checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedNewMembers,expression:"selectedNewMembers"}],attrs:{id:r.shortId(),name:"prs.shortId()",type:"checkbox",title:"Add as member"},domProps:{value:r.shortId(),checked:Array.isArray(e.selectedNewMembers)?e._i(e.selectedNewMembers,r.shortId())>-1:e.selectedNewMembers},on:{change:[function(s){var t=e.selectedNewMembers,a=s.target,i=!!a.checked;if(Array.isArray(t)){var n=r.shortId(),o=e._i(t,n);a.checked?o<0&&(e.selectedNewMembers=t.concat([n])):o>-1&&(e.selectedNewMembers=t.slice(0,o).concat(t.slice(o+1)))}else e.selectedNewMembers=i},function(s){e.removeFromSelectedNewManagers(r.shortId())}]}})])]),s("th",[s("div",{staticClass:"checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedNewManagers,expression:"selectedNewManagers"}],attrs:{id:r.shortId(),name:"prs.shortId()",type:"checkbox",title:"Add as manager"},domProps:{value:r.shortId(),checked:Array.isArray(e.selectedNewManagers)?e._i(e.selectedNewManagers,r.shortId())>-1:e.selectedNewManagers},on:{change:[function(s){var t=e.selectedNewManagers,a=s.target,i=!!a.checked;if(Array.isArray(t)){var n=r.shortId(),o=e._i(t,n);a.checked?o<0&&(e.selectedNewManagers=t.concat([n])):o>-1&&(e.selectedNewManagers=t.slice(0,o).concat(t.slice(o+1)))}else e.selectedNewManagers=i},function(s){e.removeFromSelectedNewMembers(r.shortId())}]}})])]),s("td",[e._v(" "+e._s(r.getName())+" ")]),s("td",[e._v(" "+e._s(r.email)+" ")])])})),0)])])]):e._e()]),s("template",{slot:"modal-foot"},[e.selectedNewMembers.length>0||e.selectedNewManagers.length>0?s("div",{staticClass:"button is-outlined is-primary is-small",attrs:{title:"Apply new members"},on:{click:e.applySelectedNewMembersToCurrentUserGroup}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-save"})]),s("span",[e._v(" apply ")])]):e._e(),s("div",{staticClass:"button is-outlined is-small",attrs:{title:"Cancel add new members"},on:{click:e.closeAddGroupMemberModal}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-times"})]),s("span",[e._v(" cancel ")])])])],2),s("modal-template",{attrs:{active:e.showConfirmDeleteUserGroupModal},on:{close:e.closeDeleteGroupConfirmModal}},[s("template",{slot:"modal-header"},[e._v(" Delete User Group? ")]),s("template",{slot:"modal-body"},[e._v(" Are you sure you wish to delete the user group "),s("b",[e._v("'"+e._s(e.currentUserGroupName)+"'")]),e._v("? "),e.deleteConfirmNumberOfSubGroups>0?s("div",{staticClass:"field has-text-danger pt-4"},[s("div",{staticClass:"label has-text-danger"},[s("i",{staticClass:"fa fa-exclamation-triangle"}),e._v(" Warning! Deleting this group will also delete all of its sub-groups ("),s("b",[e._v(e._s(e.deleteConfirmNumberOfSubGroups))]),e._v("). This is non-reversible. ")])]):e._e()]),s("template",{slot:"modal-foot"},[s("div",{staticClass:"button is-outlined",attrs:{title:"Cancel user group delete"},on:{click:e.closeDeleteGroupConfirmModal}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-times"})]),s("span",[e._v(" cancel ")])]),s("div",{staticClass:"button is-outlined is-warning",attrs:{title:"Confirm user group delete"},on:{click:e.deleteCurrentUserGroupAndSubGroups}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-trash"})]),s("span",[e._v(" delete ")])])])],2)],1)},a=[function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-plus"})])},function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("h3",{staticClass:"title is-size-5"},[s("i",{staticClass:"fa fa-info-circle"}),e._v(" No user groups available ")])},function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("thead",[s("tr",[s("th",[e._v(" name ")]),s("th",[e._v(" email ")]),s("th",[e._v(" membership ")])])])},function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"column is-12 pb-0"},[s("label",{staticClass:"label"},[e._v("Group name")])])},function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"column is-12 pb-0"},[s("label",{staticClass:"label"},[e._v(" Group Description ")])])},function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-plus"})])},function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-save"})])},function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-undo"})])},function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-plus"})])},function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-trash"})])},function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("td",[s("b",[e._v("manager")])])},function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-arrow-down"})])},function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-trash"})])},function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-trash"})])},function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-arrow-up"})])},function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-trash"})])},function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-trash"})])}],i=(s("a4d3"),s("e01a"),s("4de4"),s("caad"),s("fb6a"),s("b0c0"),s("b64b"),s("ac1f"),s("2532"),s("841c"),s("498a"),s("54f8")),n=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"cass-users-and-groups__panel"},[s("nav",[e._t("default")],2)])},o=[],u={name:"CassPanel"},l=u,c=(s("f7ca"),s("2877")),d=Object(c["a"])(l,n,o,!1,null,null,null),p=d.exports,h=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",[s("a",{staticClass:"panel-block",style:{transform:e.indent,width:e.calcWidth}},[s("span",{on:{click:e.showDetails}},[e._v(" "+e._s(e.label)+" ")]),e.nodes.length>0?s("span",{staticClass:"icon is-pulled-right",on:{click:function(r){e.showChildren=!e.showChildren}}},[e.showChildren?s("i",{staticClass:"fa fa-chevron-down"}):s("i",{staticClass:"fa fa-chevron-right"})]):e._e()]),e._l(e.nodes,(function(r){return s("cass-panel-item",{directives:[{name:"show",rawName:"v-show",value:e.showChildren,expression:"showChildren"}],key:r,attrs:{depth:e.depth+1,id:r.id,nodes:r.subGroups,label:r.name},on:{showDetails:e.showDetailsChild}})}))],2)},m=[],f={name:"CassPanelItem",props:["nodes","label","depth","id"],components:{CassPanelItem:G},data:function(){return{showChildren:!1}},computed:{indent:function(){return"translate(".concat(16*this.depth,"px)")},calcWidth:function(){return"calc(100% - ".concat(16*this.depth,"px) !important")}},methods:{showDetails:function(){this.showChildren=!0,this.$emit("showDetails",this.id)},showDetailsChild:function(e){this.$emit("showDetails",e)}}},v=f,b=(s("1622"),Object(c["a"])(v,h,m,!1,null,null,null)),G=b.exports,g=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closeDropdown,expression:"closeDropdown"}],staticClass:"dropdown  cass-user-group--dropdown",class:e.active?"is-active":""},[s("div",{staticClass:"dropdown-trigger",on:{click:function(r){return e.$emit("showDropdown")}}},[s("button",{staticClass:"button is-fullwidth is-large",attrs:{"aria-haspopup":"true","aria-controls":"dropdown-menu"}},[e.label?s("span",{staticClass:"dropdown-menu--item"},[e._v(e._s(e.label))]):s("span",[e._v("All Group Members")]),e._m(0)])]),s("div",{staticClass:"dropdown-menu",attrs:{id:"dropdown-menu",role:"menu"}},[s("div",{staticClass:"dropdown-content"},[e._t("default")],2)])])},C=[function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-angle-down",attrs:{"aria-hidden":"true"}})])}],w={name:"CassDropdown",props:["active","label"],methods:{closeDropdown:function(){this.$emit("closeDropdown")}}},U=w,M=(s("61e0"),Object(c["a"])(U,g,C,!1,null,null,null)),y=M.exports,_=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"cass-dropdown--item"},[s("a",{staticClass:"dropdown-item",on:{click:e.showDetails}},[e._v(" "+e._s(e.label)+" ")]),e._l(e.nodes,(function(r){return s("cass-dropdown-item",{key:r,attrs:{depth:e.depth+1,id:r.id,nodes:r.subGroups,label:r.name},on:{showDetails:e.showDetailsChild}})}))],2)},I=[],D={name:"CassDropdownItem",components:{CassDropdownItem:P},props:["nodes","label","depth","id"],methods:{showDetailsChild:function(e){this.$emit("showDetails",e)},showDetails:function(){this.showChildren=!0,this.$emit("showDetails",this.id)}}},O=D,k=(s("1877"),Object(c["a"])(O,_,I,!1,null,null,null)),P=k.exports,N=s("6d79"),L=s("af07"),S={name:"UserGroupEditor",mixins:[N["a"]],data:function(){return{toId:"",toRoute:"",showConfirmLoseChangesModal:!1,displayLength:300,showMore:!1,groupsDropdownActive:!1,GROUP_SEARCH_SIZE:1e4,PERSON_SEARCH_SIZE:1e4,userGroupBusy:!1,currentUserGroup:{},currentUserGroupId:"",currentUserGroupNeedsRekey:!1,currentUserGroupIsManager:!1,currentUserGroupManagers:[],currentUserGroupMembers:[],currentUserGroupName:"",currentUserGroupDescription:"",currentUserGroupLineage:[],currentUserGroupIsNewGroup:!1,currentUserGroupChanged:!1,isEditingCurrentGroupName:!1,isEditingCurrentGroupDescription:!1,currentUserGroupInvalid:!1,currentUserGroupNameInvalid:!1,currentUserGroupDescriptionInvalid:!1,membersToRemove:[],userGroupsToSave:[],numberOfUserGroupsToSave:0,numberOfUserGroupsSaved:0,userGroupsToDelete:[],numberOfUserGroupsToDelete:0,numberOfUserGroupsDeleted:0,showAddMemberModal:!1,showConfirmDeleteUserGroupModal:!1,deleteConfirmNumberOfSubGroups:0,addMemberPersonFilter:"",availablePersonsForMembership:[],selectedNewMembers:[],selectedNewManagers:[],allPersonList:[],allPersonMap:{},allGroupMembersList:[],userGroupDisplayList:[],userGroupDisplayMap:{},userGroupMap:{},userGroupIdToShowAfterReload:"",viewMode:"memberList"}},components:{CassPanel:p,CassPanelItem:G,CassDropdown:y,CassDropdownItem:P,ModalTemplate:L["a"]},computed:{getCreateUserGroupButtonTitle:function(){return this.amLoggedIn?"":"Must be logged in"},filteredAvailablePersonsForMembership:function(){var e=this;return this.availablePersonsForMembership.filter((function(r){return!e.currentUserGroupHasManager(r.shortId())&&!e.currentUserGroupHasMember(r.shortId())&&(r.getName()&&r.getName().toLowerCase().indexOf(e.addMemberPersonFilter.toLowerCase())>-1||r.email&&r.email.toLowerCase().indexOf(e.addMemberPersonFilter.toLowerCase())>-1)}))}},beforeRouteLeave:function(e,r,s){this.currentUserGroupChanged?(this.toRoute=e,this.showConfirmLoseChangesModal=!0):s()},methods:{showMemberListView:function(){this.currentUserGroupNeedsRekey=!1,this.currentUserGroupIsManager=!1,this.isEditingCurrentGroupName=!1,this.isEditingCurrentGroupDescription=!1,this.currentUserGroup={},this.currentUserGroupId="",this.currentUserGroupManagers=[],this.currentUserGroupMembers=[],this.currentUserGroupName="",this.currentUserGroupDescription="",this.currentUserGroupLineage=[],this.currentUserGroupIsNewGroup=!1,this.currentUserGroupChanged=!1,this.viewMode="memberList"},showGroupDetailView:function(){this.viewMode="groupDetail"},setCurrentUserGroupAsChanged:function(){this.currentUserGroupChanged=!0},changeManagerToMember:function(e){this.currentUserGroupManagers=this.currentUserGroupManagers.filter((function(r){return r.shortId()!==e})),this.currentUserGroupMembers.push(this.allPersonMap[e]),this.currentUserGroupChanged=!0},changeMemberToManager:function(e){this.currentUserGroupMembers=this.currentUserGroupMembers.filter((function(r){return r.shortId()!==e})),this.currentUserGroupManagers.push(this.allPersonMap[e]),this.currentUserGroupChanged=!0},closeAddGroupMemberModal:function(){this.selectedNewMembers=[],this.selectedNewManagers=[],this.showAddMemberModal=!1},getPersonListFromIdList:function(e){var r,s=[],t=Object(i["a"])(e);try{for(t.s();!(r=t.n()).done;){var a=r.value,n=this.allPersonMap[a];n&&s.push(n)}}catch(o){t.e(o)}finally{t.f()}return s},removeFromSelectedNewMembers:function(e){this.selectedNewMembers=this.selectedNewMembers.filter((function(r){return r!==e}))},removeFromSelectedNewManagers:function(e){this.selectedNewManagers=this.selectedNewManagers.filter((function(r){return r!==e}))},currentUserGroupHasManager:function(e){var r,s=Object(i["a"])(this.currentUserGroupManagers);try{for(s.s();!(r=s.n()).done;){var t=r.value;if(t.shortId().equals(e))return!0}}catch(a){s.e(a)}finally{s.f()}return!1},currentUserGroupHasMember:function(e){var r,s=Object(i["a"])(this.currentUserGroupMembers);try{for(s.s();!(r=s.n()).done;){var t=r.value;if(t.shortId().equals(e))return!0}}catch(a){s.e(a)}finally{s.f()}return!1},buildAvailablePersonsForMembership:function(){var e=[];if(this.currentUserGroup.memberOf&&this.userGroupMap[this.currentUserGroup.memberOf]){var r=this.userGroupMap[this.currentUserGroup.memberOf];e=this.getPersonListFromIdList(r.employee)}else e=this.allPersonList;this.availablePersonsForMembership=e},showAddGroupMembersModal:function(){this.selectedNewMembers=[],this.selectedNewManagers=[],this.buildAvailablePersonsForMembership(),this.addMemberPersonFilter="",this.showAddMemberModal=!0},removePersonFromMembersToRemoveBuffer:function(e){this.membersToRemove=this.membersToRemove.filter((function(r){return r!==e}))},applySelectedNewMembersToCurrentUserGroup:function(){var e,r=Object(i["a"])(this.selectedNewMembers);try{for(r.s();!(e=r.n()).done;){var s=e.value;this.currentUserGroupMembers.push(this.allPersonMap[s]),this.removePersonFromMembersToRemoveBuffer(s)}}catch(o){r.e(o)}finally{r.f()}var t,a=Object(i["a"])(this.selectedNewManagers);try{for(a.s();!(t=a.n()).done;){var n=t.value;this.currentUserGroupManagers.push(this.allPersonMap[n]),this.removePersonFromMembersToRemoveBuffer(n)}}catch(o){a.e(o)}finally{a.f()}this.currentUserGroupChanged=!0,this.closeAddGroupMemberModal()},removeMemberFromCurrentUserGroup:function(e){this.membersToRemove.push(e),this.currentUserGroupManagers=this.currentUserGroupManagers.filter((function(r){return r.shortId()!==e})),this.currentUserGroupMembers=this.currentUserGroupMembers.filter((function(r){return r.shortId()!==e})),this.currentUserGroupChanged=!0},isPersonRemovableFromCurrentUserGroup:function(e){var r,s=this.getSubGroupIdsForUserGroup(this.currentUserGroupId),t=Object(i["a"])(s);try{for(t.s();!(r=t.n()).done;){var a=r.value,n=this.userGroupMap[a];if(n.employee.includes(e)&&!this.isPersonalIdentityAnObjectOwner(n))return!1}}catch(o){t.e(o)}finally{t.f()}return!0},closeDeleteGroupConfirmModal:function(){this.showConfirmDeleteUserGroupModal=!1},showDeleteCurrentUserGroupConfirmModal:function(){this.deleteConfirmNumberOfSubGroups=this.getSubGroupIdsForUserGroup(this.currentUserGroupId).length,this.showConfirmDeleteUserGroupModal=!0},addCurrentUserGroupSubGroupsToGroupsToDelete:function(){var e,r=this.getSubGroupIdsForUserGroup(this.currentUserGroupId),s=Object(i["a"])(r);try{for(s.s();!(e=s.n()).done;){var t=e.value;this.userGroupsToDelete.push(this.userGroupMap[t])}}catch(a){s.e(a)}finally{s.f()}},checkUserGroupDeleteStatus:function(){this.numberOfUserGroupsDeleted>=this.numberOfUserGroupsToDelete?this.buildUserGroupData():this.deleteUserGroup(this.numberOfUserGroupsDeleted)},handleDeleteUserGroupSuccess:function(){appLog("Delete user group success..."),this.numberOfUserGroupsDeleted++,this.checkUserGroupDeleteStatus()},handleDeleteUserGroupFailure:function(e){appLog("Delete user group failure: "+e),this.numberOfUserGroupsDeleted++,this.checkUserGroupDeleteStatus()},deleteUserGroup:function(e){var r=this.userGroupsToDelete[e];window.repo.deleteRegistered(r,this.handleDeleteUserGroupSuccess,this.handleDeleteUserGroupFailure)},deleteCurrentUserGroupAndSubGroups:function(){this.userGroupBusy=!0,this.showConfirmDeleteUserGroupModal=!1,this.userGroupsToDelete=[],this.numberOfUserGroupsDeleted=0,this.addCurrentUserGroupSubGroupsToGroupsToDelete(),this.userGroupsToDelete.push(this.currentUserGroup),this.numberOfUserGroupsToDelete=this.userGroupsToDelete.length,this.currentUserGroup.memberOf&&""!==this.currentUserGroup.memberOf?this.userGroupIdToShowAfterReload=this.currentUserGroup.memberOf:this.userGroupIdToShowAfterReload="",this.deleteUserGroup(0)},setCurrentUserGroupValidationsChecksToValid:function(){this.currentUserGroupInvalid=!1,this.currentUserGroupNameInvalid=!1,this.currentUserGroupDescriptionInvalid=!1},validateCurrentUserGroupFields:function(){this.setCurrentUserGroupValidationsChecksToValid(),this.currentUserGroupName&&!this.currentUserGroupName.trim().equals("")||(this.currentUserGroupInvalid=!0,this.currentUserGroupNameInvalid=!0),this.currentUserGroupDescription&&!this.currentUserGroupDescription.trim().equals("")||(this.currentUserGroupInvalid=!0,this.currentUserGroupDescriptionInvalid=!0)},checkUserGroupSaveStatus:function(){this.numberOfUserGroupsSaved>=this.numberOfUserGroupsToSave?(this.currentUserGroupChanged=!1,this.buildUserGroupData()):this.saveUserGroup(this.numberOfUserGroupsSaved)},handleSaveUserGroupSuccess:function(){appLog("Save user group success..."),this.numberOfUserGroupsSaved++,this.checkUserGroupSaveStatus()},handleSaveUserGroupFailure:function(e){appLog("Save user group failure: "+e),this.numberOfUserGroupsSaved++,this.checkUserGroupSaveStatus()},saveUserGroup:function(e){var r=this,s=this.userGroupsToSave[e];this.currentUserGroupNeedsRekey?(appLog("Calling group save with rekey: "+s.shortId()),setTimeout((function(){s.rekeyAndSave(r.handleSaveUserGroupSuccess,r.handleSaveUserGroupFailure,window.repo)}),300)):s.save(this.handleSaveUserGroupSuccess,this.handleSaveUserGroupFailure,window.repo)},updateCurrentUserGroupMemberList:function(){this.currentUserGroup.employee=[],this.currentUserGroup.owner=[],this.currentUserGroup.reader=[];var e,r=Object(i["a"])(this.currentUserGroupManagers);try{for(r.s();!(e=r.n()).done;){var s=e.value,t=this.getPersonEcPk(s);t&&(this.currentUserGroup.addEmployee(s),this.currentUserGroup.addOwner(t))}}catch(l){r.e(l)}finally{r.f()}var a,n=Object(i["a"])(this.currentUserGroupMembers);try{for(n.s();!(a=n.n()).done;){var o=a.value,u=this.getPersonEcPk(o);u&&(this.currentUserGroup.addEmployee(o),this.currentUserGroup.addReader(u))}}catch(l){n.e(l)}finally{n.f()}},pushRemovedMembersToSubGroupsForSave:function(){var e,r=[],s=Object(i["a"])(this.membersToRemove);try{for(s.s();!(e=s.n()).done;){var t=e.value,a=this.allPersonMap[t];if(a){var n=this.getPersonEcPk(a);if(n){var o,u=this.getSubGroupIdsForUserGroup(this.currentUserGroupId),l=Object(i["a"])(u);try{for(l.s();!(o=l.n()).done;){var c=o.value,d=this.userGroupMap[c];d&&this.isPersonalIdentityAnObjectOwner(d)&&d.employee.includes(t)&&(d.removeEmployeeById(t),d.removeOwner(n),d.removeReader(n),r.includes(d.shortId())||(this.userGroupsToSave.push(d),r.push(d.shortId())))}}catch(p){l.e(p)}finally{l.f()}}}}}catch(p){s.e(p)}finally{s.f()}},saveCurrentUserGroup:function(){this.validateCurrentUserGroupFields(),this.currentUserGroupInvalid||(this.userGroupBusy=!0,this.updateCurrentUserGroupMemberList(),this.currentUserGroup.name=this.currentUserGroupName,this.currentUserGroup.description=this.currentUserGroupDescription,this.userGroupIdToShowAfterReload=this.currentUserGroup.shortId(),this.userGroupsToSave=[],this.numberOfUserGroupsSaved=0,this.pushRemovedMembersToSubGroupsForSave(),this.currentUserGroupNeedsRekey=this.membersToRemove.length>0,this.userGroupsToSave.push(this.currentUserGroup),this.numberOfUserGroupsToSave=this.userGroupsToSave.length,this.saveUserGroup(0))},cancelCurrentUserGroupChanges:function(){this.currentUserGroupChanged=!1,this.currentUserGroupIsNewGroup?this.currentUserGroup.memberOf&&""!==this.currentUserGroup.memberOf?this.showGroupDetailsById(this.currentUserGroup.memberOf):this.showMemberListView():this.showGroupDetailsById(this.currentUserGroupId)},createNewUserGroup:function(e){var r=this;this.userGroupBusy=!0,this.currentUserGroupIsNewGroup=!0;var s=new EcOrganization;s.generateId(window.repo.selectedServer),s.setName("New User Group"),s.setDescription("New group of users"),s.employee=[],s.addEmployee(this.$store.state.user.loggedOnPerson),s.addOwner(this.getPersonalIdentityPk());var t=null;if(e){s.memberOf=e;var a=this.userGroupMap[e];t=this.buildUserGroupLineage(a,null)}setTimeout((function(){s.addOrgKey(EcPpk.generateKey()),r.showGroupDetails(s,t),r.userGroupBusy=!1}),300)},appendGroupSubGroupIdsToArray:function(e,r){var s=this.userGroupDisplayMap[e];if(s&&s.subGroups&&s.subGroups.length>0){var t,a=Object(i["a"])(s.subGroups);try{for(a.s();!(t=a.n()).done;){var n=t.value;r.push(n.id),this.appendGroupSubGroupIdsToArray(n.id,r)}}catch(o){a.e(o)}finally{a.f()}}},getSubGroupIdsForUserGroup:function(e){var r=[];return this.appendGroupSubGroupIdsToArray(e,r),r},createSubGroupForCurrentUserGroup:function(){this.createNewUserGroup(this.currentUserGroupId)},setCurrentUserGroupManagerAndUserListsForDetailView:function(){if(this.currentUserGroupManagers=[],this.currentUserGroupMembers=[],this.currentUserGroup.employee){var e,r=Object(i["a"])(this.currentUserGroup.employee);try{for(r.s();!(e=r.n()).done;){var s=e.value,t=this.allPersonMap[s];t&&(this.isPersonIdAnObjectOwner(s,this.currentUserGroup)&&this.currentUserGroupManagers.push(t),this.isPersonIdAnObjectReader(s,this.currentUserGroup)&&this.currentUserGroupMembers.push(t))}}catch(a){r.e(a)}finally{r.f()}}},generateLineageObject:function(e){var r={};return r.name=e.getName(),r.id=e.shortId(),r},fillOutLineage:function(e,r){r&&(e.unshift(this.generateLineageObject(r)),r.memberOf&&""!==r.memberOf&&this.fillOutLineage(e,this.userGroupMap[r.memberOf]))},buildUserGroupLineage:function(e,r){var s=[];return r?(s=r,s.push(this.generateLineageObject(e))):this.fillOutLineage(s,e),s},showGroupDetails:function(e,r){e&&(this.membersToRemove=[],this.userGroupsToSave=[],this.userGroupsToDelete=[],this.setCurrentUserGroupValidationsChecksToValid(),this.currentUserGroupChanged=this.currentUserGroupIsNewGroup,this.currentUserGroup=e,this.currentUserGroupId=e.shortId(),this.currentUserGroupNeedsRekey=!1,this.isEditingCurrentGroupName=!1,this.isEditingCurrentGroupDescription=!1,this.currentUserGroupName=this.currentUserGroup.getName(),this.currentUserGroupDescription=this.currentUserGroup.getDescription(),this.currentUserGroupIsManager=this.doesAnyIdentityOwnObject(this.currentUserGroup),this.setCurrentUserGroupManagerAndUserListsForDetailView(),this.currentUserGroupLineage=this.buildUserGroupLineage(this.currentUserGroup,r),this.showGroupDetailView())},showGroupDetailsById:function(e){this.currentUserGroupChanged?(this.toId=e,this.showConfirmLoseChanges(e)):(this.switchUserGroupDetailsById(e),this.groupsDropdownActive=!1)},switchUserGroupDetailsById:function(e){var r=this.userGroupMap[e];r?(this.currentUserGroupIsNewGroup=!1,this.showGroupDetails(r,null),this.groupsDropdownActive=!1):appLog("Cannot find user group: "+e)},showConfirmLoseChanges:function(e){this.toId=e,this.showConfirmLoseChangesModal=!0},truncateString:function(e,r){return e.length<=r?e:e.slice(0,r)+"..."},confirmLoseChanges:function(){this.switchUserGroupDetailsById(this.toId),this.toId="",this.showConfirmLoseChangesModal=!1},confirmLoseChangesAndNav:function(){this.showConfirmLoseChangesModal=!1,this.currentUserGroupChanged=!1,this.$router.push(this.toRoute.name)},cancelLoseChanges:function(){this.toId="",this.showConfirmLoseChangesModal=!1},sortUserGroupList:function(e){var r=this;e.sort((function(e,s){var t=r.doesAnyIdentityOwnObject(e),a=r.doesAnyIdentityOwnObject(s);return t!==a?a?1:-1:e.getName()>s.getName()?1:s.getName()>e.getName()?-1:0}))},buildUserGroupMap:function(e){this.userGroupMap={};var r,s=Object(i["a"])(e);try{for(s.s();!(r=s.n()).done;){var t=r.value;this.userGroupMap[t.shortId()]=t}}catch(a){s.e(a)}finally{s.f()}},buildUserGroupDisplayObjects:function(e){var r,s={doMap:{},doList:[]},t=Object(i["a"])(e);try{for(t.s();!(r=t.n()).done;){var a=r.value,n={};n.id=a.shortId(),n.name=a.getName(),a.memberOf&&""!==a.memberOf&&this.userGroupMap[a.memberOf]&&(n.memberOf=a.memberOf),n.subGroups=[],s.doMap[n.id]=n,s.doList.push(n)}}catch(o){t.e(o)}finally{t.f()}return s},assignUserGroupDisplayObjectsSubGroups:function(e){var r,s=Object(i["a"])(e.doList);try{for(s.s();!(r=s.n()).done;){var t=r.value;t.memberOf&&e.doMap[t.memberOf].subGroups.push(t)}}catch(a){s.e(a)}finally{s.f()}},addRootUserGroupsToUserGroupDisplayList:function(e){var r,s=Object(i["a"])(e.doList);try{for(s.s();!(r=s.n()).done;){var t=r.value;t.memberOf||this.userGroupDisplayList.push(t)}}catch(a){s.e(a)}finally{s.f()}},buildUserGroupDisplayList:function(e){this.userGroupDisplayList=[],this.userGroupDisplayMap={};var r=this.buildUserGroupDisplayObjects(e);this.assignUserGroupDisplayObjectsSubGroups(r),this.addRootUserGroupsToUserGroupDisplayList(r),this.userGroupDisplayMap=r.doMap},buildInitialGroupMembersDisplayData:function(){var e,r={gmList:[],gmMap:{}},s=Object(i["a"])(this.allPersonList);try{for(s.s();!(e=s.n()).done;){var t=e.value,a={};a.name=t.getName(),a.email=t.email,a.managerOf=[],a.memberOf=[],r.gmList.push(a),r.gmMap[t.getFingerprint()]=a}}catch(n){s.e(n)}finally{s.f()}return r},addMembershipData:function(e,r,s,t){if(s){var a,n=Object(i["a"])(s);try{for(n.s();!(a=n.n()).done;){var o=a.value,u=EcPk.fromPem(o).fingerprint();if(e[u]){var l={};l.name=t.getName(),l.id=t.shortId(),e[u][r].push(l)}}}catch(c){n.e(c)}finally{n.f()}}},fillOutMembershipData:function(e){for(var r=0,s=Object.keys(this.userGroupMap);r<s.length;r++){var t=s[r],a=this.userGroupMap[t];this.addMembershipData(e.gmMap,"managerOf",a.owner,a),this.addMembershipData(e.gmMap,"memberOf",a.reader,a)}},filterOutNonMembers:function(e){var r,s=Object(i["a"])(e.gmList);try{for(s.s();!(r=s.n()).done;){var t=r.value;(t.managerOf.length>0||t.memberOf.length>0)&&this.allGroupMembersList.push(t)}}catch(a){s.e(a)}finally{s.f()}},sortMembershipData:function(e){e.sort((function(e,r){return e.name>r.name?1:-1}))},sortGroupMemberListMembershipData:function(){var e,r=Object(i["a"])(this.allGroupMembersList);try{for(r.s();!(e=r.n()).done;){var s=e.value;this.sortMembershipData(s.managerOf),this.sortMembershipData(s.memberOf)}}catch(t){r.e(t)}finally{r.f()}},buildGroupMembersDisplayList:function(){this.allGroupMembersList=[];var e=this.buildInitialGroupMembersDisplayData();this.fillOutMembershipData(e),this.filterOutNonMembers(e),this.sortGroupMemberListMembershipData()},searchRepositoryForGroupsSuccess:function(e){var r=[];if(e&&e.length>0&&(r=e,this.sortUserGroupList(r)),this.buildUserGroupMap(r),this.buildUserGroupDisplayList(r),this.buildGroupMembersDisplayList(),this.userGroupIdToShowAfterReload&&this.userGroupIdToShowAfterReload.trim().length>0&&this.userGroupMap[this.userGroupIdToShowAfterReload]){var s=this.userGroupIdToShowAfterReload;this.userGroupIdToShowAfterReload="",this.showGroupDetailsById(s)}else this.showMemberListView();this.userGroupBusy=!1},searchRepositoryForGroupsFailure:function(e){appLog("Group search failure: "+e),this.userGroupBusy=!1},buildGroupListData:function(){var e={};e.size=this.GROUP_SEARCH_SIZE,EcOrganization.search(window.repo,"",this.searchRepositoryForGroupsSuccess,this.searchRepositoryForGroupsFailure,e)},sortAllPersonList:function(){this.allPersonList.sort((function(e,r){return e.getName()>r.getName()?1:r.getName()>e.getName()?-1:0}))},buildAllPersonMap:function(){this.allPersonMap={};var e,r=Object(i["a"])(this.allPersonList);try{for(r.s();!(e=r.n()).done;){var s=e.value;this.allPersonMap[s.shortId()]=s}}catch(t){r.e(t)}finally{r.f()}},fetchPersonListForDetailViewSuccess:function(e){this.allPersonList=e,this.sortAllPersonList(),this.buildAllPersonMap(),this.buildGroupListData()},fetchPersonListForDetailViewFailure:function(e){appLog("Person search failure: "+e),this.userGroupBusy=!1},buildUserGroupData:function(){this.userGroupBusy=!0;var e={};e.size=this.PERSON_SEARCH_SIZE,EcPerson.search(window.repo,"",this.fetchPersonListForDetailViewSuccess,this.fetchPersonListForDetailViewFailure,e)}},mounted:function(){this.buildUserGroupData()}},A=S,E=(s("7685"),Object(c["a"])(A,t,a,!1,null,null,null));r["default"]=E.exports},5883:function(e,r,s){},"61e0":function(e,r,s){"use strict";var t=s("334a"),a=s.n(t);a.a},"6d79":function(e,r,s){"use strict";s.d(r,"a",(function(){return i}));s("caad"),s("d3b7"),s("ac1f"),s("25f0"),s("2532"),s("841c");var t=s("54f8"),a=(s("96cf"),s("c964")),i={name:"cassUtil",data:function(){return{}},methods:{getOrganizationByEcPk:function(e,r,s){var i=e.toPem(),n={size:1e4};EcOrganization.search(window.repo,"",function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(a){var n,o,u,l,c,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Object(t["a"])(a),e.prev=1,n.s();case 3:if((o=n.n()).done){e.next=34;break}return u=o.value,e.prev=5,e.next=8,u.getOrgKeys();case 8:l=e.sent,c=Object(t["a"])(l),e.prev=10,c.s();case 12:if((d=c.n()).done){e.next=19;break}if(p=d.value,!p||!p.toPk().toPem().equals(i)){e.next=17;break}return r(u),e.abrupt("return");case 17:e.next=12;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](10),c.e(e.t0);case 24:return e.prev=24,c.f(),e.finish(24);case 27:e.next=32;break;case 29:e.prev=29,e.t1=e["catch"](5),s(e.t1.toString());case 32:e.next=3;break;case 34:e.next=39;break;case 36:e.prev=36,e.t2=e["catch"](1),n.e(e.t2);case 39:return e.prev=39,n.f(),e.finish(39);case 42:r(null);case 43:case"end":return e.stop()}}),e,null,[[1,36,39,42],[5,29],[10,21,24,27]])})));return function(r){return e.apply(this,arguments)}}(),(function(e){s(e)}),n)},getOrganizationEcPk:function(e){return Object(a["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.getCurrentOrgKey();case 3:return r.abrupt("return",r.sent.toPk());case 6:return r.prev=6,r.t0=r["catch"](0),r.abrupt("return",null);case 9:case"end":return r.stop()}}),r,null,[[0,6]])})))()},getPersonEcPk:function(e){var r=this.generateProbablePersonFingerprintFromShortId(e.shortId());if(e.owner){var s,a=Object(t["a"])(e.owner);try{for(a.s();!(s=a.n()).done;){var i=s.value,n=EcPk.fromPem(i);if(r.equals(n.fingerprint()))return n}}catch(o){a.e(o)}finally{a.f()}}return null},addAllOwnersFromObjectToObject:function(e,r){if(e&&e.owner){var s,a=Object(t["a"])(e.owner);try{for(a.s();!(s=a.n()).done;){var i=s.value,n=EcPk.fromPem(i);r.addOwner(n)}}catch(o){a.e(o)}finally{a.f()}}},setDefaultBrowserConfigId:function(e){localStorage.setItem("cassAuthoringToolDefaultBrowserConfigId",e)},removeDefaultBrowserConfig:function(){localStorage.removeItem("cassAuthoringToolDefaultBrowserConfigId")},getDefaultBrowserConfigId:function(){return localStorage.getItem("cassAuthoringToolDefaultBrowserConfigId")},getBooleanValue:function(e){return"boolean"===typeof e?e:"string"===typeof e&&!!e.equalsIgnoreCase("true")},addAllIdentityPksAsOwners:function(e){if(EcIdentityManager&&EcIdentityManager.default.ids&&EcIdentityManager.default.ids.length>0)for(var r=0;r<EcIdentityManager.default.ids.length;r++)e.addOwner(EcIdentityManager.default.ids[r].ppk.toPk())},isObjectOwnerless:function(e){return!e.owner||0===e.owner.length},doesAnyIdentityOwnObject:function(e){if(!EcIdentityManager||!EcIdentityManager.default.ids||EcIdentityManager.default.ids.length<=0)return!1;for(var r=0;r<EcIdentityManager.default.ids.length;r++)if(e.hasOwner(EcIdentityManager.default.ids[r].ppk.toPk()))return!0;return!1},generateProbablePersonFingerprintFromShortId:function(e){return e.substring(e.lastIndexOf("/")+1)},isPersonIdAnObjectOwner:function(e,r){if(!r.owner||0===r.owner.length)return!1;var s,a=this.generateProbablePersonFingerprintFromShortId(e),i=Object(t["a"])(r.owner);try{for(i.s();!(s=i.n()).done;){var n=s.value,o=EcPk.fromPem(n).fingerprint();if(o.equals(a))return!0}}catch(u){i.e(u)}finally{i.f()}return!1},isPersonIdAnObjectReader:function(e,r){if(!r.reader||0===r.reader.length)return!1;var s,a=this.generateProbablePersonFingerprintFromShortId(e),i=Object(t["a"])(r.reader);try{for(i.s();!(s=i.n()).done;){var n=s.value,o=EcPk.fromPem(n).fingerprint();if(o.equals(a))return!0}}catch(u){i.e(u)}finally{i.f()}return!1},areAnyIdentitiesThisPerson:function(e){var r=e.getFingerprint();if(EcIdentityManager&&EcIdentityManager.default.ids&&EcIdentityManager.default.ids.length>0)for(var s=0;s<EcIdentityManager.default.ids.length;s++)if(EcIdentityManager.default.ids[s].ppk.toPk().fingerprint().equals(r))return!0;return!1},isPersonalIdentityAnObjectOwner:function(e){if(!e.owner||0===e.owner.length)return!1;var r=this.getPersonalIdentityPk().toPem();return e.owner.includes(r)},getPersonalIdentityPk:function(){return EcIdentityManager&&EcIdentityManager.default.ids&&EcIdentityManager.default.ids.length>0?EcIdentityManager.default.ids[0].ppk.toPk():null},buildEcAlignmentsFromRemoteLinkedData:function(e){var r,s=[],a=Object(t["a"])(e);try{for(a.s();!(r=a.n()).done;){var i=r.value,n=new EcAlignment;n.copyFrom(i),s.push(n)}}catch(o){a.e(o)}finally{a.f()}return s}},computed:{amLoggedIn:function(){return!!(EcIdentityManager&&EcIdentityManager.default.ids&&EcIdentityManager.default.ids.length>0)}}}},7685:function(e,r,s){"use strict";var t=s("5883"),a=s.n(t);a.a},"8fdc":function(e,r,s){},"984b":function(e,r,s){},a907:function(e,r,s){},ad86:function(e,r,s){"use strict";var t=s("a907"),a=s.n(t);a.a},af07:function(e,r,s){"use strict";var t=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"modal cass-editor___modal",class:[{"is-active":e.active},"is-"+e.size,"cass-editor__modal--"+e.content],attrs:{id:"cass-modal"}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-card",class:"cass-editor__modal-card--"+e.size},[s("header",{staticClass:"modal-card-head is-size-4 has-text-weight-bold",class:["has-background-"+e.type,"has-text-"+e.fontColor]},[s("p",{staticClass:"modal-card-title"},[e._t("modal-header")],2),e.canClose?s("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(r){e.$store.commit("app/closeModal"),e.$emit("close")}}}):e._e()]),s("div",{staticClass:"modal-card-body has-text-dark"},[e._t("modal-body")],2),s("footer",{staticClass:"modal-card-foot has-background-white"},[e._t("modal-foot")],2)])])},a=[],i=(s("984b"),{name:"ModalTemplate",props:{canClose:{type:Boolean,default:!0},active:{type:Boolean,default:!1},type:{default:"primary",type:String},fontColor:{type:String,default:"white"},size:{type:String,default:"medium"},content:{defualt:"default",type:String}},data:function(){return{}},computed:{}}),n=i,o=(s("ad86"),s("2877")),u=Object(o["a"])(n,t,a,!1,null,null,null);r["a"]=u.exports},df2f:function(e,r,s){},f7ca:function(e,r,s){"use strict";var t=s("df2f"),a=s.n(t);a.a}}]);
//# sourceMappingURL=userGroupEditor.e06b4dec.js.map