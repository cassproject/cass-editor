(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d3a5e010"],{"040c":function(e,t,r){},"09d8":function(e,t,r){"use strict";var i=r("48dd"),s=r.n(i);s.a},"3e24":function(e,t,r){},"48dd":function(e,t,r){},6675:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",{staticClass:"comment-list-item"},[r("li",{staticClass:"comment-list__user",attrs:{title:e.comment.creatorEmail}},[e._v(" "+e._s(e.comment.creatorName)+" ")]),r("li",{staticClass:"comment-list__email"},[e._v(" "+e._s(e.comment.creatorEmail)+" ")]),r("li",{staticClass:"comment-list__timestamp"},[e._v(" "+e._s(e.toPrettyDateString(e.comment.dateCreated))+" ")]),r("li",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closeCommentListDropDown,expression:"closeCommentListDropDown"}],staticClass:"comment-list__message-container"},[e.comment.canModify?r("div",{staticClass:"dropdown",class:{"is-active":e.commentListDropDownActive}},[r("div",{staticClass:"dropdown-trigger"},[r("button",{staticClass:"button is-text has-text-dark",attrs:{"aria-haspopup":"true","aria-controls":"dropdown-menu"},on:{click:function(t){e.commentListDropDownActive=!e.commentListDropDownActive}}},[e._m(0)])]),r("div",{staticClass:"dropdown-menu",attrs:{id:"dropdown-menu",role:"menu"}},[r("div",{staticClass:"dropdown-content"},[r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:e.handleClickEdit}},[e._v(" edit ")]),r("a",{staticClass:"dropdown-item",on:{click:e.handleClickDelete}},[e._v(" delete ")])])])]):e._e(),r("div",{staticClass:"comment-list__message-container__message",class:{"show-more":e.showMore}},[e._v(" "+e._s(e.comment.commentText)+" ")]),e.comment.commentText.length>90?r("div",{staticClass:"buttons is-right"},[e.showMore?r("div",{staticClass:"button is-text has-text-primary",on:{click:function(t){e.showMore=!1}}},[e._v(" show less ")]):r("div",{staticClass:"button is-text has-text-primary",on:{click:function(t){e.showMore=!0}}},[e._v(" show more ")])]):e._e()]),e.comment.lastEditDate?r("li",{staticClass:"comment-list__message_edit"},[e._v(" *Edited: "+e._s(e.toPrettyDateString(e.comment.lastEditDate))+" ")]):e._e(),e._m(1),e.comment.replies.length>0?r("li",e._l(e.comment.replies,(function(e){return r("comment",{key:e.commentId,attrs:{comment:e,canReply:!1}})})),1):e._e()])},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon has-text-primary"},[r("i",{staticClass:"fas fa-ellipsis-v"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",{staticClass:"comment-list__reply_hr"},[r("hr")])}],o=(r("d3b7"),r("54f8")),a=r("872c"),c={name:"Comment",mixins:[a["a"]],components:{comment:function(){return Promise.resolve().then(r.bind(null,"6675"))}},props:{comment:{type:Object},canReply:{type:Boolean,default:!1}},data:function(){return{showMore:!1,commentListDropDownActive:!1}},methods:{closeCommentListDropDown:function(){this.commentListDropDownActive=!1},handleClickReply:function(){this.$store.commit("editor/setAddCommentAboutId",this.comment.aboutId),this.$store.commit("editor/setAddCommentType","reply"),this.$store.commit("editor/setCommentToReply",this.comment.comment),this.$store.commit("app/showModal",{component:"AddComment"})},handleClickEdit:function(){this.commentListDropDownActive=!1,this.$store.commit("editor/setAddCommentAboutId",this.comment.aboutId),this.$store.commit("editor/setAddCommentType","edit"),this.$store.commit("editor/setCommentToEdit",this.comment.comment),this.$store.commit("app/showModal",{component:"AddComment"})},handleClickEditReply:function(e){this.$store.commit("editor/setAddCommentAboutId",this.comment.aboutId),this.$store.commit("editor/setAddCommentType","edit"),this.$store.commit("editor/setCommentToEdit",this.comment.replies[e].comment),this.$store.commit("app/showModal",{component:"AddComment"})},handleClickDelete:function(){var e=[];if(e.push(this.comment.comment),this.comment.replies&&this.comment.replies.length>0){var t,r=Object(o["a"])(this.comment.replies);try{for(r.s();!(t=r.n()).done;){var i=t.value;e.push(i.comment)}}catch(s){r.e(s)}finally{r.f()}}this.$store.commit("editor/setCommentsToDelete",e),this.$store.commit("app/showModal",{component:"DeleteCommentConfirm"})},handleClickDeleteReply:function(e){var t=[];t.push(this.comment.replies[e].comment),this.$store.commit("editor/setCommentsToDelete",t),this.$store.commit("app/showModal",{component:"DeleteCommentConfirm"})}},computed:{commentId:function(){return this.comment.commentId}}},n=c,l=r("2877"),m=Object(l["a"])(n,i,s,!1,null,null,null);t["default"]=m.exports},"94fc":function(e,t,r){"use strict";var i=r("3e24"),s=r.n(i);s.a},d57a:function(e,t,r){"use strict";var i=r("d921"),s=r.n(i);s.a},d921:function(e,t,r){},dd98:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("aside",{staticClass:"has-background-light",attrs:{id:"right-side-bar"}},[r("div",{staticClass:"cass--right-aside--top-bar"},[r("button",{staticClass:"delete has-text-white",attrs:{"aria-label":"close"},on:{click:function(t){return e.$store.commit("app/closeRightAside")}}},[e._m(0)]),r("div",{staticClass:"cass--right-aside--title"},["FilterAndSort"===e.rightAsideContent?r("span",[e._v(" Filter & sort ")]):"ListItemInfo"===e.rightAsideContent?r("span",[e._v(" Information ")]):"Comments"===e.rightAsideContent?r("span",[e._v(" Comments ")]):e._e()])]),e._t("right-aside-content",[r(e.rightAsideContent,{tag:"Component",on:{editResourceDetails:function(t){return e.$emit("editResource",t)}}})])],2)},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-times"})])}],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"has-background-lightest",attrs:{id:"right-side-bar__comments"}},[e.isCommentsBusy?r("div",{staticClass:"has-text-centered"},[e._m(0)]):e._e(),e.isCommentsBusy?e._e():r("div",[e.commentWrapperList.length<=0?r("div",{staticClass:"has-text-centered"},[e._m(1)]):e._e(),e.commentWrapperList.length>0?e._l(e.commentWrapperList,(function(t,i){return r("div",{key:i,staticClass:"comment-list"},[r("h4",{staticClass:"comment-list__about",on:{click:function(r){return e.setUpScroll(t)}}},[e._v(" "+e._s(t.aboutName)+" ")]),r("Comment",{key:t.commentId,attrs:{comment:t,canReply:e.canReplyToComments}}),r("div",{staticClass:"buttons is-right"},[r("div",{staticClass:"button is-small is-outlined is-primary",attrs:{title:"reply"},on:{click:function(r){return e.handleClickReply(t)}}},[e._m(2,!0),r("span",[e._v("reply")])])])],1)})):e._e()],2)])},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon is-large has-text-center has-text-link"},[r("i",{staticClass:"fas fa-2x fa-spinner is-info fa-pulse"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"has-text-center"},[r("p",[r("i",{staticClass:"fa fa-exclamation-circle"}),e._v(" No comments available")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-reply"})])}],c=(r("caad"),r("b0c0"),r("ac1f"),r("841c"),r("1276"),r("96cf"),r("c964")),n=r("54f8"),l=r("6675"),m=r("872c"),d={name:"Comments",mixins:[m["a"]],data:function(){return{COMMENT_SEARCH_SIZE:1e4,isCommentsBusy:!1,localFrameworkCommentList:[],commentAboutMap:{},commentWrapperList:[],commentWrapperMap:{},canReplyToComments:!1}},components:{Comment:l["default"]},methods:{setUpScroll:function(e){var t={ts:Date.now(),scrollId:"#scroll-"+e.aboutId.split("/").pop()};this.$store.commit("editor/setCommentScrollTo",t)},handleClickReply:function(e){this.$store.commit("editor/setAddCommentAboutId",e.aboutId),this.$store.commit("editor/setAddCommentType","reply"),this.$store.commit("editor/setCommentToReply",e.comment),this.$store.commit("app/showModal",{component:"AddComment"})},determineCanModifyComment:function(e){return!!this.loggedOnPerson.shortId().equals(e.creator)},buildCommentWrapper:function(e,t,r){var i={},s=this.frameworkCommentPersonMap[e.creator];return i.comment=e,i.creator=s,i.aboutId=e.about,i.aboutName=t,i.commentId=e.shortId(),i.creatorName=s.name,i.creatorEmail=s.email,i.dateCreated=e.dateCreated-0,e.lastEditDate&&(i.lastEditDate=e.lastEditDate-0),i.commentText=e.text,i.isTopLevel=r,i.canModify=this.determineCanModifyComment(e),i.replies=[],i},buildFrameworkCommentWrappers:function(){var e=this.commentAboutMap[this.currentFramework.shortId()];if(e&&e.length>0){var t,r=Object(n["a"])(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,s=this.buildCommentWrapper(i,this.currentFramework.getName(),!0);this.commentWrapperList.push(s),this.commentWrapperMap[i.shortId()]=s}}catch(o){r.e(o)}finally{r.f()}}},getCompetencyName:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,EcRepository.get(e);case 2:if(r=t.sent,!r){t.next=7;break}return t.abrupt("return",r.getName());case 7:return t.abrupt("return","Unknown Competency");case 8:case"end":return t.stop()}}),t)})))()},buildCompetencyCommentWrappers:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,r,i,s,o,a,c,l,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.currentFramework.competency){e.next=23;break}t=Object(n["a"])(this.currentFramework.competency),e.prev=2,t.s();case 4:if((r=t.n()).done){e.next=15;break}if(i=r.value,s=this.commentAboutMap[i],!(s&&s.length>0)){e.next=13;break}return e.next=10,this.getCompetencyName(i);case 10:o=e.sent,a=Object(n["a"])(s);try{for(a.s();!(c=a.n()).done;)l=c.value,m=this.buildCommentWrapper(l,o,!0),this.commentWrapperList.push(m),this.commentWrapperMap[l.shortId()]=m}catch(d){a.e(d)}finally{a.f()}case 13:e.next=4;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](2),t.e(e.t0);case 20:return e.prev=20,t.f(),e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[2,17,20,23]])})));function t(){return e.apply(this,arguments)}return t}(),addRepliesToParentWrapper:function(e){var t,r=Object(n["a"])(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,s=this.commentWrapperMap[i],o=s.aboutId,a=this.commentWrapperMap[o];a&&a.replies.push(s)}}catch(c){r.e(c)}finally{r.f()}},buildReplyCommentWrappers:function(){var e,t=[],r=Object(n["a"])(this.frameworkCommentList);try{for(r.s();!(e=r.n()).done;){var i=e.value,s=i.shortId(),o=this.commentAboutMap[s];if(o&&o.length>0){var a,c=Object(n["a"])(o);try{for(c.s();!(a=c.n()).done;){var l=a.value,m=this.buildCommentWrapper(l,"reply",!1);this.commentWrapperMap[l.shortId()]=m,t.push(l.shortId())}}catch(d){c.e(d)}finally{c.f()}}}}catch(d){r.e(d)}finally{r.f()}this.addRepliesToParentWrapper(t)},buildCommentDisplayStructures:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.buildFrameworkCommentWrappers(),e.next=3,this.buildCompetencyCommentWrappers();case 3:this.buildReplyCommentWrappers();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),buildCommentAboutMap:function(){var e,t=Object(n["a"])(this.frameworkCommentList);try{for(t.s();!(e=t.n()).done;){var r=e.value,i=r.about;this.commentAboutMap[i]||(this.commentAboutMap[i]=[]),this.commentAboutMap[i].push(r)}}catch(s){t.e(s)}finally{t.f()}},parseComments:function(){this.currentFramework?(this.isCommentsBusy=!0,this.commentAboutMap={},this.commentWrapperList=[],this.commentWrapperMap={},this.buildCommentAboutMap(),this.buildCommentDisplayStructures(),this.isCommentsBusy=!1):this.clearAllFrameworkCommentData()},buildFrameworkCommentPersonMapSuccess:function(e){var t,r={},i=Object(n["a"])(e);try{for(i.s();!(t=i.n()).done;){var s=t.value;r[s.shortId()]=s}}catch(o){i.e(o)}finally{i.f()}this.$store.commit("editor/setFrameworkCommentDataLoaded",!0),this.$store.commit("editor/setFrameworkCommentPersonMap",r),this.$store.commit("editor/setFrameworkCommentList",this.localFrameworkCommentList)},buildFrameworkCommentPersonMapFailure:function(e){appLog("buildFrameworkCommentPersonMapFailure: "+e),this.isCommentsBusy=!1},buildCommentCreatorList:function(){var e,t=[],r=Object(n["a"])(this.localFrameworkCommentList);try{for(r.s();!(e=r.n()).done;){var i=e.value;t.includes(i.creator)||t.push(i.creator)}}catch(s){r.e(s)}finally{r.f()}return t},buildFrameworkCommentPersonMap:function(){var e=this.buildCommentCreatorList();e.length>0?window.repo.multiget(e,this.buildFrameworkCommentPersonMapSuccess,this.buildFrameworkCommentPersonMapFailure):this.buildFrameworkCommentPersonMapSuccess([])},sortLocalFrameworkCommentList:function(){this.localFrameworkCommentList.sort((function(e,t){return e.dateCreated-0>t.dateCreated-0?1:t.dateCreated-0>e.dateCreated-0?-1:0}))},buildFrameworkCommentListSuccess:function(e){this.localFrameworkCommentList=e,this.sortLocalFrameworkCommentList(),this.buildFrameworkCommentPersonMap()},buildFrameworkCommentListFailure:function(e){appLog("buildFrameworkCommentListFailure: "+e),this.isCommentsBusy=!1},clearAllFrameworkCommentData:function(){this.isCommentsBusy=!1,this.localFrameworkCommentList=[],this.commentAboutMap={},this.commentWrapperList=[],this.commentWrapperMap={},this.canReplyToComments=!1},buildFrameworkCommentList:function(){if(this.currentFramework){var e={};e.size=this.COMMENT_SEARCH_SIZE,EcComment.search(window.repo,'isBasedOn:"'+this.currentFramework.shortId()+'"',this.buildFrameworkCommentListSuccess,this.buildFrameworkCommentListFailure,null)}else this.clearAllFrameworkCommentData()},buildCommentDataSet:function(){!this.frameworkCommentList||this.frameworkCommentList.length<=0?(this.isCommentsBusy=!0,this.buildFrameworkCommentList()):this.parseComments()}},computed:{loggedOnPerson:function(){return this.$store.getters["user/loggedOnPerson"]},currentFramework:function(){return this.$store.getters["editor/framework"]},currentFrameworkCompetencies:function(){return this.$store.getters["editor/framework"].competency},frameworkCommentList:function(){return this.$store.getters["editor/frameworkCommentList"]},frameworkCommentPersonMap:function(){return this.$store.getters["editor/frameworkCommentPersonMap"]}},watch:{currentFrameworkCompetencies:function(){this.parseComments()},frameworkCommentList:function(){this.parseComments()}},mounted:function(){this.buildCommentDataSet(),this.canReplyToComments=this.canAddCommentsCurrentFramework()}},h=d,p=(r("94fc"),r("2877")),u=Object(p["a"])(h,o,a,!1,null,null,null),f=u.exports,y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("aside",{staticClass:"menu has-background-light",attrs:{id:"comments-side-bar"}},[r("p",{staticClass:"subtitle is-size-4"},[r("span",{staticClass:"icon",on:{click:function(t){return e.$store.commit("app/closeRightAside")}}},[r("i",{staticClass:"fa fa-caret-right"})]),e._v(" Version History ")])])},v=[],b={name:"Versions",data:function(){return{isCommenter:!0,isAdmin:!1,isViewer:!0}},components:{}},g=b,C=(r("eeb6"),Object(p["a"])(g,y,v,!1,null,null,null)),_=C.exports,w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"has-background-lightest",attrs:{id:"cass__right-aside"}},[r("div",{staticClass:"cass__right-aside--header"},[r("div",{staticClass:"right-aside-bar__title"},[r("span",{staticClass:"help"},[e._v(e._s(e.objectTypeForDisplay))]),r("div",{staticClass:"right-aside-bar--title-text is-size-4 is-family-secondary",attrs:{title:e.objectName}},[e._v(" "+e._s(e.objectName)+" ")]),e.objectShortId!==e.selectedDirectoryId?r("div",{staticClass:"buttons pt-2"},[r("div",{staticClass:"button is-small is-rounded is-primary",on:{click:e.openObject}},[r("span",[e._v("Open "+e._s(e.objectTypeForDisplay))]),e._m(0)])]):e._e()])]),r("div",{staticClass:"cass__right-aside--body"},[r("div",{staticClass:"cass__right-side--details"},[r("div",{staticClass:"cass__right-side--details-wrapper"},["Directory"===e.objectType||"Framework"===e.objectType||"ConceptScheme"===e.objectType?[r("button",{staticClass:"cass__right-side--accordion details",on:{click:function(t){return e.clickAccordion("details")}}},[e._v(" Details "),r("span",{staticClass:"icon is-pulled-right"},["details"===e.accordion?r("i",{staticClass:"fa fa-minus"}):r("i",{staticClass:"fa fa-plus"})])]),r("div",{staticClass:"cass__right-side--accordion-panel details",class:"details"===e.accordion?"active":""},[e._m(1),r("div",{staticClass:"cass__right-aside--half-item"},[e._v(" "+e._s(e.lastModified)+" ")]),e.object.directory&&e.object.directory!==e.selectedDirectoryId?[e._m(2),r("div",{staticClass:"cass__right-aside--half-item"},[e._v(" "+e._s(e.getName(e.object.directory))+" "),r("span",{staticClass:"button is-primary is-outlined is-small",on:{click:e.goToParentDirectory}},[e._v(" Open ")])])]:e.object.parentDirectory&&e.object.parentDirectory!==e.selectedDirectoryId?[e._m(3),r("div",{staticClass:"cass__right-aside--half-item"},[e._v(" "+e._s(e.getName(e.object.parentDirectory))+" "),r("span",{staticClass:"inline-link is-small",attrs:{title:"Navigate to parent directory"},on:{click:e.goToParentDirectory}},[r("span",[e._v("Go to parent")]),e._m(4)])])]:e._e(),e._m(5),r("div",{staticClass:"cass__right-aside--half-item"},[e._v(" "+e._s(e.dateCreated)+" ")]),"Directory"===e.objectType?r("div",{staticClass:"cass__right-aside--half-item"},[r("b",[e._v("Subdirectories:")])]):e._e(),"Directory"===e.objectType?r("div",{staticClass:"cass__right-aside--half-item"},[e._v(" "+e._s(e.numSubdirectories)+" ")]):e._e(),"Directory"===e.objectType?[e._m(6),r("div",{staticClass:"cass__right-aside--half-item"},[e._v(" "+e._s(e.numObjects)+" ")])]:"Framework"===e.objectType?[e._m(7),r("div",{staticClass:"cass__right-aside--half-item"},[e._v(" "+e._s(e.object.competency?e.object.competency.length:0)+" ")])]:e._e(),e.object.Published?[e._m(8),r("div",{staticClass:"cass__right-aside--half-item"},[e._v(" "+e._s(e.object.Published)+" ")])]:e._e(),e.object.Approved?[e._m(9),r("div",{staticClass:"cass__right-aside--half-item"},[e._v(" "+e._s(e.object.Approved)+" ")])]:e._e(),e.publisherName?[e._m(10),r("div",{staticClass:"cass__right-aside--half-item"},[e._v(" "+e._s(e.publisherName)+" ")])]:e._e(),e.creatorName?[e._m(11),r("div",{staticClass:"cass__right-aside--half-item"},[e._v(" "+e._s(e.creatorName)+" ")])]:e._e(),[e._m(12),r("div",{staticClass:"cass__right-aside--half-item"},[r("span",{directives:[{name:"clipboard",rawName:"v-clipboard",value:function(){return e.shareLink},expression:"() => shareLink"},{name:"clipboard",rawName:"v-clipboard:success",value:e.successfulClip,expression:"successfulClip",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.errorClip,expression:"errorClip",arg:"error"}],staticClass:"inline-link",attrs:{title:"Copy URL to the clipboard."}},[r("span",{attrs:{title:e.shareLink}},[e._v("copy link")]),r("span",{staticClass:"icon"},["success"===e.clipStatus?r("i",{staticClass:"fa fa-check"}):"error"===e.clipStatus?r("i",{staticClass:"fa fa-times"}):r("i",{staticClass:"fa fa-link",attrs:{name:"copyURL"}})])])])]],2)]:e._e(),"CreativeWork"===e.objectType||e.canEditObject&&"Directory"===e.objectType?[r("button",{staticClass:"cass__right-side--accordion details",on:{click:function(t){return e.clickAccordion("properties")}}},[e._v(" Properties "),r("span",{staticClass:"icon is-pulled-right"},["properties"===e.accordion?r("i",{staticClass:"fa fa-minus"}):r("i",{staticClass:"fa fa-plus"})])]),r("div",{staticClass:"cass__right-side--accordion-panel",class:"properties"===e.accordion?"active":""},["CreativeWork"===e.objectType?[r("div",{staticClass:"cass__right-aside--property"},[r("div",{staticClass:"cass__right-aside--property-text"},[r("span",[e._v(" "+e._s(e.object.url)+" ")])]),r("div",{staticClass:"cass__right-aside--property-label"},[e._v(" Url ")])]),r("div",{staticClass:"cass__right-aside--property"},[r("div",{staticClass:"cass__right-aside--property-text"},[r("span",[e._v(" "+e._s(e.objectName)+" ")])]),r("div",{staticClass:"cass__right-aside--property-label"},[e._v(" Name ")])]),r("div",{staticClass:"cass__right-aside--property flex-end"},[r("div",{staticClass:"button is-pulled-right is-primary is-outlined",on:{click:function(t){return e.$emit("editResourceDetails",e.object)}}},[r("span",[e._v("Edit")]),e._m(13)])])]:e._e(),"Directory"===e.objectType?[r("div",{staticClass:"cass__right-aside--property"},[r("div",{staticClass:"cass__right-aside--property-text"},[r("span",[e._v(" "+e._s(e.objectName)+" ")])]),r("div",{staticClass:"cass__right-aside--property-label"},[e._v(" Directory Name ")]),e.canEditObject&&"Directory"===e.objectType?r("div",{staticClass:"cass__right-aside--property flex-end"},[r("div",{staticClass:"button is-pulled-right is-primary is-outlined",on:{click:e.editDirectory}},[r("span",[e._v("Edit")]),e._m(14)])]):e._e()])]:e._e(),e.errorEditing?r("span",[e._v(" "+e._s(e.errorEditing)+" ")]):e._e()],2)]:e._e(),e.loggedIn&&e.canEditObject&&("CreativeWork"!==e.objectType||e.$store.state.featuresEnabled.userManagementEnabled)?[r("button",{staticClass:"cass__right-side--accordion",class:"users"===e.accordion?"active":"",on:{click:function(t){return e.clickAccordion("users")}}},[e._v(" Users "),r("span",{staticClass:"icon is-pulled-right"},["users"===e.accordion?r("i",{staticClass:"fa fa-minus"}):r("i",{staticClass:"fa fa-plus"})])]),r("div",{staticClass:"cass__right-side--accordion-panel users",class:"users"===e.accordion?"active":""},[r("div",{staticClass:"cass__right-aside--whole-item pt-2"},[r("div",{staticClass:"buttons is-centered"},[r("div",{staticClass:"button is-primary is-rounded",on:{click:e.manageUsers}},[r("span",[e._v("Manage Users and Privacy")]),e._m(15)])])])])]:e._e(),"Directory"===e.objectType?[r("button",{staticClass:"cass__right-side--accordion",class:"description"===e.accordion?"active":"",on:{click:function(t){return e.clickAccordion("description")}}},[e._v(" Description "),r("span",{staticClass:"icon is-pulled-right"},["description"===e.accordion?r("i",{staticClass:"fa fa-minus"}):r("i",{staticClass:"fa fa-plus"})])]),r("div",{staticClass:"cass__right-side--accordion-panel",class:"description"===e.accordion?"active":""},[e.objectDescription?r("div",{staticClass:"p-2"},[e._v(" "+e._s(e.objectDescription)+" ")]):r("div",{staticClass:"p-2"},[e._v(" No description ")])])]:e._e(),[r("button",{staticClass:"cass__right-side--accordion",class:"copy"===e.accordion?"active":"",on:{click:function(t){e.clickAccordion("copy"),e.copyingToDirectory=!0}}},[e._v(" Copy "+e._s(e.objectTypeForDisplay)+" "),r("span",{staticClass:"icon is-pulled-right"},["copy"===e.accordion?r("i",{staticClass:"fa fa-minus"}):r("i",{staticClass:"fa fa-plus"})])]),r("div",{staticClass:"cass__right-side--accordion-panel",class:"copy"===e.accordion?"active":""},e._l(e.copyDirectoryOptions,(function(t){return r("li",{key:t,staticClass:"cass--list-item-info--search-result--li"},[r("span",{staticClass:"cass--list-item-info--search-results--li-text"},[e._v(" "+e._s(t.name)+" ")]),r("span",{staticClass:"button is-primary is-outlined is-small is-pulled-right",on:{click:function(r){return e.copyOrMove(t)}}},[e._v(" copy here ")])])})),0)],e.canEditObject?[r("button",{staticClass:"cass__right-side--accordion",class:"move"===e.accordion?"active":"",on:{click:function(t){e.clickAccordion("move"),e.movingToDirectory=!0}}},[e._v(" Move "+e._s(e.objectTypeForDisplay)+" "),r("span",{staticClass:"icon is-pulled-right"},["move"===e.accordion?r("i",{staticClass:"fa fa-minus"}):r("i",{staticClass:"fa fa-plus"})])]),r("div",{staticClass:"cass__right-side--accordion-panel",class:"move"===e.accordion?"active":""},[e._l(e.moveDirectoryOptions,(function(t){return r("li",{key:t,staticClass:"cass--list-item-info--search-result--li"},[r("span",{staticClass:"cass--list-item-info--search-results--li-text"},[e._v(" "+e._s(t.name)+" ")]),r("span",{staticClass:"button is-primary is-v-centered is-outlined is-small is-pulled-right",on:{click:function(r){return e.copyOrMove(t)}}},[e._v(" move here ")])])})),e.object.directory||e.object.parentDirectory?r("li",{staticClass:"cass--list-item-info--search-result--li"},[r("span",{staticClass:"cass--list-item-info--search-results--li-text has-text-danger"},[e._v(" Remove from directory ")]),e.movingToDirectory?r("span",{staticClass:"button is-danger is-outlined is-small is-pulled-right",on:{click:e.removeFromDirectory}},[e._v(" remove ")]):e._e()]):e._e()],2)]:e._e(),e.canEditObject&&"Directory"===e.objectType?[r("div",{},[r("div",{staticClass:"buttons is-pulled-right p-2",on:{click:e.deleteDirectory}},[r("div",{staticClass:"button is-danger is-outlined"},[e._v(" delete directory ")])])])]:e._e()],2)])])])},k=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-folder-open"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cass__right-aside--half-item"},[r("b",[e._v("Last Modified:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cass__right-aside--half-item"},[r("b",[e._v("Directory:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cass__right-aside--half-item"},[r("b",[e._v("Parent Directory:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-folder-open"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cass__right-aside--half-item"},[r("b",[e._v(" Date Created: ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cass__right-aside--half-item"},[r("b",[e._v("Objects:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cass__right-aside--half-item"},[r("b",[e._v("Item Count:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cass__right-aside--half-item"},[r("b",[e._v("Published Date:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cass__right-aside--half-item"},[r("b",[e._v("Approved Date:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cass__right-aside--half-item"},[r("b",[e._v("Publisher:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cass__right-aside--half-item"},[r("b",[e._v("Creator:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cass__right-aside--half-item"},[r("span",[r("b",[e._v("Share:")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-edit"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-edit"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fas fa-users"})])}],D=(r("a4d3"),r("e01a"),r("99af"),r("4de4"),r("5319"),{name:"ListItemInfo",mixins:[m["a"]],components:{},data:function(){return{accordion:"details",numSubdirectories:"unknown",numObjects:"unknown",copyingToDirectory:!1,movingToDirectory:!1,repo:window.repo,frameworksToProcess:0,clipStatus:"ready",ineligibleDirectoriesForMove:[],errorEditing:null,processingCopyOrMove:!1}},methods:{deleteDirectory:function(){this.$store.commit("app/showModal",{component:"DeleteDirectoryConfirm"})},clickAccordion:function(e){this.accordion===e?this.accordion="":this.accordion=e},successfulClip:function(e){var t=this,r=e.value;e.event;appLog("success",r),this.clipStatus="success",setTimeout((function(){t.clipStatus="ready"}),1e3)},errorClip:function(e){var t=this,r=e.value;e.event;appLog("error",r),this.clipStatus="error",setTimeout((function(){t.clipStatus="ready"}),1e3)},setNumSubdirectoriesAndObjects:function(){var e=this;"Directory"===this.objectType&&(e.repo.searchWithParams('(@type:Directory AND parentDirectory:"'+this.object.shortId()+'")',{size:1e4},null,(function(t){e.numSubdirectories=t.length,1e4===t.length&&(e.numSubdirectories="More than 10,000")}),(function(t){appError(t),e.numSubdirectories="unknown"})),e.repo.searchWithParams('(directory:"'+this.object.shortId()+'")',{size:1e4},null,(function(t){e.numObjects=t.length,1e4===t.length&&(e.numObjects="More than 10,000")}),(function(t){appError(t),e.numObjects="unknown"})))},openObject:function(){var e=this;"Directory"===this.objectType?(this.$store.commit("app/selectDirectory",this.object),"directory"!==this.$route.name&&this.$router.push({name:"directory"}),this.$store.commit("app/closeRightAside")):"CreativeWork"===this.object.type?window.open(this.object.url,"_blank"):this.$store.getters["editor/conceptMode"]?(this.$store.commit("app/selectDirectory",null),EcConceptScheme.get(this.object.id,(function(t){e.$store.commit("editor/framework",t),e.$store.commit("editor/clearFrameworkCommentData"),e.$store.commit("app/setCanViewComments",e.canViewCommentsCurrentFramework()),e.$store.commit("app/setCanAddComments",e.canAddCommentsCurrentFramework()),e.$router.push({name:"conceptScheme",params:{frameworkId:e.object.id}})}),appError)):(this.$store.commit("app/selectDirectory",null),EcFramework.get(this.object.id,(function(t){e.$store.commit("editor/framework",t),e.$store.commit("editor/clearFrameworkCommentData"),e.$store.commit("app/setCanViewComments",e.canViewCommentsCurrentFramework()),e.$store.commit("app/setCanAddComments",e.canAddCommentsCurrentFramework()),e.$router.push({name:"framework",params:{frameworkId:e.object.id}})}),appError))},getName:function(e){var t=EcArray.isArray(e)?e:[e];return-1!==schema.Thing.getDisplayStringFrom(t).toLowerCase().indexOf("http")?this.resolveNameFromUrl(schema.Thing.getDisplayStringFrom(t)):schema.Thing.getDisplayStringFrom(t)},goToParentDirectory:function(){var e=this,t=this.object.directory?this.object.directory:this.object.parentDirectory;EcDirectory.get(t,(function(t){e.$store.commit("app/selectDirectory",t),"directory"!==e.$route.name&&e.$router.push({name:"directory"}),e.$store.commit("app/closeRightAside")}),appError)},copyOrMove:function(e){this.frameworksToProcess=0,this.processingCopyOrMove=!0,this.$Progress.start(),this.copyingToDirectory?this.$emit("beginCopy"):this.movingToDirectory&&this.$emit("beginMove"),this.copyingToDirectory&&"Framework"===this.objectType?this.copyFrameworkToDirectory(e,this.object):this.copyingToDirectory&&"CreativeWork"===this.objectType?this.copyResourceToDirectory(e,this.object):this.copyingToDirectory&&"Directory"===this.objectType?this.copySubdirectoryToDirectory(e,this.object):this.movingToDirectory&&"Framework"===this.objectType?this.moveFrameworkToDirectory(e,this.object):this.movingToDirectory&&"CreativeWork"===this.objectType?this.moveResourceToDirectory(e,this.object):this.movingToDirectory&&"Directory"===this.objectType&&this.moveSubdirectoryToDirectory(e,this.object)},removeFromDirectory:function(){this.$Progress.start(),"Framework"===this.objectType?this.removeFrameworkFromDirectory():"CreativeWork"===this.objectType?this.removeResourceFromDirectory():"Directory"===this.objectType&&this.removeSubdirectoryFromDirectory()},multiput:function(e,t){var r=this;this.frameworksToProcess--,this.frameworksToProcess<=0&&this.repo.multiput(e,(function(e){r.processingCopyOrMove=!1,r.$Progress.finish(),r.copyingToDirectory=!1,r.movingToDirectory&&(r.$store.commit("app/rightAsideObject",null),r.$store.commit("app/closeRightAside"),r.$Progress.finish(),r.movingToDirectory=!1),t&&r.$store.commit("app/refreshSearch",!0)}),appError)},getCopyFrameworkName:function(e){var t=e.name;for(var r in EcArray.isArray(t)||(t=[t]),t)t[r]["@value"]?t[r]["@value"]="Copy of "+t[r]["@value"]:t[r]="Copy of "+t[r];return 1===t.length&&(t=t[0]),t},copyFrameworkToDirectory:function(e,t,r){var i=[];r&&(i=r);var s=new EcFramework;s.copyFrom(t),null!=this.queryParams.newObjectEndpoint?s.generateShortId(this.queryParams.newObjectEndpoint):s.generateId(this.repo.selectedServer),s.directory=e.shortId(),s["schema:dateCreated"]=(new Date).toISOString(),s["schema:dateModified"]=(new Date).toISOString(),delete s.owner,delete s.reader,e.owner&&(s.owner=e.owner),e.reader&&(s.reader=e.reader),EcIdentityManager.default.ids.length>0&&s.addOwner(EcIdentityManager.default.ids[0].ppk.toPk());var o=this.getCopyFrameworkName(s);s.name=o,s["ceasn:derivedFrom"]=t.id;var a={};t.competency&&t.competency.length>0?this.copyCompetenciesToDirectory(s,i,a):t.level&&t.level.length>0?this.copyLevelsToDirectory(s,i,a):t.relation&&t.relation.length>0?this.copyRelationsToDirectory(s,i,a):(i.push(s),this.multiput(i))},copyCompetenciesToDirectory:function(e,t,r){var i=this;(new EcAsyncHelper).each(e.competency,(function(s,o){EcCompetency.get(s,(function(a){var c=new EcCompetency;c.copyFrom(a),null!=i.queryParams.newObjectEndpoint?c.generateShortId(i.queryParams.newObjectEndpoint):c.generateId(i.repo.selectedServer),r[a.shortId()]=c.shortId();var n=e.competency.indexOf(s);-1!==n&&(e.competency[n]=c.shortId()),c["schema:dateCreated"]=(new Date).toISOString(),c["schema:dateModified"]=(new Date).toISOString(),delete c.owner,delete c.reader,e.owner&&(c.owner=e.owner),e.reader&&(c.reader=e.reader),c["ceasn:derivedFrom"]=a.id,t.push(c),o()}),o)}),(function(s){e.level&&e.level.length>0?i.copyLevelsToDirectory(e,t,r):e.relation&&e.relation.length>0?i.copyRelationsToDirectory(e,t,r):(t.push(e),i.multiput(t))}))},copyLevelsToDirectory:function(e,t,r){var i=this;(new EcAsyncHelper).each(e.level,(function(s,o){EcLevel.get(s,(function(a){var c=new EcLevel;c.copyFrom(a),null!=i.queryParams.newObjectEndpoint?c.generateShortId(i.queryParams.newObjectEndpoint):c.generateId(i.repo.selectedServer);var n=e.level.indexOf(s);if(-1!==n&&(e.level[n]=c.shortId()),c.competency)for(var l in EcArray.isArray(c.competency)||(c.competency=[c.competency]),c.competency)c.competency[l]=r[c.competency[l]];c["schema:dateCreated"]=(new Date).toISOString(),c["schema:dateModified"]=(new Date).toISOString(),delete c.owner,delete c.reader,e.owner&&(c.owner=e.owner),e.reader&&(c.reader=e.reader),c["ceasn:derivedFrom"]=a.id,t.push(c),o()}),o)}),(function(s){e.relation&&e.relation.length>0?i.copyRelationsToDirectory(e,t,r):(t.push(e),i.multiput(t))}))},copyRelationsToDirectory:function(e,t,r){var i=this;(new EcAsyncHelper).each(e.relation,(function(s,o){EcAlignment.get(s,(function(a){var c=new EcAlignment;c.copyFrom(a),null!=i.queryParams.newObjectEndpoint?c.generateShortId(i.queryParams.newObjectEndpoint):c.generateId(i.repo.selectedServer);var n=e.relation.indexOf(s);-1!==n&&(e.relation[n]=c.shortId()),a.source&&r[a.source]&&(c.source=r[a.source]),a.target&&r[a.target]&&(c.target=r[a.target]),c["schema:dateCreated"]=(new Date).toISOString(),c["schema:dateModified"]=(new Date).toISOString(),delete c.owner,delete c.reader,e.owner&&(c.owner=e.owner),e.reader&&(c.reader=e.reader),c["ceasn:derivedFrom"]=a.id,t.push(c),o()}),o)}),(function(r){t.push(e),i.multiput(t)}))},copyResourceToDirectory:function(e,t,r){var i=this,s=new schema.CreativeWork;null!=this.queryParams.newObjectEndpoint?s.generateShortId(this.queryParams.newObjectEndpoint):s.generateId(this.repo.selectedServer),s.name="Copy of "+t.name,s.url=t.url,s.directory=e.shortId(),e.owner&&(s.owner=e.owner),e.reader&&(s.reader=e.reader),EcIdentityManager.default.ids.length>0&&s.addOwner(EcIdentityManager.default.ids[0].ppk.toPk()),r?(r.push(s),i.multiput(r)):i.repo.saveTo(s,(function(){appLog("Resource copied: "+s.id),i.copyingToDirectory=!1}),appError)},copySubdirectoryToDirectory:function(e,t,r){var i=this,s=[];r&&(s=r);var o=new EcDirectory;o.copyFrom(t),null!=this.queryParams.newObjectEndpoint?o.generateShortId(this.queryParams.newObjectEndpoint):o.generateId(this.repo.selectedServer),o.parentDirectory=e.shortId(),o["schema:dateCreated"]=(new Date).toISOString(),o["schema:dateModified"]=(new Date).toISOString(),delete o.owner,delete o.reader,e.owner&&(o.owner=e.owner),e.reader&&(o.reader=e.reader),EcIdentityManager.default.ids.length>0&&o.addOwner(EcIdentityManager.default.ids[0].ppk.toPk()),o["ceasn:derivedFrom"]=t.id,o.name="Copy of "+o.name,s.push(o),this.repo.search('(directory:"'+t.shortId()+'" OR parentDirectory:"'+t.shortId()+'")',(function(){}),(function(e){i.frameworksToProcess+=e.length,(new EcAsyncHelper).each(e,(function(e,t){"Framework"===e.type?i.copyFrameworkToDirectory(o,e,s):"CreativeWork"===e.type?i.copyResourceToDirectory(o,e,s):"Directory"===e.type&&(i.frameworksToProcess--,i.copySubdirectoryToDirectory(o,e,s)),t()}),(function(e){0===e.length&&i.multiput(s)}))}),appError)},moveFrameworkToDirectory:function(e,t,r){var i=[];r&&(i=r),t.owner=e.owner,t.reader=e.reader,t.directory=e.shortId(),t["schema:dateModified"]=(new Date).toISOString(),i.push(t);var s=[];t.competency&&t.competency.length>0&&(s=t.competency),t.level&&t.level.length>0&&(s=s.concat(t.level)),t.relation&&t.relation.length>0&&(s=s.concat(t.relation)),s.length>0?this.moveSubobjectsToDirectory(s,e,i):this.multiput(i,!0)},moveSubobjectsToDirectory:function(e,t,r){var i=this;(new EcAsyncHelper).each(e,(function(e,i){EcRepository.get(e,(function(e){e.owner=t.owner,e.reader=t.reader,e["schema:dateModified"]=(new Date).toISOString(),r.push(e),i()}),i)}),(function(e){i.multiput(r,!0)}))},moveResourceToDirectory:function(e,t,r){var i=this;t.owner=e.owner,t.reader=e.reader,t.directory=e.shortId(),r?(r.push(t),i.multiput(r,!0)):i.repo.saveTo(t,(function(){appLog("resource moved"),i.$store.commit("app/refreshSearch",!0),i.$store.commit("app/rightAsideObject",null),i.$store.commit("app/closeRightAside"),i.movingToDirectory=!1}),appError)},moveSubdirectoryToDirectory:function(e,t,r){var i=this,s=[];r&&(s=r),t.parentDirectory=e.shortId(),t["schema:dateModified"]=(new Date).toISOString(),t.owner=e.owner,t.reader=e.reader,s.push(t),this.repo.search('(directory:"'+t.shortId()+'" OR parentDirectory:"'+t.shortId()+'")',(function(){}),(function(e){i.frameworksToProcess+=e.length,(new EcAsyncHelper).each(e,(function(e,r){"Framework"===e.type?i.moveFrameworkToDirectory(t,e,s):"CreativeWork"===e.type?i.moveResourceToDirectory(t,e,s):"Directory"===e.type&&(i.frameworksToProcess--,i.moveSubdirectoryToDirectory(t,e,s)),r()}),(function(e){0===e.length&&i.multiput(s,!0)}))}),appError)},removeFrameworkFromDirectory:function(){var e=this.object,t=this,r=[];this.$Progress.start(),EcDirectory.get(e.directory,(function(i){if(i.owner){var s,o=Object(n["a"])(i.owner);try{for(o.s();!(s=o.n()).done;){var a=s.value;e.removeOwner(EcPk.fromPem(a))}}catch(h){o.e(h)}finally{o.f()}e.addOwner(EcIdentityManager.default.ids[0].ppk.toPk())}if(i.reader){var c,l=Object(n["a"])(i.reader);try{for(l.s();!(c=l.n()).done;){var m=c.value;e.removeReader(EcPk.fromPem(m))}}catch(h){l.e(h)}finally{l.f()}}delete e.directory,e["schema:dateModified"]=(new Date).toISOString(),r.push(e);var d=[];e.competency&&e.competency.length>0&&(d=e.competency),e.level&&e.level.length>0&&(d=d.concat(e.level)),e.relation&&e.relation.length>0&&(d=d.concat(e.relation)),d.length>0?t.removeSubobjectsFromDirectory(d,i,r):this.multiput(r,!0)}),appError)},removeSubobjectsFromDirectory:function(e,t,r){var i=this;(new EcAsyncHelper).each(e,(function(e,i){EcRepository.get(e,(function(e){if(t.owner){var s,o=Object(n["a"])(t.owner);try{for(o.s();!(s=o.n()).done;){var a=s.value;e.removeOwner(EcPk.fromPem(a))}}catch(d){o.e(d)}finally{o.f()}e.addOwner(EcIdentityManager.default.ids[0].ppk.toPk())}if(t.reader){var c,l=Object(n["a"])(t.reader);try{for(l.s();!(c=l.n()).done;){var m=c.value;e.removeReader(EcPk.fromPem(m))}}catch(d){l.e(d)}finally{l.f()}}e["schema:dateModified"]=(new Date).toISOString(),r.push(e),i()}),i)}),(function(e){i.multiput(r,!0)}))},removeResourceFromDirectory:function(){var e=this;EcDirectory.get(this.object.directory,(function(t){if(t.owner){var r,i=Object(n["a"])(t.owner);try{for(i.s();!(r=i.n()).done;){var s=r.value;e.object.removeOwner(EcPk.fromPem(s))}}catch(l){i.e(l)}finally{i.f()}e.object.addOwner(EcIdentityManager.default.ids[0].ppk.toPk())}if(t.reader){var o,a=Object(n["a"])(t.reader);try{for(a.s();!(o=a.n()).done;){var c=o.value;e.object.removeReader(EcPk.fromPem(c))}}catch(l){a.e(l)}finally{a.f()}}delete e.object.directory,e.repo.saveTo(e.object,(function(){appLog("resource removed"),e.$store.commit("app/refreshSearch",!0),e.movingToDirectory=!1}),appError)}),appError)},removeSubdirectoryFromDirectory:function(){var e=this,t=[],r=this.object;EcDirectory.get(r.parentDirectory,(function(i){if(i.owner){var s,o=Object(n["a"])(i.owner);try{for(o.s();!(s=o.n()).done;){var a=s.value;r.removeOwner(EcPk.fromPem(a))}}catch(h){o.e(h)}finally{o.f()}r.addOwner(EcIdentityManager.default.ids[0].ppk.toPk())}if(i.reader){var c,l=Object(n["a"])(i.reader);try{for(l.s();!(c=l.n()).done;){var m=c.value;r.removeReader(EcPk.fromPem(m))}}catch(h){l.e(h)}finally{l.f()}}delete r.parentDirectory,r["schema:dateModified"]=(new Date).toISOString(),t.push(r);var d=[];e.repo.search('directory:"'+r.shortId()+'"',(function(){}),(function(r){e.frameworksToProcess=r.length,(new EcAsyncHelper).each(r,(function(r,s){d.push(r.shortId()),r.competency&&r.competency.length>0&&(d=d.concat(r.competency)),r.level&&r.level.length>0&&(d=d.concat(r.level)),r.relation&&r.relation.length>0&&(d=d.concat(r.relation)),d.length>0&&e.removeSubobjectsFromDirectory(d,i,t),s()}),(function(r){0===r.length&&e.multiput(t,!0)}))}),appError)}),appError)},setIneligibleDirectoriesForMove:function(e){var t=this;this.repo.search('parentDirectory:"'+e.shortId()+'"',(function(e){t.ineligibleDirectoriesForMove.push(e.shortId()),t.setIneligibleDirectoriesForMove(e)}),(function(){}),appError)},manageUsers:function(){this.$store.commit("app/objForShareModal",this.object),this.$store.commit("app/showModal",{component:"Share"})},editDirectory:function(){this.$store.commit("app/editDirectory",!0)}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.setNumSubdirectoriesAndObjects(),!this.object.encryptedType){e.next=12;break}return t="Ec"+this.object.encryptedType,r=new EcEncryptedValue,r.copyFrom(this.object),i=new window[t],e.t0=i,e.next=9,r.decryptIntoObject();case 9:e.t1=e.sent,e.t0.copyFrom.call(e.t0,e.t1),this.$store.commit("app/rightAsideObject",i);case 12:"Directory"===this.object.type&&this.setIneligibleDirectoriesForMove(this.object);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),computed:{objectName:function(){var e=this.object.name;return!e&&this.object["dcterms:title"]?e=this.object["dcterms:title"]:!e&&this.object["skos:prefLabel"]&&(e=this.object["skos:prefLabel"]),schema.Thing.getDisplayStringFrom(e)},objectDescription:function(){var e=this.object.description;return!e&&this.object["dcterms:description"]?e=this.object["dcterms:description"]:!e&&this.object["skos:definition"]&&(e=this.object["skos:definition"]),schema.Thing.getDisplayStringFrom(e)},objectShortId:function(){return this.object.shortId()},object:function(){return this.$store.getters["app/rightAsideObject"]},objectType:function(){return this.object.type},objectTypeForDisplay:function(){return"CreativeWork"===this.objectType?"Resource":"ConceptScheme"===this.objectType?"true"===this.queryParams.ceasnDataFields?"Concept Scheme":"Taxonomy":this.objectType},lastModified:function(){return this.object.getTimestamp()?this.$moment(new Date(this.object.getTimestamp())).format("MMM D YYYY"):this.object["schema:dateModified"]?this.$moment(new Date(this.object["schema:dateModified"])).format("MMM D YYYY"):"unknown"},dateCreated:function(){return this.object["schema:dateCreated"]?this.$moment(new Date(this.object["schema:dateCreated"])).format("MMM D YYYY"):"unknown"},publisherName:function(){return this.object["ceasn:publisherName"]&&this.getName(this.object["ceasn:publisherName"])?this.getName(this.object["ceasn:publisherName"]):this.object["schema:publisher"]&&this.getName(this.object["schema:publisher"])?this.getName(this.object["schema:publisher"]):null},creatorName:function(){return this.object["schema:creator"]&&this.getName(this.object["schema:creator"])?this.getName(this.object["schema:creator"]):null},shareLink:function(){var e=window.location.href;return e=e.replace("/frameworks","").replace("/directory",""),"Directory"===this.objectType?e+"?directoryId="+this.objectShortId:!0===this.$store.getters["editor/conceptMode"]?e+"?concepts=true&frameworkId="+this.objectShortId:e+"?frameworkId="+this.objectShortId},copyDirectoryOptions:function(){var e=this;return this.$store.getters["app/directoryList"].filter((function(t){return t.shortId()!==e.object.shortId()&&(!e.object.parentDirectory||t.shortId()!==e.object.parentDirectory)&&(!e.object.directory||t.shortId()!==e.object.directory)}))},moveDirectoryOptions:function(){var e=this;return"Directory"===this.objectType?this.$store.getters["app/directoryList"].filter((function(t){return t.shortId()!==e.object.shortId()&&(!e.object.parentDirectory||t.shortId()!==e.object.parentDirectory)&&(!e.object.directory||t.shortId()!==e.object.directory)&&!EcArray.has(e.ineligibleDirectoriesForMove,t.shortId())})):this.$store.getters["app/directoryList"].filter((function(t){return t.shortId()!==e.object.shortId()&&(!e.object.parentDirectory||t.shortId()!==e.object.parentDirectory)&&(!e.object.directory||t.shortId()!==e.object.directory)}))},canEditObject:function(){return this.object.canEditAny(EcIdentityManager.default.getMyPks())},queryParams:function(){return this.$store.getters["editor/queryParams"]},loggedIn:function(){return!!(EcIdentityManager.default.ids&&EcIdentityManager.default.ids.length>0)},selectedDirectoryId:function(){return this.$store.getters["app/selectedDirectory"]?this.$store.getters["app/selectedDirectory"].shortId():null}},watch:{objectShortId:function(){this.copyingToDirectory=!1,this.movingToDirectory=!1,this.ineligibleDirectoriesForMove=[],this.setNumSubdirectoriesAndObjects(),"Directory"===this.object.type&&this.setIneligibleDirectoriesForMove(this.object)}}}),j=D,T=(r("09d8"),Object(p["a"])(j,w,k,!1,null,null,null)),F=T.exports,E=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cass--right-aside--content"},[r("div",{staticClass:"section"},[r("h3",{staticClass:"title is-size-4"},[e._v(" Filter and Sort ")]),r("div",{staticClass:"filter-sort-section"},[r("h3",{staticClass:"filter-sort-header"},[e._v(" Sort by ")]),e._l(e.sortResults,(function(t){return r("div",{key:t,staticClass:"field"},[t.enabled?[r("input",{directives:[{name:"model",rawName:"v-model",value:e.sortBy,expression:"sortBy"}],staticClass:"is-checkradio",attrs:{id:t.id,type:"radio",name:"sortResults"},domProps:{value:{id:t.id,label:t.label},checked:e._q(e.sortBy,{id:t.id,label:t.label})},on:{change:function(r){e.sortBy={id:t.id,label:t.label}}}}),r("label",{staticClass:"label",attrs:{for:t.id}},[e._v(e._s(t.label))])]:e._e()],2)}))],2),!e.showQuickFilterHeading||e.$store.getters["editor/conceptMode"]&&!e.loggedIn?e._e():r("div",{staticClass:"filter-sort-section"},[r("h3",{staticClass:"filter-sort-header"},[e._v(" Quick Filters ")]),e._l(e.quickFilters,(function(t){return r("div",{directives:[{name:"show",rawName:"v-show",value:!e.hideOwnershipFilters||!t.id.includes("ByMe"),expression:"!hideOwnershipFilters || !option.id.includes('ByMe')"}],key:t,staticClass:"field"},[t.enabled?[r("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"option.checked"}],staticClass:"is-checkradio",attrs:{id:t.id,type:"checkbox",name:t.id},domProps:{checked:Array.isArray(t.checked)?e._i(t.checked,null)>-1:t.checked},on:{change:function(r){var i=t.checked,s=r.target,o=!!s.checked;if(Array.isArray(i)){var a=null,c=e._i(i,a);s.checked?c<0&&e.$set(t,"checked",i.concat([a])):c>-1&&e.$set(t,"checked",i.slice(0,c).concat(i.slice(c+1)))}else e.$set(t,"checked",o)}}}),r("label",{staticClass:"label",attrs:{for:t.id}},[e._v(e._s(t.label))])]:e._e()],2)}))],2),e.$store.getters["editor/conceptMode"]?e._e():r("div",{staticClass:"filter-sort-section"},[r("h3",{staticClass:"filter-sort-header"},[e._v(" Apply search term to ")]),e._l(e.applySearchTo,(function(t){return r("div",{key:t,staticClass:"field"},[t.enabled?[r("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"option.checked"}],staticClass:"is-checkradio",attrs:{id:t.id,type:"checkbox",name:t.id},domProps:{checked:Array.isArray(t.checked)?e._i(t.checked,null)>-1:t.checked},on:{change:function(r){var i=t.checked,s=r.target,o=!!s.checked;if(Array.isArray(i)){var a=null,c=e._i(i,a);s.checked?c<0&&e.$set(t,"checked",i.concat([a])):c>-1&&e.$set(t,"checked",i.slice(0,c).concat(i.slice(c+1)))}else e.$set(t,"checked",o)}}}),r("label",{staticClass:"label",attrs:{for:t.id}},[e._v(e._s(t.label))])]:e._e()],2)}))],2)])])},S=[],I=(r("d3b7"),r("498a"),r("ddb0"),r("f188")),O=r("d6b4"),$=r("6d79"),M={name:"FilterAndSort",data:function(){return{sortResults:[{id:"alphabetical",label:"alphabetical",enabled:!0},{id:"dateCreated",label:"created date",enabled:!0},{id:"lastEdited",label:"last modified",enabled:!0}],quickFilters:[{id:"configMatchDefault",checked:!1,label:"Configuration matches default",enabled:!0},{id:"ownedByMe",checked:!1,label:"Owned by me",enabled:!0},{id:"notOwnedByMe",checked:!1,label:"Not owned by me",enabled:!0}],frameworkPropertiesApplySearchTo:[],competencyPropertiesApplySearchTo:[],otherPropertiesApplySearchTo:[],showQuickFilterHeading:!0,frameworkConfig:null,configPropertiesToIgnore:["@id","headings","primaryProperties","secondaryProperties","tertiaryProperties","ctid"],searchTermsFromRawSchemata:{}}},mixins:[I["a"],O["a"],$["a"]],computed:{sortBy:{get:function(){return this.$store.getters["app/sortResults"]},set:function(e){this.$store.commit("app/sortResults",e)}},loggedIn:function(){return EcIdentityManager.default.ids&&EcIdentityManager.default.ids.length},searchByOwnerNameEnabled:function(){return this.$store.state.featuresEnabled.searchByOwnerNameEnabled},configurationsEnabled:function(){return this.$store.state.featuresEnabled.configurationsEnabled},queryParams:function(){return this.$store.getters["editor/queryParams"]},hideOwnershipFilters:function(){return"mine"===this.queryParams.show},applySearchTo:function(){return this.frameworkPropertiesApplySearchTo.concat(this.competencyPropertiesApplySearchTo).concat(this.otherPropertiesApplySearchTo)},conceptMode:function(){return this.$store.getters["editor/conceptMode"]}},mounted:function(){if(this.conceptMode||(this.setSearchTermsFromRawSchemata(),this.getFrameworkConfig(),this.setOtherPropertiesApplySearchTo(),this.setCompetencyPropertiesApplySearchTo()),!this.loggedIn)for(var e=0;e<this.quickFilters.length;e++)"configMatchDefault"!==this.quickFilters[e].id&&(this.quickFilters[e].enabled=!1);if(this.conceptMode||!this.configurationsEnabled)for(e=0;e<this.quickFilters.length;e++)"configMatchDefault"===this.quickFilters[e].id&&(this.quickFilters[e].enabled=!1);var t=!1;for(e=0;e<this.quickFilters.length;e++)!0===this.quickFilters[e].enabled&&(t=!0);this.showQuickFilterHeading=t},watch:{applySearchTo:{handler:function(){this.$store.commit("app/applySearchTo",this.applySearchTo)},deep:!0},quickFilters:{handler:function(){appLog("watched"),this.$store.commit("app/quickFilters",this.quickFilters)},deep:!0},frameworkConfig:function(){this.frameworkConfig&&this.setFrameworkPropertiesApplySearchTo()}},methods:{getFrameworkConfig:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("true"!==this.queryParams.ceasnDataFields){e.next=4;break}this.frameworkConfig=this.ctdlAsnFrameworkProfile,e.next=17;break;case 4:if("true"!==this.queryParams.tlaProfile){e.next=8;break}this.frameworkConfig=this.tlaFrameworkProfile,e.next=17;break;case 8:if(!this.getDefaultBrowserConfigId()||this.getDefaultBrowserConfigId().trim().equals("")){e.next=15;break}return e.next=11,EcRepository.get(this.getDefaultBrowserConfigId());case 11:t=e.sent,this.frameworkConfig=t.frameworkConfig,e.next=17;break;case 15:r=this,window.repo.searchWithParams("@type:Configuration",{size:1e4},null,(function(e){var t,i=!1,s=Object(n["a"])(e);try{for(s.s();!(t=s.n()).done;){var o=t.value;if("true"===o.isDefault){r.frameworkConfig=o.frameworkConfig,i=!0;break}}}catch(a){s.e(a)}finally{s.f()}i||r.setDefaultFrameworkSearchTerms()}),(function(){r.setDefaultFrameworkSearchTerms()}));case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setFrameworkPropertiesApplySearchTo:function(){var e,t=EcObject.keys(this.frameworkConfig),r=[],i=Object(n["a"])(t);try{for(i.s();!(e=i.n()).done;){var s=e.value;if(!EcArray.has(this.configPropertiesToIgnore,s)&&("http://www.w3.org/2000/01/rdf-schema#langString"===this.frameworkConfig[s]["http://schema.org/rangeIncludes"][0]["@id"]||"http://schema.org/Text"===this.frameworkConfig[s]["http://schema.org/rangeIncludes"][0]["@id"])){var o=this.frameworkConfig[s]["http://www.w3.org/2000/01/rdf-schema#label"][0]["@value"],a="";a="http://schema.org/name"===s?"frameworkName":"http://schema.org/description"===s?"frameworkDescription":this.getSearchTermForProperty(s),r.push({id:a,checked:!1,label:o,enabled:!0})}}}catch(c){i.e(c)}finally{i.f()}this.frameworkPropertiesApplySearchTo=r},setSearchTermsFromRawSchemata:function(){var e,t=this.$store.state.lode.rawSchemata["https://schema.cassproject.org/0.4"]["@context"],r=EcObject.keys(t),i=Object(n["a"])(r);try{for(i.s();!(e=i.n()).done;){var s=e.value;EcObject.isObject(t[s])||(this.searchTermsFromRawSchemata[t[s]]=s)}}catch(o){i.e(o)}finally{i.f()}},getSearchTermForProperty:function(e){var t,r,i=EcObject.keys(this.searchTermsFromRawSchemata),s=Object(n["a"])(i);try{for(s.s();!(r=s.n()).done;){var o=r.value;-1!==e.indexOf(o)&&(t="https://schema.cassproject.org/0.4/"===o?e.replace(o,""):e.replace(o,this.searchTermsFromRawSchemata[o]+"\\:"))}}catch(a){s.e(a)}finally{s.f()}return t},setDefaultFrameworkSearchTerms:function(){this.frameworkPropertiesApplySearchTo=[{id:"frameworkName",checked:!1,label:"Framework name",enabled:!0},{id:"frameworkDescription",checked:!1,label:"Framework description",enabled:!0}]},setOtherPropertiesApplySearchTo:function(){this.otherPropertiesApplySearchTo=[{id:"directoryName",checked:!1,label:"Directory name",enabled:!0},{id:"directoryDescription",checked:!1,label:"Directory description",enabled:!0}],this.searchByOwnerNameEnabled&&this.otherPropertiesApplySearchTo.push({id:"ownerName",checked:!1,label:"Owner name",enabled:!0})},setCompetencyPropertiesApplySearchTo:function(){"true"===this.queryParams.ceasnDataFields?this.competencyPropertiesApplySearchTo=[{id:"competencyLabel",checked:!1,label:"Competency label",enabled:!0},{id:"competencyName",checked:!1,label:"Competency text",enabled:!0},{id:"competencyDescription",checked:!1,label:"Competency comment",enabled:!0}]:this.competencyPropertiesApplySearchTo=[{id:"competencyName",checked:!1,label:"Competency name",enabled:!0},{id:"competencyDescription",checked:!1,label:"Competency description",enabled:!0}]}}},A=M,P=(r("d57a"),Object(p["a"])(A,E,S,!1,null,null,null)),x=P.exports,R={name:"RightAside",props:{},data:function(){return{isCommenter:!0,isAdmin:!1,isViewer:!0}},components:{Comments:f,Versions:_,FilterAndSort:x,ListItemInfo:F},computed:{showRightAside:function(){return this.$store.getters["app/showRightAside"]},rightAsideContent:function(){return this.$store.getters["app/rightAsideContent"]}}},L=R,N=(r("f02b"),Object(p["a"])(L,i,s,!1,null,"27129d02",null));t["default"]=N.exports},eeb6:function(e,t,r){"use strict";var i=r("040c"),s=r.n(i);s.a},f02b:function(e,t,r){"use strict";var i=r("fa90"),s=r.n(i);s.a},fa90:function(e,t,r){}}]);
//# sourceMappingURL=chunk-d3a5e010.373bc239.js.map