(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25eb577f","chunk-2d0dab46","chunk-83807946","chunk-83807946","chunk-2d0dab46"],{"2f8b":function(e,t,n){},"5f07":function(e,t,n){"use strict";n.r(t);n("b0c0");var r=function(){var e=this,t=e._self._c;return t("modal-template",{attrs:{active:!0,type:"danger"},on:{close:e.closeModal}},[t("template",{slot:"modal-header"},[t("span",{staticClass:"title has-text-white"},[e._v(" Are you sure? ")])]),t("template",{slot:"modal-body"},[t("h3",{staticClass:"title is-size-4"},[t("span",{},[e._v("Delete the following directory")])]),t("p",{staticClass:"py-2"},[e._v(" "+e._s(e.directory.name)+" ")]),t("p",[e._v(" You are about to delete the above directory. "),t("b",[e._v("This action is not reversable.")]),e._v(" Deleting this directory will delete all of its contents and make it unavailable to others who might be using it. ")]),t("div",{staticClass:"py-2"},[t("div",{staticClass:"field"},[t("div",{staticClass:"label"},[t("label",[e._v("Type the name of the directory to enable this action.")])]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.typedInName,expression:"typedInName"}],staticClass:"input",domProps:{value:e.typedInName},on:{input:function(t){t.target.composing||(e.typedInName=t.target.value)}}})])])])]),t("template",{slot:"modal-foot"},[t("div",{staticClass:"buttons is-spaced"},[t("button",{staticClass:"button is-dark is-outlined",on:{click:e.closeModal}},[e._v(" Cancel ")]),t("button",{staticClass:"button is-outlined is-danger",attrs:{disabled:e.deleteDirectoryDisabled},on:{click:function(t){return e.deleteDirectory(e.directory)}}},[e._v(" Delete Directory ")])])])],2)},a=[],o=n("c7eb"),i=n("1da1"),s=(n("14d9"),n("498a"),n("af07")),c=n("6d79"),l=n("872c"),d={mixins:[c["a"],l["a"]],name:"DeleteDirectory",components:{ModalTemplate:s["a"]},data:function(){return{typedInName:"",loggedInPersonEcPk:{},commentToSave:{},commentIsBusy:!1,numDirectories:1,repo:window.repo}},methods:{deleteDirectory:function(){var e=Object(i["a"])(Object(o["a"])().mark((function e(t){var n,r;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return appLog("deleting "+t.id),n=this,e.next=4,this.$store.dispatch("editor/getDirectoryChildren",t);case 4:r=e.sent,window.repo.multiget(r,(function(e){(new EcAsyncHelper).each(e,function(){var e=Object(i["a"])(Object(o["a"])().mark((function e(t,r){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:"Framework"===t.type?n.deleteFramework(t,r):"CreativeWork"===t.type?(n.repo.deleteRegistered(t,appLog,appError),r()):"Directory"===t.type&&(n.numDirectories++,n.deleteDirectory(t),r());case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),(function(e){n.repo.deleteRegistered(t,(function(e){appLog(e),n.numDirectories--,0===n.numDirectories&&(n.$store.dispatch("app/refreshDirectories"),n.$store.commit("app/refreshSearch",!0),"frameworks"!==n.$route.name&&n.$router.push({name:"frameworks"}),n.$store.commit("app/rightAsideObject",null),n.$store.commit("app/closeRightAside"),n.$store.commit("app/refreshSearch",!0),n.$store.commit("app/closeModal"))}),(function(e){appError(e),n.numDirectories--,0===n.numDirectories&&("frameworks"!==n.$route.name&&n.$router.push({name:"frameworks"}),n.$store.commit("app/rightAsideObject",null),n.$store.commit("app/closeRightAside"),n.$store.commit("app/refreshSearch",!0),n.$store.commit("app/closeModal"))}))}))}),appError);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),deleteFramework:function(e,t){var n=this;this.repo.deleteRegistered(e,(function(r){if(n.spitEvent("frameworkDeleted",e.shortId(),"directoryPage"),null!=e.competency)for(var a=0;a<e.competency.length;a++)n.conditionalDelete(e.competency[a]);if(null!=e.relation)for(a=0;a<e.relation.length;a++)n.conditionalDelete(e.relation[a]);if(null!=e.level)for(a=0;a<e.level.length;a++)n.conditionalDelete(e.level[a]);t()}),appLog)},closeModal:function(){this.$store.commit("app/closeModal")}},computed:{loggedInPerson:function(){return this.$store.state.user.loggedOnPerson},directory:function(){return this.$store.getters["app/rightAsideObject"]},deleteDirectoryDisabled:function(){return this.typedInName.trim()!==this.directory.name.trim()}},mounted:function(){}},u=d,f=(n("6b72"),n("2877")),p=Object(f["a"])(u,r,a,!1,null,null,null);t["default"]=p.exports},"65fc":function(e,t,n){},"6b72":function(e,t,n){"use strict";n("65fc")},"6d79":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("ac1f"),n("841c"),n("d3b7"),n("25f0"),n("caad"),n("2532"),n("14d9");var r=n("c7eb"),a=n("b85c"),o=n("1da1"),i={name:"cassUtil",data:function(){return{}},methods:{getOrganizationByEcPk:function(e,t,n){var i=e.toPem(),s={size:1e4};EcOrganization.search(window.repo,"",function(){var e=Object(o["a"])(Object(r["a"])().mark((function e(o){var s,c,l,d,u,f,p;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=Object(a["a"])(o),e.prev=1,s.s();case 3:if((c=s.n()).done){e.next=34;break}return l=c.value,e.prev=5,e.next=8,l.getOrgKeys();case 8:d=e.sent,u=Object(a["a"])(d),e.prev=10,u.s();case 12:if((f=u.n()).done){e.next=19;break}if(p=f.value,!p||!p.toPk().toPem().equals(i)){e.next=17;break}return t(l),e.abrupt("return");case 17:e.next=12;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](10),u.e(e.t0);case 24:return e.prev=24,u.f(),e.finish(24);case 27:e.next=32;break;case 29:e.prev=29,e.t1=e["catch"](5),n(e.t1.toString());case 32:e.next=3;break;case 34:e.next=39;break;case 36:e.prev=36,e.t2=e["catch"](1),s.e(e.t2);case 39:return e.prev=39,s.f(),e.finish(39);case 42:t(null);case 43:case"end":return e.stop()}}),e,null,[[1,36,39,42],[5,29],[10,21,24,27]])})));return function(t){return e.apply(this,arguments)}}(),(function(e){n(e)}),s)},getOrganizationEcPk:function(e){return Object(o["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getCurrentOrgKey();case 3:return t.abrupt("return",t.sent.toPk());case 6:return t.prev=6,t.t0=t["catch"](0),t.abrupt("return",null);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},getPersonEcPk:function(e){var t=this.generateProbablePersonFingerprintFromShortId(e.shortId());if(e.owner){var n,r=Object(a["a"])(e.owner);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=EcPk.fromPem(o);if(t.equals(i.fingerprint()))return i}}catch(s){r.e(s)}finally{r.f()}}return null},addAllOwnersFromObjectToObject:function(e,t){if(e&&e.owner){var n,r=Object(a["a"])(e.owner);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=EcPk.fromPem(o);t.addOwner(i)}}catch(s){r.e(s)}finally{r.f()}}},setDefaultBrowserConfigId:function(e){localStorage.setItem("cassAuthoringToolDefaultBrowserConfigId",e)},removeDefaultBrowserConfig:function(){localStorage.removeItem("cassAuthoringToolDefaultBrowserConfigId")},getDefaultBrowserConfigId:function(){return localStorage.getItem("cassAuthoringToolDefaultBrowserConfigId")},getBooleanValue:function(e){return"boolean"===typeof e?e:"string"===typeof e&&!!e.equalsIgnoreCase("true")},addAllIdentityPksAsOwners:function(e){if(EcIdentityManager&&EcIdentityManager.default.ids&&EcIdentityManager.default.ids.length>0)for(var t=0;t<EcIdentityManager.default.ids.length;t++)e.addOwner(EcIdentityManager.default.ids[t].ppk.toPk())},isObjectOwnerless:function(e){return!e.owner||0===e.owner.length},doesAnyIdentityOwnObject:function(e){return!!this.isAdmin()||(null==e.canEditAny||e.canEditAny(EcIdentityManager.default.getMyPks()))},canEditAny:function(e){return!!this.isAdmin()||(null==e.canEditAny||e.canEditAny(EcIdentityManager.default.getMyPks()))},isAdmin:function(){return EcIdentityManager.default.ids.length>0&&null!=window.repo.adminKeys&&window.repo.adminKeys.length>0&&window.repo.adminKeys[0]===EcIdentityManager.default.ids[0].ppk.toPk().toPem()},generateProbablePersonFingerprintFromShortId:function(e){return e.substring(e.lastIndexOf("/")+1)},isPersonIdAnObjectOwner:function(e,t){if(!t.owner||0===t.owner.length)return!1;var n,r=this.generateProbablePersonFingerprintFromShortId(e),o=Object(a["a"])(t.owner);try{for(o.s();!(n=o.n()).done;){var i=n.value,s=EcPk.fromPem(i).fingerprint();if(s.equals(r))return!0}}catch(c){o.e(c)}finally{o.f()}return!1},isPersonIdAnObjectReader:function(e,t){if(!t.reader||0===t.reader.length)return!1;var n,r=this.generateProbablePersonFingerprintFromShortId(e),o=Object(a["a"])(t.reader);try{for(o.s();!(n=o.n()).done;){var i=n.value,s=EcPk.fromPem(i).fingerprint();if(s.equals(r))return!0}}catch(c){o.e(c)}finally{o.f()}return!1},areAnyIdentitiesThisPerson:function(e){var t=e.getFingerprint();if(EcIdentityManager&&EcIdentityManager.default.ids&&EcIdentityManager.default.ids.length>0)for(var n=0;n<EcIdentityManager.default.ids.length;n++)if(EcIdentityManager.default.ids[n].ppk.toPk().fingerprint().equals(t))return!0;return!1},isPersonalIdentityAnObjectOwner:function(e){if(this.isAdmin())return!0;if(!e.owner||0===e.owner.length)return!1;var t=this.getPersonalIdentityPk().toPem();return e.owner.includes(t)},getPersonalIdentityPk:function(){return EcIdentityManager&&EcIdentityManager.default.ids&&EcIdentityManager.default.ids.length>0?EcIdentityManager.default.ids[0].ppk.toPk():null},buildEcAlignmentsFromRemoteLinkedData:function(e){var t,n=[],r=Object(a["a"])(e);try{for(r.s();!(t=r.n()).done;){var o=t.value,i=new EcAlignment;i.copyFrom(o),n.push(i)}}catch(s){r.e(s)}finally{r.f()}return n}},computed:{amLoggedIn:function(){return!!(EcIdentityManager&&EcIdentityManager.default.ids&&EcIdentityManager.default.ids.length>0)}}}},"840c":function(e,t,n){"use strict";n("2f8b")},"984b":function(e,t,n){},af07:function(e,t,n){"use strict";var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal cass-editor___modal",class:[{"is-active":e.active},"is-"+e.size,"cass-editor__modal--"+e.content],attrs:{id:"cass-modal"}},[t("div",{staticClass:"modal-background"}),t("div",{staticClass:"modal-card",class:"cass-editor__modal-card--"+e.size},[t("header",{staticClass:"modal-card-head is-size-4 has-text-weight-bold",class:["has-background-"+e.type,"has-text-"+e.fontColor]},[t("p",{staticClass:"modal-card-title"},[e._t("modal-header")],2),e.canClose?t("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(t){e.$store.commit("app/closeModal"),e.$emit("close")}}}):e._e()]),t("div",{staticClass:"modal-card-body has-text-dark"},[e._t("modal-body")],2),t("footer",{staticClass:"modal-card-foot has-background-white"},[e._t("modal-foot")],2)])])},a=[],o=(n("984b"),{name:"ModalTemplate",props:{canClose:{type:Boolean,default:!0},active:{type:Boolean,default:!1},type:{default:"primary",type:String},fontColor:{type:String,default:"white"},size:{type:String,default:"medium"},content:{defualt:"default",type:String}},data:function(){return{}},computed:{}}),i=o,s=(n("840c"),n("2877")),c=Object(s["a"])(i,r,a,!1,null,null,null);t["a"]=c.exports}}]);
//# sourceMappingURL=chunk-25eb577f.98c6cc4d.js.map