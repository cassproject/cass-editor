(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["frameworks"],{1776:function(t,e,s){},"217e":function(t,e,s){"use strict";var i=s("6628"),r=s.n(i);r.a},"3c5b":function(t,e,s){"use strict";s("ac1f"),s("841c");e["a"]={methods:{deleteObject:function(t){appLog("deleting "+t.id);var e=this;this.repo.search('(directory:"'+t.shortId()+'" OR parentDirectory:"'+t.shortId()+'")',(function(){}),(function(s){(new EcAsyncHelper).each(s,(function(t,s){"Framework"===t.type?e.deleteFramework(t):"CreativeWork"===t.type?e.repo.deleteRegistered(t,appLog,appError):"Directory"===t.type&&e.deleteObject(t),s()}),(function(s){e.repo.deleteRegistered(t,(function(){e.$store.dispatch("app/refreshDirectories")}),appError),t.shortId()===e.directory.shortId()&&e.$router.push({name:"frameworks"})}))}),appError)},deleteFramework:function(t){var e=this;this.repo.deleteRegistered(t,(function(s){if(e.spitEvent("frameworkDeleted",t.shortId(),"directoryPage"),null!=t.competency)for(var i=0;i<t.competency.length;i++)e.conditionalDelete(t.competency[i]);if(null!=t.relation)for(i=0;i<t.relation.length;i++)e.conditionalDelete(t.relation[i]);if(null!=t.level)for(i=0;i<t.level.length;i++)e.conditionalDelete(t.level[i])}),appLog)},onDoneEditingNode:function(){var t=this;this.$store.getters["app/rightAsideObject"]&&EcRepository.get(this.$store.getters["app/rightAsideObject"].shortId(),(function(e){t.$store.commit("app/rightAsideObject",e)}),appError),this.$store.commit("app/editDirectory",!1)}},computed:{editDirectory:function(){return this.$store.getters["app/editDirectory"]},canEditDirectory:function(){return!!this.directory&&((!this.queryParams||"true"!==this.queryParams.view)&&!!this.directory.canEditAny(EcIdentityManager.getMyPks()))},directory:function(){return this.$store.getters["app/rightAsideObject"]},directoryProfile:function(){return{"http://schema.org/name":{"@id":"http://schema.org/name","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Directory"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"The name of the directory."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Name"}],isRequired:"true"},"http://schema.org/description":{"@id":"http://schema.org/description","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Directory"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"The description of the directory."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Description"}]},"@id":{"@id":"https://schema.cassproject.org/0.4/Framework/id","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Framework"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"The URL of the framework."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Framework URL"}],readOnly:"true",max:1,heading:"Keys"},primaryProperties:["http://schema.org/name","http://schema.org/description"],secondaryProperties:["@id"],tertiaryProperties:[]}},changedObject:function(){return this.$store.getters["editor/changedObject"]}},watch:{changedObject:function(){if(this.changedObject&&this.directory&&this.changedObject===this.directory.shortId()){var t=this;EcRepository.get(this.directory.shortId(),(function(e){t.$store.getters["app/selectedDirectory"]&&t.$store.getters["app/selectedDirectory"].shortId()===e.shortId()?t.$store.commit("app/selectDirectory",e):t.$store.commit("app/refreshSearch",!0),t.showRightAside&&e.shortId()===t.$store.getters["app/rightAsideObject"].shortId()&&t.$store.commit("app/rightAsideObject",e)}),appError),this.$store.commit("editor/changedObject",null)}}}}},6628:function(t,e,s){},6791:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main-layout",{class:t.showRightAside?"right-side-open":"",attrs:{rightActive:t.showRightAside},scopedSlots:t._u([{key:"top",fn:function(){return[s("div",{staticClass:"container is-fullhd"},[t.editDirectory&&t.canEditDirectory?s("thing-editing",{attrs:{obj:t.$store.getters["app/rightAsideObject"],repo:t.repo,parentNotEditable:"true"===t.queryParams.view,profile:t.directoryProfile},on:{"delete-object":t.deleteObject,"done-editing-node-event":function(e){return t.onDoneEditingNode()}}}):t._e(),s("div",{staticClass:"container"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-6"},[s("SearchBar",{attrs:{filterSet:"all",searchType:"ConceptScheme"===t.type?"concept scheme":"framework"}})],1),s("div",{staticClass:"column is-6"},[t.conceptMode?s("div",{staticClass:"buttons is-right concept-buttons"},[s("div",{staticClass:"button is-outlined is-primary",on:{click:function(e){return t.$emit("create-new-concept-scheme")}}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-plus"})]),s("span",[t._v("new "+t._s(t.conceptSchemeStringForButton))])]),s("router-link",{staticClass:"button is-hidden-mobile is-outlined is-primary",attrs:{to:"/import"},nativeOn:{click:function(e){t.$store.commit("editor/conceptMode",!0),t.$store.dispatch("app/clearImport")}}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-upload"})]),s("span",[t._v("import "+t._s(t.conceptSchemeStringForButton))])])],1):s("div",{staticClass:"buttons  is-hidden-mobile is-right frameworks-buttons"},[s("div",{staticClass:"button is-outlined is-primary",on:{click:function(e){return t.$emit("create-new-framework")}}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-plus"})]),s("span",[t._v("create")])]),s("router-link",{staticClass:"button is-outlined is-primary",attrs:{to:"/import"},nativeOn:{click:function(e){t.$store.commit("editor/conceptMode",!1),t.$store.dispatch("app/clearImport")}}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-upload"})]),s("span",[t._v("import")])]),s("router-link",{staticClass:"button is-outlined is-primary",attrs:{to:"/crosswalk"}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-network-wired"})]),s("span",[t._v("crosswalk")])])],1)])])])],1)]},proxy:!0},{key:"secondary-top",fn:function(){return[s("div",{staticClass:"container"},[s("h2",{staticClass:"has-text-dark is-size-5 text-align-left pl-0 ml-0"},[t._v(" Available items ")])])]},proxy:!0},{key:"body",fn:function(){return[s("div",{staticClass:"framework-list-page",attrs:{id:"frameworks"}},[s("div",{staticClass:"container is-fluid"},[s("List",{attrs:{type:t.type,repo:t.repo,click:t.frameworkClick,searchOptions:t.searchOptions,paramObj:t.paramObj,view:"frameworks",disallowEdits:!0},on:{dblclick:t.openItem},scopedSlots:t._u([{key:"frameworkTags",fn:function(e){return[s("span",{staticClass:"framework-details has-text-weight-light family-primary is-size-7"},[t.conceptMode||"Framework"!==e.item.type?t._e():s("span",{staticClass:"framework-details__item"},[s("span",{staticClass:"has-text-weight-medium"},[t._v(" Items: ")]),s("span",{staticClass:"has-text-weight-light"},[t._v(" "+t._s(e.item.competency?e.item.competency.length:0)+" ")])]),e.item.Published?s("span",{staticClass:"framework-details__item",attrs:{title:e.item.Published}},[s("span",{staticClass:"has-text-weight-medium"},[t._v(" Published: ")]),s("span",{staticClass:"has-text-weight-light"},[t._v(" "+t._s(e.item.Published)+" ")])]):t._e(),e.item.Approved?s("span",{staticClass:"framework-details__item",attrs:{title:e.item.Approved}},[s("span",{staticClass:"has-texte-weight-medium"},[t._v(" Approved: ")]),s("span",{staticClass:"has-text-weight-light"},[t._v(" "+t._s(e.item.Approved)+" ")])]):t._e(),e.item["schema:dateCreated"]?s("span",{staticClass:"framework-details__item",attrs:{title:new Date(e.item["schema:dateCreated"])}},[s("span",{staticClass:"has-text-weight-medium"},[t._v(" Created: ")]),s("span",{staticClass:"has-text-weight-light"},[t._v(" "+t._s(t.$moment(new Date(e.item["schema:dateCreated"])).format("MMM D YYYY"))+" ")])]):t._e(),e.item.getTimestamp()?s("span",{staticClass:"framework-details__item",attrs:{title:new Date(e.item.getTimestamp())}},[s("span",{staticClass:"has-text-weight-medium"},[t._v(" Last modified: ")]),s("span",{staticClass:"has-text-weight-light"},[t._v(" "+t._s(t.$moment(e.item.getTimestamp()).format("MMM D YYYY"))+" ")])]):e.item["schema:dateModified"]?s("span",{staticClass:"framework-details__item",attrs:{title:new Date(e.item["schema:dateModified"])}},[s("span",{staticClass:"has-text-weight-medium"},[t._v(" Last modified: ")]),s("span",{staticClass:"has-text-weight-light"},[t._v(" "+t._s(t.$moment(new Date(e.item["schema:dateModified"])).format("MMM D YYYY"))+" ")])]):t._e(),e.item["ceasn:publisherName"]&&t.getName(e.item["ceasn:publisherName"])?s("span",{staticClass:"framework-details__item"},[s("span",{staticClass:"has-text-weight-medium"},[t._v(" Publisher: ")]),s("span",{staticClass:"has-text-weight-light"},[t._v(" "+t._s(t.getName(e.item["ceasn:publisherName"]))+" ")])]):e.item["schema:publisher"]&&t.getName(e.item["schema:publisher"])?s("span",{staticClass:"framework-details__item"},[s("span",{staticClass:"has-text-weight-medium"},[t._v(" Publisher: ")]),s("span",[t._v(" "+t._s(t.getName(e.item["schema:publisher"]))+" ")])]):e.item["schema:creator"]&&t.getName(e.item["schema:creator"])?s("span",{},[s("span",{staticClass:"has-text-weight-medium"},[t._v(" Creator ")]),s("span",[t._v(" "+t._s(t.getName(e.item["schema:creator"]))+" ")])]):t._e(),t.canEditItem(e.item)&&"true"!==t.queryParams.view?s("span",{staticClass:"framework-details__item"},[s("span",{staticClass:"has-text-weight-medium"},[t._v(" Editable ")])]):t._e()])]}}])})],1)])]},proxy:!0},{key:"right",fn:function(){return[t.showRightAside?s("RightAside",{attrs:{title:"Filter \\& sort"}}):t._e()]},proxy:!0}])})},r=[],a=(s("4de4"),s("b0c0"),s("d3b7"),s("ac1f"),s("841c"),s("713b")),o=s("b047"),n=s.n(o),c=s("000d"),d=s("dd98"),m=s("872c"),h=s("3c5b"),l=s("6b9e"),p={name:"Frameworks",mixins:[m["a"],h["a"]],data:function(){return{repo:window.repo,showMine:!1,showNotMine:!1,filterByConfig:!1,numIdentities:EcIdentityManager.ids.length,parentObjectClass:"frameworks-sticky",sortBy:null,defaultConfig:""}},created:function(){this.sortBy=this.conceptMode?"dcterms:title.keyword":"name.keyword",this.$store.commit("editor/t3Profile",!1),this.$store.commit("editor/framework",null),this.spitEvent("viewChanged"),this.setDefaultConfig()},computed:{conceptSchemeString:function(){return"true"===this.queryParams.ceasnDataFields?"Concept Schemes":"Taxonomies"},conceptSchemeStringForButton:function(){return"true"===this.queryParams.ceasnDataFields?"Concept Scheme":"Taxonomy"},showRightAside:function(){return this.$store.getters["app/showRightAside"]},frameworkSearchTerm:function(){return this.$store.getters["app/searchTerm"]},queryParams:function(){return this.$store.getters["editor/queryParams"]},type:function(){return this.conceptMode?"ConceptScheme":"Framework"},searchOptions:function(){var t="";if(this.queryParams&&null!=this.queryParams.filter&&(t+=" AND ("+this.queryParams.filter+")"),(this.showMine||this.queryParams&&!this.conceptMode&&"mine"===this.queryParams.show||this.queryParams&&this.conceptMode&&"mine"===this.queryParams.conceptShow)&&EcIdentityManager.ids.length>0){t+=" AND (";for(var e=0;e<EcIdentityManager.ids.length;e++){0!==e&&(t+=" OR ");var s=EcIdentityManager.ids[e];t+='\\*owner:"'+s.ppk.toPk().toPem()+'"',t+=' OR \\*owner:"'+this.addNewlinesToId(s.ppk.toPk().toPem())+'"'}t+=")"}if(this.showNotMine&&EcIdentityManager.ids.length>0){t+=" AND NOT (";for(e=0;e<EcIdentityManager.ids.length;e++){0!==e&&(t+=" OR ");s=EcIdentityManager.ids[e];t+='\\*owner:"'+s.ppk.toPk().toPem()+'"',t+=' OR \\*owner:"'+this.addNewlinesToId(s.ppk.toPk().toPem())+'"'}t+=")"}return this.filterByConfig&&this.defaultConfig&&(t+=' AND (configuration:"',t+=this.defaultConfig,t+='")'),t},paramObj:function(){var t={size:20},e="name.keyword"===this.sortBy||"dcterms:title.keyword"===this.sortBy?"asc":"desc";return t.sort='[ { "'+this.sortBy+'": {"order" : "'+e+'" , "unmapped_type" : "long",  "missing" : "_last"}} ]',EcIdentityManager.ids.length>0&&this.queryParams&&(!this.conceptMode&&"mine"===this.queryParams.show||this.conceptMode&&"mine"===this.queryParams.conceptShow)&&(t.ownership="me"),t},sortResults:function(){return this.$store.getters["app/sortResults"]},quickFilters:function(){return this.$store.getters["app/quickFilters"]},filteredQuickFilters:function(){var t=this.quickFilters.filter((function(t){return!0===t.checked}));return appLog("filtered value",t),t},conceptMode:function(){return this.$store.getters["editor/conceptMode"]}},components:{List:c["a"],RightAside:d["default"],SearchBar:l["a"],MainLayout:a["a"],ThingEditing:function(){return Promise.resolve().then(s.bind(null,"b908"))}},methods:{canEditItem:function(t){return t.canEditAny(EcIdentityManager.getMyPks())},openItem:function(t){var e=this;"Directory"===t.type?(this.$store.commit("app/selectDirectory",t),"directory"!==this.$route.name&&this.$router.push({name:"directory"}),this.$store.commit("app/closeRightAside")):"Competency"===t.type?EcFramework.search(this.repo,'competency:"'+t.shortId()+'"',(function(t){t&&t[0]&&e.openItem(t[0])}),appError,null):"Concept"===t.type?this.findConceptTrail(t):this.conceptMode?EcConceptScheme.get(t.id,(function(s){e.$store.commit("editor/framework",s),e.$store.commit("editor/clearFrameworkCommentData"),e.$store.commit("app/setCanViewComments",e.canViewCommentsCurrentFramework()),e.$store.commit("app/setCanAddComments",e.canAddCommentsCurrentFramework()),e.$router.push({name:"conceptScheme",params:{frameworkId:t.id}})}),appError):EcFramework.get(t.id,(function(s){e.$store.commit("editor/framework",s),e.$store.commit("editor/clearFrameworkCommentData"),e.$store.commit("app/setCanViewComments",e.canViewCommentsCurrentFramework()),e.$store.commit("app/setCanAddComments",e.canAddCommentsCurrentFramework()),e.$router.push({name:"framework",params:{frameworkId:t.id}})}),appError)},findConceptTrail:function(t){var e=this;t["skos:topConceptOf"]?EcConceptScheme.get(t["skos:topConceptOf"],(function(t){e.openItem(t)}),appError):t["skos:broader"]&&(EcArray.isArray(t["skos:broader"])||(t["skos:broader"]=[t["skos:broader"]]),EcConcept.get(t["skos:broader"][0],(function(t){e.findConceptTrail(t)}),appError))},frameworkClick:function(t){this.$store.commit("app/rightAsideObject",t),this.$store.commit("app/showRightAside","ListItemInfo")},getName:function(t){var e=EcArray.isArray(t)?t:[t];return-1!==Thing.getDisplayStringFrom(e).toLowerCase().indexOf("http")?this.resolveNameFromUrl(Thing.getDisplayStringFrom(e)):Thing.getDisplayStringFrom(e)},addNewlinesToId:function(t){t=t.substring(0,26)+"\n"+t.substring(26);var e=t.length,s=27;while(s+64<e)t=t.substring(0,s+64)+"\n"+t.substring(s+64),s+=65,e++;return t=t.substring(0,e-24)+"\n"+t.substring(e-24),t},setDefaultConfig:function(){var t=this;localStorage.getItem("cassAuthoringToolDefaultBrowserConfigId")?this.defaultConfig=localStorage.getItem("cassAuthoringToolDefaultBrowserConfigId"):this.repo.searchWithParams("@type:Configuration",{size:1e4},(function(e){"true"===e.isDefault&&(t.defaultConfig=e.shortId())}),(function(){}),(function(){}))},scrollFunction:function(t){document.getElementsByClassName("frameworks-sticky");var e=t.target.scrollTop;this.parentObjectClass=0!==e?"frameworks-sticky scrolled":"frameworks-sticky"}},mounted:function(){"lastEdited"===this.sortResults.id?this.sortBy="schema:dateModified":"dateCreated"===this.sortResults.id?this.sortBy="schema:dateCreated":this.sortBy=this.conceptMode?"dcterms:title.keyword":"name.keyword",this.showMine=!1,this.showNotMine=!1,this.filterByConfig=!1;for(var t=0;t<this.filteredQuickFilters.length;t++)"ownedByMe"===this.filteredQuickFilters[t].id&&(this.showMine=!0),"notOwnedByMe"===this.filteredQuickFilters[t].id&&(this.showNotMine=!0),"configMatchDefault"===this.filteredQuickFilters[t].id&&(this.filterByConfig=!0);var e=document.getElementById("frameworks");e.addEventListener("scroll",n()(this.scrollFunction,100,{leading:!0}))},watch:{sortResults:function(){"lastEdited"===this.sortResults.id?this.sortBy="schema:dateModified":"dateCreated"===this.sortResults.id?this.sortBy="schema:dateCreated":this.sortBy=this.conceptMode?"dcterms:title.keyword":"name.keyword"},filteredQuickFilters:function(){this.showMine=!1,this.showNotMine=!1,this.filterByConfig=!1;for(var t=0;t<this.filteredQuickFilters.length;t++)"ownedByMe"===this.filteredQuickFilters[t].id&&(this.showMine=!0),"notOwnedByMe"===this.filteredQuickFilters[t].id&&(this.showNotMine=!0),"configMatchDefault"===this.filteredQuickFilters[t].id&&(this.filterByConfig=!0)},conceptMode:function(){this.sortBy=this.conceptMode?"dcterms:title.keyword":"name.keyword"}}},u=p,f=(s("217e"),s("2877")),g=Object(f["a"])(u,i,r,!1,null,null,null);e["default"]=g.exports},"713b":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cass--main-layout",class:t.simple?"":"has-secondary"},[s("div",{staticClass:"cass--main-layout--primary-top",class:t.simpleClass},[t._t("top")],2),t.simple?t._e():s("div",{staticClass:"cass--main-layout--secondary-top"},[t._t("secondary-top")],2),s("div",{staticClass:"cass--main-layout--body",class:t.topBarClass},[t._t("body")],2),t.rightActive?s("div",{staticClass:"cass--main-layout--right",class:t.topBarClass},[t._t("right")],2):t._e()])},r=[],a={name:"MainLayout",data:function(){return{}},props:{rightActive:{type:Boolean,default:!1},simple:{type:Boolean,default:!1}},computed:{simpleClass:function(){return{"is-simple-top-bar":this.simple}},topBarClass:function(){return{"has-simple-top-bar":this.simple,"has-secondary-top-bar":!this.simple,"regular-top-bar":!this.simple}}}},o=a,n=(s("89d3"),s("2877")),c=Object(n["a"])(o,i,r,!1,null,null,null);e["a"]=c.exports},"89d3":function(t,e,s){"use strict";var i=s("1776"),r=s.n(i);r.a}}]);
//# sourceMappingURL=frameworks.f0c47fa6.js.map