(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59826ace","chunk-2f37fe09","chunk-2d0e6c3b"],{"454f":function(e,t,r){"use strict";var s=r("87af"),a=r.n(s);a.a},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var s=r("1d80"),a=r("5899"),i="["+a+"]",o=RegExp("^"+i+i+"*"),n=RegExp(i+i+"*$"),c=function(e){return function(t){var r=String(s(t));return 1&e&&(r=r.replace(o,"")),2&e&&(r=r.replace(n,"")),r}};e.exports={start:c(1),end:c(2),trim:c(3)}},"6ffa4":function(e,t,r){"use strict";r("fb6a");var s=r("872c");t["a"]={mixins:[s["a"]],methods:{removeObject:function(e){appLog("removing "+e.id);var t=this,r=this.$store.getters["editor/framework"],s=r.competency?r.competency.slice():null,a=r.relation?r.relation.slice():null,i=r.level?r.level.slice():null;r["schema:dateModified"]=(new Date).toISOString(),r.removeCompetency(e.shortId(),(function(){var e=t.framework;t.$store.commit("editor/addEditsToUndo",[{operation:"update",id:e.shortId(),fieldChanged:["competency","relation","level"],initialValue:[s,a,i]}]),!0===t.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[f.id]&&(e=EcEncryptedValue.toEncryptedValue(e)),window.repo.saveTo(e,(function(){t.$store.commit("editor/framework",r)}),appError)}),appLog)},deleteObject:function(e){appLog("deleting "+e.id);var t=this,r=this.$store.getters["editor/framework"];if(e.shortId()===r.shortId())window.repo.deleteRegistered(r,(function(e){if(t.spitEvent("frameworkDeleted",r.shortId(),"editFrameworkSection"),null!=r.competency)for(var s=0;s<r.competency.length;s++)t.conditionalDelete(r.competency[s]);if(null!=r.relation)for(s=0;s<r.relation.length;s++)t.conditionalDelete(r.relation[s]);if(null!=r.level)for(s=0;s<r.level.length;s++)t.conditionalDelete(r.level[s]);t.$store.commit("editor/framework",null),t.importType?t.$store.commit("app/importFramework",null):t.$router.push({name:"frameworks"})}),appLog);else{var s=r.competency?r.competency.slice():null,a=r.relation?r.relation.slice():null,i=r.level?r.level.slice():null;this.$store.commit("editor/selectedCompetency",e),r["schema:dateModified"]=(new Date).toISOString(),r.removeCompetency(e.shortId(),(function(){r.removeLevel(e.shortId()),t.$store.commit("editor/addEditsToUndo",[{operation:"delete",obj:e},{operation:"update",id:r.shortId(),fieldChanged:["competency","relation","level"],initialValue:[s,a,i],changedValue:[r.competency,r.relation,r.level]}]),t.conditionalDelete(e.shortId()),t.spitEvent("competencyDeleted",e.shortId(),"editFrameworkSection"),t.$store.commit("editor/selectedCompetency",null);var o=r;!0===t.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[r.id]&&(o=EcEncryptedValue.toEncryptedValue(r)),window.repo.saveTo(o,(function(){t.$store.commit("editor/framework",r)}),appError)}),appLog)}}}}},"713e":function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cass--list--container",class:e.parent},[e.firstSearchProcessing?r("div",{staticClass:"section has-text-centered"},[e._m(0)]):e._e(),[r("div",{staticClass:"container is-desktop"},[r("ul",{staticClass:"cass--list"},[e._l(e.results,(function(t){return r("li",{key:t.id,staticClass:"cass--list--item",class:[{"source-framework":e.crosswalkAlignmentSource&&t.id===e.crosswalkAlignmentSource.id},e.rightAsideObjectId&&e.rightAsideObjectId===t.shortId()?"cass--list--item--selected":""],on:{click:function(r){return e.click(t)}}},[r("div",{staticClass:"cass--list-item--icon"},[r("div",{staticClass:"cass--list-item--icon-wrap has-background-dark"},[r("span",{staticClass:"icon"},["Directory"===t.type?r("i",{staticClass:"fa fa-folder",attrs:{title:"Directory"}}):"Framework"===t.type?r("i",{staticClass:"fa fa-file-alt",attrs:{title:"Framework"}}):"Competency"===t.type?r("i",{staticClass:"fa fa-list-alt",attrs:{title:"Competency"}}):"ConceptScheme"===t.type?r("i",{staticClass:"fa fa-book",attrs:{title:"Concept Scheme"}}):e._e()])])]),r("div",{staticClass:"cass--list-item--content"},[e.selectingCompetency||t.parentDirectory?r("Breadcrumbs",{attrs:{competency:t}}):e._e(),r("Thing",{staticClass:"cass--list--thing",attrs:{parent:e.parent,obj:t,view:e.view,profile:e.profile,parentNotEditable:e.disallowEdits},nativeOn:{dblclick:function(r){return e.$emit("dblclick",t)}},scopedSlots:e._u([{key:"frameworkTags",fn:function(){return[e._t("frameworkTags",null,{item:t})]},proxy:!0}],null,!0)})],1),r("div",{staticClass:"cass--list-item--hover"},[e.selectingCompetency&&e.isClicked(t.shortId())&&"search"===e.view?r("span",{staticClass:"search-selection__icon"},[e._m(1,!0)]):"search"===e.view&&"crosswalk"!==e.view?r("span",{staticClass:"search-selection__add-icon"},[e._m(2,!0)]):e._e(),"search"!==e.view?r("div",{staticClass:"icon has-text-primary arrow-icon"},[r("i",{staticClass:"fa fa-arrow-right"})]):e._e()])])})),e._l(e.subResults,(function(t){return r("li",{key:t.id,staticClass:"cass--list--item",class:e.rightAsideObjectId&&e.rightAsideObjectId===t.shortId()?"cass-list-item--selected":"",on:{click:function(r){return e.subObjectClick(t)}}},[r("div",{staticClass:"cass--list-item--icon"},[r("div",{staticClass:"cass--list-item--icon-wrap has-background-dark"},[r("span",{staticClass:"icon"},["Directory"===t.type?r("i",{staticClass:"fa fa-folder",attrs:{title:"Directory"}}):"Framework"===t.type?r("i",{staticClass:"fa fa-file-alt",attrs:{title:"Framework"}}):"Competency"===t.type?r("i",{staticClass:"fa fa-list-alt",attrs:{title:"Competency"}}):"Concept"===t.type?r("i",{staticClass:"fa fa-book",attrs:{title:"Concept Scheme"}}):e._e()])])]),r("div",{staticClass:"cass--list-item--content"},[r("Breadcrumbs",{ref:t.id,refInFor:!0,attrs:{competency:t}}),r("Thing",{staticClass:"list-thing",attrs:{obj:t,view:e.view,profile:e.profile,parentNotEditable:e.disallowEdits},nativeOn:{dblclick:function(r){return e.$emit("dblclick",t)}}})],1),r("div",{staticClass:"cass--list-item--hover"},["search"!==e.view?r("div",{staticClass:"icon has-text-primary arrow-icon"},[r("i",{staticClass:"fa fa-arrow-right"})]):e._e()])])}))],2),e.results.length>0?r("infinite-loading",{attrs:{spinner:"circles",distance:10},on:{infinite:e.loadMore}},[r("div",{attrs:{slot:"no-more"},slot:"no-more"},[e._v(" All results loaded ")]),r("div",{attrs:{slot:"no-results"},slot:"no-results"},[e._v(" All results loaded ")])]):e._e()],1)]],2)},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon is-large"},[r("i",{staticClass:"fa fa-spinner fa-2x fa-pulse"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"icon is-primary is-small"},[r("i",{staticClass:"fa fa-check has-text-primary",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"icon is-primary is-small"},[r("i",{staticClass:"fa fa-plus has-text-primary",attrs:{"aria-hidden":"true"}})])}],i=(r("99af"),r("4de4"),r("a434"),r("b0c0"),r("ac1f"),r("5319"),r("841c"),r("098b")),o=r("30d6"),n=r("6d79"),c={name:"List",props:{parent:{type:String,default:""},type:String,repo:Object,profile:Object,click:Function,searchOptions:String,paramObj:Object,disallowEdits:Boolean,selectingCompetency:Boolean,selected:Array,displayFirst:Array,view:{type:String,default:""},filterToEditable:{type:Boolean,default:!1},idsNotPermittedInSearch:{type:Array,default:null}},components:{Thing:i["default"],Breadcrumbs:o["a"]},mixins:[n["a"]],created:function(){var e=this;this.$nextTick((function(){return e.searchRepo()}))},data:function(){return{results:[],start:0,subResults:[],subStart:0,searchFrameworks:!0,searchCompetencies:!0,searchDirectories:!1,searchingForCompetencies:!1,searchingForDirectories:!1,applySearchToOwner:!1,firstSearchProcessing:!0,resultIds:[],nonDirectoryResults:!1}},watch:{text:function(e,t){},paramObj:function(){this.searchRepo()},searchOptions:function(){this.searchRepo()},searchTerm:function(e){this.searchRepo()},applySearchTo:function(){if(this.applySearchToOwner=!1,"crosswalk"===this.view)this.searchFrameworks=!0,this.searchCompetencies=!1,this.searchDirectories=!1;else if(this.applySearchTo&&this.applySearchTo.length>0){this.searchFrameworks=!1,this.searchCompetencies=!1,this.searchDirectories=!1;for(var e=0;e<this.applySearchTo.length;e++)"frameworkName"===this.applySearchTo[e].id||"frameworkDescription"===this.applySearchTo[e].id?this.searchFrameworks=!0:"competencyName"===this.applySearchTo[e].id||"competencyDescription"===this.applySearchTo[e].id||"competencyLabel"===this.applySearchTo[e].id?this.searchCompetencies=!0:"ownerName"===this.applySearchTo[e].id?(this.searchFrameworks=!0,this.searchCompetencies=!0,this.applySearchToOwner=!0):"directoryName"===this.applySearchTo[e].id||"directoryDescription"===this.applySearchTo[e].id?this.searchDirectories=!0:this.searchFrameworks=!0}else this.searchFrameworks=!0,this.searchCompetencies=!0,"Framework"===this.type?this.searchDirectories=!0:this.searchDirectories=!1;this.searchRepo()},type:function(){this.searchRepo()},refreshSearch:function(){this.refreshSearch&&(this.searchRepo(),this.$store.commit("app/refreshSearch",!1))}},computed:{crosswalkAlignmentSource:function(){return this.$store.getters["crosswalk/frameworkSource"]},searchTerm:function(e){return this.$store.getters["app/searchTerm"]},refreshSearch:function(e){return this.$store.getters["app/refreshSearch"]},applySearchTo:function(){var e=this.$store.getters["app/applySearchTo"];if(!e)return null;var t=e.filter((function(e){return!0===e.checked}));return t.length<=0?null:t},rightAsideObjectId:function(){return this.$store.getters["app/rightAsideObject"]?this.$store.getters["app/rightAsideObject"].shortId():null}},methods:{subObjectClick:function(e){var t=this.$refs[e.id][0].frameworks;if(t.length>0)this.click(t[0]);else{var r={component:"Single",uri:e.id,type:e.type,objectType:e.type,parentName:null,canEdit:!1};this.$store.commit("app/showModal",r)}},buildSearch:function(e,t){var r=this,s="",a=!1;if(this.applySearchTo&&""!==this.searchTerm){s="((@type:"+e+" OR (EncryptedValue AND \\*encryptedType:"+e+")) AND (";for(var i=0;i<this.applySearchTo.length;i++)"Framework"===e&&"frameworkName"===this.applySearchTo[i].id||"Competency"===e&&"competencyName"===this.applySearchTo[i].id||"Directory"===e&&"directoryName"===this.applySearchTo[i].id?(a&&(s+=" OR "),s+="name:"+this.searchTerm,a=!0):"Framework"===e&&"frameworkDescription"===this.applySearchTo[i].id||"Competency"===e&&"competencyDescription"===this.applySearchTo[i].id||"Directory"===e&&"directoryDescription"===this.applySearchTo[i].id?(a&&(s+=" OR "),s+="description:"+this.searchTerm,a=!0):"Framework"===e?(a&&(s+=" OR "),s+=this.applySearchTo[i].id+":"+this.searchTerm,a=!0):"Competency"===e&&"competencyLabel"===this.applySearchTo[i].id?(a&&(s+=" OR "),s+="ceasn\\:competencyLabel:"+this.searchTerm,a=!0):"ownerName"===this.applySearchTo[i].id&&function(){var e={size:10},i=r;EcPerson.search(window.repo,"name:"+r.searchTerm,(function(r){a&&r.length>0&&(s+=" OR "),appLog(r);for(var o=0;o<r.length;o++)s+='\\*owner:"'+i.getPersonEcPk(r[o]).toPem()+'"',o<r.length-1&&(s+=" OR ");EcOrganization.search(window.repo,"name:"+i.searchTerm,(function(e){appLog(e);for(var r=0;r<e.length;r++)s+='\\*owner:"'+i.getOrganizationEcPk(e[r]).toPem()+'"',a=!0,r<e.length-1&&(s+=" OR ");s+="))"+(null==i.searchOptions?"":i.searchOptions),-1!==s.indexOf("AND ())")&&(s=null),t(s)}),(function(e){appError(e),t(null)}),e)}),(function(e){appError(e),t(null)}),e)}();this.applySearchToOwner||(s+="))"+(null==this.searchOptions?"":this.searchOptions))}else s="((@type:"+e+" OR (EncryptedValue AND \\*encryptedType:"+e+"))"+(null!=this.searchTerm&&""!==this.searchTerm?" AND "+this.searchTerm:"")+")"+(null==this.searchOptions||""===this.searchOptions?"":this.searchOptions);this.applySearchToOwner||t(s)},searchForDirectories:function(e){var t=this;this.searchingForDirectories=!0,t.buildSearch("Directory",(function(r){var s=null;t.paramObj&&(s=Object.assign({},t.paramObj)),t.firstSearchProcessing||(t.start+=t.paramObj.size),s.start=t.start;var a=[];t.repo.searchWithParams(r,s,(function(e){if((!t.filterToEditable||t.filterToEditable&&e.canEditAny(EcIdentityManager.getMyPks()))&&!EcArray.has(t.resultIds,e.id)&&(!t.idsNotPermittedInSearch||0===t.idsNotPermittedInSearch.length||!EcArray.has(t.idsNotPermittedInSearch,e.shortId()))&&(!e.parentDirectory||""!==t.searchTerm)){if(e.isAny((new EcEncryptedValue).getTypes())){var r="Ec"+e.encryptedType,s=new EcEncryptedValue;s.copyFrom(e);var i=new window[r];i.copyFrom(s.decryptIntoObject()),e=i}a.push(e),t.resultIds.push(e.id)}}),(function(r){t.firstSearchProcessing=!1,a&&a.length>0?(t.results=t.results.concat(a),e&&e.loaded()):0===r.length?(t.searchingForDirectories=!1,t.start=0,t.loadMore(e)):r.length>0&&e?e.loaded():e&&e.complete()}),(function(r){appError(r),t.firstSearchProcessing=!1,e&&e.complete()}))}))},searchRepo:function(){var e=this;if(this.start=0,this.subStart=0,this.firstSearchProcessing=!0,this.results.splice(0,this.results.length),this.subResults.splice(0,this.subResults.length),this.resultIds.splice(0,this.resultIds.length),this.searchingForCompetencies=!1,this.nonDirectoryResults=!1,this.applySearchTo||("frameworks"===this.view&&"Framework"===this.type?this.searchDirectories=!0:this.searchDirectories=!1),""===this.searchTerm&&this.displayFirst&&this.displayFirst.length>0)for(var t=0;t<20;t++)this.displayFirst[0]&&(this.results.push(this.displayFirst[0]),this.resultIds.push(this.displayFirst[0].id),this.displayFirst.shift(),this.nonDirectoryResults=!0);if(!0===this.searchDirectories?this.searchForDirectories():!this.searchFrameworks||""===this.searchTerm&&this.displayFirst&&0!==this.displayFirst.length?e.firstSearchProcessing=!1:e.buildSearch(this.type,(function(t){var r=null;e.paramObj&&(r=Object.assign({},e.paramObj)),e.repo.searchWithParams(t,r,(function(t){if((!e.filterToEditable||e.filterToEditable&&t.canEditAny(EcIdentityManager.getMyPks()))&&!EcArray.has(e.resultIds,t.id)&&(!e.idsNotPermittedInSearch||0===e.idsNotPermittedInSearch.length||!EcArray.has(e.idsNotPermittedInSearch,t.shortId()))){if(t.isAny((new EcEncryptedValue).getTypes())){var r="Ec"+t.encryptedType,s=new EcEncryptedValue;s.copyFrom(t);var a=new window[r];a.copyFrom(s.decryptIntoObject()),t=a}""!==t.name&&(e.results.push(t),e.resultIds.push(t.id),e.nonDirectoryResults=!0)}}),(function(t){e.firstSearchProcessing=!1,t.length<10&&("Framework"===e.type||"ConceptScheme"===e.type)&&e.searchCompetencies&&e.searchForSubObjects()}),(function(t){appError(t),e.firstSearchProcessing=!1}))})),!this.searchFrameworks&&!this.searchDirectories&&(""!==this.searchTerm||!this.displayFirst||0===this.displayFirst.length))return this.searchForSubObjects()},loadMore:function(e){if(""===this.searchTerm&&this.displayFirst&&this.displayFirst.length>0)for(var t=0;t<20;t++)this.displayFirst[t]&&(this.results.push(this.displayFirst[t]),this.resultIds.push(this.displayFirst[t].id),this.displayFirst.shift());if(this.searchingForDirectories)this.searchForDirectories(e);else if(!this.paramObj||""===this.searchTerm&&this.displayFirst&&0!==this.displayFirst.length)e.loaded();else{var r,s=this,a=Object.assign({},this.paramObj);s.nonDirectoryResults&&(this.start+=this.paramObj.size),a.start=this.start,r=this.searchingForCompetencies?"ConceptScheme"===this.type?"Concept":"Competency":this.type,this.buildSearch(r,(function(t){s.repo.searchWithParams(t,a,(function(e){if(!s.filterToEditable||s.filterToEditable&&e.canEditAny(EcIdentityManager.getMyPks()))if(s.searchingForCompetencies){if(!EcArray.has(s.resultIds,e.id)&&(!s.idsNotPermittedInSearch||0===s.idsNotPermittedInSearch.length||!EcArray.has(s.idsNotPermittedInSearch,e.shortId()))){if(e.isAny((new EcEncryptedValue).getTypes())){var t="Ec"+e.encryptedType,r=new EcEncryptedValue;r.copyFrom(e);var a=new window[t];a.copyFrom(r.decryptIntoObject()),e=a}s.subResults.push(e),s.resultIds.push(e.id)}}else if(!EcArray.has(s.resultIds,e.id)&&(!s.idsNotPermittedInSearch||0===s.idsNotPermittedInSearch.length||!EcArray.has(s.idsNotPermittedInSearch,e.shortId()))){if(e.isAny((new EcEncryptedValue).getTypes())){t="Ec"+e.encryptedType,r=new EcEncryptedValue;r.copyFrom(e);var i=new window[t];i.copyFrom(r.decryptIntoObject()),e=i}s.results.push(e),s.resultIds.push(e.id)}}),(function(t){0!==t.length||"Framework"!==s.type&&"ConceptScheme"!==s.type?t.length>0?(s.nonDirectoryResults=!0,e&&e.loaded()):e&&e.complete():s.searchCompetencies?s.searchForSubObjects(e):e&&e.complete()}),(function(t){appError(t),e.complete()}))}))}},searchForSubObjects:function(e){var t=this;this.searchingForCompetencies=!0;var r=Object.assign({},t.paramObj);r.start=t.subStart,-1!==r.sort.indexOf("dcterms:title")&&(r.sort=r.sort.replace("dcterms:title","skos:prefLabel"));var s="Framework"===t.type?"Competency":"Concept";t.buildSearch(s,(function(s){t.repo.searchWithParams(s,r,(function(e){if((!t.filterToEditable||t.filterToEditable&&e.canEditAny(EcIdentityManager.getMyPks()))&&!EcArray.has(t.resultIds,e.id)&&(!t.idsNotPermittedInSearch||0===t.idsNotPermittedInSearch.length||!EcArray.has(t.idsNotPermittedInSearch,e.shortId()))){if(e.isAny((new EcEncryptedValue).getTypes())){var r="Ec"+e.encryptedType,s=new EcEncryptedValue;s.copyFrom(e);var a=new window[r];a.copyFrom(s.decryptIntoObject()),e=a}t.subResults.push(e),t.resultIds.push(e.id),t.nonDirectoryResults=!0}}),(function(r){r.length>0&&e?e.loaded():e&&e.complete(),t.subStart+=t.paramObj.size}),(function(t){appError(t),e&&e.complete()}))}))},isClicked:function(e){return!!EcArray.has(this.selected,e)}},mounted:function(){"crosswalk"===this.view&&(this.searchFrameworks=!0,this.searchCompetencies=!1,this.searchDirectories=!1)}},l=c,d=r("2877"),h=Object(d["a"])(l,s,a,!1,null,null,null);t["a"]=h.exports},71560:function(e,t,r){var s=r("861d"),a=r("d2bb");e.exports=function(e,t,r){var i,o;return a&&"function"==typeof(i=t.constructor)&&i!==r&&s(o=i.prototype)&&o!==r.prototype&&a(e,o),e}},"87af":function(e,t,r){},"984b":function(e,t,r){},"99af":function(e,t,r){"use strict";var s=r("23e7"),a=r("d039"),i=r("e8b5"),o=r("861d"),n=r("7b0b"),c=r("50c4"),l=r("8418"),d=r("65f0"),h=r("1dde"),p=r("b622"),m=r("2d00"),u=p("isConcatSpreadable"),f=9007199254740991,y="Maximum allowed index exceeded",g=m>=51||!a((function(){var e=[];return e[u]=!1,e.concat()[0]!==e})),w=h("concat"),v=function(e){if(!o(e))return!1;var t=e[u];return void 0!==t?!!t:i(e)},E=!g||!w;s({target:"Array",proto:!0,forced:E},{concat:function(e){var t,r,s,a,i,o=n(this),h=d(o,0),p=0;for(t=-1,s=arguments.length;t<s;t++)if(i=-1===t?o:arguments[t],v(i)){if(a=c(i.length),p+a>f)throw TypeError(y);for(r=0;r<a;r++,p++)r in i&&l(h,p,i[r])}else{if(p>=f)throw TypeError(y);l(h,p++,i)}return h.length=p,h}})},a434:function(e,t,r){"use strict";var s=r("23e7"),a=r("23cb"),i=r("a691"),o=r("50c4"),n=r("7b0b"),c=r("65f0"),l=r("8418"),d=r("1dde"),h=d("splice"),p=Math.max,m=Math.min,u=9007199254740991,f="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!h},{splice:function(e,t){var r,s,d,h,y,g,w=n(this),v=o(w.length),E=a(e,v),k=arguments.length;if(0===k?r=s=0:1===k?(r=0,s=v-E):(r=k-2,s=m(p(i(t),0),v-E)),v+r-s>u)throw TypeError(f);for(d=c(w,s),h=0;h<s;h++)y=E+h,y in w&&l(d,h,w[y]);if(d.length=s,r<s){for(h=E;h<v-s;h++)y=h+s,g=h+r,y in w?w[g]=w[y]:delete w[g];for(h=v;h>v-s+r;h--)delete w[h-1]}else if(r>s)for(h=v-s;h>E;h--)y=h+s-1,g=h+r-1,y in w?w[g]=w[y]:delete w[g];for(h=0;h<r;h++)w[h+E]=arguments[h+2];return w.length=v-s+r,d}})},a907:function(e,t,r){},a9e3:function(e,t,r){"use strict";var s=r("83ab"),a=r("da84"),i=r("94ca"),o=r("6eeb"),n=r("5135"),c=r("c6b6"),l=r("71560"),d=r("c04e"),h=r("d039"),p=r("7c73"),m=r("241c").f,u=r("06cf").f,f=r("9bf2").f,y=r("58a8").trim,g="Number",w=a[g],v=w.prototype,E=c(p(v))==g,k=function(e){var t,r,s,a,i,o,n,c,l=d(e,!1);if("string"==typeof l&&l.length>2)if(l=y(l),t=l.charCodeAt(0),43===t||45===t){if(r=l.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:s=2,a=49;break;case 79:case 111:s=8,a=55;break;default:return+l}for(i=l.slice(2),o=i.length,n=0;n<o;n++)if(c=i.charCodeAt(n),c<48||c>a)return NaN;return parseInt(i,s)}return+l};if(i(g,!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var I,b=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof b&&(E?h((function(){v.valueOf.call(r)})):c(r)!=g)?l(new w(k(t)),r,b):k(t)},S=s?m(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),C=0;S.length>C;C++)n(w,I=S[C])&&!n(b,I)&&f(b,I,u(w,I));b.prototype=v,v.constructor=b,o(a,g,b)}},ad86:function(e,t,r){"use strict";var s=r("a907"),a=r.n(s);a.a},af07:function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"modal cass-editor___modal",class:[{"is-active":e.active},"is-"+e.size,"cass-editor__modal--"+e.content],attrs:{id:"cass-modal"}},[r("div",{staticClass:"modal-background"}),r("div",{staticClass:"modal-card",class:"cass-editor__modal-card--"+e.size},[r("header",{staticClass:"modal-card-head is-size-4 has-text-weight-bold",class:["has-background-"+e.type,"has-text-"+e.fontColor]},[r("p",{staticClass:"modal-card-title"},[e._t("modal-header")],2),e.canClose?r("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(t){e.$store.commit("app/closeModal"),e.$emit("close")}}}):e._e()]),r("div",{staticClass:"modal-card-body has-text-dark"},[e._t("modal-body")],2),r("footer",{staticClass:"modal-card-foot has-background-white"},[e._t("modal-foot")],2)])])},a=[],i=(r("984b"),{name:"ModalTemplate",props:{canClose:{type:Boolean,default:!0},active:{type:Boolean,default:!1},type:{default:"primary",type:String},fontColor:{type:String,default:"white"},size:{type:String,default:"medium"},content:{defualt:"default",type:String}},data:function(){return{}},computed:{}}),o=i,n=(r("ad86"),r("2877")),c=Object(n["a"])(o,s,a,!1,null,null,null);t["a"]=c.exports},fbde:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("modal-template",{attrs:{content:"search",active:!0},on:{close:e.closeModal}},[r("template",{slot:"modal-header"},[r("p",{staticClass:"modal-card-title"},[r("span",{staticClass:"title has-text-white"},[e._v("Search for "+e._s(e.searchType))]),r("br"),e.copyOrLink?r("span",{staticClass:"subtitle has-text-white"},[r("b",[e._v("Editing framework:")]),e._v(" "+e._s(e.frameworkName)+" ")]):e._e()])]),r("template",{slot:"modal-body"},[e.selectedIds&&e.selectedIds.length||e.selectedFramework?r("button",{staticClass:"button is-dark is-outlined is-small is-pulled-right",on:{click:e.clickClearFramework}},[r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-times"})]),r("span",[e._v(" Clear selection ")])]):e._e(),r("search",{ref:"search",attrs:{parent:"search-modal",allowShowFrameworks:!0,clearFramework:e.clearFramework},on:{setSelectedIds:function(t){e.selectedIds=t},selectFramework:e.selectFramework}})],1),r("template",{slot:"modal-foot"},[r("div",{staticClass:"buttons"},[r("button",{staticClass:"button is-outlined is-dark",on:{click:e.closeModal}},[r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-times"})]),r("span",[e._v("cancel")])]),e.copyOrLink?r("button",{staticClass:"button is-outlined is-primary",attrs:{disabled:!e.selectedIds||0===e.selectedIds.length},on:{click:e.copyCompetencies}},[r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-copy"})]),r("span",[e._v(" Copy "+e._s(e.searchType)+" ")])]):e._e(),e.copyOrLink?r("button",{staticClass:"button is-outlined is-primary",attrs:{disabled:!e.selectedIds||0===e.selectedIds.length},on:{click:e.appendCompetencies}},[r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-link"})]),r("span",[e._v(" Link "+e._s(e.searchType)+" ")])]):e._e()])])],2)},a=[],i=(r("fb6a"),r("a434"),r("f3f3")),o=r("af07"),n=r("3dcd"),c=r("872c"),l=r("2f62"),d={name:"SearchModal",data:function(){return{selectedIds:[],clearFramework:!1,selectedFramework:null,repo:window.repo,itemsSaving:0}},components:{ModalTemplate:o["a"],Search:n["a"]},mixins:[c["a"]],computed:Object(i["a"])(Object(i["a"])({},Object(l["c"])({selectedCompetency:function(e){return e.editor.selectedCompetency},framework:function(e){return e.editor.framework},queryParams:function(e){return e.editor.queryParams}})),{},{copyOrLink:function(){return this.$store.state.lode.copyOrLink},searchType:function(){return this.$store.state.lode.searchType},frameworkName:function(){return this.framework&&this.framework.context?this.framework.getName():""},searchFrameworksInCompetencySearch:function(){return this.$store.getters["app/searchFrameworksInCompetencySearch"]}}),methods:{closeModal:function(){this.$store.commit("app/closeModal")},clickClearFramework:function(){var e=this;this.selectedIds.splice(0,this.selectedIds.length),this.clearFramework=!0,this.$nextTick((function(){e.clearFramework=!1}))},selectFramework:function(e){this.selectedFramework=e},addRelations:function(){if(this.searchFrameworksInCompetencySearch&&this.selectedFramework.relation)for(var e=0;e<this.selectedFramework.relation.length;e++){var t=EcAlignment.getBlocking(this.selectedFramework.relation[e]);EcArray.has(this.selectedIds,t.target)&&EcArray.has(this.selectedIds,t.source)&&this.selectedIds.push(t.shortId())}},copyCompetencies:function(){var e=this.selectedIds;this.addRelations();for(var t={},r=this.$store.state.editor.framework,s=this.framework.competency?this.framework.competency.slice():null,a=this.framework.relation?this.framework.relation.slice():null,i=this.framework.level?this.framework.level.slice():null,o=[],n=this,c=0;c<e.length;c++){var l=EcRepository.getBlocking(e[c]);if(null!=l&&l.isAny((new EcCompetency).getTypes())){var d=new EcCompetency;if(d.copyFrom(l),null!=this.queryParams.newObjectEndpoint?d.generateShortId(this.queryParams.newObjectEndpoint):d.generateId(this.repo.selectedServer),o.push(d.shortId()),d["schema:dateCreated"]=(new Date).toISOString(),d["schema:dateModified"]=(new Date).toISOString(),delete d.owner,EcIdentityManager.ids.length>0&&d.addOwner(EcIdentityManager.ids[0].ppk.toPk()),r.owner&&r.owner.length>0)for(var h=0;h<r.owner.length;h++){var p=r.owner[h];d.addOwner(EcPk.fromPem(p))}if(r.reader&&r.reader.length>0)for(h=0;h<r.reader.length;h++){var m=r.reader[h];d.addReader(EcPk.fromPem(m))}d["ceasn:derivedFrom"]=l.id,t[l.shortId()]=d,!0===this.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[d.id]&&(d=EcEncryptedValue.toEncryptedValue(d)),this.itemsSaving++,function(e){Task.asyncImmediate((function(t){n.repo.saveTo(e,(function(){r.addCompetency(e.shortId()),n.$store.commit("editor/framework",r),n.afterCopy(s,a,i,o),t()}),(function(e){appError(e),n.afterCopy(s,a,i,o),t()}))}))}(d)}else if(null!=l&&l.isAny((new EcLevel).getTypes())){var u=new EcLevel;u.copyFrom(l),null!=this.queryParams.newObjectEndpoint?u.generateShortId(this.queryParams.newObjectEndpoint):u.generateId(this.repo.selectedServer),o.push(u.shortId()),u["schema:dateCreated"]=(new Date).toISOString(),u.competency=this.$store.state.editor.selectedCompetency.shortId(),delete u.owner,u["ceasn:derivedFrom"]=l.id,t[l.shortId()]=u,!0===this.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[u.id]&&(u=EcEncryptedValue.toEncryptedValue(u)),this.itemsSaving++,function(e){Task.asyncImmediate((function(t){n.repo.saveTo(e,(function(){r.addLevel(e.shortId()),n.$store.commit("editor/framework",r),n.afterCopy(s,a,i,o),t()}),(function(e){appError(e),n.afterCopy(s,a,i,o),t()}))}))}(u)}}for(c=0;c<e.length;c++){l=EcRepository.getBlocking(e[c]);if(null!=l&&l.isAny((new EcAlignment).getTypes())){var f=t[l.target],y=t[l.source];if("undefined"!==typeof f&&"undefined"!==typeof y){var g=new EcAlignment;if(g.copyFrom(l),null!=this.queryParams.newObjectEndpoint?g.generateShortId(this.queryParams.newObjectEndpoint):g.generateId(this.repo.selectedServer),o.push(g.shortId()),g["schema:dateCreated"]=(new Date).toISOString(),g.target=f.shortId(),g.source=y.shortId(),g.relationType=l.relationType,EcIdentityManager.ids.length>0&&g.addOwner(EcIdentityManager.ids[0].ppk.toPk()),r.owner&&r.owner.length>0)for(h=0;h<r.owner.length;h++){p=r.owner[h];g.addOwner(EcPk.fromPem(p))}if(r.reader&&r.reader.length>0)for(h=0;h<r.reader.length;h++){m=r.reader[h];g.addReader(EcPk.fromPem(m))}g.source!==g.target&&(r["schema:dateModified"]=(new Date).toISOString(),!0===this.$store.state.editor.private&&(g=EcEncryptedValue.toEncryptedValue(g)),this.itemsSaving++,function(e){Task.asyncImmediate((function(t){n.repo.saveTo(e,(function(){r.addRelation(e.id),n.$store.commit("editor/framework",r),n.afterCopy(s,a,i,o),t()}),(function(e){appError(e),n.afterCopy(s,a,i,o),t()}))}))}(g))}}}var w=this.$store.state.editor.selectedCompetency;for(c=0;c<e.length;c++){l=EcRepository.getBlocking(e[c]);if(null!=l&&l.isAny((new EcCompetency).getTypes())&&null!=w){g=new EcAlignment;null!=this.queryParams.newObjectEndpoint?g.generateShortId(this.queryParams.newObjectEndpoint):g.generateId(this.repo.selectedServer),o.push(g.shortId()),g["schema:dateCreated"]=(new Date).toISOString();y=t[l.shortId()];if(g.target=w.shortId(),g.source=y.shortId(),g.relationType=Relation.NARROWS,EcIdentityManager.ids.length>0&&g.addOwner(EcIdentityManager.ids[0].ppk.toPk()),r.owner&&r.owner.length>0)for(h=0;h<r.owner.length;h++){p=r.owner[h];g.addOwner(EcPk.fromPem(p))}if(r.reader&&r.reader.length>0)for(h=0;h<r.reader.length;h++){m=r.reader[h];g.addReader(EcPk.fromPem(m))}g.source!==g.target&&(this.itemsSaving++,r.addRelation(g.id),r["schema:dateModified"]=(new Date).toISOString(),!0===this.$store.state.editor.private&&(g=EcEncryptedValue.toEncryptedValue(g)),function(e){Task.asyncImmediate((function(t){n.repo.saveTo(e,(function(){n.afterCopy(s,a,i,o),t()}),(function(e){appError(e),n.afterCopy(s,a,i,o),t()}))}))}(g))}}},afterCopy:function(e,t,r,s){if(this.itemsSaving--,0===this.itemsSaving){for(var a=this.$store.state.editor.framework,i=[],o=0;o<s.length;o++)i.push({operation:"addNew",id:s[o]});i.push({operation:"update",id:a.shortId(),fieldChanged:["competency","relation","level"],initialValue:[e,t,r],changedValue:[a.competency,a.relation,a.level]}),this.$store.commit("editor/addEditsToUndo",i),!0===this.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[a.id]&&(a=EcEncryptedValue.toEncryptedValue(a)),this.repo.saveTo(a,(function(){}),appError),this.closeModal()}},appendCompetencies:function(){var e=this.selectedIds;this.addRelations();for(var t=this.$store.state.editor.selectedCompetency,r=this.$store.state.editor.framework,s=this.framework.competency?this.framework.competency.slice():null,a=this.framework.relation?this.framework.relation.slice():null,i=this.framework.level?this.framework.level.slice():null,o=[],n=[],c=[],l=this,d=0;d<e.length;d++){var h=EcRepository.getBlocking(e[d]);if(h.isAny((new EcCompetency).getTypes()))r.addCompetency(h.shortId());else if(h.isAny((new EcLevel).getTypes())){r.addLevel(h.shortId()),EcArray.isArray(h.competency)||(h.competency=[h.competency]);var p=h.shortId();o.push({id:p,competency:h.competency.splice()}),h.competency.push(t.shortId()),n.push({id:p,competency:h.competency}),this.repo.saveTo(h,(function(){}),appError)}}for(d=0;d<e.length;d++){h=EcRepository.getBlocking(e[d]);h.isAny((new EcAlignment).getTypes())&&EcArray.has(r.competency,h.source)&&EcArray.has(r.competency,h.target)&&r.addRelation(h.shortId())}for(d=0;d<e.length;d++){h=EcRepository.getBlocking(e[d]);if(h.isAny((new EcCompetency).getTypes())&&null!=t){var m=new EcAlignment;if(null!=this.queryParams.newObjectEndpoint?m.generateShortId(this.queryParams.newObjectEndpoint):m.generateId(this.repo.selectedServer),c.push(m.shortId()),m["schema:dateCreated"]=(new Date).toISOString(),m.target=t.shortId(),m.source=h.shortId(),m.relationType=Relation.NARROWS,EcIdentityManager.ids.length>0&&m.addOwner(EcIdentityManager.ids[0].ppk.toPk()),r.owner&&r.owner.length>0)for(var u=0;u<r.owner.length;u++){var f=r.owner[u];m.addOwner(EcPk.fromPem(f))}if(r.reader&&r.reader.length>0)for(u=0;u<r.reader.length;u++){var y=r.reader[u];m.addReader(EcPk.fromPem(y))}m.source!==m.target&&(r.addRelation(m.id),!0===this.$store.state.editor.private&&(m=EcEncryptedValue.toEncryptedValue(m)),this.repo.saveTo(m,(function(){}),appError))}}var g=[];for(d=0;d<c.length;d++)g.push({operation:"addNew",id:c[d]});if(o.length>0)for(d=0;d<o.length;d++)g.push({operation:"update",id:o[d].id,fieldChanged:["competency"],initialValue:[o[d].competency],changedValue:[n[d].competency]});g.push({operation:"update",id:r.shortId(),fieldChanged:["competency","relation","level"],initialValue:[s,a,i],changedValue:[r.competency,r.relation,r.level]}),this.$store.commit("editor/addEditsToUndo",g),!0===this.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[r.id]&&(r=EcEncryptedValue.toEncryptedValue(r)),this.repo.saveTo(r,(function(){l.$store.commit("editor/framework",EcFramework.getBlocking(r.id)),l.closeModal()}),appError)}}},h=d,p=(r("454f"),r("2877")),m=Object(p["a"])(h,s,a,!1,null,"17360f4b",null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-59826ace.534f8395.js.map