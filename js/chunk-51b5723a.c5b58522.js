(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51b5723a","chunk-208a03a5","chunk-2f37fe09","chunk-0a468065","chunk-2d0e6c3b"],{"18a3":function(e,t,r){"use strict";var s=r("2eb6"),i=r.n(s);i.a},"2eb6":function(e,t,r){},"3dcd":function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"columns is-multiline"},[e.selectedFramework?e._e():r("div",{staticClass:"column is-12"},[r("SearchBar",{attrs:{filterSet:"basic",allowShowFrameworks:e.allowShowFrameworks,searchType:e.searchType}})],1),e.selectedFramework?e._e():r("div",{staticClass:"column is-12"},[e.$store.state.lode.competencySearchModalOpen?r("List",{attrs:{type:e.searchTypeToPassToList,view:"search",parent:e.parent,repo:e.repo,click:e.select,searchOptions:e.searchOptions,paramObj:e.paramObj,disallowEdits:!0,selectingCompetency:!0,selected:e.selectedIds,displayFirst:e.displayFirst,idsNotPermittedInSearch:e.idsNotPermittedInSearch}}):e._e()],1),e.selectedFramework&&!e.hierarchyLoaded?r("div",[e._m(0)]):e._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:e.hierarchyLoaded,expression:"hierarchyLoaded"}]},[e.selectedFramework?r("Thing",{attrs:{parent:e.parent,obj:e.selectedFramework,repo:e.repo,view:e.view,expandInModal:!0}}):e._e(),r("Hierarchy",{attrs:{parent:e.parent,container:e.selectedFramework,view:"competencySearch",containerType:"Framework",containerTypeGet:"EcFramework",containerNodeProperty:"competency",containerEdgeProperty:"relation",nodeType:"EcCompetency",edgeType:"EcAlignment",edgeRelationProperty:"relationType",edgeRelationLiteral:"narrows",edgeSourceProperty:"source",edgeTargetProperty:"target",viewOnly:!0,repo:e.repo,highlightList:null,properties:"primary"},on:{"done-loading-nodes":function(t){e.hierarchyLoaded=!0},"selected-array":e.selectedArrayEvent}})],1)])},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon is-large"},[r("i",{staticClass:"fa fa-spinner fa-2x fa-pulse"})])}],a=(r("4de4"),r("a434"),r("b0c0"),r("f3f3")),o=r("713e"),n=r("9418"),c=r("098b"),l=r("872c"),d=r("2f62"),p=r("6b9e"),h={name:"CompetencySearch",props:{parent:{type:String,default:""},isActive:Boolean,view:{type:String,default:"modal"},idsNotPermittedInSearch:{type:Array,default:null},allowShowFrameworks:{type:Boolean,default:!1},clearFramework:{type:Boolean,default:!1}},components:{List:o["a"],SearchBar:p["a"],Hierarchy:n["default"],Thing:c["default"]},mixins:[l["a"]],data:function(){return{repo:window.repo,selectedIds:[],displayFirst:[],showMine:!1,sortBy:null,selectedFramework:null,hierarchyLoaded:!1}},created:function(){this.sortBy=!0===this.$store.getters["editor/conceptMode"]||"Concept"===this.searchType?"dcterms:title.keyword":"name.keyword",this.$store.commit("app/searchTerm","")},beforeDestroy:function(){this.$store.commit("app/searchTerm","")},computed:Object(a["a"])(Object(a["a"])({},Object(d["c"])({selectedCompetency:function(e){return e.editor.selectedCompetency},framework:function(e){return e.editor.framework},queryParams:function(e){return e.editor.queryParams},addingProperty:function(e){return e.lode.addingProperty}})),{},{nameOfSelectedCompetency:function(){return this.selectedCompetency&&this.selectedCompetency.name?this.selectedCompetency.getName():this.selectedCompetency?c["default"].getDisplayStringFrom(this.selectedCompetency["skos:prefLabel"]):""},copyOrLink:function(){return this.$store.state.lode.copyOrLink},frameworkName:function(){return this.framework?this.framework.getName():""},searchOptions:function(){var e="";if(this.queryParams&&null!=this.queryParams.filter&&(e+=" AND ("+this.queryParams.filter+")"),(this.showMine||this.queryParams&&!0!==this.$store.getters["editor/conceptMode"]&&"mine"===this.queryParams.show||this.queryParams&&!0===this.$store.getters["editor/conceptMode"]&&"mine"===this.queryParams.conceptShow)&&EcIdentityManager.ids.length>0){e+=" AND (";for(var t=0;t<EcIdentityManager.ids.length;t++){0!==t&&(e+=" OR ");var r=EcIdentityManager.ids[t];e+='\\*owner:"'+r.ppk.toPk().toPem()+'"',e+=' OR \\*owner:"'+this.addNewlinesToId(r.ppk.toPk().toPem())+'"'}e+=")"}return e},paramObj:function(){var e={size:20},t=this.$store.getters["app/searchTerm"];if(t&&0!==t.length)delete e.sort;else{var r="name.keyword"===this.sortBy||"dcterms:title.keyword"===this.sortBy?"asc":"desc";e.sort='[ { "'+this.sortBy+'": {"order" : "'+r+'" , "unmapped_type" : "long",  "missing" : "_last"}} ]'}return EcIdentityManager.ids.length>0&&this.queryParams&&(!0!==this.$store.getters["editor/conceptMode"]&&"mine"===this.queryParams.show||!0===this.$store.getters["editor/conceptMode"]&&"mine"===this.queryParams.conceptShow)&&(e.ownership="me"),e},searchType:function(){return this.$store.state.lode.searchType},sortResults:function(){return this.$store.getters["app/sortResults"]},quickFilters:function(){return this.$store.getters["app/quickFilters"]},filteredQuickFilters:function(){if(this.quickFilters){var e=this.quickFilters.filter((function(e){return!0===e.checked}));return appLog("filtered value",e),e}return[]},searchFrameworksInCompetencySearch:function(){return this.$store.getters["app/searchFrameworksInCompetencySearch"]},searchTypeToPassToList:function(){return"Competency"===this.searchType&&this.searchFrameworksInCompetencySearch?"Framework":this.searchType}}),mounted:function(){if(this.displayFirst.splice(0,this.displayFirst.length),this.$store.commit("app/searchTerm",""),!this.copyOrLink&&"Competency"===this.searchType&&this.framework.competency)for(var e=0;e<this.framework.competency.length;e++)if(this.framework.competency[e]!==this.selectedCompetency.shortId()&&(!this.idsNotPermittedInSearch||0===this.idsNotPermittedInSearch.length||!EcArray.has(this.idsNotPermittedInSearch,this.framework.competency[e]))){var t=EcRepository.getBlocking(this.framework.competency[e]);t&&this.displayFirst.push(t)}if("Level"===this.searchType&&this.framework.level)for(e=0;e<this.framework.level.length;e++){t=EcRepository.getBlocking(this.framework.level[e]);t&&this.displayFirst.push(t)}},methods:{resetModal:function(){this.$store.commit("app/closeModal"),this.selectedIds=[]},selectedArrayEvent:function(e){if(this.selectedIds=e,this.copyOrLink&&"Level"!==this.searchType||this.$store.commit("editor/selectedCompetenciesAsProperties",this.selectedIds),"true"===this.queryParams.selectRelations&&this.framework.relation)for(var t=0;t<this.framework.relation.length;t++){var r=EcAlignment.getBlocking(this.framework.relation[t]);EcArray.has(selectedArray,r.target)&&("true"===this.queryParams.selectVerbose?e.push(JSON.parse(rld.toJson())):e.push(r.shortId()))}},select:function(e){if("Framework"===e.type)return this.selectFramework(e);EcArray.has(this.selectedIds,e.shortId())?EcArray.setRemove(this.selectedIds,e.shortId()):this.selectedIds.push(e.shortId()),this.copyOrLink&&"Level"!==this.searchType||this.$store.commit("editor/selectedCompetenciesAsProperties",this.selectedIds)},selectFramework:function(e){this.selectedFramework=e,this.$emit("selectFramework",e)},addNewlinesToId:function(e){e=e.substring(0,26)+"\n"+e.substring(26);var t=e.length,r=27;while(r+64<t)e=e.substring(0,r+64)+"\n"+e.substring(r+64),r+=65,t++;return e=e.substring(0,t-24)+"\n"+e.substring(t-24),e}},watch:{sortResults:function(){"lastEdited"===this.sortResults.id?(this.sortBy="schema:dateModified",this.displayFirst.splice(0,this.displayFirst.length)):(this.sortBy=!0===this.$store.getters["editor/conceptMode"]||"Concept"===this.searchType?"dcterms:title.keyword":"name.keyword",this.displayFirst.splice(0,this.displayFirst.length))},filteredQuickFilters:function(){this.showMine=!1;for(var e=0;e<this.filteredQuickFilters.length;e++)"ownedByMe"===this.filteredQuickFilters[e].id&&(this.showMine=!0,this.displayFirst.splice(0,this.displayFirst.length))},selectedIds:function(e){"search-modal"===this.parent&&this.$emit("setSelectedIds",e)},clearFramework:function(){this.clearFramework&&this.selectFramework(null)}}},u=h,m=(r("18a3"),r("2877")),f=Object(m["a"])(u,s,i,!1,null,null,null);t["a"]=f.exports},"498a":function(e,t,r){"use strict";var s=r("23e7"),i=r("58a8").trim,a=r("c8d2");s({target:"String",proto:!0,forced:a("trim")},{trim:function(){return i(this)}})},5650:function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[r("div",{staticClass:"px-1"},[r("h2",{staticClass:"title is-size-2 has-text-weight-light"},[e._v(" Adding property ")]),""===e.selectedPropertyToAdd?r("p",{staticClass:"subtitle is-size-5"},[e._v(" Select a property from one of the following groups. ")]):""===e.selectedPropertyToAdd||e.selectedPropertyToAddIsTextValue?e._e():r("p",{staticClass:"subtitle is-size-5"},[e._v(" When adding relationships or levels, you can either search for existing relationships/levels or add one via url. Choose one. ")])]),""!==e.selectedPropertyToAdd?r("div",{staticClass:"py-4 px-1"},[""!==e.selectedPropertyToAdd?r("p",{staticClass:"title is-size-3 has-text-weight-normal"},[e._v(" "+e._s(e.selectedPropertyToAdd.label)+" "),r("span",{staticClass:"button is-pulled-right is-text has-text-primary",on:{click:function(t){e.selectedPropertyToAdd="",e.addRelationBy=""}}},[e._m(0),r("span",[e._v("back")])])]):e._e(),e.selectedPropertyToAddIsTextValue||"url"===e.addRelationBy?r("div",{staticClass:"add-property-field"},[r("div",{staticClass:"add-property__input-type"},[r("div",{staticClass:"add-property__select-type"},[r("div",{staticClass:"field is-expanded"},[e.checkedOptions&&e.profile&&e.profile[e.selectedPropertyToAdd.value]&&e.profile[e.selectedPropertyToAdd.value]["options"]?[r("p",{staticClass:"subtitle is-size-6"},[e._v(" Choose one or more of the following levels. ")]),e._l(e.optionsArray,(function(t){return r("div",{key:t,staticClass:"field"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedOptions,expression:"checkedOptions"}],staticClass:"is-checkradio",attrs:{type:"checkbox",name:t.val,id:t.val},domProps:{value:t.val,checked:Array.isArray(e.checkedOptions)?e._i(e.checkedOptions,t.val)>-1:e.checkedOptions},on:{change:function(r){var s=e.checkedOptions,i=r.target,a=!!i.checked;if(Array.isArray(s)){var o=t.val,n=e._i(s,o);i.checked?n<0&&(e.checkedOptions=s.concat([o])):n>-1&&(e.checkedOptions=s.slice(0,n).concat(s.slice(n+1)))}else e.checkedOptions=a}}}),r("label",{staticClass:"label",attrs:{for:t.val}},[e._v(" "+e._s(t.name)+" ")])])}))]:r("PropertyString",{attrs:{index:"null",expandedProperty:e.selectedPropertyToAdd.value,langString:e.selectedPropertyToAddIsLangString,range:e.selectedPropertyRange,newProperty:!0,profile:e.profile,addSingle:!0,valueFromSearching:e.selectedPropertyToAddValue,options:e.profile&&e.profile[e.selectedPropertyToAdd.value]&&e.profile[e.selectedPropertyToAdd.value]["options"]?e.profile[e.selectedPropertyToAdd.value]["options"]:null}})],2)])])]):""===e.selectedPropertyToAdd||e.selectedPropertyToAddIsTextValue?e._e():r("div",{staticClass:"add-property__field"},[r("div",{staticClass:"buttons is-left"},[e.selectedPropertyRange&&-1!==e.selectedPropertyRange[0].toLowerCase().indexOf("level")&&!e.editingMultipleCompetencies?r("div",{staticClass:"button is-outlined is-primary",attrs:{type:"text"},on:{click:e.addNewLevel}},[e._m(1),r("span",[e._v(" create new Level ")])]):e._e(),r("div",{staticClass:"button is-outlined is-primary",attrs:{type:"text"},on:{click:function(t){e.addRelationBy="url"}}},[r("span",[e._v(" Add "+e._s(e.selectedPropertyToAdd.label)+" by url ")]),e._m(2)]),r("div",{staticClass:"button is-outlined is-primary",attrs:{type:"button"},on:{click:e.search}},[r("span",[e._v(" Search for "+e._s(e.selectedPropertyToAdd.label)+" to add ")]),e._m(3)])])])]):e._e(),r("div",{},[r("div",{staticClass:"columns my-2"},[r("div",{staticClass:"column is-6"},[""===e.selectedPropertyToAdd?r("div",{staticClass:"buttons"},[r("div",{staticClass:"button is-small",class:"all"===e.filterProperties?"is-primary":"",on:{click:function(t){e.filterProperties="all"}}},[e._v(" all ")]),r("div",{staticClass:"button is-small",class:"relationships"===e.filterProperties?"is-primary":"",on:{click:function(t){e.filterProperties="relationships"}}},[e._v(" relationships ")]),r("div",{staticClass:"button is-small",class:"general"===e.filterProperties?"is-primary":"",on:{click:function(t){e.filterProperties="general"}}},[e._v(" general ")])]):e._e()]),r("div",{staticClass:"column is-6"},[""===e.selectedPropertyToAdd?r("div",{staticClass:"buttons is-right"},[r("div",{staticClass:"button is-small",class:"list"===e.propertyView?"is-primary":"",on:{click:function(t){e.propertyView="list"}}},[e._m(4)]),r("div",{staticClass:"button is-small",class:"grid"===e.propertyView?"is-primary":"",on:{click:function(t){e.propertyView="grid"}}},[e._m(5)])]):e._e()])]),""===e.selectedPropertyToAdd?[r("div",{staticClass:"columns is-multiline property-columns px-1"},[r("div",{staticClass:"column is-12 slide px-4",class:{collapsed:!e.showGeneral}},[r("div",{staticClass:"columns is-mobile is-multiline"},e._l(e.showProperties,(function(t){return r("div",{key:t,staticClass:"column property",class:"grid"===e.propertyView?"is-3":"is-12"},[r("div",{staticClass:"property-button",class:{selected:t===e.selectedPropertyToAdd},attrs:{title:t.description},on:{click:function(r){e.selectedPropertyToAdd=t}}},[r("p",{staticClass:"has-text-weight-semibold is-size-6"},[e._v(" "+e._s(t.label)+" ")]),r("p",{staticClass:"is-size-7 property-description"},[e._v(" "+e._s(t.description)+" ")])])])})),0)])])]:e._e(),r("p",{staticClass:"help is-danger"},[e._v(" "+e._s(e.errorMessage[0])+" ")])],2),e.$store.state.featuresEnabled.configurationsEnabled?r("div",{staticClass:"px-1"},[r("p",{staticClass:"subtitle"},[e._v(" Note: Property options are determined by your "),r("router-link",{attrs:{target:"_blank",to:"/configuration"}},[e._v(" configuration settings. ")]),e._v(" If a property is unavailable to you here, please refer to your configuration settings or contact your administrator. ")],1)]):e._e()])},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-arrow-left"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-plus"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-link"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-search"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-list-alt"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-th"})])}],a=(r("b0c0"),r("a9e3"),r("159b"),r("d17f")),o={name:"AddProperty",props:{profile:Object,expandedThing:Object,editingMultipleCompetencies:Boolean,idx:Number,addedPropertiesAndValuesFromSearching:Object,errorMessage:{type:Array,default:function(){return[]}}},components:{PropertyString:a["default"]},data:function(){return{filterProperties:"all",propertyView:"list",showGeneral:!0,showRelationships:!0,showResources:!0,addRelationBy:"",selectedPropertyToAdd:"",selectedPropertyRange:null,selectedPropertyToAddIsLangString:!1,selectedPropertyToAddValue:null,checkedOptions:null,skipConfigProperties:["alwaysProperties","headings","primaryProperties","secondaryProperties","tertiaryProperties","relationshipsHeading","relationshipsPriority"],optionsArray:[]}},mounted:function(){this.editingMultipleCompetencies&&this.addedPropertiesAndValuesFromSearching.value.length&&(this.selectedPropertyToAdd=this.addedPropertiesAndValuesFromSearching.property,this.selectedPropertyToAddValue=this.addedPropertiesAndValuesFromSearching.value,this.addRelationBy="url")},computed:{showProperties:function(){var e=this.allProperties;return"all"===this.filterProperties?e=this.allProperties:"relationships"===this.filterProperties?e=this.relationshipProperties:"general"===this.filterProperties&&(e=this.generalProperties),e},allProperties:function(){var e=[];return this.propertyOptions.forEach((function(t){e.push(t)})),e},generalProperties:function(){var e=[];return this.propertyOptions.forEach((function(t){"relationship"!==t.type&&"resource"!==t.type&&e.push(t)})),e},relationshipProperties:function(){var e=[];return this.propertyOptions.forEach((function(t){"relationship"===t.type&&e.push(t)})),e},resourceProperties:function(){var e=[];return this.propertyOptions.forEach((function(t){"resource"===t.type&&e.push(t)})),e},propertyOptions:function(){var e=[];if(this.profile)for(var t in this.profile)if(!EcArray.has(this.skipConfigProperties,t)){if("true"===this.profile[t]["readOnly"]||!0===this.profile[t]["readOnly"])continue;if(!this.editingMultipleCompetencies&&1===this.profile[t]["max"])if(this.profile[t]["valuesIndexed"]){var r=this.profile[t]["valuesIndexed"];if(r=r(),r&&r[this.obj.shortId()])continue}else if(null!=this.expandedThing[t]&&this.expandedThing[t].length>0)continue;var s=this.profile[t]["http://www.w3.org/2000/01/rdf-schema#label"][0]["@value"],i=this.profile[t]["http://www.w3.org/2000/01/rdf-schema#comment"][0]["@value"],a="property";-1!==this.profile[t]["http://schema.org/rangeIncludes"][0]["@id"].toLowerCase().indexOf("competency")?a="relationship":-1!==this.profile[t]["http://schema.org/rangeIncludes"][0]["@id"].toLowerCase().indexOf("level")&&(a="level"),!0===this.profile[t]["resource"]&&(a="resource"),e.push({value:t,label:s,description:i,type:a})}return e},selectedPropertyToAddIsTextValue:function(){var e,t=this.selectedPropertyToAdd.value;return this.profile&&this.profile[t]&&(e=this.profile[t]["http://schema.org/rangeIncludes"][0]["@id"]),!!e&&(-1===e.toLowerCase().indexOf("competency")&&-1===e.toLowerCase().indexOf("concept")&&((-1===e.toLowerCase().indexOf("level")||"checkedOptions"===this.profile[t]["add"])&&("https://purl.org/ctdlasn/terms/knowledgeEmbodied"!==this.selectedPropertyToAdd.value&&"https://purl.org/ctdlasn/terms/skillEmbodied"!==this.selectedPropertyToAdd.value&&"https://purl.org/ctdlasn/terms/taskEmbodied"!==this.selectedPropertyToAdd.value&&"https://purl.org/ctdlasn/terms/abilityEmbodied"!==this.selectedPropertyToAdd.value)))}},methods:{updatePropertyString:function(e,t){this.selectedPropertyToAddValue=e,this.$emit("property-string-updated",this.selectedPropertyToAdd,e,this.selectedPropertyRange,this.idx)},addNewLevel:function(){var e=this.profile[this.selectedPropertyToAdd.value]["add"],t=EcRemoteLinkedData.trimVersionFromUrl(this.expandedThing["@id"]);e(t)},removeValueAtIndex:function(){this.$store.commit("lode/removeAddingValueAtIndex",this.idx)},search:function(){if(this.addRelationBy="search",this.$emit("is-searching",!0),-1!==this.selectedPropertyRange[0].toLowerCase().indexOf("concept")?(this.$store.commit("lode/searchType","Concept"),this.$store.commit("lode/copyOrLink",!1)):-1!==this.selectedPropertyRange[0].toLowerCase().indexOf("level")?(this.$store.commit("lode/searchType","Level"),this.$store.commit("lode/copyOrLink",!0)):(this.$store.commit("lode/searchType","Competency"),this.$store.commit("lode/copyOrLink",!1)),this.$store.state.editor){var e=this.expandedThing?EcRepository.getBlocking(EcRemoteLinkedData.trimVersionFromUrl(this.expandedThing["@id"])):null;this.$store.commit("editor/selectedCompetency",e),this.$store.commit("editor/selectCompetencyRelation",this.selectedPropertyToAdd.value)}this.$store.commit("lode/competencySearchModalOpen",!0)}},watch:{selectedPropertyToAdd:function(){if(this.selectedPropertyToAddIsLangString=!1,this.profile&&this.profile[this.selectedPropertyToAdd.value]){var e=[],t=this.profile[this.selectedPropertyToAdd.value]["http://schema.org/rangeIncludes"];if(null!=t||void 0!==t)for(var r=0;r<t.length;r++)e.push(t[r]["@id"]),"http://www.w3.org/2000/01/rdf-schema#langString"===t[r]["@id"]&&(this.selectedPropertyToAddIsLangString=!0);this.selectedPropertyRange=e,this.$store.commit("lode/setAddingProperty",this.selectedPropertyToAdd.value)}if(this.selectedPropertyToAdd.value&&-1!==this.selectedPropertyToAdd.value.toLowerCase().indexOf("level")&&this.profile&&this.profile[this.selectedPropertyToAdd.value]&&this.profile[this.selectedPropertyToAdd.value]["options"]?this.checkedOptions=[]:this.checkedOptions=null,this.profile&&this.profile[this.selectedPropertyToAdd.value]&&this.profile[this.selectedPropertyToAdd.value]["options"]&&this.checkedOptions)for(var s=0;s<this.profile[this.selectedPropertyToAdd.value]["options"].length;s++){var i=this.profile[this.selectedPropertyToAdd.value]["options"][s];i.name=EcRepository.getBlocking(i.val).name,this.optionsArray.push(i)}},checkedOptions:function(){this.$store.commit("lode/setAddingChecked",this.checkedOptions),this.updatePropertyString(this.checkedOptions)},selectedPropertyToAddValue:function(){this.$store.commit("lode/setAddingValue",this.selectedPropertyToAddValue)},selectedPropertyRange:function(){this.$store.commit("lode/setAddingRange",this.selectedPropertyRange)},addedPropertiesAndValuesFromSearching:function(){this.editingMultipleCompetencies&&this.addedPropertiesAndValuesFromSearching.value.length&&(this.selectedPropertyToAdd=this.addedPropertiesAndValuesFromSearching.property,this.selectedPropertyToAddValue=this.addedPropertiesAndValuesFromSearching.value,this.addRelationBy="url")}}},n=o,c=(r("639d"),r("2877")),l=Object(c["a"])(n,s,i,!1,null,null,null);t["a"]=l.exports},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var s=r("1d80"),i=r("5899"),a="["+i+"]",o=RegExp("^"+a+a+"*"),n=RegExp(a+a+"*$"),c=function(e){return function(t){var r=String(s(t));return 1&e&&(r=r.replace(o,"")),2&e&&(r=r.replace(n,"")),r}};e.exports={start:c(1),end:c(2),trim:c(3)}},"639d":function(e,t,r){"use strict";var s=r("cd8e"),i=r.n(s);i.a},"6e90":function(e,t,r){},"6ffa4":function(e,t,r){"use strict";r("fb6a");var s=r("872c");t["a"]={mixins:[s["a"]],methods:{removeObject:function(e){appLog("removing "+e.id);var t=this,r=this.$store.getters["editor/framework"],s=r.competency?r.competency.slice():null,i=r.relation?r.relation.slice():null,a=r.level?r.level.slice():null;r["schema:dateModified"]=(new Date).toISOString(),r.removeCompetency(e.shortId(),(function(){var e=t.framework;t.$store.commit("editor/addEditsToUndo",[{operation:"update",id:e.shortId(),fieldChanged:["competency","relation","level"],initialValue:[s,i,a]}]),!0===t.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[f.id]&&(e=EcEncryptedValue.toEncryptedValue(e)),window.repo.saveTo(e,(function(){t.$store.commit("editor/framework",r)}),appError)}),appLog)},deleteObject:function(e){appLog("deleting "+e.id);var t=this,r=this.$store.getters["editor/framework"];if(e.shortId()===r.shortId())window.repo.deleteRegistered(r,(function(e){if(t.spitEvent("frameworkDeleted",r.shortId(),"editFrameworkSection"),null!=r.competency)for(var s=0;s<r.competency.length;s++)t.conditionalDelete(r.competency[s]);if(null!=r.relation)for(s=0;s<r.relation.length;s++)t.conditionalDelete(r.relation[s]);if(null!=r.level)for(s=0;s<r.level.length;s++)t.conditionalDelete(r.level[s]);t.$store.commit("editor/framework",null),t.importType?t.$store.commit("app/importFramework",null):t.$router.push({name:"frameworks"})}),appLog);else{var s=r.competency?r.competency.slice():null,i=r.relation?r.relation.slice():null,a=r.level?r.level.slice():null;this.$store.commit("editor/selectedCompetency",e),r["schema:dateModified"]=(new Date).toISOString(),r.removeCompetency(e.shortId(),(function(){r.removeLevel(e.shortId()),t.$store.commit("editor/addEditsToUndo",[{operation:"delete",obj:e},{operation:"update",id:r.shortId(),fieldChanged:["competency","relation","level"],initialValue:[s,i,a],changedValue:[r.competency,r.relation,r.level]}]),t.conditionalDelete(e.shortId()),t.spitEvent("competencyDeleted",e.shortId(),"editFrameworkSection"),t.$store.commit("editor/selectedCompetency",null);var o=r;!0===t.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[r.id]&&(o=EcEncryptedValue.toEncryptedValue(r)),window.repo.saveTo(o,(function(){t.$store.commit("editor/framework",r)}),appError)}),appLog)}}}}},"713e":function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cass--list--container",class:e.parent},[e.firstSearchProcessing?r("div",{staticClass:"section has-text-centered"},[e._m(0)]):e._e(),[r("div",{staticClass:"container is-desktop"},[r("ul",{staticClass:"cass--list"},[e._l(e.results,(function(t){return r("li",{key:t.id,staticClass:"cass--list--item",class:[{"source-framework":e.crosswalkAlignmentSource&&t.id===e.crosswalkAlignmentSource.id},e.rightAsideObjectId&&e.rightAsideObjectId===t.shortId()?"cass--list--item--selected":""],on:{click:function(r){return e.click(t)}}},[r("div",{staticClass:"cass--list-item--icon"},[r("div",{staticClass:"cass--list-item--icon-wrap has-background-dark"},[r("span",{staticClass:"icon"},["Directory"===t.type?r("i",{staticClass:"fa fa-folder",attrs:{title:"Directory"}}):"Framework"===t.type?r("i",{staticClass:"fa fa-file-alt",attrs:{title:"Framework"}}):"Competency"===t.type?r("i",{staticClass:"fa fa-list-alt",attrs:{title:"Competency"}}):"ConceptScheme"===t.type?r("i",{staticClass:"fa fa-book",attrs:{title:"Concept Scheme"}}):e._e()])])]),r("div",{staticClass:"cass--list-item--content"},[e.selectingCompetency||t.parentDirectory?r("Breadcrumbs",{attrs:{competency:t}}):e._e(),r("Thing",{staticClass:"cass--list--thing",attrs:{parent:e.parent,obj:t,view:e.view,profile:e.profile,parentNotEditable:e.disallowEdits},nativeOn:{dblclick:function(r){return e.$emit("dblclick",t)}},scopedSlots:e._u([{key:"frameworkTags",fn:function(){return[e._t("frameworkTags",null,{item:t})]},proxy:!0}],null,!0)})],1),r("div",{staticClass:"cass--list-item--hover"},[e.selectingCompetency&&e.isClicked(t.shortId())&&"search"===e.view?r("span",{staticClass:"search-selection__icon"},[e._m(1,!0)]):"search"===e.view&&"crosswalk"!==e.view?r("span",{staticClass:"search-selection__add-icon"},[e._m(2,!0)]):e._e(),"search"!==e.view?r("div",{staticClass:"icon has-text-primary arrow-icon"},[r("i",{staticClass:"fa fa-arrow-right"})]):e._e()])])})),e._l(e.subResults,(function(t){return r("li",{key:t.id,staticClass:"cass--list--item",class:e.rightAsideObjectId&&e.rightAsideObjectId===t.shortId()?"cass-list-item--selected":"",on:{click:function(r){return e.subObjectClick(t)}}},[r("div",{staticClass:"cass--list-item--icon"},[r("div",{staticClass:"cass--list-item--icon-wrap has-background-dark"},[r("span",{staticClass:"icon"},["Directory"===t.type?r("i",{staticClass:"fa fa-folder",attrs:{title:"Directory"}}):"Framework"===t.type?r("i",{staticClass:"fa fa-file-alt",attrs:{title:"Framework"}}):"Competency"===t.type?r("i",{staticClass:"fa fa-list-alt",attrs:{title:"Competency"}}):"Concept"===t.type?r("i",{staticClass:"fa fa-book",attrs:{title:"Concept Scheme"}}):e._e()])])]),r("div",{staticClass:"cass--list-item--content"},[r("Breadcrumbs",{ref:t.id,refInFor:!0,attrs:{competency:t}}),r("Thing",{staticClass:"list-thing",attrs:{obj:t,view:e.view,profile:e.profile,parentNotEditable:e.disallowEdits},nativeOn:{dblclick:function(r){return e.$emit("dblclick",t)}}})],1),r("div",{staticClass:"cass--list-item--hover"},["search"!==e.view?r("div",{staticClass:"icon has-text-primary arrow-icon"},[r("i",{staticClass:"fa fa-arrow-right"})]):e._e()])])}))],2),e.results.length>0?r("infinite-loading",{attrs:{spinner:"circles",distance:10},on:{infinite:e.loadMore}},[r("div",{attrs:{slot:"no-more"},slot:"no-more"},[e._v(" All results loaded ")]),r("div",{attrs:{slot:"no-results"},slot:"no-results"},[e._v(" All results loaded ")])]):e._e()],1)]],2)},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon is-large"},[r("i",{staticClass:"fa fa-spinner fa-2x fa-pulse"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"icon is-primary is-small"},[r("i",{staticClass:"fa fa-check has-text-primary",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"icon is-primary is-small"},[r("i",{staticClass:"fa fa-plus has-text-primary",attrs:{"aria-hidden":"true"}})])}],a=(r("99af"),r("4de4"),r("a434"),r("b0c0"),r("ac1f"),r("5319"),r("841c"),r("098b")),o=r("30d6"),n=r("6d79"),c={name:"List",props:{parent:{type:String,default:""},type:String,repo:Object,profile:Object,click:Function,searchOptions:String,paramObj:Object,disallowEdits:Boolean,selectingCompetency:Boolean,selected:Array,displayFirst:Array,view:{type:String,default:""},filterToEditable:{type:Boolean,default:!1},idsNotPermittedInSearch:{type:Array,default:null}},components:{Thing:a["default"],Breadcrumbs:o["a"]},mixins:[n["a"]],created:function(){var e=this;this.$nextTick((function(){return e.searchRepo()}))},data:function(){return{results:[],start:0,subResults:[],subStart:0,searchFrameworks:!0,searchCompetencies:!0,searchDirectories:!1,searchingForCompetencies:!1,searchingForDirectories:!1,applySearchToOwner:!1,firstSearchProcessing:!0,resultIds:[],nonDirectoryResults:!1}},watch:{text:function(e,t){},paramObj:function(){this.searchRepo()},searchOptions:function(){this.searchRepo()},searchTerm:function(e){this.searchRepo()},applySearchTo:function(){if(this.applySearchToOwner=!1,"crosswalk"===this.view)this.searchFrameworks=!0,this.searchCompetencies=!1,this.searchDirectories=!1;else if(this.applySearchTo&&this.applySearchTo.length>0){this.searchFrameworks=!1,this.searchCompetencies=!1,this.searchDirectories=!1;for(var e=0;e<this.applySearchTo.length;e++)"frameworkName"===this.applySearchTo[e].id||"frameworkDescription"===this.applySearchTo[e].id?this.searchFrameworks=!0:"competencyName"===this.applySearchTo[e].id||"competencyDescription"===this.applySearchTo[e].id||"competencyLabel"===this.applySearchTo[e].id?this.searchCompetencies=!0:"ownerName"===this.applySearchTo[e].id?(this.searchFrameworks=!0,this.searchCompetencies=!0,this.applySearchToOwner=!0):"directoryName"===this.applySearchTo[e].id||"directoryDescription"===this.applySearchTo[e].id?this.searchDirectories=!0:this.searchFrameworks=!0}else this.searchFrameworks=!0,this.searchCompetencies=!0,"Framework"===this.type?this.searchDirectories=!0:this.searchDirectories=!1;this.searchRepo()},type:function(){this.searchRepo()},refreshSearch:function(){this.refreshSearch&&(this.searchRepo(),this.$store.commit("app/refreshSearch",!1))}},computed:{crosswalkAlignmentSource:function(){return this.$store.getters["crosswalk/frameworkSource"]},searchTerm:function(e){return this.$store.getters["app/searchTerm"]},refreshSearch:function(e){return this.$store.getters["app/refreshSearch"]},applySearchTo:function(){var e=this.$store.getters["app/applySearchTo"];if(!e)return null;var t=e.filter((function(e){return!0===e.checked}));return t.length<=0?null:t},rightAsideObjectId:function(){return this.$store.getters["app/rightAsideObject"]?this.$store.getters["app/rightAsideObject"].shortId():null}},methods:{subObjectClick:function(e){var t=this.$refs[e.id][0].frameworks;if(t.length>0)this.click(t[0]);else{var r={component:"Single",uri:e.id,type:e.type,objectType:e.type,parentName:null,canEdit:!1};this.$store.commit("app/showModal",r)}},buildSearch:function(e,t){var r=this,s="",i=!1;if(this.applySearchTo&&""!==this.searchTerm){s="((@type:"+e+" OR (EncryptedValue AND \\*encryptedType:"+e+")) AND (";for(var a=0;a<this.applySearchTo.length;a++)"Framework"===e&&"frameworkName"===this.applySearchTo[a].id||"Competency"===e&&"competencyName"===this.applySearchTo[a].id||"Directory"===e&&"directoryName"===this.applySearchTo[a].id?(i&&(s+=" OR "),s+="name:"+this.searchTerm,i=!0):"Framework"===e&&"frameworkDescription"===this.applySearchTo[a].id||"Competency"===e&&"competencyDescription"===this.applySearchTo[a].id||"Directory"===e&&"directoryDescription"===this.applySearchTo[a].id?(i&&(s+=" OR "),s+="description:"+this.searchTerm,i=!0):"Framework"===e?(i&&(s+=" OR "),s+=this.applySearchTo[a].id+":"+this.searchTerm,i=!0):"Competency"===e&&"competencyLabel"===this.applySearchTo[a].id?(i&&(s+=" OR "),s+="ceasn\\:competencyLabel:"+this.searchTerm,i=!0):"ownerName"===this.applySearchTo[a].id&&function(){var e={size:10},a=r;EcPerson.search(window.repo,"name:"+r.searchTerm,(function(r){i&&r.length>0&&(s+=" OR "),appLog(r);for(var o=0;o<r.length;o++)s+='\\*owner:"'+a.getPersonEcPk(r[o]).toPem()+'"',o<r.length-1&&(s+=" OR ");EcOrganization.search(window.repo,"name:"+a.searchTerm,(function(e){appLog(e);for(var r=0;r<e.length;r++)s+='\\*owner:"'+a.getOrganizationEcPk(e[r]).toPem()+'"',i=!0,r<e.length-1&&(s+=" OR ");s+="))"+(null==a.searchOptions?"":a.searchOptions),-1!==s.indexOf("AND ())")&&(s=null),t(s)}),(function(e){appError(e),t(null)}),e)}),(function(e){appError(e),t(null)}),e)}();this.applySearchToOwner||(s+="))"+(null==this.searchOptions?"":this.searchOptions))}else s="((@type:"+e+" OR (EncryptedValue AND \\*encryptedType:"+e+"))"+(null!=this.searchTerm&&""!==this.searchTerm?" AND "+this.searchTerm:"")+")"+(null==this.searchOptions||""===this.searchOptions?"":this.searchOptions);this.applySearchToOwner||t(s)},searchForDirectories:function(e){var t=this;this.searchingForDirectories=!0,t.buildSearch("Directory",(function(r){var s=null;t.paramObj&&(s=Object.assign({},t.paramObj)),t.firstSearchProcessing||(t.start+=t.paramObj.size),s.start=t.start;var i=[];t.repo.searchWithParams(r,s,(function(e){if((!t.filterToEditable||t.filterToEditable&&e.canEditAny(EcIdentityManager.getMyPks()))&&!EcArray.has(t.resultIds,e.id)&&(!t.idsNotPermittedInSearch||0===t.idsNotPermittedInSearch.length||!EcArray.has(t.idsNotPermittedInSearch,e.shortId()))&&(!e.parentDirectory||""!==t.searchTerm)){if(e.isAny((new EcEncryptedValue).getTypes())){var r="Ec"+e.encryptedType,s=new EcEncryptedValue;s.copyFrom(e);var a=new window[r];a.copyFrom(s.decryptIntoObject()),e=a}i.push(e),t.resultIds.push(e.id)}}),(function(r){t.firstSearchProcessing=!1,i&&i.length>0?(t.results=t.results.concat(i),e&&e.loaded()):0===r.length?(t.searchingForDirectories=!1,t.start=0,t.loadMore(e)):r.length>0&&e?e.loaded():e&&e.complete()}),(function(r){appError(r),t.firstSearchProcessing=!1,e&&e.complete()}))}))},searchRepo:function(){var e=this;if(this.start=0,this.subStart=0,this.firstSearchProcessing=!0,this.results.splice(0,this.results.length),this.subResults.splice(0,this.subResults.length),this.resultIds.splice(0,this.resultIds.length),this.searchingForCompetencies=!1,this.nonDirectoryResults=!1,this.applySearchTo||("frameworks"===this.view&&"Framework"===this.type?this.searchDirectories=!0:this.searchDirectories=!1),""===this.searchTerm&&this.displayFirst&&this.displayFirst.length>0)for(var t=0;t<20;t++)this.displayFirst[0]&&(this.results.push(this.displayFirst[0]),this.resultIds.push(this.displayFirst[0].id),this.displayFirst.shift(),this.nonDirectoryResults=!0);if(!0===this.searchDirectories?this.searchForDirectories():!this.searchFrameworks||""===this.searchTerm&&this.displayFirst&&0!==this.displayFirst.length?e.firstSearchProcessing=!1:e.buildSearch(this.type,(function(t){var r=null;e.paramObj&&(r=Object.assign({},e.paramObj)),e.repo.searchWithParams(t,r,(function(t){if((!e.filterToEditable||e.filterToEditable&&t.canEditAny(EcIdentityManager.getMyPks()))&&!EcArray.has(e.resultIds,t.id)&&(!e.idsNotPermittedInSearch||0===e.idsNotPermittedInSearch.length||!EcArray.has(e.idsNotPermittedInSearch,t.shortId()))){if(t.isAny((new EcEncryptedValue).getTypes())){var r="Ec"+t.encryptedType,s=new EcEncryptedValue;s.copyFrom(t);var i=new window[r];i.copyFrom(s.decryptIntoObject()),t=i}""!==t.name&&(e.results.push(t),e.resultIds.push(t.id),e.nonDirectoryResults=!0)}}),(function(t){e.firstSearchProcessing=!1,t.length<10&&("Framework"===e.type||"ConceptScheme"===e.type)&&e.searchCompetencies&&e.searchForSubObjects()}),(function(t){appError(t),e.firstSearchProcessing=!1}))})),!this.searchFrameworks&&!this.searchDirectories&&(""!==this.searchTerm||!this.displayFirst||0===this.displayFirst.length))return this.searchForSubObjects()},loadMore:function(e){if(""===this.searchTerm&&this.displayFirst&&this.displayFirst.length>0)for(var t=0;t<20;t++)this.displayFirst[t]&&(this.results.push(this.displayFirst[t]),this.resultIds.push(this.displayFirst[t].id),this.displayFirst.shift());if(this.searchingForDirectories)this.searchForDirectories(e);else if(!this.paramObj||""===this.searchTerm&&this.displayFirst&&0!==this.displayFirst.length)e.loaded();else{var r,s=this,i=Object.assign({},this.paramObj);s.nonDirectoryResults&&(this.start+=this.paramObj.size),i.start=this.start,r=this.searchingForCompetencies?"ConceptScheme"===this.type?"Concept":"Competency":this.type,this.buildSearch(r,(function(t){s.repo.searchWithParams(t,i,(function(e){if(!s.filterToEditable||s.filterToEditable&&e.canEditAny(EcIdentityManager.getMyPks()))if(s.searchingForCompetencies){if(!EcArray.has(s.resultIds,e.id)&&(!s.idsNotPermittedInSearch||0===s.idsNotPermittedInSearch.length||!EcArray.has(s.idsNotPermittedInSearch,e.shortId()))){if(e.isAny((new EcEncryptedValue).getTypes())){var t="Ec"+e.encryptedType,r=new EcEncryptedValue;r.copyFrom(e);var i=new window[t];i.copyFrom(r.decryptIntoObject()),e=i}s.subResults.push(e),s.resultIds.push(e.id)}}else if(!EcArray.has(s.resultIds,e.id)&&(!s.idsNotPermittedInSearch||0===s.idsNotPermittedInSearch.length||!EcArray.has(s.idsNotPermittedInSearch,e.shortId()))){if(e.isAny((new EcEncryptedValue).getTypes())){t="Ec"+e.encryptedType,r=new EcEncryptedValue;r.copyFrom(e);var a=new window[t];a.copyFrom(r.decryptIntoObject()),e=a}s.results.push(e),s.resultIds.push(e.id)}}),(function(t){0!==t.length||"Framework"!==s.type&&"ConceptScheme"!==s.type?t.length>0?(s.nonDirectoryResults=!0,e&&e.loaded()):e&&e.complete():s.searchCompetencies?s.searchForSubObjects(e):e&&e.complete()}),(function(t){appError(t),e.complete()}))}))}},searchForSubObjects:function(e){var t=this;this.searchingForCompetencies=!0;var r=Object.assign({},t.paramObj);r.start=t.subStart,-1!==r.sort.indexOf("dcterms:title")&&(r.sort=r.sort.replace("dcterms:title","skos:prefLabel"));var s="Framework"===t.type?"Competency":"Concept";t.buildSearch(s,(function(s){t.repo.searchWithParams(s,r,(function(e){if((!t.filterToEditable||t.filterToEditable&&e.canEditAny(EcIdentityManager.getMyPks()))&&!EcArray.has(t.resultIds,e.id)&&(!t.idsNotPermittedInSearch||0===t.idsNotPermittedInSearch.length||!EcArray.has(t.idsNotPermittedInSearch,e.shortId()))){if(e.isAny((new EcEncryptedValue).getTypes())){var r="Ec"+e.encryptedType,s=new EcEncryptedValue;s.copyFrom(e);var i=new window[r];i.copyFrom(s.decryptIntoObject()),e=i}t.subResults.push(e),t.resultIds.push(e.id),t.nonDirectoryResults=!0}}),(function(r){r.length>0&&e?e.loaded():e&&e.complete(),t.subStart+=t.paramObj.size}),(function(t){appError(t),e&&e.complete()}))}))},isClicked:function(e){return!!EcArray.has(this.selected,e)}},mounted:function(){"crosswalk"===this.view&&(this.searchFrameworks=!0,this.searchCompetencies=!1,this.searchDirectories=!1)}},l=c,d=r("2877"),p=Object(d["a"])(l,s,i,!1,null,null,null);t["a"]=p.exports},71560:function(e,t,r){var s=r("861d"),i=r("d2bb");e.exports=function(e,t,r){var a,o;return i&&"function"==typeof(a=t.constructor)&&a!==r&&s(o=a.prototype)&&o!==r.prototype&&i(e,o),e}},"71a9":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("modal-template",{attrs:{active:!0,type:"info"},on:{close:e.closeModal}},[r("template",{slot:"modal-header"},[e._v(" Edit Multiple Competencies ")]),e.isProcessing?r("template",{slot:"modal-body"},[r("div",{staticClass:"section has-text-centered"},[r("span",{staticClass:"icon is-large"},[r("i",{staticClass:"fa fa-spinner fa-2x fa-pulse"})])])]):e.isSearching?e._e():r("template",{slot:"modal-body"},[e._l(e.addedPropertiesAndValues,(function(t,s){return r("div",{key:t},[r("AddProperty",{attrs:{profile:e.profile,editingMultipleCompetencies:!0,idx:s,addedPropertiesAndValuesFromSearching:t},on:{"property-string-updated":e.propertyStringUpdated,"is-searching":function(t){e.isSearching=!0}}}),t["error"]?r("span",[e._v(" "+e._s(t["error"])+" ")]):e._e()],1)})),e.errorMessage!==[]?r("p",{staticClass:"help is-danger"},[e._v(" "+e._s(this.errorMessage[0])+" ")]):e._e()],2),e.isSearching?r("template",{slot:"modal-body"},[r("Search",{attrs:{view:"multi-edit"}})],1):e._e(),r("template",{slot:"modal-foot"},[r("div",{staticClass:"buttons is-spaced"},[r("button",{staticClass:"button is-outlined is-dark",on:{click:e.onCancel}},[r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-times"})]),r("span",[e._v("cancel")])]),e.isSearching?e._e():r("button",{staticClass:"button is-outlined is-success",attrs:{disabled:e.disableApplyButton},on:{click:e.applyToMultiple}},[r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-save"})]),r("span",[e._v("Apply to multiple")])])]),e.isSearching?[r("div",{staticClass:"button is-outlined is-primary",attrs:{title:"Add Competency as Property"},on:{click:e.addSelected}},[r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-check"})]),r("span",[e._v("Add Selected")])])]:e._e()],2)],2)},i=[],a=(r("caad"),r("a434"),r("ac1f"),r("5319"),r("2ca0"),r("498a"),r("5650")),o=r("3dcd"),n=r("af07"),c={name:"MultiEdit",components:{AddProperty:a["a"],Search:o["a"],ModalTemplate:n["a"]},props:{content:Object},data:function(){return{showErrorMessages:!1,isProcessing:!1,addedPropertiesAndValues:[{property:"",value:"",range:[]}],repo:window.repo,saveCount:0,errorMessage:[],checkedOptions:[],changedItemsForUndo:[],isSearching:!1}},computed:{profile:function(){return this.content.profile},selectedCompetencies:function(){return this.content.selectedCompetencies},disableApplyButton:function(){for(var e=0;e<this.addedPropertiesAndValues.length;e++)if(this.addedPropertiesAndValues[e].error)return!0;return!1},removeAddingValueAtIndex:function(){return this.$store.getters["lode/removeAddingValueAtIndex"]},addingChecked:function(){return this.$store.getters["lode/addingChecked"]}},methods:{onCancel:function(){this.isSearching?this.isSearching=!1:this.$store.commit("app/closeModal")},addErrorMessage:function(e){this.errorMessage.push(e)},propertyStringUpdated:function(e,t,r,s){if(this.addedPropertiesAndValues[s].property=e,this.addedPropertiesAndValues[s].value=t,this.addedPropertiesAndValues[s].range=r,this.$set(this.addedPropertiesAndValues[s],"error",null),1!==r.length||"http://schema.org/URL"!==r[0]&&-1===r[0].toLowerCase().indexOf("concept")&&-1===r[0].toLowerCase().indexOf("competency")&&(-1===r[0].toLowerCase().indexOf("level")||this.checkedOptions)||-1!==t.indexOf("http")){if(-1!==r[0].toLowerCase().indexOf("level")&&!this.checkedOptions){var i=EcLevel.getBlocking(t);if(!i)return void(this.addedPropertiesAndValues[s].error="This URL must be a Level that is already in the system.")}1===r.length&&-1!==r[0].toLowerCase().indexOf("langstring")&&(null!=t["@language"]&&void 0!==t["@language"]&&0!==t["@language"].trim().length||(this.addedPropertiesAndValues[s].error="This property must have a language."))}else this.addedPropertiesAndValues[s].error="This property must be a URL. For example: https://credentialengineregistry.org/, https://eduworks.com, https://case.georgiastandards.org/."},validateOnePerLanguage:function(e,t,r,s){if(!e[t])return!0;for(var i=[],a=0;a<e[t].length;a++){if(i.includes(e[t][a]["@language"].toLowerCase()))return this.addErrorMessage(t+" can only have one entry per language. Competency "+r.getName()+" was not saved."),!1;i.push(e[t][a]["@language"].toLowerCase())}return!i.includes(s["@language"].toLowerCase())||(this.addErrorMessage(t+" can only have one entry per language. Competency "+r.getName()+" was not saved."),!1)},validateMax:function(e,t,r,s){if(this.profile[t]["valuesIndexed"]){var i=this.profile[t]["valuesIndexed"];if(i=i(),i&&i[EcRemoteLinkedData.trimVersionFromUrl(r)])return this.addErrorMessage(t+" can only have one value. Competency "+s.getName()+" was not saved."),!1}else if(null!=e[t]&&e[t].length>0)return this.addErrorMessage(t+" can only have one value. Competency "+s.getName()+" was not saved."),!1;return!0},applyCheckedOptions:function(){for(var e=this,t=0;t<e.addedPropertiesAndValues.length;t++){var r=e.addedPropertiesAndValues[t].property.value;if(e.profile&&e.profile[r]["add"]){var s=e.profile[r]["add"];if("checkedOptions"===s){var i=e.profile[r]["save"];i(e.selectedCompetencies,e.checkedOptions,e.profile[r]["options"])}}}},applyToMultiple:function(){var e=this;if(this.errorMessage=[],0===e.addedPropertiesAndValues.length||""===e.addedPropertiesAndValues[0].property)return e.addErrorMessage("Saving to multiple requires a property and value.");this.isProcessing=!0,e.checkedOptions&&this.applyCheckedOptions();for(var t=0;t<this.selectedCompetencies.length;t++){var r=this.selectedCompetencies[t];EcRepository.get(r,(function(t){e.expand(t,(function(s){for(var i=[],a=[],o=[],n=0;n<e.addedPropertiesAndValues.length;n++){var c=e.addedPropertiesAndValues[n].property.value,l=e.addedPropertiesAndValues[n].value,d=e.addedPropertiesAndValues[n].range;if(appLog("adding "+c+" "+JSON.stringify(s)),o.push(c),s[c]?i.push(JSON.parse(JSON.stringify(s[c]))):i.push([]),1===d.length&&-1!==d[0].toLowerCase().indexOf("langstring")&&e.profile&&e.profile[c]&&("true"===e.profile[c]["onePerLanguage"]||!0===e.profile[c]["onePerLanguage"])){var p=e.validateOnePerLanguage(s,c,t,l);if(!p)continue}if(1===e.profile[c]["max"]){p=e.validateMax(s,c,r,t);if(!p)continue}if(e.profile&&e.profile[c]["add"]){var h=e.profile[c]["add"];if("checkedOptions"!==h){var u=EcRemoteLinkedData.trimVersionFromUrl(s["@id"]);h(u,[l])}}else l["@value"]||(l={"@value":l}),s=e.add(c,l,s);if(e.profile&&e.profile[c]["save"]){h=e.profile[c]["save"];e.checkedOptions||h()}a.push(s[c])}e.errorMessage&&e.errorMessage.length>0||(e.changedItemsForUndo.push({operation:"update",id:EcRemoteLinkedData.trimVersionFromUrl(s["@id"]),fieldChanged:o,initialValue:i,changedValue:a,expandedProperty:!0}),e.save(s)),e.saveCount++}))}),(function(){}))}},removeValueAtIndex:function(e){this.addedPropertiesAndValues.length>1?this.addedPropertiesAndValues.splice(e,1):this.addedPropertiesAndValues=[{property:"",value:"",range:[]}]},addAnotherProperty:function(){this.addedPropertiesAndValues.push({property:"",value:"",range:[]})},expand:function(e,t){var r=JSON.parse(e.toJson());null!=r["@context"]&&r["@context"].startsWith("http://")&&(r["@context"]=r["@context"].replace("http://","https://")),null!=r["@context"]&&-1!==r["@context"].indexOf("skos")&&(r["@context"]="https://schema.cassproject.org/0.4/skos/"),jsonld.expand(r,(function(e,r){t(null==e?r[0]:null)}))},add:function(e,t,r){return void 0!==r[e]&&null!=r[e]||(r[e]=[]),EcArray.isArray(r[e])||(r[e]=[r[e]]),r[e].push(t),r},save:function(e){var t=this,r="https://schema.cassproject.org/0.4";"true"===this.$store.getters["editor/queryParams"].concepts&&(r+="/skos"),jsonld.compact(e,this.$store.state.lode.rawSchemata[r],(function(e,s){if(null!=e&&appError(e),s){s=t.turnFieldsBackIntoArrays(s);var i=new EcRemoteLinkedData;i.copyFrom(s),i.context=r,delete i["@context"],i["schema:dateModified"]=(new Date).toISOString(),t.$store.state.editor&&!0===t.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[i.id]&&(i=EcEncryptedValue.toEncryptedValue(i)),t.repo.saveTo(i,appLog,appError)}}))},turnFieldsBackIntoArrays:function(e){for(var t=["owner","reader","signature","competency","level","relation","skos:hasTopConcept","skos:narrower","skos:broader","skos:broadMatch","skos:closeMatch","skos:exactMatch","skos:narrowMatch","skos:related"],r=0;r<t.length;r++){var s=t[r];e[s]&&!EcArray.isArray(e[s])&&(e[s]=[e[s]])}return e},addSelected:function(){for(var e=this.$store.getters["editor/selectedCompetenciesAsProperties"],t=0;t<e.length;t++){0!==this.addedPropertiesAndValues[this.addedPropertiesAndValues.length-1].property.length&&this.addAnotherProperty();var r=this.$store.getters["editor/selectCompetencyRelation"];this.addedPropertiesAndValues[this.addedPropertiesAndValues.length-1].value=e[t],this.addedPropertiesAndValues[this.addedPropertiesAndValues.length-1].property={value:r,label:this.profile[r]["http://www.w3.org/2000/01/rdf-schema#label"][0]["@value"]},this.addedPropertiesAndValues[this.addedPropertiesAndValues.length-1].range=this.$store.getters["lode/addingRange"]}this.isSearching=!1}},watch:{saveCount:function(){this.saveCount===this.selectedCompetencies.length&&(this.isProcessing=!1,this.changedItemsForUndo&&this.$store.commit("editor/addEditsToUndo",this.changedItemsForUndo),this.errorMessage&&0!==this.errorMessage.length||this.$store.commit("app/closeModal"))},removeAddingValueAtIndex:function(){this.removeAddingValueAtIndex&&(this.removeValueAtIndex(this.removeAddingValueAtIndex),this.$store.commit("lode/removeAddingValueAtIndex",null))},addingChecked:function(){this.addingChecked&&this.addingChecked.length>0&&(this.checkedOptions=this.addingChecked)}}},l=c,d=(r("d294"),r("2877")),p=Object(d["a"])(l,s,i,!1,null,null,null);t["default"]=p.exports},"984b":function(e,t,r){},"99af":function(e,t,r){"use strict";var s=r("23e7"),i=r("d039"),a=r("e8b5"),o=r("861d"),n=r("7b0b"),c=r("50c4"),l=r("8418"),d=r("65f0"),p=r("1dde"),h=r("b622"),u=r("2d00"),m=h("isConcatSpreadable"),f=9007199254740991,y="Maximum allowed index exceeded",g=u>=51||!i((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),v=p("concat"),w=function(e){if(!o(e))return!1;var t=e[m];return void 0!==t?!!t:a(e)},k=!g||!v;s({target:"Array",proto:!0,forced:k},{concat:function(e){var t,r,s,i,a,o=n(this),p=d(o,0),h=0;for(t=-1,s=arguments.length;t<s;t++)if(a=-1===t?o:arguments[t],w(a)){if(i=c(a.length),h+i>f)throw TypeError(y);for(r=0;r<i;r++,h++)r in a&&l(p,h,a[r])}else{if(h>=f)throw TypeError(y);l(p,h++,a)}return p.length=h,p}})},a434:function(e,t,r){"use strict";var s=r("23e7"),i=r("23cb"),a=r("a691"),o=r("50c4"),n=r("7b0b"),c=r("65f0"),l=r("8418"),d=r("1dde"),p=d("splice"),h=Math.max,u=Math.min,m=9007199254740991,f="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!p},{splice:function(e,t){var r,s,d,p,y,g,v=n(this),w=o(v.length),k=i(e,w),C=arguments.length;if(0===C?r=s=0:1===C?(r=0,s=w-k):(r=C-2,s=u(h(a(t),0),w-k)),w+r-s>m)throw TypeError(f);for(d=c(v,s),p=0;p<s;p++)y=k+p,y in v&&l(d,p,v[y]);if(d.length=s,r<s){for(p=k;p<w-s;p++)y=p+s,g=p+r,y in v?v[g]=v[y]:delete v[g];for(p=w;p>w-s+r;p--)delete v[p-1]}else if(r>s)for(p=w-s;p>k;p--)y=p+s-1,g=p+r-1,y in v?v[g]=v[y]:delete v[g];for(p=0;p<r;p++)v[p+k]=arguments[p+2];return v.length=w-s+r,d}})},a907:function(e,t,r){},a9e3:function(e,t,r){"use strict";var s=r("83ab"),i=r("da84"),a=r("94ca"),o=r("6eeb"),n=r("5135"),c=r("c6b6"),l=r("71560"),d=r("c04e"),p=r("d039"),h=r("7c73"),u=r("241c").f,m=r("06cf").f,f=r("9bf2").f,y=r("58a8").trim,g="Number",v=i[g],w=v.prototype,k=c(h(w))==g,C=function(e){var t,r,s,i,a,o,n,c,l=d(e,!1);if("string"==typeof l&&l.length>2)if(l=y(l),t=l.charCodeAt(0),43===t||45===t){if(r=l.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:s=2,i=49;break;case 79:case 111:s=8,i=55;break;default:return+l}for(a=l.slice(2),o=a.length,n=0;n<o;n++)if(c=a.charCodeAt(n),c<48||c>i)return NaN;return parseInt(a,s)}return+l};if(a(g,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var P,b=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof b&&(k?p((function(){w.valueOf.call(r)})):c(r)!=g)?l(new v(C(t)),r,b):C(t)},A=s?u(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),T=0;A.length>T;T++)n(v,P=A[T])&&!n(b,P)&&f(b,P,m(v,P));b.prototype=w,w.constructor=b,o(i,g,b)}},ad86:function(e,t,r){"use strict";var s=r("a907"),i=r.n(s);i.a},af07:function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"modal cass-editor___modal",class:[{"is-active":e.active},"is-"+e.size,"cass-editor__modal--"+e.content],attrs:{id:"cass-modal"}},[r("div",{staticClass:"modal-background"}),r("div",{staticClass:"modal-card",class:"cass-editor__modal-card--"+e.size},[r("header",{staticClass:"modal-card-head is-size-4 has-text-weight-bold",class:["has-background-"+e.type,"has-text-"+e.fontColor]},[r("p",{staticClass:"modal-card-title"},[e._t("modal-header")],2),e.canClose?r("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(t){e.$store.commit("app/closeModal"),e.$emit("close")}}}):e._e()]),r("div",{staticClass:"modal-card-body has-text-dark"},[e._t("modal-body")],2),r("footer",{staticClass:"modal-card-foot has-background-white"},[e._t("modal-foot")],2)])])},i=[],a=(r("984b"),{name:"ModalTemplate",props:{canClose:{type:Boolean,default:!0},active:{type:Boolean,default:!1},type:{default:"primary",type:String},fontColor:{type:String,default:"white"},size:{type:String,default:"medium"},content:{defualt:"default",type:String}},data:function(){return{}},computed:{}}),o=a,n=(r("ad86"),r("2877")),c=Object(n["a"])(o,s,i,!1,null,null,null);t["a"]=c.exports},c8d2:function(e,t,r){var s=r("d039"),i=r("5899"),a="​᠎";e.exports=function(e){return s((function(){return!!i[e]()||a[e]()!=a||i[e].name!==e}))}},cd8e:function(e,t,r){},d294:function(e,t,r){"use strict";var s=r("6e90"),i=r.n(s);i.a}}]);
//# sourceMappingURL=chunk-51b5723a.c5b58522.js.map