(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f0df510"],{7503:function(e,t,s){"use strict";s("e751")},b709:function(e,t,s){"use strict";s.r(t);s("4de4"),s("d3b7"),s("99af"),s("fb6a"),s("d81d");var i=function(){var e=this,t=e._self._c;return t("li",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:{callback:e.visibilityChanged,once:!0,throttle:300},expression:"{\n        callback: visibilityChanged,\n        once: true,\n        throttle: 300,\n    }"}],class:[e.isPotentialCrosswalkTarget?e.crosswalkTargetClass:"",e.editingNodeClass],attrs:{id:e.obj.shortId()}},[e.isVisible?t("div",{staticClass:"lode__hierarchy-item columns is-paddingless is-gapless is-marginless is-mobile is-multiline",class:[e.subview,{"is-selected-competency-source":e.isSelectedWorkingAlignmentsSource},{"is-selected-competency-target":e.isInWorkingAlignmentsTargets},e.isCrosswalkAligned,{"show-aligned":"showAligned"===e.filter},{"show-unaligned":"showUnaligned"===e.filter},{"show-all":"showAll"===e.filter},{"is-focused":e.isItemFocused},{"is-selected":e.checked},{"is-highlighted":e.highlighted},{"is-copied":e.isItemCopied},{"is-cut":e.isItemCut},{"can-paste":e.canPaste},{"target-enabled":"selectTargets"===e.sourceState}]},[t("div",{staticClass:"column is-12",attrs:{id:e.obj.shortId()===e.newCompetency?"scroll-newCompetency":null}},[t("div",{staticClass:"section is-paddingless"},[t("div",{staticClass:"columns is-paddingless is-gapless is-marginless is-mobile is-multiline"},[t("div",{staticClass:"expand-column column is-narrow is-vcentered"},[!e.collapse&&e.hasChild.length>0?t("div",{staticClass:"icon is-vcentered",on:{click:function(t){return e.onExpandEvent()}}},[t("i",{staticClass:"fa fa-caret-down has-text-primary is-size-2",class:{"is-size-4":"crosswalk"===e.view}})]):e.hasChild.length>0?t("div",{staticClass:"icon is-vcentered",on:{click:function(t){return e.onExpandEvent()}}},[t("i",{staticClass:"fa fa-caret-right has-text-primary is-size-2",class:{"is-size-4":"crosswalk"===e.view}})]):t("div",{staticClass:"icon is-vcentered is-transparent"},[t("i",{staticClass:"fa fa-circle has-text-white is-size-7"})])]),t("div",{staticClass:"check-radio-column column is-narrow is-vcentered"},[e.canEdit&&"crosswalk"!==e.view&&"importPreview"!==e.view&&"importLight"!==e.view&&e.hierarchyEnabled||e.queryParams.select||"competencySearch"===e.view?t("div",{staticClass:"field"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.checked,expression:"checked"}],staticClass:"is-checkradio",class:{"is-focused":e.isItemFocused},attrs:{tabindex:"0",id:e.obj.shortId()+"checkbox",type:"checkbox",name:e.obj.shortId()+"checkbox"},domProps:{checked:Array.isArray(e.checked)?e._i(e.checked,null)>-1:e.checked},on:{focus:function(t){return e.focusHierarchyItem()},blur:function(t){return e.unfocusHierarchyItem()},input:e.checkForDblClick,change:function(t){var s=e.checked,i=t.target,n=!!i.checked;if(Array.isArray(s)){var o=null,r=e._i(s,o);i.checked?r<0&&(e.checked=s.concat([o])):r>-1&&(e.checked=s.slice(0,r).concat(s.slice(r+1)))}else e.checked=n}}}),t("label",{attrs:{for:e.obj.shortId()+"checkbox"}})]):e._e()]),t("div",{staticClass:"column full-column constrain-column"},[t(e.dynamicThing,{tag:"component",staticClass:"list-complete-item",class:e.newThingClass,style:{transform:e.indent,width:e.calcWidth},attrs:{filter:e.filter,view:e.view,subview:e.subview,id:"scroll-"+e.obj.shortId().split("/").pop(),obj:e.changedObj?e.changedObj:e.obj,uri:e.obj.shortId(),parentNotEditable:!e.canEdit,profile:e.profile,childrenExpanded:e.childrenExpanded,children:this.hasChild.length,highlightList:e.highlightList,newFramework:e.newFramework,index:e.index,frameworkEditable:e.frameworkEditable,editingNode:e.editingNode,cantMoveUp:e.cantMoveUp,cantMoveDown:e.cantMoveDown,cantMoveRight:e.cantMoveRight,cantMoveLeft:e.cantMoveLeft,properties:e.properties,containerSubType:e.containerSubType,canEditAssertions:e.canEditAssertions},on:{"expand-event":function(t){return e.onExpandEvent()},"edit-node-event":function(t){return e.onEditNode()},"done-editing-node-event":function(t){return e.onDoneEditingNode()},addNode:function(t){return e.onAddNodeEvent()},"move-up":e.moveUp,"move-down":e.moveDown,"move-right":e.moveRight,"move-left":e.moveLeft,select:e.select,"remove-object":e.removeObject,"set-checkbox":e.setCheckbox}},[t("div",{staticClass:"hierarchy-item__buttons"},["crosswalk"!==e.view&&e.canEditThing?t("div",{staticClass:"edit-button button is-text is-small has-text-primary",on:{click:function(t){return e.onEditNode()}}},[t("div",{staticClass:"icon"},[t("i",{staticClass:"fa fa-edit"})])]):e._e(),e.canEdit&&"crosswalk"!==e.view&&e.hierarchyEnabled?t("div",{staticClass:"handle-button button is-text is-small has-text-primary"},[t("span",{staticClass:"icon"},[t("i",{staticClass:"fas handle fa-arrows-alt"}),t("i",{staticClass:"fas handle fa-arrows-alt"})])]):e._e(),e.showAddComments&&"crosswalk"!==e.view&&"search"!==e.view?t("div",{staticClass:"comment-button button is-text is-small has-text-primary",on:{click:e.handleClickAddComment}},[t("div",{staticClass:"icon"},[t("i",{staticClass:"fa fa-comment-medical"})])]):e._e()])])],1)])])]),"crosswalk"===e.view&&"crosswalkSource"===e.subview&&e.sourceAlignmentCountByType.length>0?t("div",{directives:[{name:"show",rawName:"v-show",value:"ready"===e.sourceState,expression:"sourceState === 'ready'"}],staticClass:"column is-12 crosswalk-tags"},e._l(e.sourceAlignmentCountByType,(function(s,i){return t("span",{key:i,staticClass:"tag is-small is-link crosswalk__align_link",attrs:{title:e.crosswalkOptions[s.alignType].label},on:{click:function(t){return e.setRelationTypeByLinkClick(s.alignType)}}},[t("span",[e._v(e._s(e.crosswalkOptions[s.alignType].label))]),t("span",{staticStyle:{"margin-left":".5rem"}},[e._v(e._s(s.alignCount))])])})),0):e._e(),"crosswalk"===e.view&&"crosswalkSource"===e.subview?t("div",{staticClass:"crosswalk-buttons__source"},[t("div",{staticClass:"button is-outlined is-small is-primary crosswalk-buttons__source__create",attrs:{disabled:"ready"!==e.sourceState},on:{click:e.setWorkingAlignmentsSource}},[e._m(0),t("span",[e._v("add")])]),t("div",{directives:[{name:"show",rawName:"v-show",value:"selectType"===e.sourceState&&e.isSelectedWorkingAlignmentsSource&&""===e.workingAlignmentsType,expression:"sourceState === 'selectType' && isSelectedWorkingAlignmentsSource && workingAlignmentsType ===''"}],staticClass:"field is-grouped has-background-primary crosswalk-select-field"},[t("div",{staticClass:"control"},[t("div",{staticClass:"select is-small is-primary has-text-primary crosswalk-buttons__source__select"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.workingAlignmentsType,expression:"workingAlignmentsType"}],ref:"alignmentOptions",on:{blur:e.ifNoWorkingAlignmentsTypeRemoveSourceCompetency,change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.workingAlignmentsType=t.target.multiple?s:s[0]}}},[t("option",{attrs:{value:""}},[e._v(" relation ")]),e._l(e.crosswalkOptionsArray,(function(s,i){return t("option",{key:i,domProps:{value:s.type}},[e._v(" "+e._s(s.label)+" ")])}))],2)])])]),"selectTargets"===e.sourceState&&e.isSelectedWorkingAlignmentsSource?t("div",{staticClass:"field"},[t("p",{staticClass:"control"},[t("span",{staticClass:"tag is-small is-fullwidth is-link crosswalk-buttons__source__type",attrs:{title:e.crosswalkOptions[e.workingAlignmentsType].label}},[t("span",{staticClass:"has-text-weight-bold"},[e._v(e._s(e.crosswalkOptions[e.workingAlignmentsType].label))]),t("button",{staticClass:"delete is-small",on:{click:e.removeSourceCompetency}})])])]):e._e()]):e._e(),"crosswalk"===e.view&&"crosswalkTarget"===e.subview&&"selectTargets"===e.sourceState?t("div",{staticClass:"crosswalk-buttons__target"},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.isInWorkingAlignmentsTargets,expression:"!isInWorkingAlignmentsTargets"}],staticClass:"button is-fullwidth is-small is-text has-text-primary",on:{click:function(t){e.addToWorkingAlignmentsTargets(e.obj.shortId())}}},[e._m(1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isInWorkingAlignmentsTargets,expression:"isInWorkingAlignmentsTargets"}],staticClass:"button is-fullwidth is-small is-text has-text-link",on:{click:function(t){e.removeFromWorkingAlignmentsTargets(e.obj.shortId())}}},[e._m(2)])]):e._e(),("crosswalk"!==e.view&&e.canEdit,e._e())]):e._e(),[!e.collapse&&e.hierarchyEnabled?t("draggable",e._b({staticClass:"lode__hierarchy-sub-ul",class:[1==e.dragging?" dragging":"",{"no-child":0===e.hasChild.length}],attrs:{id:e.obj.shortId(),group:{name:"test"},handle:".handle",tag:"ul",disabled:1!=e.canEdit||!e.isDraggable},on:{start:e.beginDrag,end:e.endDrag},model:{value:e.hasChild,callback:function(t){e.hasChild=t},expression:"hasChild"}},"draggable",e.dragOptions,!1),e._l(e.hasChild,(function(s,i){return t("HierarchyNode",{key:s.obj.id,staticClass:"lode__hierarchy-sub-li",attrs:{depth:e.depth+1,view:e.view,filter:e.filter,subview:e.subview,obj:s.obj,hasChild:s.children,dragging:e.dragging,canEdit:e.canEdit,profile:e.profile,highlightList:e.highlightList,selectAll:e.selectAll,newFramework:e.newFramework,index:i,parentStructure:e.hasChild,parent:e.obj,frameworkEditable:e.frameworkEditable,selectedArray:e.selectedArray,properties:e.properties,parentChecked:e.checked,parentHighlighted:e.parentHighlighted?e.parentHighlighted:e.checked,propagateParentChecked:"parent"===e.propagateChecked?e.propagateParentChecked:"true"===e.propagateChecked?"true":"false",shiftKey:e.shiftKey,arrowKey:e.arrowKey,largeNumberOfItems:e.largeNumberOfItems,expandAll:e.expandAll,containerSubType:e.containerSubType,canEditAssertions:e.canEditAssertions},on:{"create-new-node-event":e.onCreateNewNode,"begin-drag":e.beginDrag,move:e.move,select:e.select,add:e.add,"remove-object":e.removeObject}})})),1):e._e()]],2)},n=[function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon"},[t("i",{staticClass:"fa fa-plus"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon"},[t("i",{staticClass:"fa fa-plus"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon"},[t("i",{staticClass:"fa fa-check"})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"button is-small is-outlined is-primary"},[t("span",{staticClass:"icon"},[t("i",{staticClass:"fa fa-plus-circle"})]),t("span",[e._v(" add item ")])])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon"},[t("i",{staticClass:"fa fa-times"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon"},[t("i",{staticClass:"fa fa-plus"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon"},[t("i",{staticClass:"fa fa-plus"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon"},[t("i",{staticClass:"fa fa-search"})])}],o=s("c7eb"),r=s("1da1"),a=s("b85c"),c=s("5530"),l=(s("a9e3"),s("3ca3"),s("ddb0"),s("caad"),s("2532"),s("b64b"),s("14d9"),s("ac1f"),s("841c"),s("2f62")),h=s("872c"),d={name:"HierarchyNode",mixins:[h["a"]],props:{depth:Number,obj:Object,filter:{type:String,default:"showAll"},hasChild:Array,canEdit:Boolean,dragging:Boolean,profile:Object,highlightList:Array,selectAll:Boolean,newFramework:Boolean,index:Number,parentStructure:Array,parent:Object,frameworkEditable:Boolean,properties:String,expandAll:Boolean,parentChecked:Boolean,parentHighlighted:Boolean,propagateParentChecked:{type:String},view:{type:String,default:"framework"},subview:{type:String,default:""},selectedArray:Array,shiftKey:{type:Boolean,default:!1},arrowKey:String,largeNumberOfItems:Boolean,hierarchyEnabled:{type:Boolean,default:!0},containerSubType:String,canEditAssertions:Boolean},components:{ThingEditing:function(){return Promise.all([s.e("chunk-2d0a4fe9"),s.e("chunk-701cdf0d"),s.e("chunk-2d0d5fe2"),s.e("chunk-1b29bed6"),s.e("chunk-5fef994e")]).then(s.bind(null,"8051"))},Thing:function(){return s.e("chunk-2d0a4fe9").then(s.bind(null,"098b"))},draggable:function(){return s.e("chunk-4a5f46a6").then(s.t.bind(null,"b76a",7))}},data:function(){return{crosswalkOptions:{},crosswalkOptionsArray:[],dragOptions:{scroll:!0,delay:0,swapThreshold:.25,emptyInsertThreshold:4,invertedSwapThreshold:.25,invertSwap:!0,disabled:!1,animation:0,ghostClass:"ghost-drag",chosenClass:"chosen-drag",dragClass:"drag",scrollSensitivity:30,scrollSpeed:5,forceFallback:!0},isDraggable:!0,isVisible:!1,addingNode:!1,editingNode:!1,collapse:!0,controlOnStart:!1,checked:!1,childrenExpanded:!1,changedObj:null,crosswalkTargetClass:"",sourceAlignmentCountByType:{},isItemFocused:!1,isItemCut:!1,isItemCopied:!1,canPaste:!1,canEditInCollection:!1,checkBoxDblClick:0,propagateChecked:"parent"}},computed:Object(c["a"])(Object(c["a"])({indent:function(){return"translate(".concat(16*this.depth-16,"px)")},calcWidth:function(){return"calc(100% - ".concat(16*this.depth-16,"px) !important")}},Object(l["c"])({workingAlignmentsSource:function(e){return e.crosswalk.workingAlignmentsMap.source},workingAlignmentsTargets:function(e){return e.crosswalk.workingAlignmentsMap.targets},relevantExistingAlignmentsMap:function(e){return e.crosswalk.relevantExistingAlignmentsMap},relevantExistingAlignmentsMapLastUpdate:function(e){return e.crosswalk.relevantExistingAlignmentsMapLastUpdate},enabledRelationshipTypes:function(e){return e.crosswalk.enabledRelationshipTypes},enabledRelationshipTypesLastUpdate:function(e){return e.crosswalk.enabledRelationshipTypesLastUpdate},alignedCompetenciesList:function(e){return e.crosswalk.alignedCompetenciesList},targetState:function(e){return e.crosswalk.targetState},sourceState:function(e){return e.crosswalk.sourceState},targetNodesToHighlight:function(e){return e.crosswalk.targetNodesToHighlight},cutId:function(e){return e.editor.cutId},copyId:function(e){return e.editor.copyId},paste:function(e){return e.editor.paste},queryParams:function(e){return e.editor.queryParams},newCompetency:function(e){return e.editor.newCompetency},conceptMode:function(e){return e.editor.conceptMode},progressionMode:function(e){return e.editor.progressionMode}})),{},{showAddComments:function(){return"true"!==this.$store.getters["editor/queryParams"].concepts&&!0!==this.$store.getters["editor/conceptMode"]&&!0!==this.$store.getters["editor/progressionMode"]&&this.$store.state.app.canAddComments},workingAlignmentsType:{get:function(){return this.$store.getters["crosswalk/workingAlignmentsType"]},set:function(e){this.$store.commit("crosswalk/workingAlignmentsType",e)}},isPotentialCrosswalkTarget:function(){return"crosswalk"===this.view&&"crosswalkTarget"===this.subview},isSelectedWorkingAlignmentsSource:function(){return this.workingAlignmentsSource===this.obj.shortId()&&"crosswalkSource"===this.subview},isInWorkingAlignmentsTargets:function(){return!!this.workingAlignmentsTargets&&!("crosswalkTarget"!==this.subview||!this.workingAlignmentsTargets.includes(this.obj.shortId()))},isCrosswalkAligned:function(){return"crosswalk"===this.view&&this.alignedCompetenciesList.includes(this.obj.shortId())?"is-crosswalk-aligned":"not-crosswalk-aligned"},dynamicThing:function(){return this.editingNode||"new-thing"===this.newThingClass?"ThingEditing":"Thing"},newThingClass:function(){return this.$store.state.editor&&this.obj.shortId()===this.newCompetency?"new-thing":""},cantMoveUp:function(){return this.index-1<0},cantMoveDown:function(){return this.index+1>=this.parentStructure.length},cantMoveRight:function(){return this.index-1<0},cantMoveLeft:function(){return"Framework"===this.parent.type},editingNodeClass:function(){return this.editingNode?"editing-thing":""},canEditThing:function(){return!1!==this.canEdit&&("Collection"===this.containerSubType?this.canEditInCollection:!this.obj||this.canEditAny(this.obj))},highlighted:function(){return!1}}),mounted:function(){this.$emit("mounting-node"),appLog("hierarchyNode.vue is mounted"),this.collapse=this.largeNumberOfItems,this.expandAll&&(this.collapse=!1),this.collapse||(this.childrenExpanded=!0),"crosswalk"===this.view&&"crosswalkSource"===this.subview&&(this.buildCrosswalkOptions(),this.calculateSourceAlignmentCountByType()),this.selectAll&&(this.checked=this.selectAll),"parent"!==this.propagateParentChecked||this.newCompetency||(this.checked=this.parentChecked),this.selectedArray&&this.selectedArray.length&&EcArray.has(this.selectedArray,this.obj.shortId())&&(this.checked=!0)},methods:{setCheckbox:function(){"framework"!==this.view&&"concept"!==this.view||(this.checked=!this.checked,this.propagateChecked="false")},checkForDblClick:function(){var e=this;"framework"!==this.view&&"concept"!==this.view||(this.checkBoxDblClick++,setTimeout((function(){e.checkBoxDblClick>1?(e.checkBoxDblClick=0,e.checked=!e.checked,e.propagateChecked="true"):1===e.checkBoxDblClick?(e.checkBoxDblClick=0,e.propagateChecked="false"):e.propagateChecked="parent"}),500))},focusHierarchyItem:function(){appLog("tab"),this.isItemFocused=!0},unfocusHierarchyItem:function(){this.isItemFocused=!1},ifNoWorkingAlignmentsTypeRemoveSourceCompetency:function(){this.workingAlignmentsType||this.removeSourceCompetency()},handleClickAddComment:function(){appLog("object is: ",this.obj.shortId()),this.$store.commit("editor/setAddCommentAboutId",this.obj.shortId()),this.$store.commit("editor/setAddCommentType","new"),this.$store.commit("app/showModal",{component:"AddComment"})},calculateSourceAlignmentCountByType:function(){if(this.relevantExistingAlignmentsMap[this.obj.shortId()]){var e=this.relevantExistingAlignmentsMap[this.obj.shortId()];if(e){for(var t=[],s=Object.keys(e),i=0,n=s;i<n.length;i++){var o=n[i];if(this.crosswalkOptions[o]){var r={};r.alignType=o,r.alignCount=Object.keys(e[o]).length,r.alignCount>0&&t.push(r)}}this.sourceAlignmentCountByType=t}else this.sourceAlignmentCountByType=[]}else this.sourceAlignmentCountByType=[]},removeSourceCompetency:function(){this.$store.commit("crosswalk/sourceState","ready"),this.$store.commit("crosswalk/resetWorkingAlignmentsMap")},removeFromWorkingAlignmentsTargets:function(e){this.$store.commit("crosswalk/removeWorkingAlignmentsTarget",e)},addToWorkingAlignmentsTargets:function(e){this.$store.commit("crosswalk/addWorkingAlignmentsTarget",e)},setWorkingAlignmentsSource:function(){var e=this;"ready"===this.sourceState&&(this.$store.commit("crosswalk/workingAlignmentsSource",this.obj.shortId()),this.$store.commit("crosswalk/sourceState","selectType"),this.$nextTick((function(){e.$refs.alignmentOptions.focus()})))},setRelationTypeByLinkClick:function(e){this.$store.commit("crosswalk/workingAlignmentsSource",this.obj.shortId()),this.$store.commit("crosswalk/workingAlignmentsType",e)},buildCrosswalkOptions:function(){this.crosswalkOptions={},this.crosswalkOptionsArray=[];var e,t=Object(a["a"])(this.enabledRelationshipTypes);try{for(t.s();!(e=t.n()).done;){var s=e.value,i={};i.type=s.relationship,i.label=s.label,this.crosswalkOptions[s.relationship]=i,this.crosswalkOptionsArray.push(i)}}catch(n){t.e(n)}finally{t.f()}},onEditNode:function(){this.editingNode=!0},onDoneEditingNode:function(){var e=Object(r["a"])(Object(o["a"])().mark((function e(){var t,s;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.editingNode=!1,this.obj.shortId()===this.newCompetency&&(-1!==this.view.indexOf("import")?(t={container:"#import",easing:"ease",offset:-150,force:!0,cancelable:!0,onStart:!1,onDone:!1,onCancel:!1,x:!1,y:!0},this.$scrollTo("#scroll-newCompetency",500,t)):this.conceptMode||this.progressionMode?(s={container:"#concept",easing:"ease",offset:-150,force:!0,cancelable:!0,onStart:!1,onDone:!1,onCancel:!1,x:!1,y:!0},this.$scrollTo("#scroll-newCompetency",500,s)):this.$scrollTo("#scroll-newCompetency")),this.$store.state.editor&&(this.$store.commit("editor/newCompetency",null),this.$store.commit("editor/recomputeHierarchy",!0)),e.next=5,EcRepository.get(this.obj.shortId());case 5:this.changedObj=e.sent;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onAddNodeEvent:function(){this.add(this.obj.shortId())},onExpandEvent:function(){this.collapseIfPossible(),this.childrenExpanded=!this.childrenExpanded},collapseIfPossible:function(){this.hasChild.length>0&&(this.collapse=!this.collapse)},beginDrag:function(e){void 0!==e&&(this.controlOnStart=e.originalEvent.ctrlKey||e.originalEvent.shiftKey),this.$emit("begin-drag")},endDrag:function(e){if("framework_drag"!==e.to.id){appLog(e.oldIndex,e.newIndex);var t=null,s=0;this.shiftKey&&(this.controlOnStart=!0),e.from.id===e.to.id?e.newIndex+1<this.hasChild.length&&(t=this.hasChild[e.newIndex+1].obj.shortId()):void 0===e.to.children[e.newIndex]?t=e.to.id:""===e.to.id?e.newIndex<e.to.children.length&&(t=e.to.children[e.newIndex].id):e.newIndex+1<e.to.children.length&&(t=e.to.children[e.newIndex+1].id),this.move(e.clone.id,t,e.from.id,e.to.id,!this.controlOnStart,s)}},move:function(e,t,s,i,n,o){this.$emit("move",e,t,s,i,n,o)},moveUp:function(e,t){if(!this.cantMoveUp){var s=e,i=this.parent.shortId(),n=this.parentStructure[t-1].obj.shortId();this.move(s,n,i,i,!0,0)}},moveDown:function(e,t){if(!this.cantMoveDown){var s=null,i=e,n=this.parent.shortId();if(t+2!==this.parentStructure.length)s=this.parentStructure[t+2].obj.shortId();this.move(i,s,n,n,!0,0)}},moveRight:function(e,t){if(!this.cantMoveRight){var s=e,i=null,n=this.parent.shortId(),o=this.parentStructure[t-1].obj.shortId();this.move(s,i,n,o,!0,0)}},moveLeft:function(e,t){if(!this.cantMoveLeft){var s=e,i=this.parent.shortId(),n=null,o=this.$parent.$parent.parent.shortId();(o.includes("Framework")||this.parent["ceasn:isTopChildOf"]&&this.parent["ceasn:isTopChildOf"].includes(o))&&(o="",n=s),this.move(s,n,i,o,!0,0)}},add:function(e){this.$emit("add",e)},select:function(e,t){this.$emit("select",e,t)},removeObject:function(e){this.$emit("remove-object",e)},onCreateNewNode:function(e,t){this.$emit("create-new-node-event",e,t)},clickToSearch:function(){this.$store.commit("lode/competencySearchModalOpen",!0),this.$store.commit("app/showModal",{component:"SearchModal"}),this.$store.commit("lode/searchType","Competency"),this.$store.commit("lode/copyOrLink",!0),this.$store.state.editor&&this.$store.commit("editor/selectedCompetency",this.obj)},getCanEditInCollection:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){var s;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,EcFramework.search(repo,'competency:"'+e.obj.shortId()+'" AND NOT subType:Collection');case 2:s=t.sent,s&&s.length>0?e.canEditInCollection=!1:e.canEditInCollection=!0;case 4:case"end":return t.stop()}}),t)})))()},selectChild:function(e,t){if(e.obj&&(this.$emit("select",e.obj.shortId(),t),e.children)){var s,i=Object(a["a"])(e.children);try{for(i.s();!(s=i.n()).done;){var n=s.value;this.selectChild(n,t)}}catch(o){i.e(o)}finally{i.f()}}},visibilityChanged:function(e,t){e&&(this.isVisible=!0,"Collection"===this.containerSubType&&this.getCanEditInCollection(),appLog("node is visible"))}},watch:{propagateChecked:function(){var e=this;setTimeout((function(){e.propagateChecked="parent"}),1e3)},relevantExistingAlignmentsMapLastUpdate:function(){"crosswalk"===this.view&&"crosswalkSource"===this.subview&&this.calculateSourceAlignmentCountByType()},enabledRelationshipTypesLastUpdate:function(){"crosswalk"===this.view&&"crosswalkSource"===this.subview&&this.buildCrosswalkOptions()},targetNodesToHighlight:function(){"crosswalk"===this.view&&"crosswalkTarget"===this.subview&&this.obj&&this.targetNodesToHighlight.includes(this.obj.shortId())?this.crosswalkTargetClass="has-background-primary":this.crosswalkTargetClass=""},workingAlignmentsType:function(e){""!==e&&this.obj.shortId()===this.workingAlignmentsSource&&(this.$store.commit("crosswalk/sourceState","selectTargets"),this.$store.commit("crosswalk/targetState","ready"),this.$store.commit("crosswalk/populateWorkingAlignmentMap"))},checked:function(){if(this.$emit("select",this.obj.shortId(),this.checked),!this.childrenExpanded){var e,t=Object(a["a"])(this.hasChild);try{for(t.s();!(e=t.n()).done;){var s=e.value;this.selectChild(s,this.checked)}}catch(i){t.e(i)}finally{t.f()}}this.checked||this.unfocusHierarchyItem()},selectAll:function(){this.checked=this.selectAll},expandAll:function(){!0===this.expandAll?(this.hasChild.length>0&&(this.collapse=!1),this.childrenExpanded=!0):(this.hasChild.length>0&&(this.collapse=!0),this.childrenExpanded=!1)},parentChecked:function(){this.newCompetency||("framework"===this.view||"concept"===this.view?"true"===this.propagateParentChecked&&(this.checked=this.parentChecked):this.checked=this.parentChecked)},arrowKey:function(){if("crosswalk"!==this.view&&this.checked&&this.selectedArray&&1===this.selectedArray.length){var e=this.obj.shortId(),t=this.index;"ArrowLeft"===this.arrowKey?this.moveLeft(e,t):"ArrowRight"===this.arrowKey?this.moveRight(e,t):"ArrowUp"===this.arrowKey?this.moveUp(e,t):"ArrowDown"===this.arrowKey&&this.moveDown(e,t)}},cutId:function(){this.cutId===this.obj.shortId()?"Competency"===this.obj.type||"Concept"===this.obj.type&&this.canEditThing?(this.isItemCut=!0,this.$store.commit("editor/cutOrCopyContainerId",this.parent.shortId())):this.$store.commit("editor/cutId",null):this.isItemCut=!1},copyId:function(){this.copyId===this.obj.shortId()?"Competency"===this.obj.type||"Concept"===this.obj.type&&this.canEditThing?(this.isItemCopied=!0,this.$store.commit("editor/cutOrCopyContainerId",this.parent.shortId())):this.$store.commit("editor/copyId",null):this.isItemCopied=!1},isItemFocused:function(){this.isItemFocused&&(this.copyId&&this.copyId!==this.obj.shortId()||this.cutId&&this.cutId!==this.obj.shortId())&&("Competency"===this.obj.type||"Concept"===this.obj.type&&this.canEditThing)?(this.canPaste=!0,this.$store.commit("editor/nodeInFocus",this.obj.shortId())):(this.canPaste=!1,this.$store.getters["editor/nodeInFocus"]!==this.obj.shortId()||this.copyId||this.cutId||this.$store.commit("editor/nodeInFocus",null))},paste:function(){var e=this.$store.getters["editor/nodeInFocus"];this.paste&&e===this.obj.shortId()&&("Competency"===this.obj.type||"Concept"===this.obj.type&&this.canEditThing)&&(this.move(this.cutId?this.cutId:this.copyId,null,this.$store.getters["editor/cutOrCopyContainerId"],this.obj.shortId(),null!==this.cutId,0),this.$store.commit("editor/cutId",null),this.$store.commit("editor/copyId",null),this.$store.commit("editor/paste",!1),this.$store.commit("editor/cutOrCopyContainerId",null),this.$store.commit("editor/nodeInFocus",null))},selectedArray:function(){this.selectedArray&&this.selectedArray.length&&EcArray.has(this.selectedArray,this.obj.shortId())?this.checked=!0:this.checked=!1}}},u=d,p=(s("7503"),s("2877")),g=Object(p["a"])(u,i,n,!1,null,null,null);t["default"]=g.exports},e751:function(e,t,s){}}]);
//# sourceMappingURL=chunk-4f0df510.a15c334f.js.map