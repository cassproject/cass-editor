{"version":3,"sources":["webpack:///./src/components/modalContent/ShareAssertions.vue?d4e7","webpack:///./src/components/modalContent/ShareAssertions.vue?6473","webpack:///src/components/modalContent/ShareAssertions.vue","webpack:///./src/components/modalContent/ShareAssertions.vue?d9ab","webpack:///./src/components/modalContent/ShareAssertions.vue","webpack:///./src/components/modalContent/ModalTemplate.vue?fb9b","webpack:///./src/components/modalContent/ModalTemplate.vue?c910","webpack:///src/components/modalContent/ModalTemplate.vue","webpack:///./src/components/modalContent/ModalTemplate.vue?1175","webpack:///./src/components/modalContent/ModalTemplate.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","$event","closeModal","$emit","slot","staticClass","_v","directives","name","rawName","value","expression","domProps","target","composing","subjectFilter","filteredAvailableSubjects","length","_e","selectAllSubjects","_l","prs","index","key","staticStyle","setSubject","owner","shareSubjects","stopPropagation","_s","getName","email","targetFilter","filteredAvailableTargets","selectAllTargets","setTarget","shareTargets","Object","keys","isProcessing","$store","commit","isDone","notSelected","shareAssertions","staticRenderFns","props","isActive","components","ModalTemplate","data","availablePersons","computed","person","mounted","EcPerson","size","methods","searchQuery","EcAssertion","start","results","doSearch","resolve","reject","eah","callback","assertion","EcRepository","after","appError","catch","watch","component","class","active","content","type","fontColor","_t","canClose","default","defualt"],"mappings":"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","file":"js/chunk-167b745b.1b851ded.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShareAssertions.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShareAssertions.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal-template',{attrs:{\"active\":true,\"type\":\"primary\"},on:{\"close\":function($event){_vm.closeModal; _vm.$emit('close')}}},[_c('template',{slot:\"modal-header\"},[_c('span',{staticClass:\"title has-text-white\"},[_vm._v(\"Share Assertions\")])]),(_vm.isProcessing)?_c('template',{slot:\"modal-body\"},[_c('h2',{staticClass:\"header has-text-centered\"},[_vm._v(\" Processing request... \")]),_c('div',{staticClass:\"section has-background-white has-text-centered\"},[_c('span',{staticClass:\"icon is-large\"},[_c('i',{staticClass:\"fa fa-spinner fa-2x fa-pulse\"})])])]):(_vm.isDone)?_c('template',{slot:\"modal-body\"},[_c('div',{staticClass:\"section has-background-white has-text-centered\"},[_c('p',[_c('strong',[_vm._v(\"Success!\")])])])]):_c('template',{slot:\"modal-body\"},[_c('div',{staticClass:\"assertion-share-container\"},[_c('div',{staticClass:\"assertion-share-block\"},[_c('h4',{staticClass:\"header is-size-3\"},[_vm._v(\" Share assertions about: \")]),_c('div',{staticClass:\"field\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.subjectFilter),expression:\"subjectFilter\"}],staticClass:\"input\",attrs:{\"data-id\":\"share-assertions-subject-search\",\"type\":\"text\",\"placeholder\":\"search for person...\"},domProps:{\"value\":(_vm.subjectFilter)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.subjectFilter=$event.target.value}}})]),(_vm.filteredAvailableSubjects.length === 0 && _vm.subjectFilter === '')?_c('div',[_c('i',{staticClass:\"fa fa-info-circle\"}),_vm._v(\" No users found \")]):_vm._e(),(_vm.filteredAvailableSubjects.length > 0)?_c('div',[_c('div',{staticClass:\"table-container\"},[_c('table',{staticClass:\"table is-hoverable is-fullwidth\"},[_c('thead',[_c('tr',[_c('th',{attrs:{\"title\":\"Select\"}},[_c('input',{attrs:{\"data-id\":\"share-assertions-select-all-subjects\",\"type\":\"checkbox\"},on:{\"change\":_vm.selectAllSubjects}})]),_c('th',{attrs:{\"title\":\"Add as member\"}},[_c('i',{staticClass:\"fa fa-user\"})]),_c('th',{attrs:{\"title\":\"Add as manager\"}},[_c('i',{staticClass:\"fa fa-user-shield\"})])])]),_c('tbody',_vm._l((_vm.filteredAvailableSubjects),function(prs,index){return _c('tr',{key:index,staticStyle:{\"cursor\":\"pointer\"},attrs:{\"data-id\":\"share-assertions-subject-option\"},on:{\"click\":function($event){return _vm.setSubject(prs.owner[0])}}},[_c('td',[_c('input',{attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.shareSubjects[prs.owner[0]]},on:{\"click\":function($event){$event.stopPropagation();return _vm.setSubject(prs.owner[0])}}})]),_c('td',[_vm._v(\" \"+_vm._s(prs.getName())+\" \")]),_c('td',[_vm._v(\" \"+_vm._s(prs.email)+\" \")])])}),0)])])]):_vm._e()]),_c('div',{staticClass:\"assertion-share-icon\"}),_c('div',{staticClass:\"assertion-share-block\"},[_c('h4',{staticClass:\"header is-size-3\"},[_vm._v(\" Send to: \")]),_c('div',{staticClass:\"field\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.targetFilter),expression:\"targetFilter\"}],staticClass:\"input\",attrs:{\"data-id\":\"share-assertions-target-search\",\"type\":\"text\",\"placeholder\":\"search for person...\"},domProps:{\"value\":(_vm.targetFilter)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.targetFilter=$event.target.value}}})]),(_vm.filteredAvailableTargets.length === 0 && _vm.targetFilter === '')?_c('div',[_c('i',{staticClass:\"fa fa-info-circle\"}),_vm._v(\" No users found \")]):_vm._e(),(_vm.filteredAvailableTargets.length > 0)?_c('div',[_c('div',{staticClass:\"table-container\"},[_c('table',{staticClass:\"table is-hoverable is-fullwidth\"},[_c('thead',[_c('tr',[_c('th',{attrs:{\"title\":\"Select\"}},[_c('input',{attrs:{\"data-id\":\"share-assertions-select-all-targets\",\"type\":\"checkbox\"},on:{\"change\":_vm.selectAllTargets}})]),_c('th',{attrs:{\"title\":\"Add as member\"}},[_c('i',{staticClass:\"fa fa-user\"})]),_c('th',{attrs:{\"title\":\"Add as manager\"}},[_c('i',{staticClass:\"fa fa-user-shield\"})])])]),_c('tbody',_vm._l((_vm.filteredAvailableTargets),function(prs,index){return _c('tr',{key:index,staticStyle:{\"cursor\":\"pointer\"},attrs:{\"data-id\":\"share-assertions-target-option\"},on:{\"click\":function($event){return _vm.setTarget(prs.owner[0])}}},[_c('td',[_c('input',{attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.shareTargets[prs.owner[0]]},on:{\"click\":function($event){$event.stopPropagation();return _vm.setTarget(prs.owner[0])}}})]),_c('td',[_vm._v(\" \"+_vm._s(prs.getName())+\" \")]),_c('td',[_vm._v(\" \"+_vm._s(prs.email)+\" \")])])}),0)])])]):_vm._e()])]),_c('div',{staticClass:\"assertion-share-count-container\"},[_c('div',{staticClass:\"assertion-share-count\"},[_c('strong',[_vm._v(_vm._s(Object.keys(_vm.shareSubjects).length)+\" selected\")])]),_c('div',{staticClass:\"assertion-share-count\"},[_c('strong',[_vm._v(_vm._s(Object.keys(_vm.shareTargets).length)+\" selected\")])])])]),_c('template',{slot:\"modal-foot\"},[_c('div',{staticClass:\"buttons is-spaced\"},[_c('button',{staticClass:\"button is-secondary is-outlined\",attrs:{\"disabled\":_vm.isProcessing},on:{\"click\":function($event){return _vm.$store.commit('app/closeModal')}}},[_c('span',[_vm._v(\"Cancel\")]),_c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fa fa-times-circle\"})])]),(_vm.isDone)?_c('button',{staticClass:\"button is-primary is-outlined\",attrs:{\"data-id\":\"share-more-assertions-button\"},on:{\"click\":function($event){_vm.isDone = false;}}},[_vm._v(\" Share More \")]):_c('button',{staticClass:\"button is-primary is-outlined\",attrs:{\"data-id\":\"share-assertions-button\",\"disabled\":_vm.isProcessing || _vm.notSelected},on:{\"click\":_vm.shareAssertions}},[_c('span',[_vm._v(\"Share\")]),_c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fa fa-share\"})])])])])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <modal-template\n        @close=\"closeModal; $emit('close')\"\n        :active=\"true\"\n        type=\"primary\">\n        <template slot=\"modal-header\">\n            <span class=\"title has-text-white\">Share Assertions</span>\n        </template>\n        <!-- processing -->\n        <template\n            v-if=\"isProcessing\"\n            slot=\"modal-body\">\n            <h2 class=\"header has-text-centered\">\n                Processing request...\n            </h2>\n            <div class=\"section has-background-white has-text-centered\">\n                <span class=\"icon is-large\">\n                    <i class=\"fa fa-spinner fa-2x fa-pulse\" />\n                </span>\n            </div>\n        </template>\n        <template\n            v-else-if=\"isDone\"\n            slot=\"modal-body\">\n            <div class=\"section has-background-white has-text-centered\">\n                <p>\n                    <strong>Success!</strong>\n                </p>\n            </div>\n        </template>\n        <template\n            v-else\n            slot=\"modal-body\">\n            <div class=\"assertion-share-container\">\n                <div class=\"assertion-share-block\">\n                    <h4 class=\"header is-size-3\">\n                        Share assertions about:\n                    </h4>\n                    <div\n                        class=\"field\">\n                        <input\n                            data-id=\"share-assertions-subject-search\"\n                            type=\"text\"\n                            class=\"input\"\n                            v-model=\"subjectFilter\"\n                            placeholder=\"search for person...\">\n                    </div>\n                    <div v-if=\"filteredAvailableSubjects.length === 0 && subjectFilter === ''\">\n                        <i class=\"fa fa-info-circle\" /> No users found\n                    </div>\n                    <div v-if=\"filteredAvailableSubjects.length > 0\">\n                        <div class=\"table-container\">\n                            <table class=\"table is-hoverable is-fullwidth\">\n                                <thead>\n                                    <tr>\n                                        <th title=\"Select\">\n                                            <input\n                                                data-id=\"share-assertions-select-all-subjects\"\n                                                type=\"checkbox\"\n                                                @change=\"selectAllSubjects\">\n                                        </th>\n                                        <th title=\"Add as member\">\n                                            <i class=\"fa fa-user\" />\n                                        </th>\n                                        <th title=\"Add as manager\">\n                                            <i class=\"fa fa-user-shield\" />\n                                        </th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    <tr\n                                        data-id=\"share-assertions-subject-option\"\n                                        style=\"cursor: pointer;\"\n                                        @click=\"setSubject(prs.owner[0])\"\n                                        v-for=\"(prs, index) in filteredAvailableSubjects\"\n                                        :key=\"index\">\n                                        <td>\n                                            <input\n                                                type=\"checkbox\"\n                                                @click.stop=\"setSubject(prs.owner[0])\"\n                                                :checked=\"shareSubjects[prs.owner[0]]\">\n                                        </td>\n                                        <td> {{ prs.getName() }} </td>\n                                        <td> {{ prs.email }} </td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"assertion-share-icon\" />\n                <div class=\"assertion-share-block\">\n                    <h4 class=\"header is-size-3\">\n                        Send to:\n                    </h4>\n                    <div\n                        class=\"field\">\n                        <input\n                            data-id=\"share-assertions-target-search\"\n                            type=\"text\"\n                            class=\"input\"\n                            v-model=\"targetFilter\"\n                            placeholder=\"search for person...\">\n                    </div>\n                    <div v-if=\"filteredAvailableTargets.length === 0 && targetFilter === ''\">\n                        <i class=\"fa fa-info-circle\" /> No users found\n                    </div>\n                    <div v-if=\"filteredAvailableTargets.length > 0\">\n                        <div class=\"table-container\">\n                            <table class=\"table is-hoverable is-fullwidth\">\n                                <thead>\n                                    <tr>\n                                        <th title=\"Select\">\n                                            <input\n                                                data-id=\"share-assertions-select-all-targets\"\n                                                type=\"checkbox\"\n                                                @change=\"selectAllTargets\">\n                                        </th>\n                                        <th title=\"Add as member\">\n                                            <i class=\"fa fa-user\" />\n                                        </th>\n                                        <th title=\"Add as manager\">\n                                            <i class=\"fa fa-user-shield\" />\n                                        </th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    <tr\n                                        data-id=\"share-assertions-target-option\"\n                                        style=\"cursor: pointer;\"\n                                        @click=\"setTarget(prs.owner[0])\"\n                                        v-for=\"(prs, index) in filteredAvailableTargets\"\n                                        :key=\"index\">\n                                        <td>\n                                            <input\n                                                type=\"checkbox\"\n                                                @click.stop=\"setTarget(prs.owner[0])\"\n                                                :checked=\"shareTargets[prs.owner[0]]\">\n                                        </td>\n                                        <td> {{ prs.getName() }} </td>\n                                        <td> {{ prs.email }} </td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"assertion-share-count-container\">\n                <div class=\"assertion-share-count\">\n                    <strong>{{ Object.keys(shareSubjects).length }} selected</strong>\n                </div>\n                <div class=\"assertion-share-count\">\n                    <strong>{{ Object.keys(shareTargets).length }} selected</strong>\n                </div>\n            </div>\n        </template>\n        <template slot=\"modal-foot\">\n            <div\n                class=\"buttons is-spaced\">\n                <button\n                    :disabled=\"isProcessing\"\n                    class=\"button is-secondary is-outlined\"\n                    @click=\"$store.commit('app/closeModal')\">\n                    <span>Cancel</span>\n                    <span class=\"icon\">\n                        <i class=\"fa fa-times-circle\" />\n                    </span>\n                </button>\n                <button\n                    v-if=\"isDone\"\n                    data-id=\"share-more-assertions-button\"\n                    class=\"button is-primary is-outlined\"\n                    @click=\"isDone = false;\">\n                    Share More\n                </button>\n                <button\n                    v-else\n                    data-id=\"share-assertions-button\"\n                    :disabled=\"isProcessing || notSelected\"\n                    class=\"button is-primary is-outlined\"\n                    @click=\"shareAssertions\">\n                    <span>Share</span>\n                    <span class=\"icon\">\n                        <i class=\"fa fa-share\" />\n                    </span>\n                </button>\n            </div>\n        </template>\n    </modal-template>\n</template>\n\n<script>\nimport ModalTemplate from './ModalTemplate.vue';\nexport default {\n    name: 'ShareAssertionsModal',\n    props: {\n        isActive: Boolean\n    },\n    components: {\n        ModalTemplate\n    },\n    data() {\n        return {\n            isProcessing: false,\n            shareSubjects: {},\n            shareTargets: {},\n            availablePersons: [],\n            subjectFilter: '',\n            targetFilter: '',\n            isDone: false\n        };\n    },\n    computed: {\n        filteredAvailableSubjects: function() {\n            return this.availablePersons.filter(person => {\n                return (((person.getName() && person.getName().toLowerCase().indexOf(this.subjectFilter.toLowerCase()) > -1) ||\n                        (person.email && person.email.toLowerCase().indexOf(this.subjectFilter.toLowerCase()) > -1))\n                );\n            });\n        },\n        filteredAvailableTargets: function() {\n            let myKey = EcIdentityManager.default.ids[0].ppk.toPk().toPem();\n            return this.availablePersons.filter(person => {\n                if (myKey === person.owner[0]) {\n                    return false;\n                }\n                return (((person.getName() && person.getName().toLowerCase().indexOf(this.targetFilter.toLowerCase()) > -1) ||\n                        (person.email && person.email.toLowerCase().indexOf(this.targetFilter.toLowerCase()) > -1))\n                );\n            });\n        },\n        notSelected: function() {\n            return Object.keys(this.shareSubjects).length === 0 || Object.keys(this.shareTargets).length === 0;\n        }\n    },\n    mounted: async function() {\n        EcPerson.search(window.repo, '*', null, null, {size: 10000}).then((people) => {\n            this.availablePersons = people;\n        });\n    },\n    methods: {\n        selectAllSubjects: function(evt) {\n            let checked = evt.target.checked;\n            if (checked) {\n                for (let prs of this.filteredAvailableSubjects) {\n                    this.$set(this.shareSubjects, prs.owner[0], 1);\n                }\n            } else {\n                this.shareSubjects = {};\n            }\n        },\n        selectAllTargets: function(evt) {\n            let checked = evt.target.checked;\n            if (checked) {\n                for (let prs of this.filteredAvailableTargets) {\n                    this.$set(this.shareTargets, prs.owner[0], 1);\n                }\n            } else {\n                this.shareTargets = {};\n            }\n        },\n        setSubject: function(subject) {\n            if (this.shareSubjects[subject]) {\n                this.$delete(this.shareSubjects, subject);\n            } else {\n                this.$set(this.shareSubjects, subject, 1);\n            }\n        },\n        setTarget: function(target) {\n            if (this.shareTargets[target]) {\n                this.$delete(this.shareTargets, target);\n            } else {\n                this.$set(this.shareTargets, target, 1);\n            }\n        },\n        shareAssertions: function() {\n            this.isProcessing = true;\n            let searchQuery = '';\n            let subjects = Object.keys(this.shareSubjects);\n            for (let i = 0; i < subjects.length; i++) {\n                searchQuery += `\\\\*reader:\"${subjects[i]}\"`;\n                if (i !== subjects.length - 1) {\n                    searchQuery += ' OR ';\n                }\n            }\n            let doSearch = async function(start, count) {\n                return new Promise((resolve, reject) => {\n                    EcAssertion.search(window.repo, `\\\\*owner:\"${this.$store.getters['editor/getMe']}\" AND (${searchQuery})`, async(results) => {\n                        assertions.push(...results);\n                        start += count;\n                        if (results.length > 0) {\n                            await doSearch(start, count);\n                        }\n                        resolve();\n                    }, reject, {size: count, start: start});\n                });\n            };\n\n            doSearch(0, 5000).then(() => {\n                var eah = new EcAsyncHelper();\n                eah.each(assertions, (assertion, callback) => {\n                    if (assertion.assertionDateDecrypted != null) {\n                        callback();\n                    } else {\n                        assertion.getAssertionDateAsync((date) => {\n                            assertion.assertionDateDecrypted = date;\n                            callback();\n                        }, callback);\n                    }\n                },\n                (assertions) => {\n                    let eah = new EcAsyncHelper();\n                    eah.each(assertions, (assertion, after) => {\n                        assertion.getSubjectAsync((subject) => {\n                            if (subjects.includes(subject.toPem())) {\n                                assertion.getAgentAsync(async(agent) => {\n                                    if (this.$store.getters['editor/getMe'] === agent.toPem()) {\n                                        for (let target of Object.keys(this.shareTargets)) {\n                                            await assertion.addReader(EcPk.fromPem(target));\n                                        }\n                                        await EcRepository.save(assertion);\n                                        after();\n                                    } else {\n                                        after();\n                                    }\n                                }, appError);\n                            } else {\n                                after();\n                            }\n                        }, appError);\n                    }, () => {\n                        this.isProcessing = false;\n                        this.isDone = true;\n                    });\n                });\n            }).catch(appError);\n        }\n    },\n    watch: {}\n};\n</script>\n\n\n<style lang=\"scss\">\n    @import '@/scss/variables.scss';\n    .assertion-share-container {\n        display: flex;\n        justify-content: space-between;\n        .active {\n            background: $primary-color;\n            color: white;\n        }\n        .assertion-share-block {\n            width: 48%;\n        }\n    }\n    .assertion-share-icon {\n        display: flex;\n        align-items: center;\n        border: 1px solid $light-color;\n    }\n    .assertion-share-count-container {\n        display: flex;\n    }\n    .assertion-share-count {\n        text-align: right;\n        margin-top: 1rem;\n        width: 50%;\n    }\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShareAssertions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShareAssertions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ShareAssertions.vue?vue&type=template&id=9b03f000&\"\nimport script from \"./ShareAssertions.vue?vue&type=script&lang=js&\"\nexport * from \"./ShareAssertions.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ShareAssertions.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalTemplate.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalTemplate.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal cass-editor___modal\",class:[{'is-active': _vm.active}, 'is-' + _vm.size, 'cass-editor__modal--' + _vm.content],attrs:{\"id\":\"cass-modal\"}},[_c('div',{staticClass:\"modal-background\"}),_c('div',{staticClass:\"modal-card\",class:'cass-editor__modal-card--' + _vm.size},[_c('header',{staticClass:\"modal-card-head is-size-4 has-text-weight-bold\",class:['has-background-' + _vm.type, 'has-text-' + _vm.fontColor ]},[_c('p',{staticClass:\"modal-card-title\"},[_vm._t(\"modal-header\")],2),(_vm.canClose)?_c('button',{staticClass:\"delete\",attrs:{\"aria-label\":\"close\"},on:{\"click\":function($event){_vm.$store.commit('app/closeModal'); _vm.$emit('close')}}}):_vm._e()]),_c('div',{staticClass:\"modal-card-body has-text-dark\"},[_vm._t(\"modal-body\")],2),_c('footer',{staticClass:\"modal-card-foot has-background-white\"},[_vm._t(\"modal-foot\")],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nThe modal template can be used to stylize any modal.\n\nModals that can be triggered from anywhere in the app\nshould be componetized and imported into the DynamicModal.vue\nSo they can be triggered from anywhere in the app using the store/app\n\nModals that are only used in one screen (info on very specific content)\nshould be componentized and imported into the screen that needs it.\n-->\n<template>\n    <div\n        class=\"modal cass-editor___modal\"\n        id=\"cass-modal\"\n        :class=\"[{'is-active': active}, 'is-' + size, 'cass-editor__modal--' + content]\">\n        <div class=\"modal-background\" />\n        <div\n            class=\"modal-card\"\n            :class=\"'cass-editor__modal-card--' + size\">\n            <header\n                class=\"modal-card-head is-size-4 has-text-weight-bold\"\n                :class=\"['has-background-' + type, 'has-text-' + fontColor, ]\">\n                <p class=\"modal-card-title\">\n                    <slot name=\"modal-header\" />\n                </p>\n                <button\n                    v-if=\"canClose\"\n                    class=\"delete\"\n                    @click=\"$store.commit('app/closeModal'); $emit('close')\"\n                    aria-label=\"close\" />\n            </header>\n            <div class=\"modal-card-body has-text-dark\">\n                <slot name=\"modal-body\" />\n            </div>\n            <footer class=\"modal-card-foot has-background-white\">\n                <slot name=\"modal-foot\" />\n            </footer>\n        </div>\n    </div>\n</template>\n\n<script>\nimport '@/scss/modal-template.scss';\nexport default {\n    name: 'ModalTemplate',\n    props: {\n        canClose: {\n            type: Boolean,\n            default: true\n        },\n        active: {\n            type: Boolean,\n            default: false\n        },\n        type: {\n            default: 'primary',\n            type: String\n        },\n        fontColor: {\n            type: String,\n            default: 'white'\n        },\n        size: {\n            type: String,\n            default: 'medium'\n        },\n        content: {\n            defualt: 'default',\n            type: String\n        }\n    },\n    data() {\n        return {\n        };\n    },\n    computed: {\n    }\n};\n</script>\n\n<style lang=\"scss\">\n.cass-editor___modal{\n    z-index: 1000;\n}\n.modal-card.cass-editor__modal-card--small{\n    max-width: 600px;\n    min-height: 200px;\n}\n</style>\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalTemplate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalTemplate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ModalTemplate.vue?vue&type=template&id=1c4e04a7&\"\nimport script from \"./ModalTemplate.vue?vue&type=script&lang=js&\"\nexport * from \"./ModalTemplate.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ModalTemplate.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}