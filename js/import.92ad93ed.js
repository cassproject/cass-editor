(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["import","chunk-31ea397f"],{"08bc":function(e,t,r){"use strict";var i=r("891f"),o=r.n(i);o.a},1102:function(e,t,r){"use strict";t["a"]={computed:{t3CompetencyProfile:function(){var e=this;return{"@id":{"@id":"https://schema.cassproject.org/0.4/Competency/id","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"The URL of the competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"ID"}],readOnly:"true"},"https://purl.org/ctdlasn/terms/codedNotation":{"@id":"https://purl.org/ctdlasn/terms/codedNotation","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"An alphanumeric notation or ID code as defined by the promulgating body to identify this resource."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Code"}]},"http://schema.org/name":{"@id":"http://schema.org/name","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Name of the competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Name"}],isRequired:"true"},"http://schema.org/description":{"@id":"http://schema.org/description","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Description of the competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Description"}]},"http://purl.org/dc/terms/type":{"@id":"http://purl.org/dc/terms/type","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"The textual label identifying the category of the competency as designated by the promulgating body."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Type"}]},"https://schema.cassproject.org/0.4/Competency/scope":{"@id":"https://schema.cassproject.org/0.4/Competency/scope","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Scope in which the competency may be applied. e.g. Underwater."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Scope"}]},"https://purl.org/ctdlasn/terms/conceptTerm":{"@id":"https://purl.org/ctdlasn/terms/conceptTerm","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"https://schema.cassproject.org/0.4/skos/Concept"}],noTextEditing:"true","http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"A term drawn from a controlled vocabulary used by the promulgating agency to refine and differentiate individual resources contextually."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Context"}]},"https://schema.cassproject.org/0.4/Level":{"@id":"https://schema.cassproject.org/0.4/Level","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"https://schema.cassproject.org/0.4/Level"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"When an individual's performance in a competency can be measured, a level specifies milestones that an individual can reach, creating fine-grained distinction between the proficient and the adept."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Rubric Cell"}],valuesIndexed:function(){return e.levels},noTextEditing:"true",add:function(t){e.addLevel(t)},remove:function(t,r){e.removeLevelFromFramework(r)},save:function(){e.saveFramework()},profile:{"http://schema.org/name":{"@id":"http://schema.org/name","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Level"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":'The title that one who holds this performance level may assume. e.g. "Fast"'}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Rubric Column Header"}]},"https://schema.cassproject.org/0.4/competency":{"@id":"https://schema.cassproject.org/0.4/competency","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Level"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Specifies the URL of the competency the level relates to."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Rubric Row Header"}]},alwaysProperties:["http://schema.org/name","https://schema.cassproject.org/0.4/competency"]}},narrows:{"http://schema.org/rangeIncludes":[{"@id":"https://schema.cassproject.org/0.4/Competency"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"A sub-competency relationship which has relevance to this competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Narrows"}],valuesIndexed:function(){return e.relations["narrows"]},noTextEditing:"true",add:function(t,r){e.addRelationsToFramework(t,"narrows",r)},save:function(){},remove:function(t,r){e.removeRelationFromFramework(t,"narrows",r)}},broadens:{"http://schema.org/rangeIncludes":[{"@id":"https://schema.cassproject.org/0.4/Competency"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Covers other relevant competencies not found in this competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Broadens"}],valuesIndexed:function(){return e.relations["broadens"]},noTextEditing:"true",add:function(t,r){e.addRelationsToFramework(t,"broadens",r)},save:function(){},remove:function(t,r){e.removeRelationFromFramework(t,"broadens",r)}},isEquivalentTo:{"http://schema.org/rangeIncludes":[{"@id":"https://schema.cassproject.org/0.4/Competency"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Represents same capability in all aspects to another competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Equivalent To"}],valuesIndexed:function(){return e.relations["isEquivalentTo"]},noTextEditing:"true",add:function(t,r){e.addRelationsToFramework(t,"isEquivalentTo",r)},save:function(){},remove:function(t,r){e.removeRelationFromFramework(t,"isEquivalentTo",r)}},isSimilarTo:{"http://schema.org/rangeIncludes":[{"@id":"https://schema.cassproject.org/0.4/Competency"}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Is Similar To"}],valuesIndexed:function(){return e.relations["isSimilarTo"]},noTextEditing:"true",add:function(t,r){e.addRelationsToFramework(t,"isSimilarTo",r)},save:function(){},remove:function(t,r){e.removeRelationFromFramework(t,"isSimilarTo",r)}},isPartiallySameAs:{"http://schema.org/rangeIncludes":[{"@id":"https://schema.cassproject.org/0.4/Competency"}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Is Partially Same As"}],valuesIndexed:function(){return e.relations["isPartiallySameAs"]},noTextEditing:"true",add:function(t,r){e.addRelationsToFramework(t,"isPartiallySameAs",r)},save:function(){},remove:function(t,r){e.removeRelationFromFramework(t,"isPartiallySameAs",r)}},isRelatedTo:{"http://schema.org/rangeIncludes":[{"@id":"https://schema.cassproject.org/0.4/Competency"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"This competency has some degree of overlap with another."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Is Related To"}],valuesIndexed:function(){return e.relations["isRelatedTo"]},noTextEditing:"true",add:function(t,r){e.addRelationsToFramework(t,"isRelatedTo",r)},save:function(){},remove:function(t,r){e.removeRelationFromFramework(t,"isRelatedTo",r)}},enables:{"http://schema.org/rangeIncludes":[{"@id":"https://schema.cassproject.org/0.4/Competency"}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Enables"}],valuesIndexed:function(){return e.relations["enables"]},noTextEditing:"true",add:function(t,r){e.addRelationsToFramework(t,"enables",r)},save:function(){},remove:function(t,r){e.removeRelationFromFramework(t,"enables",r)}},isEnabledBy:{"http://schema.org/rangeIncludes":[{"@id":"https://schema.cassproject.org/0.4/Competency"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"A recommended option that speeds up acquisition of this competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Is Enabled By"}],valuesIndexed:function(){return e.relations["isEnabledBy"]},noTextEditing:"true",add:function(t,r){e.addRelationsToFramework(t,"isEnabledBy",r)},save:function(){},remove:function(t,r){e.removeRelationFromFramework(t,"isEnabledBy",r)}},primaryProperties:["https://purl.org/ctdlasn/terms/codedNotation","http://schema.org/name","http://schema.org/description"],secondaryProperties:["@id","http://purl.org/dc/terms/type","https://schema.cassproject.org/0.4/Competency/scope","https://purl.org/ctdlasn/terms/conceptTerm","https://schema.cassproject.org/0.4/Level","narrows","broadens","isEquivalentTo","isSimilarTo","isPartiallySameAs","isRelatedTo","enables","isEnabledBy"],tertiaryProperties:[]}},t3FrameworkProfile:function(){return{"@id":{"@id":"https://schema.cassproject.org/0.4/Framework/id","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Framework"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"The URL of the framework."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"ID"}],readOnly:"true"},"http://schema.org/name":{"@id":"http://schema.org/name","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Framework"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Name of the competency framework."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Name"}],isRequired:"true"},"http://schema.org/description":{"@id":"http://schema.org/description","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Framework"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Description of the framework."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Description"}]},"https://schema.cassproject.org/0.4/level":{"@id":"https://schema.cassproject.org/0.4/level","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Framework"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":'The title that one who holds this performance level may assume. e.g. "Fast"'}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Available Levels"}]},"http://schema.org/publisher":{"@id":"http://schema.org/publisher","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Framework"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"The entity responsible for making this competency framework available."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Publisher"}]},"http://purl.org/dc/elements/1.1/source":{"@id":"http://purl.org/dc/elements/1.1/source","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Framework"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"A URI to the original competency framework which this competency framework is based on or derived from."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Extracted From"}]},"http://schema.org/dateCreated":{"@id":"http://schema.org/dateCreated","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Framework"}],"http://schema.org/rangeIncludes":[{"@id":"http://www.w3.org/2001/XMLSchema#date"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Date of creation of this resource."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Extraction Date"}]},primaryProperties:["http://schema.org/name","http://schema.org/description"],secondaryProperties:["@id","https://schema.cassproject.org/0.4/level","http://schema.org/publisher","http://purl.org/dc/elements/1.1/source","http://schema.org/dateCreated"],tertiaryProperties:[]}}}}},1776:function(e,t,r){},"25d8":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"lode__hierarchy"},[r("div",{staticClass:"hierarchy-buttons columns is-gapless is-paddingless is-mobile is-marginless is-paddingless"},[e.canEdit&&"import"!==e.view||e.queryParams.select?r("div",{staticClass:"column is-narrow",attrs:{id:"check-radio-all-column"}},[r("div",{staticClass:"field"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.selectAll,expression:"selectAll"}],staticClass:"is-checkradio",attrs:{id:"selectAllCheckbox",type:"checkbox",name:"selectAllCheckbox"},domProps:{checked:Array.isArray(e.selectAll)?e._i(e.selectAll,null)>-1:e.selectAll},on:{change:function(t){var r=e.selectAll,i=t.target,o=!!i.checked;if(Array.isArray(r)){var s=null,a=e._i(r,s);i.checked?a<0&&(e.selectAll=r.concat([s])):a>-1&&(e.selectAll=r.slice(0,a).concat(r.slice(a+1)))}else e.selectAll=o}}}),r("label",{attrs:{for:"selectAllCheckbox"}})])]):e._e(),r("div",{staticClass:"column is-narrow"},[e.expanded?r("div",{staticClass:"icon is-vcentered",on:{click:function(t){e.expanded=!1}}},[r("i",{staticClass:"fa fa-caret-down has-text-primary is-size-2"})]):e.expanded?r("div",{staticClass:"icon is-vcentered"},[r("i",{staticClass:"fa fa-circle is-size-6 has-text-light"})]):r("div",{staticClass:"icon is-vcentered",on:{click:function(t){e.expanded=!0}}},[r("i",{staticClass:"fa fa-caret-right has-text-primary is-size-2"})]),e.selectButtonText?r("div",{staticClass:"button is-outlined is-primary",on:{click:function(t){return e.$emit("select-button-click",e.selectedArray)}}},[e._v(" "+e._s(e.selectButtonText)+" ")]):e._e()]),r("div",{staticClass:"column is-narrow"},[r("div",{staticClass:"buttons"},[e.multipleSelected&&!e.addingNode&&"import"!==e.view&&e.canEdit?r("div",{staticClass:"button is-outlined is-primary",on:{click:function(t){return e.$emit("edit-multiple-event")}}},[e._m(0),r("span",[e._v(" Edit multiple ")])]):e._e(),e.addingNode||!e.canEdit||e.multipleSelected?e._e():r("div",{staticClass:"button is-outlined is-primary",on:{click:function(t){e.addingNode=!0}}},[e._m(1),r("span",[e._v(" "+e._s(e.addConceptOrChildText)+" ")])]),e.addingNode?r("div",{staticClass:"button is-outlined is-dark ",on:{click:function(t){e.addingNode=!1}}},[e._m(2),r("span",[e._v("cancel")])]):e._e(),e.addingNode?r("div",{staticClass:"button is-outlined is-primary ",on:{click:e.onClickCreateNew}},[e._m(3),r("span",[e._v(" create new ")])]):e._e(),"framework"===e.view||"concept"===e.view?r("div",{staticClass:"button is-outlined",class:e.canCopyOrCut?"is-primary":"is-disabled",attrs:{disabled:!e.canCopyOrCut,title:"Copy competency"},on:{click:e.copyClick}},[e._m(4)]):e._e(),"framework"===e.view||"concept"===e.view?r("div",{staticClass:"button is-outlined",class:e.canCopyOrCut?"is-primary":"is-disabled",attrs:{title:"Cut competency",disabled:!e.canCopyOrCut},on:{click:e.cutClick}},[e._m(5)]):e._e(),"framework"===e.view||"concept"===e.view?r("div",{staticClass:"button is-outlined ",class:e.canPaste?"is-primary":"is-disabled",attrs:{disabled:!e.canPaste,title:"Paste competency"},on:{click:e.pasteClick}},[e._m(6)]):e._e()])]),"import"===e.view?r("div",{staticClass:"column"},[r("div",{staticClass:"buttons is-right"},[r("div",{staticClass:"buttons is-right"},[r("div",{staticClass:" button is-light is-pulled-right is-dark is-outlined",on:{click:e.cancelImport}},[r("span",[e._v(" Cancel ")]),e._m(7)]),r("div",{staticClass:"button is-dark is-outlined is-pulled-right",on:{click:function(t){return e.$store.dispatch("app/clearImport")}}},[r("span",[e._v(" import again ")]),e._m(8)]),r("div",{staticClass:"button is-dark is-outlined is-pulled-right",on:{click:e.openFramework}},[r("span",[e._v("view in editor")]),e._m(9)]),r("router-link",{staticClass:"button is-primary is-outlined is -pulled-right",attrs:{to:"/"}},[r("span",[e._v(" Done ")]),r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-home"})])])],1)])]):e._e()]),e.hierarchy?[r("draggable",e._b({staticClass:"lode__hierarchy-ul",attrs:{tag:"ul",disabled:!0!==e.canEdit||!e.isDraggable,group:{name:"test"},handle:".handle"},on:{start:e.beginDrag,end:e.endDrag},model:{value:e.hierarchy,callback:function(t){e.hierarchy=t},expression:"hierarchy"}},"draggable",e.dragOptions,!1),e._l(e.hierarchy,(function(t,i){return r("HierarchyNode",{key:t.obj.id,staticClass:"lode__hierarchy-li",attrs:{view:e.view,subview:e.subview,obj:t.obj,dragging:e.dragging,canEdit:e.canEdit,hasChild:t.children,profile:e.profile,exportOptions:e.exportOptions,highlightList:e.highlightList,selectAll:e.selectAll,newFramework:e.newFramework,index:i,frameworkEditable:e.canEdit,selectedArray:e.selectedArray,parentStructure:e.hierarchy,parent:e.container,properties:e.properties,expandAll:1==e.expanded,parentChecked:!1,shiftKey:e.shiftKey,arrowKey:e.arrowKey},on:{"create-new-node-event":e.onCreateNewNode,"mounting-node":e.handleMountingNode,add:e.add,"begin-drag":e.beginDrag,move:e.move,"delete-object":e.deleteObject,"export-object":e.exportObject,select:e.select,"draggable-check":e.onDraggableCheck}})})),1)]:e._e()],2)},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-cog"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-plus-circle"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-times"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-plus"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-copy"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fas handle fa-cut"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-paste"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-times-circle"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-redo-alt"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-edit"})])}],a=(i("99af"),i("fb6a"),i("a434"),i("d3b7"),i("872c")),n={name:"ConceptHierarchy",props:{container:Object,containerType:String,repo:Object,profile:Object,exportOptions:Array,highlightList:Array,selectMode:Boolean,selectAll:Boolean,containerTypeGet:String,viewOnly:Boolean,newFramework:Boolean,properties:String,view:{type:String,default:"framework"},subview:{type:String,default:""},doneDragging:{type:Boolean,default:!1}},data:function(){return{structure:[],once:!0,dragging:!1,controlOnStart:!1,filter:"showAll",dragIcon:"fa-arrows-alt",dragOptions:{delay:100,disabled:!1,ghostClass:"ghost-drag",chosenClass:"chosen-drag",dragClass:"drag",scrollSensitivity:200,forceFallback:!0},multipleSelected:!1,addingNode:!1,selectedArray:[],selectButtonText:null,expanded:!0,isDraggable:!0,shiftKey:!1,arrowKey:null,addConceptOrChildText:"Add Concept"}},components:{HierarchyNode:function(){return i.e("chunk-b9f1694a").then(i.bind(null,"b709"))},draggable:function(){return i.e("chunk-4a5f46a6").then(i.t.bind(null,"b76a",7))}},mixins:[a["a"]],computed:{canCopyOrCut:function(){return!(!this.selectedArray||1!==this.selectedArray.length)},canPaste:function(){return(null!==this.$store.getters["editor/copyId"]||null!==this.$store.getters["editor/cutId"])&&null!==this.$store.getters["editor/nodeInFocus"]},queryParams:function(){return this.$store.getters["editor/queryParams"]},addAnother:function(){return this.$store.getters["editor/addAnother"]},hierarchy:function(){var e=this;if(null==this.container)return null;if(!this.once)return this.structure;appLog("Computing hierarchy.");var t=[];return null!=this.container["skos:hasTopConcept"]&&(t=t.concat(this.container["skos:hasTopConcept"])),t.length>0?this.repo.multiget(t,(function(t){e.computeHierarchy()}),appError,appLog):e.computeHierarchy(),this.structure},canEdit:function(){return!0!==this.viewOnly&&this.container.canEditAny(EcIdentityManager.getMyPks())},recomputeHierarchy:function(){return this.$store.getters["editor/recomputeHierarchy"]}},watch:{container:{handler:function(){this.once=!0},deep:!0},selectedArray:function(){this.selectedArray.length>1?this.multipleSelected=!0:this.multipleSelected=!1,1===this.selectedArray.length?this.addConceptOrChildText="Add Child":this.addConceptOrChildText="Add Concept",this.$emit("selected-array",this.selectedArray)},recomputeHierarchy:function(){this.recomputeHierarchy&&(this.once=!0,this.$store.commit("editor/recomputeHierarchy",!1))},doneDragging:function(){this.doneDragging&&(this.dragging=!1)},addAnother:function(e){e&&(this.onClickCreateNew(),this.$store.commit("editor/addAnother",!1))}},mounted:function(){this.queryParams&&(this.queryParams.singleSelect&&(this.selectButtonText=this.queryParams.singleSelect),this.queryParams.select&&""!==this.queryParams.select&&"select"!==this.queryParams.select&&(this.selectButtonText=this.queryParams.select)),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup)},beforeDestroy:function(){window.removeEventListener("keyup",this.keyup),window.removeEventListener("keydown",this.keydown)},methods:{cutClick:function(){this.selectedArray&&1===this.selectedArray.length&&this.$store.commit("editor/cutId",this.selectedArray[0]),this.$store.commit("editor/copyId",null),this.$store.commit("editor/paste",!1)},copyClick:function(){this.selectedArray&&1===this.selectedArray.length&&this.$store.commit("editor/copyId",this.selectedArray[0]),this.$store.commit("editor/cutId",null),this.$store.commit("editor/paste",!1)},pasteClick:function(){this.$store.commit("editor/paste",!0)},keydown:function(e){this.canEdit&&(e.shiftKey&&(this.shiftKey=!0),-1!==e.key.indexOf("Arrow")&&e.shiftKey&&(this.arrowKey=e.key),"x"===e.key&&e.ctrlKey&&(this.selectedArray&&1===this.selectedArray.length&&this.$store.commit("editor/cutId",this.selectedArray[0]),this.$store.commit("editor/copyId",null),this.$store.commit("editor/paste",!1)),"c"===e.key&&e.ctrlKey&&(this.selectedArray&&1===this.selectedArray.length&&this.$store.commit("editor/copyId",this.selectedArray[0]),this.$store.commit("editor/cutId",null),this.$store.commit("editor/paste",!1)),"v"===e.key&&e.ctrlKey&&this.$store.commit("editor/paste",!0))},keyup:function(e){e.shiftKey||(this.shiftKey=!1),-1!==e.key.indexOf("Arrow")&&(this.arrowKey=null)},onCreateNewNode:function(e,t){this.add(e,t)},handleMountingNode:function(){this.startTime()},startTime:function(){var e=this;setTimeout((function(){e.$emit("done-loading-nodes")}),1e3)},computeHierarchy:function(){if(this.structure.splice(0,this.structure.length),null==this.container)return r;if(null!==this.container["skos:hasTopConcept"]&&void 0!==this.container["skos:hasTopConcept"])for(var e=0;e<this.container["skos:hasTopConcept"].length;e++){var t=EcConcept.getBlocking(this.container["skos:hasTopConcept"][e]);t&&(this.structure.push({obj:t,children:[]}),t["skos:narrower"]&&this.addChildren(this.structure,t,e))}this.once=!1},addChildren:function(e,t,r){for(var i=0;i<t["skos:narrower"].length;i++){var o=EcConcept.getBlocking(t["skos:narrower"][i]);e[r].children.push({obj:o,children:[]}),o&&o["skos:narrower"]&&this.addChildren(e[r].children,o,i)}},beginDrag:function(e){this.dragging=!0,void 0!==e&&(this.controlOnStart=e.originalEvent.ctrlKey||e.originalEvent.shiftKey)},endDrag:function(e){if("framework_drag"!==e.to.id){appLog(e.oldIndex,e.newIndex);var t=null,r=0;this.shiftKey&&(this.controlOnStart=!0),e.from.id===e.to.id?(e.newIndex<this.hierarchy.length&&(t=this.hierarchy[e.newIndex].obj.shortId()),r=1):void 0===e.to.children[e.newIndex]?t=e.to.id:e.newIndex+1<e.to.children.length&&(t=e.to.children[e.newIndex+1].id),this.move(this.hierarchy[e.oldIndex].obj.shortId(),t,e.from.id,e.to.id,!this.controlOnStart,r)}else this.dragging=!1},move:function(e,t,r,i,o,s){this.once=!0;var a=this;if(r===i){var n=EcConcept.getBlocking(i),c="skos:narrower";null===n&&(n=this.container,c="skos:hasTopConcept");var p=n[c]?n[c].slice():null,l=n[c].indexOf(e);if(n[c].splice(l,1),null==t||void 0===t)EcArray.isArray(n[c])||(n[c]=[]),n[c].push(e);else{var m=n[c].indexOf(t);n[c].splice(m,0,e)}a.$store.commit("editor/addEditsToUndo",[{operation:"update",id:n.shortId(),fieldChanged:[c],initialValue:[p]}]),n["schema:dateModified"]=(new Date).toISOString(),!0===this.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[n.id]&&(n=EcEncryptedValue.toEncryptedValue(n)),this.repo.saveTo(n,(function(){a.computeHierarchy()}),appError)}else{var d=EcConcept.getBlocking(e),u=EcConcept.getBlocking(r),h="skos:narrower",f="skos:broader",g=EcConcept.getBlocking(i),v="skos:narrower",w="skos:broader";null===u&&(u=this.container,h="skos:hasTopConcept",f="skos:topConceptOf"),null===g&&(g=this.container,v="skos:hasTopConcept",w="skos:topConceptOf");l=u[h].indexOf(e);var y=u[h].slice(),C=d[f]?d[f].slice():null,k=g[v]?g[v].slice():null,b=d[w]?d[w].slice():null;o&&u[h].splice(l,1),r&&d[f]?(o&&EcArray.setRemove(d[f],r),0===d[f].length&&delete d[f]):delete d[f],u["schema:dateModified"]=(new Date).toISOString(),!0===this.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[u.id]&&(u=EcEncryptedValue.toEncryptedValue(u)),this.repo.saveTo(u,(function(){if(null==t||void 0===t)EcArray.isArray(g[v])||(g[v]=[]),g[v].push(e);else{var r=g[v].indexOf(t);g[v].splice(r,0,e)}EcArray.isArray(d[w])||(d[w]=[]),i?d[w].push(i):d[w].push(a.container.shortId()),a.$store.commit("editor/addEditsToUndo",[{operation:"update",id:u.shortId(),fieldChanged:[h],initialValue:[y]},{operation:"update",id:g.shortId(),fieldChanged:[v],initialValue:[k]},{operation:"update",id:d.shortId(),fieldChanged:[f,w],initialValue:[C,b]}]),g["schema:dateModified"]=(new Date).toISOString(),d["schema:dateModified"]=(new Date).toISOString(),!0===a.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[g.id]&&(g=EcEncryptedValue.toEncryptedValue(g)),!0===a.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[d.id]&&(d=EcEncryptedValue.toEncryptedValue(d)),a.repo.saveTo(g,(function(){a.repo.saveTo(d,appLog,appError),a.computeHierarchy()}),appLog)}),appError)}this.dragging=!1},add:function(e,t){var i=this,o=new EcConcept;if(this.queryParams.newObjectEndpoint?o.generateShortId(this.queryParams.newObjectEndpoint):o.generateId(this.repo.selectedServer),o["schema:dateCreated"]=(new Date).toISOString(),o["schema:dateModified"]=(new Date).toISOString(),null!=EcIdentityManager.ids&&EcIdentityManager.ids.length>0&&o.addOwner(EcIdentityManager.ids[0].ppk.toPk()),this.container.owner&&this.container.owner.length>0)for(var s=0;s<this.container.owner.length;s++){var a=this.container.owner[s];o.addOwner(EcPk.fromPem(a))}if(this.container.reader&&this.container.reader.length>0)for(s=0;s<this.container.reader.length;s++){var n=this.container.reader[s];r.addReader(EcPk.fromPem(n))}if(this.setDefaultLanguage(),o["skos:prefLabel"]={"@language":this.$store.state.editor.defaultLanguage,"@value":"New Concept"},o["skos:inScheme"]=this.container.shortId(),e===this.container.shortId()){var c=this.container["skos:hasTopConcept"]?this.container["skos:hasTopConcept"].slice():null;if(EcArray.isArray(this.container["skos:hasTopConcept"])||(this.container["skos:hasTopConcept"]=[]),null==t||void 0===t)this.container["skos:hasTopConcept"].push(o.shortId());else{var p=this.container["skos:hasTopConcept"].indexOf(t);this.container["skos:hasTopConcept"].splice(p+1,0,o.shortId())}o["skos:topConceptOf"]=this.container.shortId(),i.$store.commit("editor/addEditsToUndo",[{operation:"addNew",id:o.shortId()},{operation:"update",id:this.container.shortId(),fieldChanged:["skos:hasTopConcept"],initialValue:[c]}]),this.container["schema:dateModified"]=(new Date).toISOString(),o["schema:dateModified"]=(new Date).toISOString(),!0===this.$store.state.editor.private&&(o=EcEncryptedValue.toEncryptedValue(o),!0!==EcEncryptedValue.encryptOnSaveMap[i.container.id]&&(i.container=EcEncryptedValue.toEncryptedValue(i.container))),this.repo.saveTo(o,(function(){i.repo.saveTo(i.container,(function(){i.once=!0}),appError)}),appError)}else{o["skos:broader"]=[e];var l=EcConcept.getBlocking(e);c=l["skos:narrower"]?l["skos:narrower"].slice():null;if(EcArray.isArray(l["skos:narrower"])||(l["skos:narrower"]=[]),null==t||void 0===t)l["skos:narrower"].push(o.shortId());else{p=l["skos:narrower"].indexOf(t);l["skos:narrower"].splice(p+1,0,o.shortId())}i.$store.commit("editor/addEditsToUndo",[{operation:"addNew",id:o.shortId()},{operation:"update",id:l.shortId(),fieldChanged:["skos:narrower"],initialValue:[c]}]),this.container["schema:dateModified"]=(new Date).toISOString(),o["schema:dateModified"]=(new Date).toISOString(),l["schema:dateModified"]=(new Date).toISOString(),!0===this.$store.state.editor.private&&(o=EcEncryptedValue.toEncryptedValue(o),!0!==EcEncryptedValue.encryptOnSaveMap[l.id]&&(l=EcEncryptedValue.toEncryptedValue(l)),!0!==EcEncryptedValue.encryptOnSaveMap[i.container.id]&&(i.container=EcEncryptedValue.toEncryptedValue(i.container))),this.repo.saveTo(o,(function(){i.repo.saveTo(l,(function(){i.repo.saveTo(i.container,(function(){i.once=!0}),appError)}),appError)}),appError)}this.$store.commit("editor/newCompetency",o.shortId()),appLog("Added node: ",JSON.parse(o.toJson()))},select:function(e,t){t?EcArray.setAdd(this.selectedArray,e):EcArray.setRemove(this.selectedArray,e)},deleteObject:function(e){this.$emit("delete-object",e)},exportObject:function(e,t){this.$emit("export-object",e,t)},onDraggableCheck:function(e){this.isDraggable=e},cancelImport:function(){this.deleteObject(this.container),this.$store.dispatch("app/clearImport")},openFramework:function(){var e=EcConceptScheme.getBlocking(this.container.shortId());this.$store.commit("editor/framework",e),this.$router.push({name:"conceptScheme",params:{frameworkId:this.container.id}})},onClickCreateNew:function(){var e=this.container.shortId();1===this.selectedArray.length&&(e=this.selectedArray[0]),this.add(e,null),this.addingNode=!1}}},c=n,p=(i("08bc"),i("2877")),l=Object(p["a"])(c,o,s,!1,null,null,null);t["default"]=l.exports},3410:function(e,t,r){"use strict";var i=r("98d4"),o=r.n(i);o.a},"47e0":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main-layout",{class:e.importInfoVisible?"right-side-open":"",attrs:{rightActive:e.importInfoVisible,simple:!0},scopedSlots:e._u([{key:"top",fn:function(){return[r("div",{staticClass:"container",staticStyle:{"line-height":"38px"}},[r("div",{staticClass:"breadcrumb is-medium",attrs:{"aria-label":"breadcrumbs has-text-dark"}},[r("ul",[r("li",[r("router-link",{attrs:{to:"frameworks"}},[e._v(" CaSS ")])],1),r("li",[r("a",{attrs:{href:"#"}},[e._v("Import")])])])])])]},proxy:!0},{key:"body",fn:function(){return[r("div",{attrs:{id:"import"}},[r("div",{staticClass:"container"},[r("div",{staticClass:"section"},["file"===e.importType?r("ImportFile",{attrs:{importFile:e.importFile,conceptMode:e.conceptMode,importTransition:e.importTransition}},[r("template",{slot:"import-file-title"},[r("h1",{staticClass:"title is-size-1 has-text-black"},[e.conceptMode&&"true"===e.queryParams.ceasnDataFields?r("span",[e._v(" Import a concept scheme ")]):e.conceptMode?r("span",[e._v(" Import a taxonomy ")]):r("span",[e._v("Import a framework")]),r("span",{staticClass:"button is-outlined is-primary is-pulled-right",on:{click:e.showRightAside}},[r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-exclamation-circle"})]),r("span",[e._v(" info ")])])])]),r("template",{slot:"import-framework"},["detail"===e.importTransition?r("ImportDetails",{attrs:{detailsDetected:e.detailsDetected},on:{"delete-object":e.deleteObject}}):e._e(),e.importFramework&&"preview"===e.importTransition?r("div",{staticClass:"import-preview"},[e.hierarchyIsdoneLoading?e._e():r("div",{staticClass:"section"},[r("ul",{staticClass:"processing-list"},[r("li"),r("li"),r("ul",[r("li"),r("li"),r("li")]),r("li"),r("li"),r("ul",[r("li"),r("li")])])]),r(e.dynamicThing,{tag:"Component",staticClass:"framework-title",class:[{"is-hidden":!e.hierarchyIsdoneLoading},e.parentObjectClass],attrs:{obj:e.changedObj?e.changedObj:e.importFramework,repo:e.repo,profile:e.containerProfile,properties:"tertiary"},on:{"edit-node-event":e.onEditNode,"done-editing-node-event":e.onDoneEditingNode}}),e.importFramework&&!e.conceptMode?r("Hierarchy",{class:{"is-hidden":!e.hierarchyIsdoneLoading},attrs:{view:"importPreview",container:e.importFramework,containerType:"Framework",containerNodeProperty:"competency",containerEdgeProperty:"relation",nodeType:"EcCompetency",profile:e.hierarchyProfile,viewOnly:!1,isDraggable:!0,edgeType:"EcAlignment",edgeRelationProperty:"relationType",edgeRelationLiteral:"narrows",edgeSourceProperty:"source",edgeTargetProperty:"target",repo:e.repo,newFramework:!0,properties:"text"===e.importType?"primary":"tertiary"},on:{"done-loading-nodes":e.handleDoneLoading,"search-things":function(t){return e.handleSearch(t)},"edit-multiple-event":e.onEditMultiple,"selected-array":e.selectedArrayEvent,"delete-object":e.deleteObject,"export-object":e.exportObject}}):e._e(),e.importFramework&&e.conceptMode?r("ConceptHierarchy",{class:{"is-hidden":!e.hierarchyIsdoneLoading},attrs:{view:"import",container:e.importFramework,containerType:"ConceptScheme",viewOnly:!1,isDraggable:!0,repo:e.repo,newFramework:!0,profile:e.ctdlAsnConceptProfile,properties:"tertiary"},on:{"done-loading-nodes":e.handleDoneLoading,"search-things":function(t){return e.handleSearch(t)},"edit-multiple-event":e.onEditMultiple,"selected-array":e.selectedArrayEvent,"delete-object":e.deleteObject}}):e._e()],1):e.importFramework&&"light"===e.importTransition?r("div",{staticClass:"import-light"},[r(e.dynamicThing,{tag:"Component",staticClass:"framework-title",class:e.parentObjectClass,attrs:{editingNode:e.editingNode,obj:e.changedObj?e.changedObj:e.importFramework,parentNotEditable:!0,profile:e.containerProfile,properties:"tertiary"},on:{"done-editing-node-event":e.onDoneEditingNode}}),e.importFramework&&!e.conceptMode?r("Hierarchy",{attrs:{view:"importLight",container:e.importFramework,containerType:"Framework",containerNodeProperty:"competency",containerEdgeProperty:"relation",nodeType:"EcCompetency",profile:e.hierarchyProfile,editable:!1,viewOnly:!0,edgeType:"EcAlignment",edgeRelationProperty:"relationType",edgeRelationLiteral:"narrows",edgeSourceProperty:"source",edgeTargetProperty:"target",repo:e.repo,newFramework:!0,properties:"text"===e.importType?"primary":"tertiary"},on:{"delete-object":e.deleteObject,"export-object":e.exportObject}}):e._e(),e.importFramework&&e.conceptMode?r("ConceptHierarchy",{class:{"is-hidden":!e.hierarchyIsdoneLoading},attrs:{view:"import",container:e.importFramework,containerType:"ConceptScheme",viewOnly:!0,repo:e.repo,newFramework:!0,profile:e.ctdlAsnConceptProfile,properties:"tertiary"},on:{"selected-array":e.selectedArrayEvent,"delete-object":e.deleteObject}}):e._e()],1):e._e()],1)],2):e._e(),"server"===e.importType?r("ImportServer",{attrs:{conceptMode:e.conceptMode,importTransition:e.importTransition},on:{"import-case":function(t){return e.handleImportFromTabs(t)}}},[r("template",{slot:"import-server-title"},[r("h1",{staticClass:"title is-size-1 has-text-black"},[e.conceptMode&&"true"===e.queryParams.ceasnDataFields?r("span",[e._v(" Import a concept scheme ")]):e.conceptMode?r("span",[e._v(" Import a taxonomy ")]):r("span",[e._v("Import a framework")]),r("span",{staticClass:"button is-outlined is-primary is-pulled-right",on:{click:e.showRightAside}},[r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-exclamation-circle"})]),r("span",[e._v(" info ")])])])]),r("template",{slot:"import-framework"},[e.importFramework&&"preview"===e.importTransition?r("div",{staticClass:"import-preview"},[e.hierarchyIsdoneLoading?e._e():r("div",{staticClass:"section"},[r("ul",{staticClass:"processing-list"},[r("li"),r("li"),r("ul",[r("li"),r("li"),r("li")]),r("li"),r("li"),r("ul",[r("li"),r("li")])])]),r(e.dynamicThing,{tag:"Component",staticClass:"framework-title",class:[{"is-hidden":!e.hierarchyIsdoneLoading},e.parentObjectClass],attrs:{obj:e.changedObj?e.changedObj:e.importFramework,repo:e.repo,profile:e.containerProfile,properties:"tertiary"},on:{"edit-node-event":e.onEditNode,"done-editing-node-event":e.onDoneEditingNode}}),e.importFramework&&!e.conceptMode?r("Hierarchy",{class:{"is-hidden":!e.hierarchyIsdoneLoading},attrs:{view:"importPreview",container:e.importFramework,containerType:"Framework",containerNodeProperty:"competency",containerEdgeProperty:"relation",nodeType:"EcCompetency",profile:e.hierarchyProfile,viewOnly:!1,isDraggable:!0,edgeType:"EcAlignment",edgeRelationProperty:"relationType",edgeRelationLiteral:"narrows",edgeSourceProperty:"source",edgeTargetProperty:"target",repo:e.repo,newFramework:!0,properties:"text"===e.importType?"primary":"tertiary"},on:{"done-loading-nodes":e.handleDoneLoading,"search-things":function(t){return e.handleSearch(t)},"edit-multiple-event":e.onEditMultiple,"selected-array":e.selectedArrayEvent,"delete-object":e.deleteObject,"export-object":e.exportObject}}):e._e(),e.importFramework&&e.conceptMode?r("ConceptHierarchy",{class:{"is-hidden":!e.hierarchyIsdoneLoading},attrs:{view:"import",container:e.importFramework,containerType:"ConceptScheme",viewOnly:!1,isDraggable:!0,repo:e.repo,newFramework:!0,profile:e.ctdlAsnConceptProfile,properties:"tertiary"},on:{"done-loading-nodes":e.handleDoneLoading,"search-things":function(t){return e.handleSearch(t)},"edit-multiple-event":e.onEditMultiple,"selected-array":e.selectedArrayEvent,"delete-object":e.deleteObject}}):e._e()],1):e.importFramework&&"light"===e.importTransition?r("div",{staticClass:"import-light"},[r(e.dynamicThing,{tag:"Component",staticClass:"framework-title",class:e.parentObjectClass,attrs:{editingNode:e.editingNode,obj:e.changedObj?e.changedObj:e.importFramework,parentNotEditable:!0,profile:e.containerProfile,properties:"tertiary"},on:{"done-editing-node-event":e.onDoneEditingNode}}),e.importFramework&&!e.conceptMode?r("Hierarchy",{attrs:{view:"importLight",container:e.importFramework,containerType:"Framework",containerNodeProperty:"competency",containerEdgeProperty:"relation",nodeType:"EcCompetency",profile:e.hierarchyProfile,editable:!1,viewOnly:!0,edgeType:"EcAlignment",edgeRelationProperty:"relationType",edgeRelationLiteral:"narrows",edgeSourceProperty:"source",edgeTargetProperty:"target",repo:e.repo,newFramework:!0,properties:"text"===e.importType?"primary":"tertiary"},on:{"delete-object":e.deleteObject,"export-object":e.exportObject}}):e._e(),e.importFramework&&e.conceptMode?r("ConceptHierarchy",{class:{"is-hidden":!e.hierarchyIsdoneLoading},attrs:{view:"import",container:e.importFramework,containerType:"ConceptScheme",viewOnly:!0,repo:e.repo,newFramework:!0,profile:e.ctdlAsnConceptProfile,properties:"tertiary"},on:{"selected-array":e.selectedArrayEvent,"delete-object":e.deleteObject}}):e._e()],1):e._e()])],2):e._e(),"url"===e.importType?r("ImportUrl",{attrs:{conceptMode:e.conceptMode,importTransition:e.importTransition}},[r("template",{slot:"import-url-title"},[r("h1",{staticClass:"title is-size-1 has-text-black"},[e.conceptMode&&"true"===e.queryParams.ceasnDataFields?r("span",[e._v(" Import a concept scheme ")]):e.conceptMode?r("span",[e._v(" Import a taxonomy ")]):r("span",[e._v("Import a framework")]),r("span",{staticClass:"button is-outlined is-primary is-pulled-right",on:{click:e.showRightAside}},[r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-exclamation-circle"})]),r("span",[e._v(" info ")])])])]),r("template",{slot:"import-framework"},[e.importFramework&&"preview"===e.importTransition?r("div",{staticClass:"import-preview"},[e.hierarchyIsdoneLoading?e._e():r("div",{staticClass:"section"},[r("ul",{staticClass:"processing-list"},[r("li"),r("li"),r("ul",[r("li"),r("li"),r("li")]),r("li"),r("li"),r("ul",[r("li"),r("li")])])]),r(e.dynamicThing,{tag:"Component",staticClass:"framework-title",class:[{"is-hidden":!e.hierarchyIsdoneLoading},e.parentObjectClass],attrs:{obj:e.changedObj?e.changedObj:e.importFramework,repo:e.repo,profile:e.containerProfile,properties:"tertiary"},on:{"edit-node-event":e.onEditNode,"done-editing-node-event":e.onDoneEditingNode}}),e.importFramework&&!e.conceptMode?r("Hierarchy",{class:{"is-hidden":!e.hierarchyIsdoneLoading},attrs:{view:"importPreview",container:e.importFramework,containerType:"Framework",containerNodeProperty:"competency",containerEdgeProperty:"relation",nodeType:"EcCompetency",profile:e.hierarchyProfile,viewOnly:!1,isDraggable:!0,edgeType:"EcAlignment",edgeRelationProperty:"relationType",edgeRelationLiteral:"narrows",edgeSourceProperty:"source",edgeTargetProperty:"target",repo:e.repo,newFramework:!0,properties:"text"===e.importType?"primary":"tertiary"},on:{"done-loading-nodes":e.handleDoneLoading,"search-things":function(t){return e.handleSearch(t)},"edit-multiple-event":e.onEditMultiple,"selected-array":e.selectedArrayEvent,"delete-object":e.deleteObject,"export-object":e.exportObject}}):e._e(),e.importFramework&&e.conceptMode?r("ConceptHierarchy",{class:{"is-hidden":!e.hierarchyIsdoneLoading},attrs:{view:"import",container:e.importFramework,containerType:"ConceptScheme",viewOnly:!1,isDraggable:!0,repo:e.repo,newFramework:!0,profile:e.ctdlAsnConceptProfile,properties:"tertiary"},on:{"done-loading-nodes":e.handleDoneLoading,"search-things":function(t){return e.handleSearch(t)},"edit-multiple-event":e.onEditMultiple,"selected-array":e.selectedArrayEvent,"delete-object":e.deleteObject}}):e._e()],1):e.importFramework&&"light"===e.importTransition?r("div",{staticClass:"import-light"},[r(e.dynamicThing,{tag:"Component",staticClass:"framework-title",class:e.parentObjectClass,attrs:{editingNode:e.editingNode,obj:e.changedObj?e.changedObj:e.importFramework,parentNotEditable:!0,profile:e.containerProfile,properties:"tertiary"},on:{"done-editing-node-event":e.onDoneEditingNode}}),e.importFramework&&!e.conceptMode?r("Hierarchy",{attrs:{view:"importLight",container:e.importFramework,containerType:"Framework",containerNodeProperty:"competency",containerEdgeProperty:"relation",nodeType:"EcCompetency",profile:e.hierarchyProfile,editable:!1,viewOnly:!0,edgeType:"EcAlignment",edgeRelationProperty:"relationType",edgeRelationLiteral:"narrows",edgeSourceProperty:"source",edgeTargetProperty:"target",repo:e.repo,newFramework:!0,properties:"text"===e.importType?"primary":"tertiary"},on:{"delete-object":e.deleteObject,"export-object":e.exportObject}}):e._e(),e.importFramework&&e.conceptMode?r("ConceptHierarchy",{class:{"is-hidden":!e.hierarchyIsdoneLoading},attrs:{view:"import",container:e.importFramework,containerType:"ConceptScheme",viewOnly:!0,repo:e.repo,newFramework:!0,profile:e.ctdlAsnConceptProfile,properties:"tertiary"},on:{"selected-array":e.selectedArrayEvent,"delete-object":e.deleteObject}}):e._e()],1):e._e()])],2):e._e(),"text"===e.importType?r("ImportText",{attrs:{conceptMode:e.conceptMode,importTransition:e.importTransition}},[r("template",{slot:"import-text-title"},[r("h1",{staticClass:"title is-size-1 has-text-black"},[e.conceptMode&&"true"===e.queryParams.ceasnDataFields?r("span",[e._v(" Import a concept scheme ")]):e.conceptMode?r("span",[e._v(" Import a taxonomy ")]):r("span",[e._v("Import a framework")]),r("span",{staticClass:"button is-outlined is-primary is-pulled-right",on:{click:e.showRightAside}},[r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-exclamation-circle"})]),r("span",[e._v(" info ")])])])]),r("template",{slot:"import-framework"},[e.importFramework&&"light"===e.importTransition?r("div",{staticClass:"import-light"},[r(e.dynamicThing,{tag:"Component",staticClass:"framework-title",class:e.parentObjectClass,attrs:{editingNode:e.editingNode,obj:e.changedObj?e.changedObj:e.importFramework,parentNotEditable:!0,profile:e.containerProfile,properties:"tertiary",view:"importLight"},on:{"done-editing-node-event":e.onDoneEditingNode}}),e.importFramework&&!e.conceptMode?r("Hierarchy",{attrs:{view:"importLight",container:e.importFramework,containerType:"Framework",containerNodeProperty:"competency",containerEdgeProperty:"relation",nodeType:"EcCompetency",profile:e.hierarchyProfile,editable:!1,viewOnly:!0,edgeType:"EcAlignment",edgeRelationProperty:"relationType",edgeRelationLiteral:"narrows",edgeSourceProperty:"source",edgeTargetProperty:"target",repo:e.repo,newFramework:!0,properties:"text"===e.importType?"primary":"tertiary"},on:{"delete-object":e.deleteObject,"export-object":e.exportObject}}):e._e(),e.importFramework&&e.conceptMode?r("ConceptHierarchy",{class:{"is-hidden":!e.hierarchyIsdoneLoading},attrs:{view:"import",container:e.importFramework,containerType:"ConceptScheme",viewOnly:!0,repo:e.repo,newFramework:!0,profile:e.ctdlAsnConceptProfile,properties:"tertiary"},on:{"selected-array":e.selectedArrayEvent,"delete-object":e.deleteObject}}):e._e()],1):e._e()])],2):e._e()],1)])])]},proxy:!0}])},[r("template",{slot:"right"},[e.showRightAside&&"file"===e.importType?r("RightAside",[r("template",{slot:"right-aside-content"},[r("div",{staticClass:"cass--right-aside--content"},[r("div",{staticClass:"section"},[r("h2",{staticClass:"title is-size-4"},[e._v(" Import From a File ")]),r("p",{staticClass:"has-text-weight-bold"},[e._v(" Supported File Types ")]),r("div",{staticClass:"columns pt-4 is-multiline"},[r("div",{staticClass:"column is-narrow"},[e.conceptMode?e._e():r("div",{staticClass:"button is-outlined is-warning is-small",on:{click:function(t){return e.showImportModal("pdf")}}},[r("span",{staticClass:"icon",attrs:{title:"PDF files are experimentally supported. Click to learn more."}},[r("i",{staticClass:"fa fa-exclamation"})]),r("span",[e._v("PDF")])])]),r("div",{staticClass:"column is-narrow"},[e.conceptMode?e._e():r("div",{staticClass:"button is-outlined is-warning is-small",on:{click:function(t){return e.showImportModal("docx")}}},[r("span",{staticClass:"icon",attrs:{title:"Word documents and Docx files are experimental. Click to learn more."}},[r("i",{staticClass:"fa fa-exclamation"})]),r("span",[e._v("DOCX/WORD")])])]),r("div",{staticClass:"column is-narrow"},[r("div",{staticClass:"button is-outlined is-success is-small",on:{click:function(t){return e.showImportModal("csv")}}},[r("span",{staticClass:"icon is-pulled-right",attrs:{title:"CSV files are supported, click to learn more."}},[r("i",{staticClass:"fa fa-check"})]),r("span",[e._v("CSV")])])]),r("div",{staticClass:"column is-narrow"},[e.conceptMode?e._e():r("div",{staticClass:"button is-outlined is-success is-small",on:{click:function(t){return e.showImportModal("xml")}}},[r("span",{staticClass:"icon is-pulled-right",attrs:{title:"XML files are supported, click to learn more."}},[r("i",{staticClass:"fa fa-check"})]),r("span",[e._v("XML")])])]),r("div",{staticClass:"column is-narrow"},[r("div",{staticClass:"button is-outlined is-success is-small",on:{click:function(t){return e.showImportModal("json")}}},[r("span",{staticClass:"icon is-pulled-right",attrs:{title:"JSON files are supported, click to learn more."}},[r("i",{staticClass:"fa fa-check"})]),r("span",[e._v("JSON")])])]),r("div",{staticClass:"column is-narrow"},[e.conceptMode?e._e():r("div",{staticClass:"button is-outlined is-success is-small",on:{click:function(t){return e.showImportModal("html")}}},[r("span",{staticClass:"icon is-pulled-right",attrs:{title:"html files are fully supported at this time"}},[r("i",{staticClass:"fa fa-check"})]),r("span",[e._v("HTML")])])])]),r("br"),r("p",{staticClass:"has-text-weight-bold"},[e._v(" Steps to import from file ")]),e.conceptMode?r("ul",{staticClass:"cat__bullet-list is-size-6"},[r("li",[e._v(" Click inside the “Files to Upload” box or drag and drop a file inside the dashed box. ")]),r("li",[e._v(" Once your file has been uploaded, CaSS will detect a "+e._s(e.taxonomyTerminology)+" from the file and display details about your "+e._s(e.taxonomyTerminology)+". ")]),r("li",[e._v(" If the details are correct, click “Import” to review and edit your "+e._s(e.taxonomyTerminology)+". ")]),r("li",[e._v(" A preview of your "+e._s(e.taxonomyTerminology)+" will display, your "+e._s(e.taxonomyTerminology)+" is now in CaSS! ")]),r("li",[e._v(' click "done" to navigate to the '+e._s(e.taxonomyTerminology)+" in the editor where you can continue editing as well as export to a variety of formats. ")])]):r("ul",{staticClass:"cat__bullet-list is-size-6"},[r("li",[e._v(" Click inside the “Files to Upload” box or drag and drop a file inside the dashed box. ")]),r("li",[e._v(" Once your file has been uploaded, CaSS will detect a competency framework from the file and display details about your framework. ")]),r("li",[e._v(" If the details are correct, click “Accept and Review” to review and edit your framework. ")]),r("li",[e._v(" An editable preview of your framework will be available. When you are done making changes, click “Done Editing”. ")]),r("li",[e._v(" An uneditable preview of your framework will display, your framework is now in CaSS! ")]),r("li",[e._v(' click "done" to navigate to the framework in the editor where you can continue editing as well as export to a variety of formats. ')]),r("li",[e._v(" If your framework is not detected by CaSS or not imported properly, let us know at "),r("a",{attrs:{href:"mailto:cass@eduworks.com?subject=File+to+Improve+CaSS+Importer"}},[e._v("cass@eduworks.com")]),e._v(" and we will look into the inquiry and provide a response. ")])])])])])],2):e._e(),e.showRightAside&&"server"===e.importType?r("RightAside",[r("template",{slot:"right-aside-content"},[r("div",{staticClass:"cass--right-aside--content"},[r("div",{staticClass:"section"},[r("h2",{staticClass:"title is-size-4"},[e._v(" Remote Server Import ")]),r("p",{staticClass:"has-text-weight-bold"},[e._v(" If you know the URL of a IMS CASE Repository, such as OpenSalt, you can import published frameworks from that repository. ")]),r("br"),r("ul",{staticClass:"cat__bullet-list"},[r("li",{staticClass:"is-size-6"},[e._v(" A CASE framework cannot be imported if it uses API Key authentication. ")]),r("li",{staticClass:"is-size-6"},[e._v(" This import maintains the URLs of the CASE frameworks and changes both the format and schema used to store the CASE frameworks in CaSS, but does not change any of the data. ")]),r("li",{staticClass:"is-size-6"},[e._v(" After entering the endpoint below, you can select which frameworks you would like to import. ")]),r("li",{staticClass:"is-size-6"},[e._v(" If you wish to edit the frameworks after importing, please be sure you are signed in. ")])]),r("br"),r("p",{staticClass:"has-text-weight-bold"},[e._v(" If you know the URL of another CaSS Repository, you can import frameworks from that repository. ")]),r("br"),r("ul",{staticClass:"cat__bullet-list"},[r("li",{staticClass:"is-size-6"},[e._v(" This import maintains the URLs of the CaSS frameworks but does not change any of the data besides the owner. If you are logged in, you will have ownership of the newly imported framework and be able to edit it. ")]),r("li",{staticClass:"is-size-6"},[e._v(" After entering the endpoint below, you can select which frameworks you would like to import. ")]),r("li",{staticClass:"is-size-6"},[e._v(" If the other repository has directories, these will appear at the top of the list. You can click on a directory to view and select frameworks within it. ")]),r("li",{staticClass:"is-size-6"},[e._v(" Use the search bar to find particular frameworks or directories. ")])])])])])],2):e._e(),e.showRightAside&&"text"===e.importType?r("RightAside",[r("template",{slot:"right-aside-content"},[r("div",{staticClass:"cass--right-aside--content"},[r("div",{staticClass:"section"},[r("h2",{staticClass:"title is-size-4"},[e._v(" Paste Text ")]),r("p",{staticClass:"is-size-6"},[e._v(" If you have a list of competency names, you can organize them into a new framework by pasting here. ")]),r("br"),r("p",{staticClass:"has-text-weight-bold"},[e._v(" Instructions ")]),r("ul",{staticClass:"cat__bullet-list is-size-6"},[r("li",[e._v(" Copy and paste from a document or start typing in the text area. ")]),r("li",[e._v(" Give your framework a name. ")]),r("li",[e._v(" List each competency on a separate line. ")]),r("li",[e._v(" 1 space indicates one level of indentation in the hierarchy. ")]),r("li",[e._v(" To the right of the text box, you will see a preview of the hierarchy you are creating and can make any needed adjustments before importing. ")]),r("li",[e._v(" Once you are done select the import button to complete the immport process and view the framework in the editor. ")])]),"light"===e.importTransition&&"text"!==e.importType?r("p",{staticClass:"is-size-6"},[r("span",{staticClass:"has-text-success has-text-weight-bold"},[e._v(" Your import is complete! ")])]):e._e()])])])],2):e._e(),e.showRightAside&&"url"===e.importType?r("RightAside",[r("template",{slot:"right-aside-content"},[r("div",{staticClass:"cass--right-aside--content"},[r("div",{staticClass:"section"},[r("h2",{staticClass:"title is-size-4"},[e._v(" Import From URL Source ")]),r("p",{staticClass:"is-size-6 pb-4"},[e._v(" If you know the URL of a CTDL-ASN JSON-LD graph, you can import published frameworks by URL. ")]),r("p",{staticClass:"has-text-weight-bold"},[e._v(" URL Import Instructions ")]),r("ul",{staticClass:"cat__bullet-list is-size-6"},[r("li",[e._v(" This import maintains the URLs of the original frameworks and changes both the format and schema used to store the CTDL-ASN frameworks in CaSS, but does not change any of the data. ")]),r("li",[e._v(" If you wish to edit the framework after importing by URL, please be sure you are signed in. ")]),r("li",[r("b",[e._v("Please note that the Technology Skills framework in the URL Import Examples is very large and will take a long time to import.")])])])])])])],2):e._e()],1)],2)},o=[],s=r("dd98"),a=r("713b"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"columns is-mobile",attrs:{id:"import-from-file"}},[r("div",{staticClass:"column is-12"},[r("div",{staticClass:"container py-6"},[e._t("import-file-title",[r("p",[e._v("Nothing send from import.vue")])]),r("div",{staticClass:"columns is-multiline"},[r("div",{staticClass:"column is-12"},[r("ImportTabs")],1),"process"===e.importTransition||"upload"===e.importTransition||"info"===e.importTransition?r("div",{staticClass:"column is-12"},[r("div",{staticClass:"has-dashed-border columns is-vcentered has-text-centered",attrs:{id:"drop-area"}},["upload"===e.importTransition?r("drag-and-drop",{staticClass:"column is-12",on:{"clear-files":e.clearFiles}}):"process"!==e.importTransition&&"info"!==e.importTransition||0!==e.importErrors.length?e.importErrors.length>0?r("div",{staticClass:"column has-text-danger"},[r("ul",[e._l(e.importErrors,(function(t,i){return r("li",{key:i,staticClass:"is-size-6"},[r("span",{},[r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-times"})]),e._v(" "+e._s(t)+" ")])])})),r("li")],2),r("div",{staticClass:"section"},[r("div",{staticClass:"buttons is-centered"},[r("div",{staticClass:"button is-primary",on:{click:function(t){return e.resetImport()}}},[r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-redo"})]),r("span",[e._v("start over")])])])])]):e._e():r("div",{staticClass:"column"},[r("div",{staticClass:"section has-text-centered"},["process"===e.importTransition?r("span",{staticClass:"icon is-large"},[r("i",{staticClass:"fa fa-spinner fa-pulse fa-2x"})]):e._e()]),r("div",{staticClass:"section"},[r("p",{staticClass:"is-size-6"},[e._v(" "+e._s(e.importStatus)+" ")])])])],1),"csv"==e.importFileType&&"file"==e.importType?r("div",{staticClass:"section csv-input"},[e._l(e.csvImportDetails,(function(t){return r("div",{key:t,staticClass:"field"},[r("label",{staticClass:"label"},[e._v(" "+e._s(t.label)+" ")]),"string"===t.type?r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],staticClass:"input",domProps:{value:t.value},on:{input:function(r){r.target.composing||e.$set(t,"value",r.target.value)}}})]):"column"===t.type?r("div",{staticClass:"control"},[r("div",{staticClass:"select is-smal"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],on:{change:function(r){var i=Array.prototype.filter.call(r.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"value",r.target.multiple?i:i[0])}}},[r("option",{attrs:{value:"",selected:""}},[e._v(" N/A ")]),e._l(e.csvColumns,(function(t,i){return r("option",{key:i,domProps:{value:t}},[e._v(" "+e._s(t.name)+" ")])}))],2)])]):"file"===t.type?r("div",{staticClass:"file is-primary"},[r("label",{staticClass:"file-label"},[r("input",{staticClass:"file-input",attrs:{type:"file",name:"relation-file"},on:{change:e.analyzeCsvRelation}}),e._m(0,!0)])]):e._e()])})),e.csvRelationFile?e._l(e.csvRelationDetails,(function(t){return r("div",{key:t,staticClass:"field"},[r("div",{staticClass:"field"},[r("label",{staticClass:"label"},[e._v(" "+e._s(t.label)+" ")]),r("div",{staticClass:"select is-small"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],on:{change:function(r){var i=Array.prototype.filter.call(r.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"value",r.target.multiple?i:i[0])}}},[r("option",{attrs:{value:"",selected:""}},[e._v(" n/a ")]),e._l(e.csvRelationColumns,(function(t,i){return r("option",{key:i,domProps:{value:t}},[e._v(" "+e._s(t.name)+" ")])}))],2)])])])})):e._e()],2):"medbiq"==e.importFileType&&"file"==e.importType?r("div",e._l(e.medbiqDetails,(function(t){return r("div",{key:t,staticClass:"field"},[r("label",{staticClass:"label"},[e._v(" "+e._s(t.label)+" ")]),r("div",{staticClass:"control"},["string"===t.type?r("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],staticClass:"input",domProps:{value:t.value},on:{input:function(r){r.target.composing||e.$set(t,"value",r.target.value)}}}):e._e()])])})),0):e._e(),"file"===e.importType&&"info"===e.importTransition?r("div",{staticClass:"buttons is-right"},[e.importFile&&"file"===e.importType&&"pdf"!==e.importFileType?r("div",{staticClass:"button is-pulled-right is-outlined is-dark",on:{click:e.cancelImport}},[e._m(1),r("span",[e._v(" Cancel ")])]):e._e(),e.importFile&&"file"===e.importType&&"pdf"!==e.importFileType?r("div",{staticClass:"button is-pulled-right is-outlined is-primary",on:{click:e.prepareToImportNonPdf}},[e._m(2),r("span",[e._v(" Import ")])]):e._e()]):e._e()]):e._e(),r("div",{staticClass:"column is-12"},[e._t("import-framework")],2)])],2)])])},c=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"file-cta"},[r("span",{staticClass:"file-icon"},[r("i",{staticClass:"fas fa-upload"})]),r("span",{staticClass:"file-label"},[e._v(" Choose a file… ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fas fa-times"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fas fa-upload"})])}],p=(r("a4d3"),r("e01a"),r("b0c0"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container is-fluid",attrs:{id:"import-bottom-section"}},[!e.importFramework||e.importFramework&&"text"===e.importType?r("div",{staticClass:"pt-4"},[r("div",{staticClass:"tile is-vertical"},[r("div",{staticClass:"section is-medium"},[r("div",{staticClass:"columns is-multiline is-mobile"},[r("div",{staticClass:"column"},[r("div",{staticClass:"import-tab",class:{"is-active-tab":"file"===e.importType}},[r("a",{on:{click:function(t){return e.$store.commit("app/importType","file")}}},[r("i",{staticClass:"fa fa-2x fa-file has-text-centered is-block",attrs:{"aria-hidden":"true"}}),r("div",{staticClass:"is-hidden-mobile is-block has-text-centered"},[e._v(" File Import ")])])])]),e.conceptMode?e._e():r("div",{staticClass:"column"},[r("div",{staticClass:"import-tab",class:{"is-active-tab":"server"===e.importType}},[r("a",{on:{click:function(t){return e.$store.commit("app/importType","server")}}},[r("i",{staticClass:"fa fa-2x fa-server is-block has-text-centered",attrs:{"aria-hidden":"true"}}),r("div",{staticClass:"is-hidden-mobile is-block has-text-centered"},[e._v(" Remote Server ")])])])]),e.conceptMode?e._e():r("div",{staticClass:"column"},[r("div",{staticClass:"import-tab",class:{"is-active-tab":"text"===e.importType}},[r("a",{on:{click:function(t){return e.$store.commit("app/importType","text")}}},[r("i",{staticClass:"fa fa-2x fa-paste has-text-centered is-block",attrs:{"aria-hidden":"true"}}),r("div",{staticClass:"is-hidden-mobile is-block has-text-centered"},[e._v(" Paste Text ")])])])]),e.conceptMode?e._e():r("div",{staticClass:"column"},[r("div",{staticClass:"import-tab",class:{"is-active-tab":"url"===e.importType}},[r("a",{on:{click:function(t){return e.$store.commit("app/importType","url")}}},[r("i",{staticClass:"fa fa-link has-text-centered is-block fa-2x",attrs:{"aria-hidden":"true"}}),r("div",{staticClass:"is-hidden-mobile is-block has-text-centered"},[e._v(" URL Source ")])])])])])])])]):e._e(),"file"===e.importType?r("div",[r("h2",{staticClass:"is-size-3"},[e._v(" Import from file ")]),r("span",[e._v("Status: "),"upload"!==e.importTransition||e.importFile&&0!==e.importFile.length||!e.conceptMode?"process"===e.importTransition?r("span",{staticClass:"is-size-5 has-text-dark"},[e._v(" processing ")]):"upload"!==e.importTransition||e.importFile&&0!==e.importFile.length?"detail"===e.importTransition?r("span",[e._m(0)]):e._e():r("span",{staticClass:"is-size-5"},[e._v(" Upload documents to transform into CaSS Competency Frameworks. ")]):r("span",{staticClass:"is-size-5 has-text-dark"},[e._v(" Upload documents to transform into CaSS "+e._s("true"===e.queryParams.ceasnDataFields?"Concept Schemes":"Taxonomies")+". ")]),"preview"===e.importTransition?r("span",[null!==e.frameworkSize?r("span",{staticClass:" is-size-5 has-text-success has-text-weight-bold"},[e._v(" Import success, "+e._s(e.frameworkSize)+" competencies ready to edit. ")]):r("span",{staticClass:" is-size-5 has-text-success has-text-weight-bold"},[e._v(" Import success, concepts ready to edit. ")])]):e._e(),"light"===e.importTransition&&"text"!==e.importType?r("span",[e._m(1)]):e._e()])]):e._e(),"server"===e.importType?r("div",[r("h2",{staticClass:" is-size-3"},[e._v(" Import from remote server ")]),r("span",[e._v("Status: "),"process"===e.importTransition?r("span",[e._m(2)]):"importingCaseFrameworks"===e.importTransition?r("span",[e._v(" Processing... ")]):"upload"===e.importTransition?r("span",[e._v(" Ready ")]):r("span",[e._v(" "+e._s(e.importStatus)+" ")])])]):e._e(),"text"===e.importType?r("div",{},[r("h2",{staticClass:"is-size-3"},[e._v(" Import framework from text ")]),r("span",[e._v(" Status: "),"upload"===e.importTransition?r("span",[e._v(" Ready ")]):e._e(),r("span",[e._v(" "+e._s(e.importStatus)+" ")])])]):e._e(),"url"===e.importType?r("div",[r("h2",{staticClass:" is-size-3"},[e._v(" Import from URL source ")]),r("span",["upload"===e.importTransition?r("span",[e._v(" Ready ")]):"light"===e.importTransition?r("span",[e._v(" Complete ")]):"preview"===e.importTransition?r("span",[e._v(" Processed, ready to edit ")]):r("span",[e._v(" "+e._s(e.importStatus)+" ")])])]):r("h2")])}),l=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"is-size-5"},[r("span",{staticClass:"has-text-success has-text-weight-bold"},[e._v(" CaSS has detected a framework! ")]),r("br"),r("br"),e._v(" Please review the competency framework and file details gathered below. To continue with the input of this competency framework, press Accept Details & Review. To cancel and review or change your input file, press cancel. ")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"is-size-5"},[r("span",{staticClass:"has-text-success has-text-weight-bold"},[e._v(" Your import is complete! ")]),r("br"),r("br")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-spinner fa-pulse fa-2x"})])}],m=(r("99af"),r("a434"),r("d3b7"),r("ac1f"),r("8a79"),r("3ca3"),r("5319"),r("841c"),r("498a"),r("ddb0"),r("2b3d"),{data:function(){return{repo:window.repo}},methods:{showRightAside:function(){this.$store.commit("app/showRightAside",{})},selectedArrayEvent:function(e){this.selectedArray=e},clearFiles:function(){this.$store.commit("app/clearImportFiles")},cancelImport:function(){this.$emit("delete-object",this.importFramework),this.resetImport()},resetImport:function(){this.$store.commit("app/resetImport")},onEditMultiple:function(){this.showEditMultiple=!0;var e={profile:this.hierarchyProfile,selectedCompetencies:this.selectedArray,component:"MultiEdit"};this.$store.commit("app/showModal",e)},handleSearch:function(e){this.$store.commit("app/showModal",e)},onEditNode:function(){this.editingNode=!0},onDoneEditingNode:function(){this.changedObj=EcRepository.getBlocking(this.importFramework.shortId()),this.editingNode=!1},handleDoneLoading:function(){appLog("done loading"),this.hierarchyIsdoneLoading=!0},showModal:function(e,t){var r=this,i={};"export"===e?i={type:e,selectedExportOption:"",title:"Export framework",exportOptions:this.frameworkExportOptions,text:"Select a file format to export your framework. Files download locally.",onConfirm:function(e){return r.exportObject(e)}}:"duplicate"===e?i={type:e,title:"Duplicate framework",text:"A framework has already been imported under the name "+t.name+". Do you want to overwrite it?",options:["Overwrite framework","Save import as a new framework"],currentName:t.name,onConfirm:function(e){return r.savePdfImport(t,e)},onCancel:function(){return r.clearImport()}}:"duplicateOverwriteOnly"===e?i=!t[1]||EcIdentityManager.ids&&0!==EcIdentityManager.ids.length?{type:e,title:"Duplicate framework",text:(t[0].name?"The framework "+t[0].name:"This framework")+" has already been imported. If you're a framework admin you can overwrite it. Do you want to overwrite it?",onConfirm:function(){return"url"===r.importType?r.importJsonLd(t[0]):"cass"===r.serverType?r.continueCassImport(t[0]):r.continueCaseImport(t[0])},onCancel:function(){return"url"===r.importType?r.clearImport():"cass"===r.serverType?r.importCassFrameworks(t[0]):r.importCase(t[0])}}:{type:e,title:"Duplicate framework",text:(t[0].name?"The framework "+t[0].name:"This framework")+" has already been imported. You can overwrite it but will not be able to edit it since you're not logged in. Do you want to overwrite it?",onConfirm:function(){return"url"===r.importType?r.importJsonLd(t[0]):"cass"===r.serverType?r.continueCassImport(t[0]):r.continueCaseImport(t[0])},onCancel:function(){return t[0][1]?"cass"===r.serverType?r.importCassFrameworks(t[0]):r.importCase(t[0]):r.clearImport()}}:"error"===e&&(i={type:e,title:"Error",text:t.message,details:t.details}),this.$modal.show(i)},exportObject:function(e){var t;t=!1===EcRepository.shouldTryUrl(this.importFramework.id)&&-1===this.importFramework.id.indexOf(this.repo.selectedServer)?EcCrypto.md5(this.importFramework.shortId()):this.importFramework.getGuid();var r=this.repo.selectedServer+"data/"+t;"asn"===e?this.exportAsn(r):"jsonld"===e?this.exportJsonld(r):"rdfQuads"===e?this.exportRdfQuads(r):"rdfJson"===e?this.exportRdfJson(r):"rdfXml"===e?this.exportRdfXml(r):"turtle"===e?this.exportTurtle(r):"ctdlasnJsonld"===e?this.exportCtdlasnJsonld(r):"ctdlasnCsv"===e?this.exportCtdlasnCsv(r):"csv"===e?this.exportCsv():"case"===e&&this.exportCasePackages(t)},unsupportedFile:function(e){this.$store.commit("app/importFileType",e);var t="File type "+fileType+" is unsupported in this workflow";this.$store.commit("app/addImportError",t),me.$store.commit("app/importTransition","process")},importSuccess:function(){if(this.conceptMode){var e="Taxonomy";"true"===this.queryParams.ceasnDataFields&&(e="Concept Scheme"),this.$store.commit("app/importStatus",e+" Imported."),this.$store.commit("app/importTransition","preview")}else{var t="Competency detected";this.$store.commit("app/importStatus",t),this.isT3Import?this.$store.commit("app/importTransition","detail"):this.$store.commit("app/importTransition","preview")}},importDetailsAccept:function(){this.$store.commit("app/importStatus","Edit and approve"),this.$store.commit("app/importTransition","preview")},importPreviewAccept:function(){this.$store.commit("app/importStatus","Import Complete!"),this.$store.commit("app/importTransition","light")},clearImport:function(){this.$store.commit("app/importFramework",null),this.$store.commit("app/clearImportFiles"),this.$store.commit("app/clearImportErrors"),this.$store.commit("app/importTransition","upload"),this.$store.commit("app/importStatus",""),this.$store.commit("app/importFeedback",""),this.$store.commit("app/importFileType",""),this.caseDocs&&(this.caseDocs=[])},uploadFiles:function(){this.fileChange(this.importFile)},fileChange:function(e){appLog("file change",e),this.$store.commit("app/clearImportErrors"),this.$store.commit("app/importTransition","process"),this.$store.commit("app/firstImport",!0),this.analyzeImportFile()},analyzeImportFile:function(){var e,t=this,r=this.importFile[0];if(appLog("file is",r),r.name.endsWith(".csv"))this.conceptMode?CTDLASNCSVConceptImport.analyzeFile(r,(function(r,i){t.$store.commit("app/importFileType","conceptcsv");var o="taxonomies";"true"===t.queryParams.ceasnDataFields&&(o="concept schemes"),e="Import "+r+" "+o+" and "+i+" concepts.",t.$store.commit("app/importStatus",e),t.$store.commit("app/importTransition","info")}),(function(e){t.$store.commit("app/addImportError",e),t.$store.commit("app/importTransition","process")})):CTDLASNCSVImport.analyzeFile(r,(function(r,i){t.$store.commit("app/importFileType","ctdlasncsv"),e="Import "+r+" frameworks and "+i+" competencies.",t.$store.commit("app/importStatus",e),t.$store.commit("app/importTransition","info")}),(function(e){CSVImport.analyzeFile(r,(function(e){t.$store.commit("app/importFileType","csv"),t.importFrameworkName=r.name.replace(".csv","");for(var i=0;i<e.length;i++)""===e[i][0]&&e.splice(i,1);for(var o=0;o<e[0].length;o++){var s={};s.name=e[0][o],s.index=o,t.csvColumns.push(s),-1!==s.name.toLowerCase().indexOf("name")&&(t.importCsvColumnName=s),-1!==s.name.toLowerCase().indexOf("description")&&(t.importCsvColumnDescription=s),-1!==s.name.toLowerCase().indexOf("scope")&&(t.importCsvColumnScope=s),-1!==s.name.toLowerCase().indexOf("id")&&(t.importCsvColumnId=s)}t.$store.commit("app/importStatus",(t.competencyCount=e.length-1)+" Competencies Detected."),t.$store.commit("app/importTransition","info")}),(function(e){t.$store.commit("app/addImportError",e),t.$store.commit("app/importTransition","process")}))}));else if(r.name.endsWith(".json")||r.name.endsWith(".jsonld"))this.analyzeJsonLdFramework(r,(function(e,r){var i,o,s=!1;if("ctdlasnConcept"===r)if(t.conceptMode)"true"===t.queryParams.ceasnDataFields?t.$store.commit("app/importStatus","1 Concept Scheme Detected."):t.$store.commit("app/importStatus","1 Taxonomy Detected."),t.$store.commit("app/importFileType","ctdlasnjsonld"),t.$store.commit("app/importTransition","info");else{if("true"===t.queryParams.ceasnDataFields)var a="Concept Schemes must be imported in the concept scheme editor.";else a="Taxonomies must be imported in the taxonomy editor.";s=!0,t.$store.commit("app/addImportError",a),t.$store.commit("app/importTransition","process")}else t.conceptMode?(i="Frameworks must be imported in the competency editor.",s=!0,t.$store.commit("app/addImportError",i),t.$store.commit("app/importTransition","process")):(t.$store.commit("app/importFileType","ctdlasnjsonld"),o="1 Framework and "+(EcObject.keys(e).length-1)+" Competencies Detected.",t.$store.commit("app/importStatus",o),t.$store.commit("app/importTransition","info"));if(t.competencyCount=EcObject.keys(e).length,s||"ctdlasn"!==r&&"ctdlasnConcept"!==r){if(!s){var n="Context is not CTDL-ASN";t.$store.commit("app/addImportError",n),t.$store.commit("app/importTransition","process")}}else;}),(function(e){r.name.endsWith(".json")&&!t.conceptMode?ASNImport.analyzeFile(r,(function(e){t.$store.commit("app/importFileType","asn"),t.$store.commit("app/importStatus","1 Framework and "+EcObject.keys(e).length+" Competencies Detected."),t.$store.commit("app/importTransition","info"),t.competencyCount=EcObject.keys(e).length}),(function(e){t.$store.commit("app/addImportError",e),t.$store.commit("app/importTransition","process")})):(t.$store.commit("app/addImportError",e),t.$store.commit("app/importTransition","process"))}));else if(r.name.endsWith(".xml"))this.conceptMode?(t.$store.commit("app/importTransition","process"),"true"===t.queryParams.ceasnDataFields?t.$store.commit("app/addImportError","This is not a valid file format for concept schemes"):t.$store.commit("app/addImportError","This is not a valid file format for taxonomies")):MedbiqImport.analyzeFile(r,(function(e){t.$store.commit("app/importFileType","medbiq"),t.importFrameworkName=r.name.replace(".xml",""),t.$store.commit("app/importStatus","1 Framework and "+EcObject.keys(e).length+" Competencies Detected."),t.competencyCount=EcObject.keys(e).length,t.$store.commit("app/importTransition","info")}),(function(e){t.$store.commit("app/importTransition","process"),t.$store.commit("app/addImportError",e)}));else if(r.name.endsWith(".pdf"))this.conceptMode?(t.$store.commit("app/importTransition","process"),"true"===t.queryParams.ceasnDataFields?t.$store.commit("app/addImportError","This is not a valid file format for concept schemes"):t.$store.commit("app/addImportError","This is not a valid file format for taxonomies")):(t.$store.commit("app/importFileType","pdf"),t.firstImport=!1,t.detailsDetected.fileType="pdf",t.$store.commit("app/importStatus","File selected."),t.$store.commit("app/importTransition","info"));else if(r.name.endsWith(".docx"))this.conceptMode?(t.$store.commit("app/importTransition","process"),"true"===t.queryParams.ceasnDataFields?t.$store.commit("app/addImportError","This is not a valid file format for concept schemes"):t.$store.commit("app/addImportError","This is not a valid file format for taxonomies")):(t.$store.commit("app/importFileType","pdf"),t.firstImport=!1,t.$store.commit("app/importStatus","File selected."),t.$store.commit("app/importTransition","info"));else{if(!r.name.endsWith(".html")){t.$store.commit("app/importFileType","");var i="CaSS cannot read the file "+r.name+". Please check that the file has the correct file extension.";return t.$store.commit("app/addImportError",i),void t.$store.commit("app/importTransition","process")}this.conceptMode?(t.$store.commit("app/importTransition","process"),"true"===t.queryParams.ceasnDataFields?t.$store.commit("app/addImportError","This is not a valid file format for concept schemes"):t.$store.commit("app/addImportError","This is not a valid file format for taxonomies")):(t.$store.commit("app/importFileType","pdf"),t.detailsDetected.fileType="html",t.firstImport=!1,t.$store.commit("app/importStatus","File selected."),t.$store.commit("app/importTransition","info"))}t.firstImport||t.importFromFile()},analyzeCsvRelation:function(e){appLog(e);var t,r=e.target.files||e.dataTransfer.files;t=r.length?r[0]:null,this.$store.commit("app/csvRelationFile",t);var i=this;CSVImport.analyzeFile(t,(function(e){for(var t=0;t<e[0].length;t++){var r={};r.name=e[0][t],r.index=t,i.csvRelationColumns.push(r),-1!==r.name.toLowerCase().indexOf("source")&&(i.importSourceColumn=r),-1!==r.name.toLowerCase().indexOf("origin")&&(i.importSourceColumn=r),-1!==r.name.toLowerCase().indexOf("type")&&(i.importRelationColumn=r),-1!==r.name.toLowerCase().indexOf("target")&&(i.importTargetColumn=r),-1!==r.name.toLowerCase().indexOf("destination")&&(i.importTargetColumn=r)}i.relationCount=e.length-1}),(function(e){i.$store.commit("app/importStatus",e),i.$store.commit("app/importTransition","process"),i.$store.commit("app/addImportError",e)}))},analyzeJsonLdFramework:function(e,t,r){if(null!=e)if(null!=e["name"]){var i=new FileReader;i.onload=function(e){var i=e["target"]["result"],o=JSON.parse(i);o["@graph"]?"http://credreg.net/ctdlasn/schema/context/json"===o["@context"]||"http://credreg.net/ctdl/schema/context/json"===o["@context"]||"https://credreg.net/ctdlasn/schema/context/json"===o["@context"]||"https://credreg.net/ctdl/schema/context/json"===o["@context"]?-1!==o["@graph"][0]["@type"].indexOf("Concept")?t(o["@graph"],"ctdlasnConcept"):t(o["@graph"],"ctdlasn"):t(o["@graph"],null):r("Invalid file")},i.readAsText(e,"UTF-8")}else r("Invalid file");else r("No file to analyze")},importMedbiq:function(){var e=EcIdentityManager.ids[0],t=new EcFramework;null!=e&&t.addOwner(e.ppk.toPk()),null!=this.queryParams.newObjectEndpoint&&void 0!==this.queryParams.newObjectEndpoint?t.generateShortId(null==this.queryParams.newObjectEndpoint?this.repo.selectedServer:this.queryParams.newObjectEndpoint):t.generateId(null==this.queryParams.newObjectEndpoint?this.repo.selectedServer:this.queryParams.newObjectEndpoint),t["schema:dateCreated"]=(new Date).toISOString(),appLog(this.importFrameworkName),t.setName(this.importFrameworkName),t.setDescription(this.importFrameworkDescription);var r=this;MedbiqImport.importCompetencies(null==this.queryParams.newObjectEndpoint?this.repo.selectedServer:this.queryParams.newObjectEndpoint,e,(function(e){for(var i=0;i<e.length;i++)t.addCompetency(e[i].shortId());r.repo.saveTo(t,(function(e){r.importFile.splice(0,1),r.importFile.length>0?(r.firstImport=!1,r.analyzeImportFile()):(r.$store.commit("app/importFramework",t),r.$store.commit("editor/framework",t),r.importSuccess(),r.spitEvent("importFinished",t.shortId(),"importPage"))}),(function(e){r.$store.commit("app/importStatus",e),r.$store.commit("app/importTransition","process"),r.$store.commit("app/addImportError",e)}))}),(function(e){r.$store.commit("app/importStatus",e),r.$store.commit("app/importTransition","process"),r.$store.commit("app/addImportError",e)}),(function(e){r.$store.commit("app/importStatus",e.competencies+"/"+r.competencyCount+" competencies imported.")}),r.repo)},importAsn:function(){var e=EcIdentityManager.ids[0],t=this;t.$store.commit("app/importTransition","process"),ASNImport.importCompetencies(this.repo.selectedServer,e,!0,(function(e,r){t.importFile.splice(0,1),t.importFile.length>0?(t.firstImport=!1,t.analyzeImportFile()):(t.$store.commit("app/importFramework",r),t.$store.commit("editor/framework",r),t.importSuccess(),t.spitEvent("importFinished",r.shortId(),"importPage"))}),(function(e){t.$store.commit("app/importTransition","process"),t.$store.commit("app/addImportError",e)}),(function(e){t.$store.commit("app/importStatus",e.competencies+"/"+t.competencyCount+" competencies imported.")}),t.repo)},importCtdlAsnCsv:function(){var e=null;EcIdentityManager.ids.length>0&&(e=EcIdentityManager.ids[0]);var t=this;CTDLASNCSVImport.importFrameworksAndCompetencies(t.repo,t.importFile[0],(function(e,r,i){for(var o=0;o<e.length;o++)!0===t.queryParams.ceasnDataFields&&(null!=e[o]["schema:inLanguage"]&&void 0!==e[o]["schema:inLanguage"]||(t.setDefaultLanguage(),e[o]["schema:inLanguage"]=t.$store.state.editor.defaultLanguage)),null!=e[o]["schema:dateModified"]&&void 0!==e[o]["schema:dateModified"]||(e[o]["schema:dateModified"]=(new Date).toISOString()),null!=e[o]["schema:dateCreated"]&&void 0!==e[o]["schema:dateCreated"]||(e[o]["schema:dateCreated"]=(new Date).toISOString());var s=e.concat(r).concat(i);t.$store.commit("app/importStatus","Saving "+s.length+" objects."),t.repo.multiput(s,(function(){for(var r=0;r<e.length;r++)t.$store.commit("app/importFramework",e[r]),t.$store.commit("editor/framework",e[r]),t.spitEvent("importFinished",e[r].shortId(),"importPage");t.importFile.splice(0,1),t.importFile.length>0?(t.firstImport=!1,t.analyzeImportFile()):1===e.length?t.importSuccess():(t.$store.commit("app/sortResults",{id:"dateCreated",label:"created date"}),t.$router.push({name:"frameworks"}))}),(function(e){t.$store.commit("app/importStatus",e),t.$store.commit("app/importTransition","process"),t.$store.commit("app/addImportError",e)}))}),(function(e){t.$store.commit("app/importStatus",e),t.$store.commit("app/importTransition","process"),t.$store.commit("app/addImportError",e)}),e,this.queryParams.newObjectEndpoint?this.queryParams.newObjectEndpoint:null)},importPdf:function(){var e=this;e.$store.commit("app/importStatus","importing framework...");var t=new FormData;t.append(e.importFile[0].name,e.importFile[0]),e.$store.commit("app/importStatus","importing file..."),EcRemote.postExpectingString("https://t3.cassproject.org/service/parse/","docx",t,(function(t){var r=null;try{r=JSON.parse(t)}catch(s){return e.$store.commit("app/importStatus",t),e.$store.commit("app/importTransition","process"),void e.$store.commit("app/addImportError",t)}if(null==r)return e.$store.commit("app/importStatus",t),e.$store.commit("app/importTransition","process"),void e.$store.commit("app/addImportError",t);var i=new UUID(3,"nil",r.name).format(),o=new EcFramework;e.$store.commit("app/importStatus","looking for existing framework..."),e.queryParams&&e.queryParams.newObjectEndpoint?o.id=e.queryParams.newObjectEndpoint+i:o.assignId(e.repo.selectedServer,i),e.repo.search('(@id:"'+o.shortId()+'") AND (@type:Framework)',(function(){}),(function(t){appLog(t),e.$store.commit("app/importStatus","looking for existing framwork..."),t.length>0?(e.$store.commit("app/importStatus","framework found..."),e.showModal("duplicate",r)):(e.$store.commit("app/importStatus","no match, saving new framework..."),e.savePdfImport(r))}),(function(t){e.$store.commit("app/importStatus",t),e.$store.commit("app/importTransition","process"),e.$store.commit("app/addImportError",t)}))}),(function(t){appLog("error here"),""===t&&(t="Server unresponsive."),e.$store.commit("app/importStatus",t),e.$store.commit("app/importTransition","process"),e.$store.commit("app/addImportError",t)})),e.$store.commit("app/importTransition","process"),e.$store.commit("app/importStatus","processing file...")},savePdfImport:function(e,t){var r=this;r.$store.commit("app/importStatus","saving file...");var i=[],o=new EcFramework,s=t||e.name;s?o.setName(s):o.setName("Unknown Name"),e.description&&""!==e.description&&o.setDescription(e.description);var a=new UUID(3,"nil",s).format();r.queryParams&&r.queryParams.newObjectEndpoint?o.id=r.queryParams.newObjectEndpoint+a:o.assignId(r.repo.selectedServer,a),o.competency=[],o.relation=[],o.level=[],o["schema:dateCreated"]=(new Date).toISOString(),i.push(o),appLog("d",e),appLog("message: ",JSON.parse(o.toJson()));var n={};if(!e.competencies)return r.$store.commit("app/importStatus","Error importing competencies."),r.$store.commit("app/importTransition","process"),void r.$store.commit("app/addImportError","Error importing competencies, no competencies found in file.");r.detailsDetected.competencies=e.competencies.length;for(var c=0;c<e.competencies.length;c++){var p=new EcCompetency;r.queryParams&&r.queryParams.newObjectEndpoint?p.id=r.queryParams.newObjectEndpoint+e.competencies[c].id:p.assignId(r.repo.selectedServer,e.competencies[c].id),n[e.competencies[c].id]=p.shortId(),null!=e.competencies[c].name?p.setName(e.competencies[c].name.trim()):p.setName("Unknown name"),e.competencies[c].name!==e.competencies[c].description&&e.competencies[c].description&&p.setDescription(e.competencies[c].description.trim()),null!=e.competencies[c]["ceasn:codedNotation"]&&(p["ceasn:codedNotation"]=e.competencies[c]["ceasn:codedNotation"]),o.addCompetency(p.shortId()),i.push(p)}for(c=0;c<e.relation.length;c++){p=new EcAlignment;r.queryParams&&r.queryParams.newObjectEndpoint?p.generateShortId(this.queryParams.newObjectEndpoint):p.assignId(r.repo.selectedServer,e.relation[c].source+"_"+e.relation[c].relationType+"_"+e.relation[c].target),p.source=n[e.relation[c].source],p.target=n[e.relation[c].target],p.relationType=e.relation[c].relationType,void 0!==p.source&&void 0!==p.target?(o.addRelation(p.shortId()),i.push(p)):appLog(JSON.parse(p.toJson()))}r.repo.multiput(i,(function(){r.$store.commit("app/importFramework",o),r.$store.commit("editor/framework",o),r.$store.commit("editor/t3Profile",!0),r.$store.commit("app/importStatus",""),r.importSuccess()}),(function(e){r.$store.commit("app/importStatus",e),r.$store.commit("app/importTransition","process"),r.$store.commit("app/addImportError",e)})),r.$store.commit("app/importTransition","process"),r.$store.commit("app/importStatus","saving import...")},importCsv:function(){var e=this.importFile[0],t=this.csvRelationFile,r=EcIdentityManager.ids[0],i=null==this.queryParams.newObjectEndpoint?this.repo.selectedServer:this.queryParams.newObjectEndpoint,o=new EcFramework;null!=r&&o.addOwner(r.ppk.toPk()),null!==this.queryParams.newObjectEndpoint&&void 0!==this.queryParams.newObjectEndpoint?o.generateShortId(i):o.generateId(i),o["schema:dateCreated"]=(new Date).toISOString(),o.setName(this.importFrameworkName),o.setDescription(this.importFrameworkDescription);var s=this;CSVImport.importCompetencies(e,i,r,this.importCsvColumnName?this.importCsvColumnName.index:-1,this.importCsvColumnDescription?this.importCsvColumnDescription.index:-1,this.importCsvColumnScope?this.importCsvColumnScope.index:-1,this.importCsvColumnId?this.importCsvColumnId.index:-1,t,this.importCsvColumnSource?this.importCsvColumnSource.index:-1,this.importCsvColumnRelationType?this.importCsvColumnRelationType.index:-1,this.importCsvColumnTarget?this.importCsvColumnTarget.index:-1,(function(e,t){o.competency=[],o.relation=[];for(var r=0;r<e.length;r++)o.competency.push(e[r].shortId());for(r=0;r<t.length;r++)o.relation.push(t[r].shortId());s.repo.saveTo(o,(function(e){s.importFile.splice(0,1),s.importFile.length>0?(s.firstImport=!1,s.analyzeImportFile()):(s.$store.commit("app/importFramework",o),s.$store.commit("editor/framework",o),s.importSuccess(),s.spitEvent("importFinished",o.shortId(),"importPage"))}),(function(e){s.$store.commit("app/importTransition","process"),s.$store.commit("app/addImportError",e)}))}),(function(e){s.$store.commit("app/importStatus",e),s.$store.commit("app/importTransition","process"),s.$store.commit("app/addImportError",e)}),(function(e){null!=e.relations&&void 0!==e.relations?s.$store.commit("app/importStatus",e.relations+"/"+s.relationCount+" relations imported."):null!=e.competencies&&void 0!==e.competencies?s.$store.commit("app/importStatus",e.competencies+"/"+s.competencyCount+" competencies imported."):s.$store.commit("app/importStatus","Importing...")}),!1,s.repo)},importJsonLd:function(e){this.$store.commit("app/importTransition","process");var t=new FormData;if(null!=e&&void 0!==e)t.append("data",JSON.stringify(e));else{var r=this.importFile[0];t.append("file",r)}var i=EcIdentityManager.ids[0];null!=i&&t.append("owner",i.ppk.toPk().toPem());var o=this;o.$store.commit("app/importFramework",null),EcRemote.postInner(this.repo.selectedServer,"ctdlasn",t,null,(function(e){if(-1!==e.indexOf("ctdlasn")){var t=e.substring(0,e.indexOf("ctdlasn")),r=e.substring(e.indexOf("ctdlasn")+7);e=t+"data"+r}var i;EcRepository.cache&&delete EcRepository.cache[e],o.conceptMode?i=EcConceptScheme.getBlocking(e):(i=EcFramework.getBlocking(e),o.$store.commit("app/importFramework",i)),o.$store.commit("editor/framework",i),o.$store.commit("app/importFramework",i),o.spitEvent("importFinished",i.shortId(),"importPage"),null!=o.importFile&&o.importFile.splice(0,1),o.importFile&&o.importFile.length>0?(o.firstImport=!1,o.analyzeImportFile()):o.importSuccess()}),(function(e){o.$store.commit("app/importTransition","process"),o.$store.commit("app/importStatus","Import failed. Check your import file for any errors."),appLog(e.statusText),o.$store.commit("app/addImportError",e)})),o.conceptMode?"true"===o.queryParams.ceasnDataFields?o.$store.commit("app/importStatus","Importing Concept Scheme"):o.$store.commit("app/importStatus","Importing Taxonomy"):o.$store.commit("app/importStatus","Importing Framework")},importCtdlAsnConceptCsv:function(){var e=this,t=null;EcIdentityManager.ids.length>0&&(t=EcIdentityManager.ids[0]),e.$store.commit("app/importStatus","process"),CTDLASNCSVConceptImport.importFrameworksAndCompetencies(e.repo,e.importFile[0],(function(t,r){if("true"===e.queryParams.ceasnDataFields)for(var i=0;i<t.length;i++)null!=t[i]["dcterms:language"]&&void 0!==t[i]["dcterms:language"]||(e.setDefaultLanguage(),t[i]["dcterms:language"]=e.$store.state.editor.defaultLanguage);var o=t.concat(r);e.$store.commit("app/importStatus","Saving "+o.length+" objects."),e.repo.multiput(o,(function(){for(var r=0;r<t.length;r++)e.spitEvent("importFinished",t[r].shortId(),"importPage");e.$store.commit("editor/framework",t[0]),e.$store.commit("app/importFramework",t[0]),e.importSuccess()}),(function(t){e.$store.commit("app/importTransition","process"),e.$store.commit("app/addImportError","Failed to save: "+t),appError(t)}))}),(function(t){e.$store.commit("app/importTransition","process"),e.$store.commit("app/addImportError",t),appError(t)}),t,this.queryParams.newObjectEndpoint?this.queryParams.newObjectEndpoint:null)},importFromFile:function(){var e=this;if(appLog("this.importFileType",e.importFileType),e.$store.commit("app/importTransition","process"),"csv"===e.importFileType)e.importCsv();else if("ctdlasncsv"===e.importFileType)e.importCtdlAsnCsv();else if("conceptcsv"===e.importFileType)e.importCtdlAsnConceptCsv();else if("ctdlasnjsonld"===e.importFileType)e.importJsonLd();else if("asn"===e.importFileType)e.importAsn();else if("pdf"===e.importFileType)e.importPdf();else if("medbiq"===e.importFileType)e.importMedbiq();else{var t="Unsupported file type"+e.importFileType;e.$store.commit("app/addImportError",t),e.$store.commit("app/importTransition","process")}},parseText:function(){var e=this;null!=EcIdentityManager.ids&&EcIdentityManager.ids.length>0&&this.importFramework.addOwner(EcIdentityManager.ids[0].ppk.toPk()),null!==this.queryParams.newObjectEndpoint&&void 0!==this.queryParams.newObjectEndpoint?this.importFramework.generateShortId(this.queryParams.newObjectEndpoint):this.importFramework.generateId(this.repo.selectedServer),this.importFramework.name=this.$store.getters["app/importFrameworkName"],this.importFramework["schema:dateCreated"]=(new Date).toISOString(),this.importFramework["schema:dateModified"]=(new Date).toISOString();for(var t=[this.importFramework],r=0;r<this.importFramework.competency.length;r++){var i=EcRepository.cache[this.importFramework.competency[r]];null!=EcIdentityManager.ids&&EcIdentityManager.ids.length>0&&i.addOwner(EcIdentityManager.ids[0].ppk.toPk()),t.push(i)}if(this.importFramework.relation)for(r=0;r<this.importFramework.relation.length;r++){var o=EcRepository.cache[this.importFramework.relation[r]];null!=EcIdentityManager.ids&&EcIdentityManager.ids.length>0&&o.addOwner(EcIdentityManager.ids[0].ppk.toPk()),t.push(o)}this.repo.multiput(t,(function(){e.spitEvent("importFinished",e.importFramework.shortId(),"importPage"),e.$store.commit("editor/framework",e.importFramework),e.$router.push({name:"framework",params:{frameworkId:e.importFramework.shortId()}})}),(function(t){appLog("failure",t),e.$store.commit("app/addImportError",t),e.$store.commit("app/importTransition","process")}))},showImportModal:function(e){var t={component:"SupportedImportDetails",documentContent:e};this.$store.commit("app/showModal",t)},importFromUrl:function(){var e=this,t={message:"Unable to import from the URL source provided.",details:""};if(!this.isValidUrl(this.importUrl))return t.details="The URL provided is not valid.",e.$store.commit("app/addImportError",t.details),e.$store.commit("app/importTransition","upload"),void e.showModal("error",t);EcRemote.getExpectingString(this.importUrl,null,(function(r){try{r=JSON.parse(r)}catch(s){return t.details=s.message,e.$store.commit("app/importStatus",s.message),e.$store.commit("app/importTransition","upload"),e.$store.commit("app/addImportError",s.message),void e.showModal("error",t)}var i=r["@graph"];if(null==i)return t.details="URL must have an '@graph' field at the top level.",e.$store.commit("app/addImportError",t.details),e.$store.commit("app/importTransition","process"),void e.showModal("error",t);var o=i[0]["@id"];o?e.repo.search('(@id:"'+o+'") AND (@type:Framework)',(function(){}),(function(t){appLog(t),t.length>0?(e.$store.commit("app/importStatus","framework found..."),"url"===e.importType&&e.showModal("duplicateOverwriteOnly",[r,t[0]])):(e.$store.commit("app/importStatus","no match, saving new framework..."),e.importJsonLd(r))}),(function(r){t.details=r,e.$store.commit("app/importStatus",r),e.$store.commit("app/importTransition","process"),e.$store.commit("app/addImportError",r),e.showModal("error",t)})):e.importJsonLd(r),-1!==i[0]["@type"].indexOf("Concept")&&("true"===e.ceasnDataFields?t.details="Competency Editor cannot be used to import concept schemes.":t.details="Competency Editor cannot be used to import taxonomies.",e.$store.commit("app/addImportError",t.details),e.$store.commit("app/importTransition","process"),e.showModal("error",t))}),(function(r){r?(t.details=r,e.$store.commit("app/addImportError",r),e.$store.commit("app/importTransition","upload"),e.showModal("error",t)):(e.$store.commit("app/addImportError",t.message),e.$store.commit("app/importTransition","upload"),e.showModal("error",t))}))},isValidUrl:function(e){try{new URL(e)}catch(t){return!1}return!0},scrollFunction:function(e){document.getElementsByClassName("parent-object");var t=e.target.scrollTop;this.parentObjectClass=0!==t?"parent-object scrolled":"parent-object"}},watch:{importType:function(e){this.caseDocs=[],this.clearImport()},importTransition:function(e){if("processFiles"===e)return this.uploadFiles(this.importFile);"uploadCsv"===e||"uploadMedbiq"===e||"uploadOtherNonPdf"===e?this.importFromFile():"connectToServer"===e&&this.connectToServer()},importText:function(e,t){var r=this;TabStructuredImport.importCompetencies(e,this.queryParams.newObjectEndpoint?this.queryParams.newObjectEndpoint:this.repo.selectedServer,EcIdentityManager.ids[0],(function(e,t){r.$store.commit("app/importTransition","light");var i=e.length+" competencies and "+t.length+" relations.";r.$store.commit("app/importStatus",i);var o=new EcFramework;r.$store.commit("app/importFramework",null);for(var s=0;s<e.length;s++)EcRepository.cache[e[s].shortId()]=e[s],o.addCompetency(e[s].shortId());for(s=0;s<t.length;s++)EcRepository.cache[t[s].shortId()]=t[s],o.addRelation(t[s].shortId());r.importFrameworkName&&(o.name=r.importFrameworkName),r.$nextTick((function(){r.$store.commit("app/importFramework",o),r.$store.commit("editor/framework",o)}))}),(function(e){r.$store.commit("app/importStatus",e)}),appError,this.repo,!1)},importFrameworkName:function(){if("text"===this.importType&&this.importFramework){var e=this.importFramework;e.name=this.importFrameworkName,this.$store.commit("editor/changedObject","update"),this.$store.commit("app/importFramework",e)}},importFramework:function(){!this.importFramework||this.conceptMode||this.importFramework.competency&&0!==this.importFramework.competency||(this.hierarchyIsdoneLoading=!0)}}}),d={name:"ImportTabs",mixins:[m],methods:{importCaseDocs:function(){this.$emit("import-case",this.caseDocs),this.$store.commit("app/importTransition","importingCaseFrameworks")},importFromUrl:function(){this.$store.commit("app/importStatus","importFromUrl"),this.$store.commit("app/importTransition","importingFromUrl")},importFromFile:function(){this.$store.commit("app/importType","file"),this.$store.commit("app/importFramework",null),this.$store.commit("app/importTransition","upload")}},computed:{conceptMode:function(){return this.$store.getters["editor/conceptMode"]},importErrors:function(){return this.$store.getters["app/importErrors"]},importFile:function(){return this.$store.getters["app/importFiles"]},importTransition:function(){return this.$store.getters["app/importTransition"]},importType:function(){return this.$store.getters["app/importType"]},importFileType:function(){return this.$store.getters["app/importFileType"]},importFramework:function(){return this.$store.getters["app/importFramework"]},importStatus:function(){return this.$store.getters["app/importStatus"]},frameworkSize:function(){return this.conceptMode?null:this.importFramework&&this.importFramework.competency?this.importFramework.competency.length:0},queryParams:function(){return this.$store.getters["editor/queryParams"]}}},u=d,h=(r("81d7"),r("2877")),f=Object(h["a"])(u,p,l,!1,null,null,null),g=f.exports,v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:{"is-dragged-over":e.isDraggedOver},attrs:{id:"drag-and-drop"},on:{dragenter:function(t){return t.preventDefault(),e.handleDragEnter(t)},dragleave:function(t){return t.preventDefault(),e.handleDragLeave(t)},click:function(t){return e.openFileExplorer()},dragover:function(e){e.preventDefault()},drop:function(t){return t.preventDefault(),e.addFile(t)}}},[r("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",disabled:!e.uploadDisabled},on:{change:e.fileChange}}),r("div",{staticClass:"section"},[r("div",{staticClass:"columns is-centered is-multiline"},[e._m(0),0===e.files.length?r("div",{staticClass:"column is-12"},[r("p",{staticClass:"is-size-6"},[e._v(" Drag and drop, or click to upload. ")])]):e._e(),r("div",{staticClass:"column is-12"},[r("ul",e._l(e.files,(function(t){return r("li",{key:t,staticClass:"is-size-6",staticStyle:{display:"inline","vertical-align":"middle"}},[r("span",{staticClass:"has-text-weight-medium"},[e._v(" "+e._s(t.name)+" ("+e._s(e._f("kb")(t.size))+" kb) "),r("button",{staticClass:"button is-small is-text",attrs:{title:"Remove"},on:{click:function(r){return e.removeFile(t)}}},[e._m(1,!0)])])])})),0)]),r("div",{staticClass:"column is-12"},[r("button",{staticClass:"button is-outlined is-primary is-medium",attrs:{disabled:e.uploadDisabled},on:{click:e.process}},[r("span",[e._v(" Process Files ")]),e._m(2)])])])])])},w=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column is-12"},[r("p",{staticClass:"is-size-5"},[e._v(" Files to Upload ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-times"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon is-large"},[r("i",{staticClass:"fas fa-arrow-right"})])}],y=(r("4de4"),r("159b"),r("b680"));function C(e){if(Array.isArray(e))return Object(y["a"])(e)}r("d28b"),r("a630");function k(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}var b=r("dde1");function T(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function F(e){return C(e)||k(e)||Object(b["a"])(e)||T()}var I={name:"DragAndDrop",data:function(){return{files:[],isDraggedOver:!1,counter:0}},computed:{uploadDisabled:function(){return 0===this.files.length}},watch:{},filters:{kb:function(e){return Math.floor(e/1024)}},mounted:function(){this.$store.commit("app/clearImportFiles")},methods:{handleDragEnter:function(e){this.counter++,e.target.id&&"drag-and-drop"===e.target.id&&(this.isDraggedOver=!0)},handleDragLeave:function(e){this.counter--,e.target&&"drag-and-drop"===e.target.id&&0===this.counter&&(this.isDraggedOver=!1)},openFileExplorer:function(){this.uploadDisabled&&this.$refs.file.click()},fileChange:function(e){var t=this;appLog(e);var r=e.target.files;r?F(r).forEach((function(e){t.files.push(e)})):this.files=[]},addFile:function(e){var t=this,r=e.dataTransfer.files||e.target.files;r&&(F(r).forEach((function(e){t.files.push(e)})),this.isDraggedOver=!1)},removeFile:function(e){this.files=this.files.filter((function(t){return t!==e})),this.$store.commit(""),this.$emit("clear-files")},process:function(){this.$store.commit("app/importFiles",this.files),this.$store.commit("app/importTransition","processFiles")}}},E=I,$=(r("e6c0"),Object(h["a"])(E,v,w,!1,null,null,null)),_=$.exports,S={name:"ImportFile",components:{ImportTabs:g,DragAndDrop:_},mixins:[m],props:{conceptMode:{type:Boolean,default:!1},importFile:{type:Array,default:function(){return[]}},importTransition:{type:String,default:""}},data:function(){return{medbiqDetails:{name:{label:"Name the framework",value:this.importFrameworkName,type:"string"},description:{label:"Describe the framework (optional)",value:this.importFrameworkDescription,type:"string"}},csvImportDetails:{name:{label:"Name the framework",value:this.importFrameworkName,type:"string"},description:{label:"Describe the framework (optional)",value:this.importFrameworkDescription,type:"string"},nameColumn:{label:"Select the Name column",value:this.importNameColumn,type:"column"},descriptionColumn:{label:"Select the Description column (optional)",value:this.importDescriptionColumn,type:"column"},scopeColumn:{label:"Select the Scope column (optional)",value:this.importScopeColumn,type:"column"},idColumn:{label:"Select the ID column (optional). If chosen, this should be a URL from another CaSS system or a non-numeric ID",value:this.importIdColumn,type:"column"},relationFile:{label:'Select a relation file (optional).\n                                The relation source/target must be in the\n                                form of ID or Name, and the relation types\n                                should be "requires", "desires", "narrows",\n                                "isEnabledBy", "isRelatedTo", or "isEquivalentTo',value:"",type:"file"}},csvRelationDetails:{sourceColumn:{label:"Select the Source column",type:"column",value:this.importSourceColumn},relationColumn:{label:"Select the Relation Type column.",type:"column",value:this.importRelationColumn},targetColumn:{label:"Select the Target column.",type:"column",value:this.importTargetColumn}}}},computed:{importInfoVisible:function(){return this.$store.getters["app/showRightAside"]},importErrors:function(){return this.$store.getters["app/importErrors"]},importStatus:function(){return this.$store.getters["app/importStatus"]},importFileType:function(){return this.$store.getters["app/importFileType"]},importType:function(){return this.$store.getters["app/importType"]},importFrameworkName:{get:function(){return this.$store.getters["app/importFrameworkName"]},set:function(e){this.$store.commit("app/importFrameworkName",e)}},importFrameworkDescription:function(){return this.$store.getters["app/importFrameworkDescription"]},importNameColumn:{get:function(){return this.$store.getters["app/importNameColumn"]},set:function(e){this.$store.commit("app/importNameColumn",e)}},importDescriptionColumn:{get:function(){return this.$store.getters["app/importDescriptionColumn"]},set:function(e){this.$store.commit("app/importDescriptionColumn",e)}},importScopeColumn:{get:function(){return this.$store.getters["app/importScopeColumn"]},set:function(e){this.$store.commit("app/importScopeColumn",e)}},importIdColumn:{get:function(){return this.$store.getters["app/importIdColumn"]},set:function(e){this.$store.commit("app/importIdColumn",e)}},importSourceColumn:{get:function(){return this.$store.getters["app/importSourceColumn"]},set:function(e){this.$store.commit("app/importSourceColumn",e)}},importRelationColumn:{get:function(){return this.$store.getters["app/importRelationColumn"]},set:function(e){this.$store.commit("app/importRelationColumn",e)}},importTargetColumn:{get:function(){return this.$store.getters["app/importTargetColumn"]},set:function(e){this.$store.commit("app/importTargetColumn",e)}},csvColumns:function(){return this.$store.getters["app/csvColumns"]},csvRelationColumns:function(){return this.$store.getters["app/csvRelationColumns"]},csvRelationFile:function(){return this.$store.getters["app/csvRelationFile"]},taxonomyTerminology:function(){return"true"===this.$store.getters["editor/queryParams"].ceasnDataFields?"concept scheme":"taxonomy"}},methods:{clearFiles:function(){this.$store.commit("app/clearImportFiles")},prepareToImportNonPdf:function(){"csv"===this.importFileType?(this.$store.commit("app/importFrameworkName",this.csvImportDetails.name.value),this.$store.commit("app/importFrameworkDescription",this.csvImportDetails.description.value),this.$store.commit("app/importNameColumn",this.csvImportDetails.nameColumn.value),this.$store.commit("app/importDescriptionColumn",this.csvImportDetails.descriptionColumn.value),this.$store.commit("app/importScopeColumn",this.csvImportDetails.scopeColumn.value),this.$store.commit("app/importIdColumn",this.csvImportDetails.idColumn.value),this.$store.commit("app/importSourceColumn",this.csvRelationDetails.sourceColumn.value),this.$store.commit("app/importTargetColumn",this.csvRelationDetails.targetColumn.value),this.$store.commit("app/importRelationColumn",this.csvRelationDetails.relationColumn.value),this.$store.commit("app/importTransition","uploadCsv")):"medbiq"===this.importFileType?(this.$store.commit("app/importFrameworkName",this.csvImportDetails.name.value),this.$store.commit("app/importFrameworkDescription",this.csvImportDetails.description.value),this.$store.commit("app/importTransition","uploadMedbiq")):"pdf"!==this.importFileType&&this.$store.commit("app/importTransition","uploadOtherNonPdf")}},watch:{importNameColumn:function(){this.csvImportDetails.nameColumn.value=this.importNameColumn},importDescriptionColumn:function(){this.csvImportDetails.descriptionColumn.value=this.importDescriptionColumn},importScopeColumn:function(){this.csvImportDetails.scopeColumn.value=this.importScopeColumn},importIdColumn:function(){this.csvImportDetails.idColumn.value=this.importIdColumn},importSourceColumn:function(){this.csvRelationDetails.sourceColumn.value=this.importSourceColumn},importRelationColumn:function(){this.csvRelationDetails.relationColumn.value=this.importRelationColumn},importTargetColumn:function(){this.csvRelationDetails.targetColumn.value=this.importTargetColumn},importFrameworkName:function(){"medbiq"===this.importFileType?this.medbiqDetails.name.value=this.importFrameworkName:"csv"===this.importFileType&&(this.csvImportDetails.name.value=this.importFrameworkName)},importFrameworkDescription:function(){"medbiq"===this.importFileType?this.medbiqDetails.description.value=this.importFrameworkDescription:"csv"===this.importFileType&&(this.csvImportDetails.description.value=this.importFrameworkDescription)}}},x=S,D=Object(h["a"])(x,n,c,!1,null,null,null),O=D.exports,P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"columns is-mobile",attrs:{id:"import-from-server"}},[r("div",{staticClass:"column is-12"},[r("div",{staticClass:"container py-6"},[e._t("import-server-title",[r("p",[e._v("Nothing send from import.vue")])]),r("div",{staticClass:"columns is-multiline"},[r("div",{staticClass:"column is-12"},[r("ImportTabs")],1),"preview"!==e.importTransition&&"light"!==e.importTransition?r("div",{staticClass:"column is-12"},[r("div",{staticClass:"remote-server"},["upload"===e.importTransition?[e._l(e.serverDetails,(function(t){return r("div",{key:t,staticClass:"field"},[r("label",{staticClass:"label"},[e._v(" "+e._s(t.label)+" ")]),r("div",{staticClass:"field"},[r("div",{staticClass:"control is-expanded"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.importServerUrl,expression:"importServerUrl"}],staticClass:"input is-large",attrs:{type:"url"},domProps:{value:e.importServerUrl},on:{input:function(t){t.target.composing||(e.importServerUrl=t.target.value)}}})])]),r("div",{staticClass:"field"},[r("div",{staticClass:"buttons is-right"},[r("div",{staticClass:"button is-large is-outlined is-primary",attrs:{disabled:""===e.importServerUrl},on:{click:function(t){e.$store.commit("app/importTransition","connectToServer"),e.serverType="case"}}},[e._m(0,!0),r("span",[e._v(" connect to CASE endpoint ")])])])]),r("div",{staticClass:"field"},[r("div",{staticClass:"buttons is-right"},[r("div",{staticClass:"button is-large is-outlined is-primary",attrs:{disabled:""===e.importServerUrl},on:{click:function(t){e.$store.commit("app/importTransition","connectToServer"),e.serverType="cass"}}},[e._m(1,!0),r("span",[e._v(" connect to CaSS endpoint ")])])])])])})),r("div",{staticClass:"py-4"},[r("h3",{staticClass:"title is-size-5"},[e._v(" Looking for an example? Try out an example from the "),r("a",{on:{click:function(t){e.importServerUrl="https://opensalt.net"}}},[e._v("OpenSalt.net endpoint")]),e._v(" to test the workflow. ")])])]:e._e(),"connectToServer"===e.importTransition?r("div",{staticClass:"section has-text-centered"},[e._m(2)]):"process"!==e.importTransition&&"info"!==e.importTransition||0!==e.importErrors.length?e.importErrors.length>0?r("div",{staticClass:"column has-text-danger"},[r("ul",[e._l(e.importErrors,(function(t,i){return r("li",{key:i,staticClass:"is-size-6"},[r("span",{},[e._m(3,!0),e._v(" "+e._s(t)+" ")])])})),r("li")],2),r("div",{staticClass:"buttons is-centered"},[r("div",{staticClass:"button is-primary",on:{click:function(t){return e.resetImport()}}},[e._m(4),r("span",[e._v("start over")])])])]):e._e():r("div",{staticClass:"column"},[r("div",{staticClass:"section has-text-centered"},["process"===e.importTransition?r("span",{staticClass:"icon is-large"},[r("i",{staticClass:"fa fa-spinner fa-pulse fa-2x"})]):e._e()]),r("div",{staticClass:"section"},[r("p",{staticClass:"is-size-6"},[e._v(" "+e._s(e.importStatus)+" ")])])]),e.caseDocs.length?r("div",{},[r("h3",{staticClass:"subtitle has-text-weight-bold is-size-4"},[e._v(" Found Frameworks ")]),r("p",[e._v(" Select the framework you would like to import. ")]),e._l(e.caseDocs,(function(t){return r("div",{key:t.id,staticClass:"field is-grouped"},[t.loading||t.success||t.error?e._e():r("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"doc.checked"}],staticClass:"is-checkradio is-small",attrs:{type:"checkbox",id:"check"+t.id,name:"check"+t.id},domProps:{checked:t.checked,checked:Array.isArray(t.checked)?e._i(t.checked,null)>-1:t.checked},on:{change:function(r){var i=t.checked,o=r.target,s=!!o.checked;if(Array.isArray(i)){var a=null,n=e._i(i,a);o.checked?n<0&&e.$set(t,"checked",i.concat([a])):n>-1&&e.$set(t,"checked",i.slice(0,n).concat(i.slice(n+1)))}else e.$set(t,"checked",s)}}}),r("label",{staticClass:"label",attrs:{for:"check"+t.id}},[e._v(e._s(t.name))]),r("span",{staticClass:"icon is-pulled-right"},[t.loading?r("i",{staticClass:"fa fa-spinner fa-pulse"}):t.error?r("i",{staticClass:"fa fa-exclamation-triangle"}):t.success?r("i",{staticClass:"fa fa-check"}):e._e()])])})),r("div",{staticClass:"buttons is-right"},[r("div",{staticClass:"button is-outlined is-dark",on:{click:e.cancelImport}},[e._v(" Cancel ")]),"importingCaseFrameworks"!==e.importTransition?r("div",{staticClass:"button is-outlined is-primary",on:{click:function(t){return e.importCaseDocs()}}},[e._v(" Import ")]):e._e()])],2):e._e(),e.cassDirectories.length||e.cassFrameworks.length?r("div",{staticClass:"cass__import--cass"},[r("div",{staticClass:"cass__import--frameworks"},[r("h3",{staticClass:"has-text-weight-bold is-size-4"},[e._v(" Found Frameworks ")]),r("div",{staticClass:"field"},[r("SearchBar",{attrs:{searchType:"framework"}})],1),r("div",{staticClass:"field"},[e._m(5),r("div",{staticClass:"select is-fullwidth is-primary"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectDirectory,expression:"selectDirectory"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectDirectory=t.target.multiple?r:r[0]}}},[r("label",[e._v("Directories")]),e._m(6),e._l(e.cassDirectories,(function(t){return r("option",{key:t.id,domProps:{value:t}},[r("span",{staticClass:"has-text-dark"},[e._v(e._s(t.getName()))])])}))],2)])]),e.selectDirectory?r("div",{staticClass:"breadcrumb is-medium",attrs:{"aria-label":"breadcrumbs has-text-dark"}},[r("ul",[e._l(e.directoryTrail,(function(t){return r("li",{key:t.id},[r("a",[e._v(e._s(t.name))])])})),r("li",[r("a",[e._v(e._s(e.selectDirectory.name))])])],2)]):e._e(),r("div",{staticClass:"field"},[r("div",{staticClass:"buttons is-right"},[r("div",{staticClass:"button is-primary",on:{click:e.selectAllFrameworks}},[e._v(" Select all ")])])]),r("div",{staticClass:"field"},[r("div",{staticClass:"select is-fullwidth is-primary is-multiple"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedFrameworks,expression:"selectedFrameworks"}],attrs:{multiple:"",size:"6"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedFrameworks=t.target.multiple?r:r[0]}}},e._l(e.cassFrameworks,(function(t){return r("option",{key:t.id,attrs:{id:"check"+t.id},domProps:{value:t.id}},[e._v(" "+e._s(t.getName())+" ")])})),0)]),r("p",{staticClass:"help is-info"},[e._v(" Select the framework(s) to import. ")])])]),r("div",{staticClass:"is-12"},[r("div",{staticClass:"buttons is-right"},[r("div",{staticClass:"button is-outlined is-dark",on:{click:e.cancelImport}},[e._v(" Cancel ")]),e.directoryThatsOpen?r("div",{staticClass:"button is-outlined is-dark",on:{click:e.goBack}},[e._v(" Back ")]):e._e(),"importingCassFrameworks"!==e.importTransition?r("div",{staticClass:"button is-outlined is-primary",on:{click:function(t){return e.importCassFrameworks()}}},[e._v(" Import ")]):e._e()])])]):e._e()],2)]):e._e(),r("div",{staticClass:"column is-12"},[e._t("import-framework")],2)])],2)])])},A=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fas fa-network-wired"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fas fa-network-wired"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon is-large"},[r("i",{staticClass:"fa fa-spinner fa-pulse fa-2x"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-times"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-redo"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"label"},[r("label",[e._v("Select a directory to filter results")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("option",{attrs:{value:"all"}},[r("span",{staticClass:"has-text-dark"},[e._v("All frameworks")])])}],j=(r("2ca0"),r("872c")),R=r("6b9e"),N={name:"ImportServer",components:{ImportTabs:g,SearchBar:R["a"]},mixins:[m,j["a"]],props:{importTransition:{type:String,default:""}},data:function(){return{caseDocs:[],serverDetails:[{label:"Paste URL endpoint of server"}],serverType:"",cassDirectories:[],cassFrameworks:[],remoteRepo:null,directoryThatsOpen:null,selectDirectory:"all",selectedFrameworks:[],directoryTrail:[]}},computed:{importInfoVisible:function(){return this.$store.getters["app/showRightAside"]},importErrors:function(){return this.$store.getters["app/importErrors"]},importServerUrl:{get:function(){return this.$store.getters["app/importServerUrl"]},set:function(e){this.$store.commit("app/importServerUrl",e)}},searchTerm:function(){return this.$store.getters["app/searchTerm"]}},mounted:function(){this.$store.commit("app/searchTerm","")},methods:{importCaseDocs:function(){this.handleImportFromTabs(this.caseDocs),this.$store.commit("app/importTransition","importingCaseFrameworks")},handleImportFromTabs:function(e){this.caseDocs=e,this.importCase()},isValidUrl:function(e){try{new URL(e)}catch(t){return!1}return!0},connectToServer:function(){appLog("connecting to server 1"),this.$store.commit("app/clearImportErrors");var e={message:"Unable to import from the URL Endpoint provided.",details:""};if(!this.isValidUrl(this.importServerUrl))return e.details="The endpoint provided is not a valid URL.",this.$store.commit("app/addImportError",e.details),this.$store.commit("app/importTransition","upload"),void this.showModal("error",e);this.caseDocs.splice(0,this.caseDocs.length),this.cassDirectories.splice(0,this.cassDirectories.length),this.cassFrameworks.splice(0,this.cassFrameworks.length),"cass"===this.serverType?this.cassDetectEndpoint():"case"===this.serverType&&this.caseDetectEndpoint()},cassDetectEndpoint:function(){var e=this.importServerUrl;e.endsWith("/")||(e+="/"),e.endsWith("api/")||(e+="api/");var t=new EcRepository;EcRepository.repos.pop(),t.selectedServer=e,this.remoteRepo=t,this.cassSearchEndpoint()},cassSearchEndpoint:function(){this.cassDirectories.splice(0,this.cassDirectories.length),this.cassFrameworks.splice(0,this.cassFrameworks.length),this.searchingTopLevel=!0;var e=this,t={size:50,sort:'[ { "name.keyword": {"order" : "asc"}} ]'},r="(*)";this.searchTerm&&(r=this.searchTerm),EcDirectory.search(this.remoteRepo,r,(function(t){e.cassSearchSuccess(t,"directory")}),appError,t),EcFramework.search(this.remoteRepo,r,(function(t){e.cassSearchSuccess(t,"framework")}),(function(t){appLog(t),e.cassSearchError()}),t)},cassSearchError:function(){var e={message:"Unable to search the URL Endpoint provided.",details:"Make sure you entered the URL of a CaSS Repository."};this.$store.commit("app/addImportError",e.details),this.$store.commit("app/importTransition","upload"),this.showModal("error",e)},cassSearchSuccess:function(e,t){if("framework"===t){var r=e.length+" frameworks detected.";this.$store.commit("app/importStatus",r),this.$store.commit("app/importTransition","serverFrameworksDetected")}for(var i in e)e[i].loading=!1,e[i].success=!1,e[i].error=!1,e[i].checked=!1,"directory"!==t||e[i].parentDirectory&&this.searchingTopLevel?"framework"===t&&this.cassFrameworks.push(e[i]):this.cassDirectories.push(e[i])},importCassFrameworks:function(e){if(this.$store.commit("app/importTransition","importingCassFrameworks"),e){var t=e[1];this.cassFrameworks[t].loading=!1,this.cassFrameworks[t].error=!0}for(var r=this.cassFrameworks.length-1;r>=0;r--)this.cassFrameworks[r].checked?!1===this.cassFrameworks[r].success&&!1===this.cassFrameworks[r].error&&(this.cassFrameworks[r].loading=!0):this.cassFrameworks.splice(r,1);var i=0,o=null;for(r=0;r<this.cassFrameworks.length;r++)!0===this.cassFrameworks[r].loading&&(i++,null==o&&(o=r));if(0===i)this.$store.commit("app/importFramework",this.$store.getters["editor/framework"]),1===this.cassFrameworks.length?this.importSuccess():(this.$store.commit("app/sortResults",{id:"lastEdited",label:"last modified"}),this.$router.push({name:"frameworks"})),this.$store.commit("app/importStatus","Import finished.");else{var s=this;EcRepository.cache={},EcFramework.get(this.cassFrameworks[o].shortId(),(function(e){s.$store.commit("app/importStatus","framework found..."),s.showModal("duplicateOverwriteOnly",[[s.cassFrameworks[o],o],e])}),(function(e){s.$store.commit("app/importStatus","no match, saving new framework..."),s.continueCassImport([s.cassFrameworks[o],o])}))}},precacheRemoteServer:function(e,t,r){for(var i=[],o=0;o<e.length;o++){var s=e[o];s.startsWith(this.remoteRepo.selectedServer)?i.push(s.replace(this.remoteRepo.selectedServer,"").replace("custom/","")):i.push("data/"+EcCrypto.md5(s))}if(0!==i.length){var a=new FormData;a.append("data",JSON.stringify(i)),EcRemote.postExpectingObject(this.remoteRepo.selectedServer,"sky/repo/multiGet",a,(function(e){for(var r=e,o=0;o<r.length;o++){var s=new EcRemoteLinkedData(null,null);if(s.copyFrom(r[o]),r[o]=s,EcRepository.caching){if(!EcRepository.shouldTryUrl(s.id))for(var a=EcCrypto.md5(s.shortId()),n=0;n<i.length;n++){var c=i[n];if(-1!==c.indexOf(a)){EcRepository.cache[c]=s;break}}EcRepository.cache[s.shortId()]=s,EcRepository.cache[s.id]=s}}null!=t&&t()}),null)}else null!=t&&t()},continueCassImport:function(e){var t=e[0],r=e[1],i=this,o=new EcFramework;o.copyFrom(t),delete o.owner,delete o.reader,EcIdentityManager.ids.length>0&&o.addOwner(EcIdentityManager.ids[0].ppk.toPk()),o.id=o.shortId(),o["schema:dateModified"]=(new Date).toISOString(),delete o.loading,delete o.success,delete o.error,delete o.checked,delete o.directory;var s=[];s.push(o);var a=[];o.competency&&o.competency.length&&(a=o.competency),o.relation&&o.relation.length&&(a=a.concat(o.relation)),o.level&&o.level.length&&(a=a.concat(o.level)),EcRepository.alwaysTryUrl=!0,this.precacheRemoteServer(a,(function(){(new EcAsyncHelper).each(a,(function(e,t){EcRepository.get(e,(function(e){var r="Ec"+e.type;"EcRelation"===r&&(r="EcAlignment");var i=new window[r];i.copyFrom(e),delete i.owner,delete i.reader,EcIdentityManager.ids.length>0&&i.addOwner(EcIdentityManager.ids[0].ppk.toPk()),i.id=i.shortId(),s.push(i),t()}),t)}),(function(e){EcRepository.alwaysTryUrl=!1,i.repo.multiput(s,(function(){i.cassFrameworks[r].loading=!1,i.cassFrameworks[r].success=!0,i.$store.commit("editor/framework",o),i.spitEvent("importFinished",o.shortId(),"importPage"),i.importCassFrameworks()}),(function(){i.cassFrameworks[r].loading=!1,i.cassFrameworks[r].error=!0,i.importCassFrameworks()}))}))}),(function(e){appError(e)}))},openDirectory:function(e){this.directoryThatsOpen=e;var t=this,r={size:50,sort:'[ { "name.keyword": {"order" : "asc"}} ]'};EcDirectory.search(this.remoteRepo,'parentDirectory:"'+e.shortId()+'"',(function(e){t.cassDirectories.splice(0,t.cassDirectories.length),t.searchingTopLevel=!1,t.cassSearchSuccess(e,"directory")}),appError,r),EcFramework.search(this.remoteRepo,'directory:"'+e.shortId()+'"',(function(e){t.cassFrameworks.splice(0,t.cassFrameworks.length),t.cassSearchSuccess(e,"framework")}),appError,r)},selectAllFrameworks:function(){for(var e in this.cassFrameworks)this.cassFrameworks[e].checked=!0,EcArray.setAdd(this.selectedFrameworks,this.cassFrameworks[e].id)},caseDetectEndpoint:function(){var e=this,t={message:"Unable to import from the URL Endpoint provided.",details:""},r=this.importServerUrl;r.endsWith("/")||(r+="/"),this.get(r,"ims/case/v1p0/CFDocuments",{Accept:"application/json"},(function(t){e.caseGetDocsSuccess(t)}),(function(r){r?(t.details="Error: "+r,401===r&&(t.details+=" A CASE framework cannot be imported if it uses API Key authentication."),e.$store.commit("app/importTransition","upload"),e.$store.commit("app/addImportError",t.details),e.showModal("error",t)):e.caseGetServerSide()}))},caseGetDocsSuccess:function(e){var t;if(e=JSON.parse(e),this.caseDocs=[],null==e.CFDocuments)t="No frameworks found. Please check the URL and try again.",this.$store.commit("app/addImportError",t),me.$store.commit("app/importTransition","process");else{var r=e.CFDocuments.length+" frameworks detected.";this.$store.commit("app/importStatus",r),this.$store.commit("app/importTransition","serverFrameworksDetected");for(var i=0;i<e.CFDocuments.length;i++){var o=e.CFDocuments[i],s={};s.name=o.title,s.id=o.uri,s.identifier=o.identifier,s.loading=!1,s.success=!1,s.error=!1,s.checked=!1,this.caseDocs.push(s)}this.caseCancel=!1}},caseGetServerSide:function(){var e=this;EcRemote.getExpectingString(this.repo.selectedServer,"ims/case/getDocs?url="+this.importServerUrl,(function(t){e.caseGetDocsSuccess(t)}),(function(t){e.$store.commit("app/importTransition","process"),e.$store.commit("app/addImportError","No frameworks found. Please check the URL and try again.")}))},importCase:function(e){if(e){var t=e[1];this.caseDocs[t].loading=!1,this.caseDocs[t].error=!0}for(var r=this.caseDocs.length-1;r>=0;r--)this.caseDocs[r].checked?!1===this.caseDocs[r].success&&!1===this.caseDocs[r].error&&(this.caseDocs[r].loading=!0):this.caseDocs.splice(r,1);if(!this.caseCancel){var i=0,o=null;for(r=0;r<this.caseDocs.length;r++)!0===this.caseDocs[r].loading&&(i++,null==o&&(o=r));if(0===i)this.$store.commit("app/importFramework",this.$store.getters["editor/framework"]),this.importSuccess(),this.$store.commit("app/importStatus","Import finished.");else{var s=this,a=this.caseDocs[o].id;s.repo.search('(@id:"'+a+'") AND (@type:Framework)',(function(){}),(function(e){appLog(e),e.length>0?(s.$store.commit("app/importStatus","framework found..."),s.showModal("duplicateOverwriteOnly",[[s.caseDocs[o],o],e[0]])):(s.$store.commit("app/importStatus","no match, saving new framework..."),s.continueCaseImport([s.caseDocs[o],o]))}),(function(e){s.$store.commit("app/importStatus",e),s.$store.commit("app/importTransition","process"),s.$store.commit("app/addImportError",e)}))}}},continueCaseImport:function(e){var t=e[0],r=e[1],i=this,o=t.id,s=t.identifier,a=EcIdentityManager.ids[0],n=new FormData;null!=a&&n.append("owner",a.ppk.toPk().toPem()),EcRemote.postInner(this.repo.selectedServer,"ims/case/harvest?caseEndpoint="+this.importServerUrl+"&dId="+s,n,null,(function(e){i.caseDocs[r].loading=!1,i.caseDocs[r].success=!0,appLog(o),EcFramework.get(o,(function(e){i.$store.commit("editor/framework",e),i.spitEvent("importFinished",e.shortId(),"importPage"),i.importCase()}),(function(e){appError(e),i.importCase()}))}),(function(e){i.caseDocs[r].loading=!1,i.caseDocs[r].error=!0,i.importCase()}))},cancelCase:function(){this.caseCancel=!0;for(var e=null,t=0;t<this.caseDocs.length;t++)!0===this.caseDocs[t].loading&&(null==e?e=t:(this.caseDocs[t].loading=!1,this.caseDocs[t].error=!0));this.clearImport(),this.$store.commit("app/importTransition","upload")},goBack:function(){var e=this;this.directoryThatsOpen&&this.directoryThatsOpen.parentDirectory?EcRepository.get(this.directoryThatsOpen.parentDirectory,(function(t){e.openDirectory(t)}),(function(t){appError(t),e.directoryThatsOpen=null,e.cassSearchEndpoint()})):(this.directoryThatsOpen=null,this.cassSearchEndpoint())},findDirectoryTrail:function(e){var t=this;e.parentDirectory&&EcDirectory.get(e.parentDirectory,(function(e){e&&!e.parentDirectory?t.directoryTrail.unshift(e):e&&(t.directoryTrail.unshift(e),t.findDirectoryTrail(e))}),appError)}},watch:{importServerUrl:function(e){this.caseDocs=[]},searchTerm:function(e){this.cassSearchEndpoint()},selectDirectory:function(){"all"===this.selectDirectory?(this.selectDirectory=null,this.directoryThatsOpen=null,this.cassSearchEndpoint()):(this.openDirectory(this.selectDirectory),this.directoryTrail.splice(0,this.directoryTrail.length),this.findDirectoryTrail(this.selectDirectory))},selectedFrameworks:function(){for(var e in this.cassFrameworks)EcArray.has(this.selectedFrameworks,this.cassFrameworks[e].id)?this.cassFrameworks[e].checked=!0:this.cassFrameworks[e].checked=!1},cassFrameworks:function(){this.selectedFrameworks.splice(0,this.selectedFrameworks.length)}}},L=N,M=(r("3410"),Object(h["a"])(L,P,A,!1,null,null,null)),U=M.exports,q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"columns is-mobile",attrs:{id:"import-from-url"}},[r("div",{staticClass:"column is-12"},[r("div",{staticClass:"container py-6"},[e._t("import-url-title",[r("p",[e._v("No import type selected")])]),r("div",{staticClass:"columns is-multiline"},[r("div",{staticClass:"column is-12"},[r("ImportTabs")],1),r("div",{staticClass:"column is-12"},["importingFromUrl"===e.importTransition?r("div",{staticClass:"section has-text-centered"},[e._m(0)]):e._e(),"upload"===e.importTransition?[r("div",{staticClass:"field"},[r("p",{staticClass:"control is-expanded"},[r("label",{staticClass:"label is-large"},[e._v(" Paste URL of document ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.importUrl,expression:"importUrl"}],staticClass:"input is-large",attrs:{placeholder:"paste your url here...",type:"url"},domProps:{value:e.importUrl},on:{input:function(t){t.target.composing||(e.importUrl=t.target.value)}}})])]),r("div",{staticClass:"field"},[r("div",{staticClass:"buttons is-right"},[r("span",{staticClass:"button is-outlined is-centered is-large is-primary",on:{click:e.importFromUrl}},[e._m(1),r("span",[e._v(" Import framework ")])])])]),r("div",[r("p",{staticClass:"title is-size-5"},[e._v(" Looking for examples? Try one of the following O*Net Competency Frameworks ")]),r("ul",{staticClass:"cat__bullet-list"},[r("li",[r("span",{staticClass:"custom-link local",on:{click:function(t){e.importUrl="https://www.onetcenter.org/ctdlasn/graph/ce-07c257d6-9119-11e8-b852-782bcb5df6ac"}}},[e._v(" Abilities Competency Framework ")])]),r("li",[r("span",{staticClass:"custom-link local",on:{click:function(t){e.importUrl="https://www.onetcenter.org/ctdlasn/graph/ce-07c25f74-9119-11e8-b852-782bcb5df6ac"}}},[e._v(" Basic Skills Competency Framework ")])]),r("li",[r("span",{staticClass:"custom-link local",on:{click:function(t){e.importUrl="https://www.onetcenter.org/ctdlasn/graph/ce-07c264d7-9119-11e8-b852-782bcb5df6ac"}}},[e._v(" Cross-Functional Skills Competency Framework ")])]),r("li",[r("span",{staticClass:"custom-link local",on:{click:function(t){e.importUrl="https://www.onetcenter.org/ctdlasn/graph/ce-07c27a0f-9119-11e8-b852-782bcb5df6ac"}}},[e._v(" Knowledge Competency Framework ")])]),r("li",[r("span",{staticClass:"custom-link local",on:{click:function(t){e.importUrl="https://www.onetcenter.org/ctdlasn/graph/ce-9fab4187-d8e7-11e9-8250-782bcb5df6ac"}}},[e._v(" Technology Skills Competency Framework ")])])])])]:"process"!==e.importTransition&&"info"!==e.importTransition||0!==e.importErrors.length?e.importErrors.length>0?r("div",{staticClass:"column has-text-danger"},[r("ul",[e._l(e.importErrors,(function(t,i){return r("li",{key:i,staticClass:"is-size-6"},[r("span",{},[e._m(2,!0),e._v(" "+e._s(t)+" ")])])})),r("li")],2),r("div",{staticClass:"section"},[r("div",{staticClass:"buttons is-centered"},[r("div",{staticClass:"button is-primary",on:{click:function(t){return e.resetImport()}}},[e._m(3),r("span",[e._v("start over")])])])])]):e._e():r("div",{staticClass:"column"},[r("div",{staticClass:"section has-text-centered"},["process"===e.importTransition?r("span",{staticClass:"icon is-large"},[r("i",{staticClass:"fa fa-spinner fa-pulse fa-2x"})]):e._e()]),r("div",{staticClass:"section"},[r("p",{staticClass:"is-size-6"},[e._v(" "+e._s(e.importStatus)+" ")])])])],2),r("div",{staticClass:"column is-12"},[e._t("import-framework")],2)])],2)])])},z=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon is-large"},[r("i",{staticClass:"fa fa-spinner fa-pulse fa-2x"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"file-icon"},[r("i",{staticClass:"fas fa-upload"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-times"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-redo"})])}],V={name:"ImportUrl",components:{ImportTabs:g},mixins:[m,j["a"]],data:function(){return{importType:"url",importErrors:[],importUrl:"",repo:window.repo}},computed:{importInfoVisible:function(){return this.$store.getters["app/showRightAside"]}},props:{importTransition:{type:String,default:""}},methods:{},watch:{}},B=V,H=Object(h["a"])(B,q,z,!1,null,null,null),J=H.exports,K=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"columns is-mobile",attrs:{id:"import-from-text"}},[r("div",{staticClass:"column is-12"},[r("div",{staticClass:"container py-6"},[e._t("import-text-title",[r("p",[e._v("No import type selected")])]),r("div",{staticClass:"columns is-multiline"},[r("div",{staticClass:"column is-12"},[r("ImportTabs")],1),r("div",{staticClass:"column is-12"},[r("h3",{staticClass:"title is-size-3 has-text-weight-medium"},[r("span",{staticClass:"button is-pulled-right is-large is-primary is-outlined mr-4",attrs:{disabled:!e.importFrameworkName||!e.importText||0===e.importFrameworkName.trim().length},on:{click:function(t){return e.$store.commit("app/importStatus","parseText")}}},[e._v(" Import ")])])]),r("div",{staticClass:"column",class:""!==e.importText?"is-6":"is-12"},[r("div",{staticClass:"import-by-text-form"},[r("h3",{staticClass:"label is-size-4"},[e._v(" Import by text form ")]),r("div",{staticClass:"field"},[r("label",{staticClass:"label"},[e._v(" Framework name ")]),r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.importFrameworkName,expression:"importFrameworkName"}],staticClass:"input",attrs:{placeholder:"Framework Name"},domProps:{value:e.importFrameworkName},on:{input:function(t){t.target.composing||(e.importFrameworkName=t.target.value)}}})])]),r("div",{staticClass:"field"},[r("label",{staticClass:"label"},[e._v(" Paste Text ")]),r("div",{staticClass:"control"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.rawImportText,expression:"rawImportText"}],staticClass:"textarea import-text-textarea",attrs:{placeholder:"Start typing or paste your text here..."},domProps:{value:e.rawImportText},on:{keypress:function(t){return e.handleKeydown(t)},input:function(t){t.target.composing||(e.rawImportText=t.target.value)}}})])])])]),r("div",{staticClass:"column is-6"},[e._t("import-framework")],2)])],2)])])},W=[],G={name:"ImportText",props:{},components:{ImportTabs:g},mixins:[m,j["a"]],data:function(){return{rawImportText:""}},methods:{handleKeydown:function(e){}},computed:{importInfoVisible:function(){return this.$store.getters["app/showRightAside"]},importText:function(){return this.rawImportText},text:function(){return this.$store.getters["app/importText"]},importStatus:function(){return this.$store.getters["app/importStatus"]},importFrameworkName:{get:function(){return this.$store.getters["app/importFrameworkName"]},set:function(e){return this.$store.commit("app/importFrameworkName",e)}},importFrameworkDescription:function(){return this.$store.getters["app/importFrameworkDescription"]},queryParams:function(){return this.$store.getters["editor/queryParams"]},conceptMode:function(){return this.$store.getters["editor/conceptMode"]},importErrors:function(){return this.$store.getters["app/importErrors"]},importFramework:function(){return this.$store.getters["app/importFramework"]},importType:function(){return this.$store.getters["app/importType"]},importTransition:function(){return this.$store.getters["app/importTransition"]}}},X=G,Q=Object(h["a"])(X,K,W,!1,null,null,null),Y=Q.exports,Z=r("b047"),ee=r.n(Z),te=r("9418"),re=r("6ffa4"),ie=r("1102"),oe=r("f188"),se=r("098b"),ae=r("8051"),ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.importFramework&&"detail"===e.importTransition?r("div",{staticClass:"section import-details"},[r("div",{staticClass:"import-details__section"},[r("h3",{staticClass:"subtitle is-size-3 has-text-weight-normal"},[e._v(" The following details were detected. ")]),r("p",{staticClass:"is-size-6 has-text-weight-light"},[e._v(" If these details don't look correct, please verify your file is correct and import again. ")]),r("ul",{staticClass:"is-size-6 detected-import-details"},[e.detailsDetected.columns>0?r("li",[e._m(0),e._v(" CaSS detected "),r("b",[e._v(e._s(e.detailsDetected.columns))]),e._v(" columns ")]):e._e(),e.detailsDetected.rows>0?r("li",[e._m(1),e._v(" CaSS detected "),r("b",[e._v(e._s(e.detailsDetected.rows))]),e._v(" rows ")]):e._e(),r("li",[e._m(2),e._v(" CaSS detected "),r("b",[e._v(e._s(e.detailsDetected.competencies))]),e._v(" competencies in the imported framework ")]),r("li",[e._m(3),e._v(" CaSS detected a "),r("b",[e._v(e._s(e.detailsDetected.fileType))]),e._v(" file type ")]),e.detailsDetected.headers?r("li",[e._m(4),r("b",[e._v("Header rows detected")])]):e._e()]),r("div",{staticClass:"buttons is-right"},[r("div",{staticClass:" button is-light is-small is-pulled-right is-dark is-outlined",on:{click:e.cancelImport}},[r("span",[e._v(" Cancel ")]),e._m(5)]),"detail"===e.importTransition?r("div",{staticClass:"button is-small is-primary is-outlined",on:{click:function(t){return e.$store.commit("app/importTransition","preview")}}},[r("span",[e._v(" Accept Details & Review ")]),e._m(6)]):e._e()])])]):e._e()},ce=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon has-text-success"},[r("i",{staticClass:"fa fa-check-circle"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon has-text-success"},[r("i",{staticClass:"fa fa-check-circle"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon has-text-success"},[r("i",{staticClass:"fa fa-check-circle"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon has-text-success"},[r("i",{staticClass:"fa fa-check-circle"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon has-text-success"},[r("i",{staticClass:"fa fa-check-circle"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-times-circle"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon is-small"},[r("i",{staticClass:"fas fa-arrow-right"})])}],pe={name:"ImportDetails",props:{detailsDetected:Object},components:{},computed:{importErrors:function(){return this.$store.getters["app/importErrors"]},importFile:function(){return this.$store.getters["app/importFiles"]},importTransition:function(){return this.$store.getters["app/importTransition"]},importType:function(){return this.$store.getters["app/importType"]},importFileType:function(){return this.$store.getters["app/importFileType"]},importFramework:function(){return this.$store.getters["app/importFramework"]},importStatus:function(){return this.$store.getters["app/importStatus"]}},methods:{cancelImport:function(){this.$emit("delete-object",this.importFramework),this.$store.dispatch("app/clearImport")}}},le=pe,de=Object(h["a"])(le,ne,ce,!1,null,null,null),ue=de.exports,he=r("25d8"),fe=r("b1ab"),ge=r("1f27"),ve={name:"Import",mixins:[j["a"],re["a"],ie["a"],oe["a"],ge["a"],fe["a"],m],components:{RightAside:s["default"],MainLayout:a["a"],Hierarchy:te["default"],Thing:se["default"],ThingEditing:ae["default"],ImportTabs:g,ImportDetails:ue,ConceptHierarchy:he["default"],ImportFile:O,ImportServer:U,ImportUrl:J,ImportText:Y},data:function(){return{parentObjectClass:"parent-object",editingNode:!1,hierarchyIsdoneLoading:!1,frameworkBusy:!0,detailsDetected:{rows:0,columns:0,headers:!1,competencies:0,format:"Department of Labor",fileType:""},repo:window.repo,competencyCount:0,relationCount:0,caseCancel:!1,selectedArray:[],frameworkExportOptions:[{name:"Achievement Standards Network (RDF+JSON)",value:"asn"},{name:"CASS (JSON-LD)",value:"jsonld"},{name:"CASS (RDF Quads)",value:"rdfQuads"},{name:"CASS (RDF+JSON)",value:"rdfJson"},{name:"CASS (RDF+XML)",value:"rdfXml"},{name:"CASS (Turtle)",value:"turtle"},{name:"Credential Engine ASN (JSON-LD)",value:"ctdlasnJsonld"},{name:"Credential Engine ASN (CSV)",value:"ctdlasnCsv"},{name:"Table (CSV)",value:"csv"},{name:"IMS Global CASE (JSON)",value:"case"}],changedObj:null}},computed:{importInfoVisible:function(){return this.$store.getters["app/showRightAside"]},queryParams:function(){return this.$store.getters["editor/queryParams"]},conceptMode:function(){return this.$store.getters["editor/conceptMode"]},showImportActions:function(){return"detail"===this.importTransition||"preview"===this.importTransition||"light"===this.importTransition},importServerUrl:function(){return this.$store.getters["app/importServerUrl"]},importUrl:function(){return this.$store.getters["app/importUrl"]},importErrors:function(){return this.$store.getters["app/importErrors"]},importFile:function(){return this.$store.getters["app/importFiles"]},importTransition:function(){return this.$store.getters["app/importTransition"]},importType:function(){return this.$store.getters["app/importType"]},importFileType:function(){return this.$store.getters["app/importFileType"]},importFramework:function(){return this.$store.getters["app/importFramework"]},importFrameworkName:{get:function(){return this.$store.getters["app/importFrameworkName"]},set:function(e){return this.$store.commit("app/importFrameworkName",e)}},importFrameworkDescription:function(){return this.$store.getters["app/importFrameworkDescription"]},dynamicThing:function(){return this.editingNode?"ThingEditing":"Thing"},isT3Import:function(){return"pdf"===this.importFileType},importStatus:function(){return this.$store.getters["app/importStatus"]},csvColumns:{get:function(){return this.$store.getters["app/csvColumns"]},set:function(e){this.$store.commit("app/csvColumns",e)}},csvRelationColumns:{get:function(){return this.$store.getters["app/csvRelationColumns"]},set:function(e){this.$store.commit("app/csvRelationColumns",e)}},csvRelationFile:function(){return this.$store.getters["app/csvRelationFile"]},importCsvColumnName:{get:function(){return this.$store.getters["app/importNameColumn"]},set:function(e){this.$store.commit("app/importNameColumn",e)}},importCsvColumnDescription:{get:function(){return this.$store.getters["app/importDescriptionColumn"]},set:function(e){this.$store.commit("app/importDescriptionColumn",e)}},importCsvColumnScope:{get:function(){return this.$store.getters["app/importScopeColumn"]},set:function(e){this.$store.commit("app/importScopeColumn",e)}},importCsvColumnId:{get:function(){return this.$store.getters["app/importIdColumn"]},set:function(e){this.$store.commit("app/importIdColumn",e)}},importCsvColumnSource:{get:function(){return this.$store.getters["app/importSourceColumn"]},set:function(e){this.$store.commit("app/importSourceColumn",e)}},importCsvColumnRelationType:{get:function(){return this.$store.getters["app/importRelationColumn"]},set:function(e){this.$store.commit("app/importRelationColumn",e)}},importCsvColumnTarget:{get:function(){return this.$store.getters["app/importTargetColumn"]},set:function(e){this.$store.commit("app/importTargetColumn",e)}},firstImport:{get:function(){return this.$store.getters["app/firstImport"]},set:function(e){this.$store.commit("app/firstImport",e)}},text:function(){return this.$store.getters["app/importText"]},containerProfile:function(){return this.conceptMode?this.ctdlAsnConceptSchemeProfile:this.isT3Import?this.t3FrameworkProfile:"true"===this.queryParams.ceasnDataFields?this.ctdlAsnFrameworkProfile:this.t3FrameworkProfile},hierarchyProfile:function(){return this.conceptMode?this.ctdlAsnConceptProfile:this.isT3Import?this.t3CompetencyProfile:"true"===this.queryParams.ceasnDataFields?this.ctdlAsnCompetencyProfile:this.t3CompetencyProfile}},created:function(){this.$store.commit("editor/framework",null),this.spitEvent("viewChanged")},beforeDestroy:function(){this.clearImport()},mounted:function(){this.clearImport(),this.$store.commit("app/showRightAside");var e=document.getElementById("import");e.addEventListener("scroll",ee()(this.scrollFunction,100,{leading:!0}))},watch:{importStatus:function(e,t){e!==t&&("connectToServer"===e?this.connectToServer():"importFromUrl"===e?this.importFromUrl():"parseText"===e&&this.parseText())}}},we=ve,ye=(r("6bed"),Object(h["a"])(we,i,o,!1,null,null,null));t["default"]=ye.exports},"6bed":function(e,t,r){"use strict";var i=r("8e28"),o=r.n(i);o.a},"6ffa4":function(e,t,r){"use strict";r("fb6a");t["a"]={methods:{removeObject:function(e){appLog("removing "+e.id);var t=this,r=this.$store.getters["editor/framework"],i=r.competency?r.competency.slice():null,o=r.relation?r.relation.slice():null,s=r.level?r.level.slice():null;r["schema:dateModified"]=(new Date).toISOString(),r.removeCompetency(e.shortId(),(function(){var e=t.framework;t.$store.commit("editor/addEditsToUndo",[{operation:"update",id:e.shortId(),fieldChanged:["competency","relation","level"],initialValue:[i,o,s]}]),!0===t.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[f.id]&&(e=EcEncryptedValue.toEncryptedValue(e)),repo.saveTo(e,(function(){t.$store.commit("editor/framework",r)}),appError)}),appLog)},deleteObject:function(e){appLog("deleting "+e.id);var t=this,r=this.$store.getters["editor/framework"];if(e.shortId()===r.shortId())this.repo.deleteRegistered(r,(function(e){if(t.spitEvent("frameworkDeleted",r.shortId(),"editFrameworkSection"),null!=r.competency)for(var i=0;i<r.competency.length;i++)t.conditionalDelete(r.competency[i]);if(null!=r.relation)for(i=0;i<r.relation.length;i++)t.conditionalDelete(r.relation[i]);if(null!=r.level)for(i=0;i<r.level.length;i++)t.conditionalDelete(r.level[i]);t.$store.commit("editor/framework",null),t.importType?t.$store.commit("app/importFramework",null):t.$router.push({name:"frameworks"})}),appLog);else{var i=r.competency?r.competency.slice():null,o=r.relation?r.relation.slice():null,s=r.level?r.level.slice():null;this.$store.commit("editor/selectedCompetency",e),r["schema:dateModified"]=(new Date).toISOString(),r.removeCompetency(e.shortId(),(function(){r.removeLevel(e.shortId()),t.$store.commit("editor/addEditsToUndo",[{operation:"delete",obj:e},{operation:"update",id:r.shortId(),fieldChanged:["competency","relation","level"],initialValue:[i,o,s],changedValue:[r.competency,r.relation,r.level]}]),t.conditionalDelete(e.shortId()),t.spitEvent("competencyDeleted",e.shortId(),"editFrameworkSection"),t.$store.commit("editor/selectedCompetency",null);var a=r;!0===t.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[r.id]&&(a=EcEncryptedValue.toEncryptedValue(r)),t.repo.saveTo(a,(function(){t.$store.commit("editor/framework",r)}),appError)}),appLog)}}}}},"713b":function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cass--main-layout",class:e.simple?"":"has-secondary"},[r("div",{staticClass:"cass--main-layout--primary-top",class:e.simpleClass},[e._t("top")],2),e.simple?e._e():r("div",{staticClass:"cass--main-layout--secondary-top"},[e._t("secondary-top")],2),r("div",{staticClass:"cass--main-layout--body",class:e.topBarClass},[e._t("body")],2),e.rightActive?r("div",{staticClass:"cass--main-layout--right",class:e.topBarClass},[e._t("right")],2):e._e()])},o=[],s={name:"MainLayout",data:function(){return{}},props:{rightActive:{type:Boolean,default:!1},simple:{type:Boolean,default:!1}},computed:{simpleClass:function(){return{"is-simple-top-bar":this.simple}},topBarClass:function(){return{"has-simple-top-bar":this.simple,"has-secondary-top-bar":!this.simple,"regular-top-bar":!this.simple}}}},a=s,n=(r("89d3"),r("2877")),c=Object(n["a"])(a,i,o,!1,null,null,null);t["a"]=c.exports},"81d7":function(e,t,r){"use strict";var i=r("ed1c"),o=r.n(i);o.a},"891f":function(e,t,r){},"89d3":function(e,t,r){"use strict";var i=r("1776"),o=r.n(i);o.a},"8e28":function(e,t,r){},"8e85":function(e,t,r){},"98d4":function(e,t,r){},b1ab:function(e,t,r){"use strict";r("b0c0");t["a"]={data:function(){return{levels:null,relations:{},alignments:{}}},watch:{refreshLevels:function(){this.refreshLevels&&this.updateLevels()},relationArray:function(){this.updateRelations()},refreshAlignments:function(){this.refreshAlignments&&this.updateAlignments()}},computed:{refreshLevels:function(){return this.$store.getters["editor/refreshLevels"]},relationArray:function(){return this.framework?this.framework.relation:this.importFramework?this.importFramework.relation:void 0},refreshAlignments:function(){return this.$store.getters["editor/refreshAlignments"]}},methods:{updateLevels:function(){var e=this;!0===this.$store.getters["editor/refreshLevels"]&&this.$store.commit("editor/refreshLevels",!1);var t={};this.framework&&(this.framework.level?(new EcAsyncHelper).each(this.framework.level,(function(e,r){EcLevel.get(e,(function(e){var i=e.competency;EcArray.isArray(i)||(i=[i]);for(var o=0;o<i.length;o++)EcArray.isArray(t[i[o]])||(t[i[o]]=[]),t[i[o]].push({"@id":e.shortId()});r()}),r)}),(function(r){e.levels=t})):this.levels=null)},updateRelations:function(){var e,t;if((null===(e=this.framework)||void 0===e||!e.relation)&&(null===(t=this.importFramework)||void 0===t||!t.relation))return this.relations={},void this.$store.commit("editor/relations",{});var r=this,i=[];(new EcAsyncHelper).each(this.framework?this.framework.relation:this.importFramework.relation,(function(e,t){EcAlignment.get(e,(function(e){if(e&&e.source&&e.target){var o={},s=e.relationType,a=null;if("true"===r.queryParams.ceasnDataFields&&"narrows"===s){var n=r.framework;n||(n=r.importFramework),-1!==n.competency.indexOf(e.target)&&-1!==n.competency.indexOf(e.source)&&(s="isChildOf",a="hasChild")}if("narrows"===s&&(a="broadens"),o.type=s,o.source=e.source,o.target={"@id":e.target},i.push(o),a){var c={};c.type=a,c.source=e.target,c.target={"@id":e.source},i.push(c)}}t()}),t)}),(function(e){for(var t={},o=0;o<i.length;o++){var s=i[o];t[s.type]||(t[s.type]={}),t[s.type][s.source]||(t[s.type][s.source]=[]),t[s.type][s.source].push(s.target)}r.relations=t,r.$store.commit("editor/relations",r.relations)}))},updateAlignments:function(){var e=this;if(!0===this.$store.getters["editor/refreshAlignments"]&&this.$store.commit("editor/refreshAlignments",!1),this.framework&&this.framework.competency){var t={};(new EcAsyncHelper).each(this.framework.competency,(function(r,i){var o='@type:CreativeWork AND educationalAlignment.targetUrl:"'+r+'"';e.repo.searchWithParams(o,{size:25},null,(function(e){for(var o=0;o<e.length;o++){var s=e[o].educationalAlignment.alignmentType+" (resource)";t[s]||(t[s]={}),t[s][r]||(t[s][r]=[]),t[s][r].push({"@id":e[o].shortId(),name:e[o].name,"@value":e[o].url})}i()}),i)}),(function(r){e.alignments=t}))}}}}},e6c0:function(e,t,r){"use strict";var i=r("8e85"),o=r.n(i);o.a},ed1c:function(e,t,r){}}]);
//# sourceMappingURL=import.92ad93ed.js.map