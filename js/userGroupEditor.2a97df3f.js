(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["userGroupEditor"],{"0393":function(e,s,r){},1622:function(e,s,r){"use strict";var t=r("0393"),a=r.n(t);a.a},1877:function(e,s,r){"use strict";var t=r("8fdc"),a=r.n(t);a.a},"334a":function(e,s,r){},"4a5b":function(e,s,r){"use strict";r.r(s);var t=function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",{staticClass:"cass-users-and-groups",attrs:{id:"user-groups"}},[r("div",{staticClass:"section"},[r("div",{staticClass:"container"},[r("div",{staticClass:"columns is-mobile is-multiline"},[r("div",{staticClass:"column is-narrow is-hidden-touch"},[r("div",{staticClass:"cass-left-panel"},[r("div",{staticClass:"cass-left-panel---container"},[r("h3",{staticClass:"title is-size-4 is-family-primary"},[e._v(" My User Groups ")]),r("div",{staticClass:"buttons"},[r("div",{staticClass:"button is-rounded is-primary is-small",attrs:{disabled:!e.amLoggedIn,title:e.getCreateUserGroupButtonTitle},on:{click:function(s){return e.createNewUserGroup(null)}}},[e._m(0),r("span",[e._v(" create new group ")])])]),r("cass-panel",[r("cass-panel-item",{key:"all-members",attrs:{depth:0,label:"Member List",nodes:[],id:"all-members"},on:{showDetails:e.showMemberListView}}),e._l(e.userGroupDisplayList,(function(s){return r("cass-panel-item",{key:s,attrs:{depth:0,label:s.name,nodes:s.subGroups,id:s.id},on:{showDetails:e.showGroupDetailsById}})}))],2)],1)])]),r("div",{staticClass:"column is-12 is-hidden-desktop"},[r("cass-dropdown",{attrs:{label:e.currentUserGroupName,active:e.groupsDropdownActive},on:{closeDropdown:function(s){e.groupsDropdownActive=!1},click:function(s){e.groupsDropdownActive=!0},showDropdown:function(s){e.groupsDropdownActive=!0}}},[r("cass-dropdown-item",{key:"all-members",attrs:{depth:0,label:"Member List",nodes:[],id:"all-members"},on:{showDetails:e.showMemberListView}}),e._l(e.userGroupDisplayList,(function(s){return r("cass-dropdown-item",{key:s,attrs:{depth:0,label:s.name,nodes:s.subGroups,id:s.id},on:{showDetails:e.showGroupDetailsById}})}))],2)],1),r("div",{staticClass:"column"},[r("div",{staticClass:"px-2"},["memberList"===e.viewMode?r("div",[r("h3",{staticClass:"title is-size-1 is-family-secondary"},[e._v(" All Group Members ")]),r("p",[e._v(" A view of all members within your groups and sub-groups. Click a group name to view the group details. ")]),0===e.allGroupMembersList.length?r("div",[e._m(1)]):e._e(),e.allGroupMembersList.length>0?r("div",{},[r("div",{staticClass:"table-container"},[r("table",{staticClass:"table is-hoverable is-fullwidth"},[e._m(2),r("tbody",e._l(e.allGroupMembersList,(function(s,t){return r("tr",{key:t},[r("th",[e._v(" "+e._s(s.name)+" ")]),r("td",[e._v(" "+e._s(s.email)+" ")]),r("td",[s.managerOf.length>0?r("div",[r("b",[e._v("Manager of")]),r("br"),e._l(s.managerOf,(function(s,t){return r("span",[t>0?r("span",[e._v(", ")]):e._e(),r("a",{on:{click:function(r){return e.showGroupDetailsById(s.id)}}},[e._v(" "+e._s(s.name)+" ")])])}))],2):e._e(),s.memberOf.length>0?r("div",[r("b",[e._v("Member of")]),r("br"),e._l(s.memberOf,(function(s,t){return r("span",[t>0?r("span",[e._v(", ")]):e._e(),r("a",{on:{click:function(r){return e.showGroupDetailsById(s.id)}}},[e._v(" "+e._s(s.name)+" ")])])}))],2):e._e()])])})),0)])])]):e._e()]):e._e(),"groupDetail"===e.viewMode?r("div",[e.currentUserGroupLineage&&e.currentUserGroupLineage.length>1?r("nav",{staticClass:"breadcrumb pb-2",attrs:{"aria-label":"breadcrumbs"}},[r("ul",e._l(e.currentUserGroupLineage,(function(s){return r("li",{key:s.id},[r("a",{on:{click:function(r){return e.showGroupDetailsById(s.id)}}},[e._v(" "+e._s(s.name)+" ")])])})),0)]):e._e(),r("div",{staticClass:"columns"},[r("div",{staticClass:"column is-8"},[r("h2",{staticClass:"is-size-1 is-family-secondary"},[e._v(" Group Details ")]),e.isEditingCurrentGroupName?e._e():r("div",{staticClass:"columns is-multiline is-mobile"},[e._m(3),r("div",{staticClass:"column pt-0"},[r("h3",{staticClass:"subtitle is-size-3"},[e._v(" "+e._s(e.currentUserGroupName)+" ")])]),r("div",{staticClass:"column is-narrow"},[e.currentUserGroupIsManager?r("span",{staticClass:"icon is-size-7 users-edit-icon",on:{click:function(s){e.isEditingCurrentGroupName=!0}}},[r("i",{staticClass:"fa fa-pencil-alt has-text-dark"})]):e._e()])]),e.isEditingCurrentGroupName?r("div",{staticClass:"pb-2"},[r("div",{staticClass:"field"},[r("label",{staticClass:"label"},[e._v("Group Name")]),r("p",{staticClass:"control is-expanded"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.currentUserGroupName,expression:"currentUserGroupName"}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.currentUserGroupName},on:{keypress:e.setCurrentUserGroupAsChanged,input:function(s){s.target.composing||(e.currentUserGroupName=s.target.value)}}})])]),r("span",{staticClass:"button is-primary is-rounded is-small is-outlined",on:{click:function(s){e.isEditingCurrentGroupName=!1}}},[e._v(" done editing ")])]):e._e(),e.currentUserGroupNameInvalid?r("div",{staticClass:"field has-text-danger"},[r("div",{staticClass:"label has-text-danger"},[e._v(" Group name is required ")])]):e._e(),r("div",{staticClass:"description pb-2"},[e.isEditingCurrentGroupDescription?e._e():r("div",[r("div",{staticClass:"columns is-multiline is-mobile"},[e._m(4),r("div",{staticClass:"column"},[e.currentUserGroupDescription&&e.currentUserGroupDescription.trim().length>0?r("div",{class:e.showMore&&e.currentUserGroupDescription.trim().length>300?"cass__user-groups--description":"cass__user-groups--description-overflow"},[e.showMore?r("span",[e._v(" "+e._s(e.currentUserGroupDescription)+" ")]):r("span",[e._v(" "+e._s(e.currentUserGroupDescription.trim(0,300))+" ")]),e.showMore&&e.currentUserGroupDescription.trim().length>300?r("span",{staticClass:"button is-small is-text has-text-primary",attrs:{title:"Show more"},on:{click:function(s){e.showMore=!1}}},[r("b",[e._v("hide")])]):e.currentUserGroupDescription.trim().length>300?r("span",{staticClass:"button is-small is-text has-text-primary",attrs:{title:"Show more"},on:{click:function(s){e.showMore=!0}}},[r("b",[e._v("...")])]):e._e()]):r("div",[r("i",[e._v("No description")])])]),r("div",{staticClass:"column is-narrow"},[e.currentUserGroupIsManager?r("span",{staticClass:"icon",on:{click:function(s){e.isEditingCurrentGroupDescription=!0}}},[r("i",{staticClass:"fa fa-pencil-alt is-size-7 has-text-dark"})]):e._e()])])]),e.isEditingCurrentGroupDescription?r("div",{staticClass:"pt-2"},[r("label",{staticClass:"label"},[e._v("Group Description")]),r("div",{staticClass:"field"},[r("p",{staticClass:"control is-expanded"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.currentUserGroupDescription,expression:"currentUserGroupDescription"}],staticClass:"textarea",attrs:{type:"text",rows:3},domProps:{value:e.currentUserGroupDescription},on:{keyup:e.setCurrentUserGroupAsChanged,input:function(s){s.target.composing||(e.currentUserGroupDescription=s.target.value)}}})])]),r("div",{staticClass:"buttons"},[r("span",{staticClass:"button is-rounded is-primary is-small is-outlined",class:e.currentUserGroupChanged?"":"is-disabled",attrs:{disabled:!e.currentUserGroupChanged},on:{click:function(s){e.isEditingCurrentGroupDescription=!1}}},[e._v(" done editing ")])])]):e._e(),e.currentUserGroupDescriptionInvalid?r("div",{staticClass:"field has-text-danger"},[r("div",{staticClass:"label has-text-danger"},[e._v(" Group description is required ")])]):e._e()])]),r("div",{staticClass:"column is-1"}),r("div",{staticClass:"column is-3 pt-3 pr-3"},[r("div",{staticClass:"columns is-multiline px-2"},[e.currentUserGroupIsManager?r("div",{staticClass:"cass-group--actions"},[r("h5",{staticClass:"title is-size-5"},[e._v(" Group actions ")]),e.currentUserGroupIsManager?r("div",{staticClass:"button my-1 is-small is-rounded is-small  is-fullwidth is-primary",attrs:{title:"Add group members"},on:{click:e.showAddGroupMembersModal}},[e._m(5),r("span",[e._v(" member ")])]):e._e(),e.currentUserGroupIsManager&&e.currentUserGroupChanged?r("div",{staticClass:"button is-rounded my-1 is-fullwidth is-primary is-small",class:e.currentUserGroupIsManager&&e.currentUserGroupChanged?"":"is-disabled",attrs:{disabled:!e.currentUserGroupChanged,title:"Save group"},on:{click:e.saveCurrentUserGroup}},[e._m(6),r("span",[e._v(" save ")])]):e._e(),e.currentUserGroupIsManager&&e.currentUserGroupChanged?r("div",{staticClass:"button is-fullwidth my-1 is-outlined is-rounded is-small",class:e.currentUserGroupIsManager&&e.currentUserGroupChanged?"":"is-disbaled",attrs:{disabled:!e.currentUserGroupChanged,title:"Cancel group changes"},on:{click:e.cancelCurrentUserGroupChanges}},[e._m(7),r("span",[e._v(" Discard ")])]):e._e(),e.currentUserGroupIsManager&&!e.currentUserGroupIsNewGroup?r("div",{staticClass:"button my-1 is-fullwidth is-rounded is-primary is-small",attrs:{title:"Create sub-group"},on:{click:e.createSubGroupForCurrentUserGroup}},[e._m(8),r("span",[e._v(" sub-group ")])]):e._e(),e.currentUserGroupIsManager&&!e.currentUserGroupIsNewGroup?r("div",{staticClass:"button my-1 is-outlined is-fullwidth is-rounded is-small is-danger",attrs:{title:"Delete group and sub-groups"},on:{click:e.showDeleteCurrentUserGroupConfirmModal}},[e._m(9),r("span",[e._v(" Delete ")])]):e._e()]):e._e()])])]),r("div",{staticClass:"pt-3"},[r("div",{staticClass:"columns"},[r("div",{staticClass:"column"},[r("span",{staticClass:"subtitle is-size-4"},[e._v(" "+e._s(e.currentUserGroupName)+" Members ")])])]),r("div",{staticClass:"table-container"},[r("table",{staticClass:"table is-hoverable is-fullwidth"},[r("thead",[r("tr",[r("th",[e._v(" name ")]),r("th",[e._v(" email ")]),r("th",[e._v(" role ")]),e.currentUserGroupIsManager?r("th"):e._e()])]),r("tbody",[e._l(e.currentUserGroupManagers,(function(s,t){return r("tr",{key:t+"_mgr"},[r("th",[e._v(" "+e._s(s.name)+" ")]),r("td",[e._v(" "+e._s(s.email)+" ")]),e._m(10,!0),e.currentUserGroupIsManager?r("td",[e.areAnyIdentitiesThisPerson(s)?e._e():r("div",{staticClass:"buttons is-right"},[r("div",{staticClass:"button is-small is-outlined is-primary",attrs:{title:"Change role to member"},on:{click:function(r){e.changeManagerToMember(s.shortId())}}},[e._m(11,!0),r("span",[e._v(" change role ")])]),e.isPersonRemovableFromCurrentUserGroup(s.shortId())?r("div",{staticClass:"button is-small is-outlined is-warning",attrs:{title:"Remove manager"},on:{click:function(r){e.removeMemberFromCurrentUserGroup(s.shortId())}}},[e._m(12,!0)]):r("button",{staticClass:"button is-small is-outlined is-disabled",attrs:{disabled:"",title:"Cannot remove: member of sub-group you do not manage."}},[e._m(13,!0)])])]):e._e()])})),e._l(e.currentUserGroupMembers,(function(s,t){return r("tr",{key:t+"_mem"},[r("th",[e._v(" "+e._s(s.name)+" ")]),r("td",[e._v(" "+e._s(s.email)+" ")]),r("td",[e._v(" member ")]),e.currentUserGroupIsManager?r("td",[r("div",{staticClass:"buttons is-right"},[r("div",{staticClass:"button is-small is-outlined is-primary",attrs:{title:"Change role to manager"},on:{click:function(r){e.changeMemberToManager(s.shortId())}}},[e._m(14,!0),r("span",[e._v(" change role ")])]),e.isPersonRemovableFromCurrentUserGroup(s.shortId())?r("div",{staticClass:"button is-small is-outlined is-warning",attrs:{title:"Remove member"},on:{click:function(r){e.removeMemberFromCurrentUserGroup(s.shortId())}}},[e._m(15,!0)]):r("button",{staticClass:"button is-small is-outlined is-disabled",attrs:{disabled:"",title:"Cannot remove: member of sub-group you do not manage."}},[e._m(16,!0)])])]):e._e()])}))],2)])])])]):e._e()])])])])]),r("div",{staticClass:"modal",class:[{"is-active":e.userGroupBusy}]},[r("div",{staticClass:"modal-background"}),e._m(17)]),r("div",{staticClass:"modal",class:[{"is-active":e.showAddMemberModal}]},[r("div",{staticClass:"modal-background"}),r("div",{staticClass:"modal-card"},[r("header",{staticClass:"modal-card-head has-background-primary"},[r("p",{staticClass:"is-size-3 modal-card-title has-text-white"},[e._v(" Add members to '"+e._s(e.currentUserGroupName)+"' "),r("button",{staticClass:"delete is-pulled-right",attrs:{"aria-label":"close"},on:{click:e.closeAddGroupMemberModal}})])]),r("div",{staticClass:"modal-card-body has-text-dark"},[0!==e.filteredAvailablePersonsForMembership.length||""!==e.addMemberPersonFilter?r("div",{staticClass:"field"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.addMemberPersonFilter,expression:"addMemberPersonFilter"}],staticClass:"input",attrs:{type:"text",placeholder:"search for person..."},domProps:{value:e.addMemberPersonFilter},on:{input:function(s){s.target.composing||(e.addMemberPersonFilter=s.target.value)}}})]):e._e(),0===e.filteredAvailablePersonsForMembership.length&&""===e.addMemberPersonFilter?r("div",[r("i",{staticClass:"fa fa-info-circle"}),e._v(" No group members available. Users must be managers or members of any parent groups in order to be available for sub-groups. ")]):e._e(),e.filteredAvailablePersonsForMembership.length>0?r("div",[r("h4",{staticClass:"header is-size-3"},[e._v(" Available members ")]),r("div",{staticClass:"table-container"},[r("table",{staticClass:"table is-hoverable is-fullwidth"},[e._m(18),r("tbody",e._l(e.filteredAvailablePersonsForMembership,(function(s,t){return r("tr",{key:t},[r("th",[r("div",{staticClass:"checkbox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedNewMembers,expression:"selectedNewMembers"}],attrs:{id:s.shortId(),name:"prs.shortId()",type:"checkbox",title:"Add as member"},domProps:{value:s.shortId(),checked:Array.isArray(e.selectedNewMembers)?e._i(e.selectedNewMembers,s.shortId())>-1:e.selectedNewMembers},on:{change:[function(r){var t=e.selectedNewMembers,a=r.target,i=!!a.checked;if(Array.isArray(t)){var o=s.shortId(),n=e._i(t,o);a.checked?n<0&&(e.selectedNewMembers=t.concat([o])):n>-1&&(e.selectedNewMembers=t.slice(0,n).concat(t.slice(n+1)))}else e.selectedNewMembers=i},function(r){e.removeFromSelectedNewManagers(s.shortId())}]}})])]),r("th",[r("div",{staticClass:"checkbox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedNewManagers,expression:"selectedNewManagers"}],attrs:{id:s.shortId(),name:"prs.shortId()",type:"checkbox",title:"Add as manager"},domProps:{value:s.shortId(),checked:Array.isArray(e.selectedNewManagers)?e._i(e.selectedNewManagers,s.shortId())>-1:e.selectedNewManagers},on:{change:[function(r){var t=e.selectedNewManagers,a=r.target,i=!!a.checked;if(Array.isArray(t)){var o=s.shortId(),n=e._i(t,o);a.checked?n<0&&(e.selectedNewManagers=t.concat([o])):n>-1&&(e.selectedNewManagers=t.slice(0,n).concat(t.slice(n+1)))}else e.selectedNewManagers=i},function(r){e.removeFromSelectedNewMembers(s.shortId())}]}})])]),r("td",[e._v(" "+e._s(s.getName())+" ")]),r("td",[e._v(" "+e._s(s.email)+" ")])])})),0)])])]):e._e()]),r("footer",{staticClass:"modal-card-foot has-background-light"},[r("div",{staticClass:"buttons is-right"},[e.selectedNewMembers.length>0||e.selectedNewManagers.length>0?r("div",{staticClass:"button is-outlined is-primary is-small",attrs:{title:"Apply new members"},on:{click:e.applySelectedNewMembersToCurrentUserGroup}},[e._m(19),r("span",[e._v(" apply ")])]):e._e(),r("div",{staticClass:"button is-outlined is-small",attrs:{title:"Cancel add new members"},on:{click:e.closeAddGroupMemberModal}},[e._m(20),r("span",[e._v(" cancel ")])])])])])]),r("div",{staticClass:"modal",class:[{"is-active":e.showConfirmDeleteUserGroupModal}]},[r("div",{staticClass:"modal-background"}),r("div",{staticClass:"modal-card"},[r("header",{staticClass:"modal-card-head has-background-primary"},[e._m(21),r("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:e.closeDeleteGroupConfirmModal}})]),r("section",{staticClass:"modal-card-body"},[e._v(" Are you sure you wish to delete the user group "),r("b",[e._v("'"+e._s(e.currentUserGroupName)+"'")]),e._v("? "),e.deleteConfirmNumberOfSubGroups>0?r("div",{staticClass:"field has-text-danger pt-4"},[r("div",{staticClass:"label has-text-danger"},[r("i",{staticClass:"fa fa-exclamation-triangle"}),e._v(" Warning! Deleting this group will also delete all of its sub-groups ("),r("b",[e._v(e._s(e.deleteConfirmNumberOfSubGroups))]),e._v("). This is non-reversible. ")])]):e._e()]),r("footer",{staticClass:"modal-card-foot"},[r("div",{staticClass:"buttons is-right"},[r("div",{staticClass:"button is-outlined",attrs:{title:"Cancel user group delete"},on:{click:e.closeDeleteGroupConfirmModal}},[e._m(22),r("span",[e._v(" cancel ")])]),r("div",{staticClass:"button is-outlined is-warning",attrs:{title:"Confirm user group delete"},on:{click:e.deleteCurrentUserGroupAndSubGroups}},[e._m(23),r("span",[e._v(" delete ")])])])])])])])},a=[function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-plus"})])},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("h3",{staticClass:"title is-size-5"},[r("i",{staticClass:"fa fa-info-circle"}),e._v(" No user groups available ")])},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("thead",[r("tr",[r("th",[e._v(" name ")]),r("th",[e._v(" email ")]),r("th",[e._v(" membership ")])])])},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",{staticClass:"column is-12 pb-0"},[r("label",{staticClass:"label"},[e._v("Group name")])])},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",{staticClass:"column is-12 pb-0"},[r("label",{staticClass:"label"},[e._v(" Group Description ")])])},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-plus"})])},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-save"})])},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-undo"})])},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-plus"})])},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-trash"})])},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("td",[r("b",[e._v("manager")])])},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-arrow-down"})])},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-trash"})])},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-trash"})])},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-arrow-up"})])},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-trash"})])},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-trash"})])},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",{staticClass:"modal-content has-text-centered"},[r("span",{staticClass:"icon is-large has-text-center has-text-link"},[r("i",{staticClass:"fas fa-2x fa-spinner is-info fa-pulse"})])])},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("thead",[r("tr",[r("th",{attrs:{title:"Add as member"}},[r("i",{staticClass:"fa fa-user"})]),r("th",{attrs:{title:"Add as manager"}},[r("i",{staticClass:"fa fa-user-shield"})]),r("th",[e._v("name")]),r("th",[e._v("email")])])])},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-save"})])},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-times"})])},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("p",{staticClass:"modal-card-title"},[r("span",{staticClass:"title has-text-white"},[e._v(" Delete User Group? ")])])},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-times"})])},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-trash"})])}],i=(r("a4d3"),r("e01a"),r("4de4"),r("caad"),r("b0c0"),r("b64b"),r("ac1f"),r("2532"),r("841c"),r("498a"),r("54f8")),o=function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",{staticClass:"cass-users-and-groups__panel"},[r("nav",[e._t("default")],2)])},n=[],u={name:"CassPanel"},l=u,c=(r("f7ca"),r("2877")),p=Object(c["a"])(l,o,n,!1,null,null,null),d=p.exports,h=function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",[r("a",{staticClass:"panel-block",style:{transform:e.indent,width:e.calcWidth}},[r("span",{on:{click:e.showDetails}},[e._v(" "+e._s(e.label)+" ")]),e.nodes.length>0?r("span",{staticClass:"icon is-pulled-right",on:{click:function(s){e.showChildren=!e.showChildren}}},[e.showChildren?r("i",{staticClass:"fa fa-chevron-down"}):r("i",{staticClass:"fa fa-chevron-right"})]):e._e()]),e._l(e.nodes,(function(s){return r("cass-panel-item",{directives:[{name:"show",rawName:"v-show",value:e.showChildren,expression:"showChildren"}],key:s,attrs:{depth:e.depth+1,id:s.id,nodes:s.subGroups,label:s.name},on:{showDetails:e.showDetailsChild}})}))],2)},m=[],f={name:"CassPanelItem",props:["nodes","label","depth","id"],components:{CassPanelItem:b},data:function(){return{showChildren:!1}},computed:{indent:function(){return"translate(".concat(16*this.depth,"px)")},calcWidth:function(){return"calc(100% - ".concat(16*this.depth,"px) !important")}},methods:{showDetails:function(){this.showChildren=!0,this.$emit("showDetails",this.id)},showDetailsChild:function(e){this.$emit("showDetails",e)}}},v=f,G=(r("1622"),Object(c["a"])(v,h,m,!1,null,null,null)),b=G.exports,g=function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closeDropdown,expression:"closeDropdown"}],staticClass:"dropdown  cass-user-group--dropdown",class:e.active?"is-active":""},[r("div",{staticClass:"dropdown-trigger",on:{click:function(s){return e.$emit("showDropdown")}}},[r("button",{staticClass:"button is-fullwidth is-large",attrs:{"aria-haspopup":"true","aria-controls":"dropdown-menu"}},[e.label?r("span",[e._v(e._s(e.label))]):r("span",[e._v("All Group Members")]),e._m(0)])]),r("div",{staticClass:"dropdown-menu",attrs:{id:"dropdown-menu",role:"menu"}},[r("div",{staticClass:"dropdown-content"},[e._t("default")],2)])])},C=[function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("span",{staticClass:"icon is-small"},[r("i",{staticClass:"fas fa-angle-down",attrs:{"aria-hidden":"true"}})])}],U=function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",{staticClass:"cass-dropdown--item"},[r("a",{staticClass:"dropdown-item",on:{click:e.showDetails}},[e._v(" "+e._s(e.label)+" ")]),e._l(e.nodes,(function(s){return r("cass-dropdown-item",{key:s,attrs:{depth:e.depth+1,id:s.id,nodes:s.subGroups,label:s.name},on:{showDetails:e.showDetailsChild}})}))],2)},w=[],M={name:"CassDropdownItem",components:{CassDropdownItem:D},props:["nodes","label","depth","id"],methods:{showDetailsChild:function(e){this.$emit("showDetails",e)},showDetails:function(){this.showChildren=!0,this.$emit("showDetails",this.id)}}},_=M,y=(r("1877"),Object(c["a"])(_,U,w,!1,null,null,null)),D=y.exports,I={name:"CassDropdown",props:["active","label"],methods:{closeDropdown:function(){this.$emit("closeDropdown")}}},O=I,N=(r("61e0"),Object(c["a"])(O,g,C,!1,null,null,null)),S=N.exports,k=r("6d79"),L={name:"UserGroupEditor",mixins:[k["a"]],data:function(){return{displayLength:300,showMore:!1,groupsDropdownActive:!1,GROUP_SEARCH_SIZE:1e4,PERSON_SEARCH_SIZE:1e4,userGroupBusy:!1,currentUserGroup:{},currentUserGroupId:"",currentUserGroupNeedsRekey:!1,currentUserGroupIsManager:!1,currentUserGroupManagers:[],currentUserGroupMembers:[],currentUserGroupName:"",currentUserGroupDescription:"",currentUserGroupLineage:[],currentUserGroupIsNewGroup:!1,currentUserGroupChanged:!1,isEditingCurrentGroupName:!1,isEditingCurrentGroupDescription:!1,currentUserGroupInvalid:!1,currentUserGroupNameInvalid:!1,currentUserGroupDescriptionInvalid:!1,membersToRemove:[],userGroupsToSave:[],numberOfUserGroupsToSave:0,numberOfUserGroupsSaved:0,userGroupsToDelete:[],numberOfUserGroupsToDelete:0,numberOfUserGroupsDeleted:0,showAddMemberModal:!1,showConfirmDeleteUserGroupModal:!1,deleteConfirmNumberOfSubGroups:0,addMemberPersonFilter:"",availablePersonsForMembership:[],selectedNewMembers:[],selectedNewManagers:[],allPersonList:[],allPersonMap:{},allGroupMembersList:[],userGroupDisplayList:[],userGroupDisplayMap:{},userGroupMap:{},userGroupIdToShowAfterReload:"",viewMode:"memberList"}},components:{CassPanel:d,CassPanelItem:b,CassDropdown:S,CassDropdownItem:D},computed:{getCreateUserGroupButtonTitle:function(){return this.amLoggedIn?"":"Must be logged in"},filteredAvailablePersonsForMembership:function(){var e=this;return this.availablePersonsForMembership.filter((function(s){return!e.currentUserGroupHasManager(s.shortId())&&!e.currentUserGroupHasMember(s.shortId())&&(s.getName()&&s.getName().toLowerCase().indexOf(e.addMemberPersonFilter.toLowerCase())>-1||s.email&&s.email.toLowerCase().indexOf(e.addMemberPersonFilter.toLowerCase())>-1)}))}},beforeRouteLeave:function(e,s,r){this.currentUserGroupChanged?this.saveWorkBeforeNav(e):r()},methods:{showMemberListView:function(){this.currentUserGroupNeedsRekey=!1,this.currentUserGroupIsManager=!1,this.isEditingCurrentGroupName=!1,this.isEditingCurrentGroupDescription=!1,this.currentUserGroup={},this.currentUserGroupId="",this.currentUserGroupManagers=[],this.currentUserGroupMembers=[],this.currentUserGroupName="",this.currentUserGroupDescription="",this.currentUserGroupLineage=[],this.currentUserGroupIsNewGroup=!1,this.currentUserGroupChanged=!1,this.viewMode="memberList"},showGroupDetailView:function(){this.viewMode="groupDetail"},setCurrentUserGroupAsChanged:function(){this.currentUserGroupChanged=!0},changeManagerToMember:function(e){this.currentUserGroupManagers=this.currentUserGroupManagers.filter((function(s){return s.shortId()!==e})),this.currentUserGroupMembers.push(this.allPersonMap[e]),this.currentUserGroupChanged=!0},changeMemberToManager:function(e){this.currentUserGroupMembers=this.currentUserGroupMembers.filter((function(s){return s.shortId()!==e})),this.currentUserGroupManagers.push(this.allPersonMap[e]),this.currentUserGroupChanged=!0},closeAddGroupMemberModal:function(){this.selectedNewMembers=[],this.selectedNewManagers=[],this.showAddMemberModal=!1},getPersonListFromIdList:function(e){var s,r=[],t=Object(i["a"])(e);try{for(t.s();!(s=t.n()).done;){var a=s.value,o=this.allPersonMap[a];o&&r.push(o)}}catch(n){t.e(n)}finally{t.f()}return r},removeFromSelectedNewMembers:function(e){this.selectedNewMembers=this.selectedNewMembers.filter((function(s){return s!==e}))},removeFromSelectedNewManagers:function(e){this.selectedNewManagers=this.selectedNewManagers.filter((function(s){return s!==e}))},currentUserGroupHasManager:function(e){var s,r=Object(i["a"])(this.currentUserGroupManagers);try{for(r.s();!(s=r.n()).done;){var t=s.value;if(t.shortId().equals(e))return!0}}catch(a){r.e(a)}finally{r.f()}return!1},currentUserGroupHasMember:function(e){var s,r=Object(i["a"])(this.currentUserGroupMembers);try{for(r.s();!(s=r.n()).done;){var t=s.value;if(t.shortId().equals(e))return!0}}catch(a){r.e(a)}finally{r.f()}return!1},buildAvailablePersonsForMembership:function(){var e=[];if(this.currentUserGroup.memberOf&&this.userGroupMap[this.currentUserGroup.memberOf]){var s=this.userGroupMap[this.currentUserGroup.memberOf];e=this.getPersonListFromIdList(s.employee)}else e=this.allPersonList;this.availablePersonsForMembership=e},showAddGroupMembersModal:function(){this.selectedNewMembers=[],this.selectedNewManagers=[],this.buildAvailablePersonsForMembership(),this.addMemberPersonFilter="",this.showAddMemberModal=!0},removePersonFromMembersToRemoveBuffer:function(e){this.membersToRemove=this.membersToRemove.filter((function(s){return s!==e}))},applySelectedNewMembersToCurrentUserGroup:function(){var e,s=Object(i["a"])(this.selectedNewMembers);try{for(s.s();!(e=s.n()).done;){var r=e.value;this.currentUserGroupMembers.push(this.allPersonMap[r]),this.removePersonFromMembersToRemoveBuffer(r)}}catch(n){s.e(n)}finally{s.f()}var t,a=Object(i["a"])(this.selectedNewManagers);try{for(a.s();!(t=a.n()).done;){var o=t.value;this.currentUserGroupManagers.push(this.allPersonMap[o]),this.removePersonFromMembersToRemoveBuffer(o)}}catch(n){a.e(n)}finally{a.f()}this.currentUserGroupChanged=!0,this.closeAddGroupMemberModal()},removeMemberFromCurrentUserGroup:function(e){this.membersToRemove.push(e),this.currentUserGroupManagers=this.currentUserGroupManagers.filter((function(s){return s.shortId()!==e})),this.currentUserGroupMembers=this.currentUserGroupMembers.filter((function(s){return s.shortId()!==e})),this.currentUserGroupChanged=!0},isPersonRemovableFromCurrentUserGroup:function(e){var s,r=this.getSubGroupIdsForUserGroup(this.currentUserGroupId),t=Object(i["a"])(r);try{for(t.s();!(s=t.n()).done;){var a=s.value,o=this.userGroupMap[a];if(o.employee.includes(e)&&!this.isPersonalIdentityAnObjectOwner(o))return!1}}catch(n){t.e(n)}finally{t.f()}return!0},closeDeleteGroupConfirmModal:function(){this.showConfirmDeleteUserGroupModal=!1},showDeleteCurrentUserGroupConfirmModal:function(){this.deleteConfirmNumberOfSubGroups=this.getSubGroupIdsForUserGroup(this.currentUserGroupId).length,this.showConfirmDeleteUserGroupModal=!0},addCurrentUserGroupSubGroupsToGroupsToDelete:function(){var e,s=this.getSubGroupIdsForUserGroup(this.currentUserGroupId),r=Object(i["a"])(s);try{for(r.s();!(e=r.n()).done;){var t=e.value;this.userGroupsToDelete.push(this.userGroupMap[t])}}catch(a){r.e(a)}finally{r.f()}},checkUserGroupDeleteStatus:function(){this.numberOfUserGroupsDeleted>=this.numberOfUserGroupsToDelete?this.buildUserGroupData():this.deleteUserGroup(this.numberOfUserGroupsDeleted)},handleDeleteUserGroupSuccess:function(){appLog("Delete user group success..."),this.numberOfUserGroupsDeleted++,this.checkUserGroupDeleteStatus()},handleDeleteUserGroupFailure:function(e){appLog("Delete user group failure: "+e),this.numberOfUserGroupsDeleted++,this.checkUserGroupDeleteStatus()},deleteUserGroup:function(e){var s=this.userGroupsToDelete[e];window.repo.deleteRegistered(s,this.handleDeleteUserGroupSuccess,this.handleDeleteUserGroupFailure)},deleteCurrentUserGroupAndSubGroups:function(){this.userGroupBusy=!0,this.showConfirmDeleteUserGroupModal=!1,this.userGroupsToDelete=[],this.numberOfUserGroupsDeleted=0,this.addCurrentUserGroupSubGroupsToGroupsToDelete(),this.userGroupsToDelete.push(this.currentUserGroup),this.numberOfUserGroupsToDelete=this.userGroupsToDelete.length,this.currentUserGroup.memberOf&&""!==this.currentUserGroup.memberOf?this.userGroupIdToShowAfterReload=this.currentUserGroup.memberOf:this.userGroupIdToShowAfterReload="",this.deleteUserGroup(0)},setCurrentUserGroupValidationsChecksToValid:function(){this.currentUserGroupInvalid=!1,this.currentUserGroupNameInvalid=!1,this.currentUserGroupDescriptionInvalid=!1},validateCurrentUserGroupFields:function(){this.setCurrentUserGroupValidationsChecksToValid(),this.currentUserGroupName&&!this.currentUserGroupName.trim().equals("")||(this.currentUserGroupInvalid=!0,this.currentUserGroupNameInvalid=!0),this.currentUserGroupDescription&&!this.currentUserGroupDescription.trim().equals("")||(this.currentUserGroupInvalid=!0,this.currentUserGroupDescriptionInvalid=!0)},checkUserGroupSaveStatus:function(){this.numberOfUserGroupsSaved>=this.numberOfUserGroupsToSave?(this.currentUserGroupChanged=!1,this.buildUserGroupData()):this.saveUserGroup(this.numberOfUserGroupsSaved)},handleSaveUserGroupSuccess:function(){appLog("Save user group success..."),this.numberOfUserGroupsSaved++,this.checkUserGroupSaveStatus()},handleSaveUserGroupFailure:function(e){appLog("Save user group failure: "+e),this.numberOfUserGroupsSaved++,this.checkUserGroupSaveStatus()},saveUserGroup:function(e){var s=this,r=this.userGroupsToSave[e];this.currentUserGroupNeedsRekey?(appLog("Calling group save with rekey: "+r.shortId()),setTimeout((function(){r.rekeyAndSave(s.handleSaveUserGroupSuccess,s.handleSaveUserGroupFailure,window.repo)}),300)):r.save(this.handleSaveUserGroupSuccess,this.handleSaveUserGroupFailure,window.repo)},updateCurrentUserGroupMemberList:function(){this.currentUserGroup.employee=[],this.currentUserGroup.owner=[],this.currentUserGroup.reader=[];var e,s=Object(i["a"])(this.currentUserGroupManagers);try{for(s.s();!(e=s.n()).done;){var r=e.value,t=this.getPersonEcPk(r);t&&(this.currentUserGroup.addEmployee(r),this.currentUserGroup.addOwner(t))}}catch(l){s.e(l)}finally{s.f()}var a,o=Object(i["a"])(this.currentUserGroupMembers);try{for(o.s();!(a=o.n()).done;){var n=a.value,u=this.getPersonEcPk(n);u&&(this.currentUserGroup.addEmployee(n),this.currentUserGroup.addReader(u))}}catch(l){o.e(l)}finally{o.f()}},pushRemovedMembersToSubGroupsForSave:function(){var e,s=[],r=Object(i["a"])(this.membersToRemove);try{for(r.s();!(e=r.n()).done;){var t=e.value,a=this.allPersonMap[t];if(a){var o=this.getPersonEcPk(a);if(o){var n,u=this.getSubGroupIdsForUserGroup(this.currentUserGroupId),l=Object(i["a"])(u);try{for(l.s();!(n=l.n()).done;){var c=n.value,p=this.userGroupMap[c];p&&this.isPersonalIdentityAnObjectOwner(p)&&p.employee.includes(t)&&(p.removeEmployeeById(t),p.removeOwner(o),p.removeReader(o),s.includes(p.shortId())||(this.userGroupsToSave.push(p),s.push(p.shortId())))}}catch(d){l.e(d)}finally{l.f()}}}}}catch(d){r.e(d)}finally{r.f()}},saveCurrentUserGroup:function(){this.validateCurrentUserGroupFields(),this.currentUserGroupInvalid||(this.userGroupBusy=!0,this.updateCurrentUserGroupMemberList(),this.currentUserGroup.name=this.currentUserGroupName,this.currentUserGroup.description=this.currentUserGroupDescription,this.userGroupIdToShowAfterReload=this.currentUserGroup.shortId(),this.userGroupsToSave=[],this.numberOfUserGroupsSaved=0,this.pushRemovedMembersToSubGroupsForSave(),this.currentUserGroupNeedsRekey=this.membersToRemove.length>0,this.userGroupsToSave.push(this.currentUserGroup),this.numberOfUserGroupsToSave=this.userGroupsToSave.length,this.saveUserGroup(0))},cancelCurrentUserGroupChanges:function(){this.currentUserGroupChanged=!1,this.currentUserGroupIsNewGroup?this.currentUserGroup.memberOf&&""!==this.currentUserGroup.memberOf?this.showGroupDetailsById(this.currentUserGroup.memberOf):this.showMemberListView():this.showGroupDetailsById(this.currentUserGroupId)},createNewUserGroup:function(e){var s=this;this.userGroupBusy=!0,this.currentUserGroupIsNewGroup=!0;var r=new EcOrganization;r.generateId(window.repo.selectedServer),r.setName("New User Group"),r.setDescription("New group of users"),r.employee=[],r.addEmployee(this.$store.state.user.loggedOnPerson),r.addOwner(this.getPersonalIdentityPk());var t=null;if(e){r.memberOf=e;var a=this.userGroupMap[e];t=this.buildUserGroupLineage(a,null)}setTimeout((function(){r.addOrgKey(EcPpk.generateKey()),s.showGroupDetails(r,t),s.userGroupBusy=!1}),300)},appendGroupSubGroupIdsToArray:function(e,s){var r=this.userGroupDisplayMap[e];if(r&&r.subGroups&&r.subGroups.length>0){var t,a=Object(i["a"])(r.subGroups);try{for(a.s();!(t=a.n()).done;){var o=t.value;s.push(o.id),this.appendGroupSubGroupIdsToArray(o.id,s)}}catch(n){a.e(n)}finally{a.f()}}},getSubGroupIdsForUserGroup:function(e){var s=[];return this.appendGroupSubGroupIdsToArray(e,s),s},createSubGroupForCurrentUserGroup:function(){this.createNewUserGroup(this.currentUserGroupId)},setCurrentUserGroupManagerAndUserListsForDetailView:function(){if(this.currentUserGroupManagers=[],this.currentUserGroupMembers=[],this.currentUserGroup.employee){var e,s=Object(i["a"])(this.currentUserGroup.employee);try{for(s.s();!(e=s.n()).done;){var r=e.value,t=this.allPersonMap[r];t&&(this.isPersonIdAnObjectOwner(r,this.currentUserGroup)&&this.currentUserGroupManagers.push(t),this.isPersonIdAnObjectReader(r,this.currentUserGroup)&&this.currentUserGroupMembers.push(t))}}catch(a){s.e(a)}finally{s.f()}}},generateLineageObject:function(e){var s={};return s.name=e.getName(),s.id=e.shortId(),s},fillOutLineage:function(e,s){s&&(e.unshift(this.generateLineageObject(s)),s.memberOf&&""!==s.memberOf&&this.fillOutLineage(e,this.userGroupMap[s.memberOf]))},buildUserGroupLineage:function(e,s){var r=[];return s?(r=s,r.push(this.generateLineageObject(e))):this.fillOutLineage(r,e),r},showGroupDetails:function(e,s){e&&(this.membersToRemove=[],this.userGroupsToSave=[],this.userGroupsToDelete=[],this.setCurrentUserGroupValidationsChecksToValid(),this.currentUserGroupChanged=this.currentUserGroupIsNewGroup,this.currentUserGroup=e,this.currentUserGroupId=e.shortId(),this.currentUserGroupNeedsRekey=!1,this.isEditingCurrentGroupName=!1,this.isEditingCurrentGroupDescription=!1,this.currentUserGroupName=this.currentUserGroup.getName(),this.currentUserGroupDescription=this.currentUserGroup.getDescription(),this.currentUserGroupIsManager=this.doesAnyIdentityOwnObject(this.currentUserGroup),this.setCurrentUserGroupManagerAndUserListsForDetailView(),this.currentUserGroupLineage=this.buildUserGroupLineage(this.currentUserGroup,s),this.showGroupDetailView())},showGroupDetailsById:function(e){this.currentUserGroupChanged?this.showModal(e):(this.switchUserGroupDetailsById(e),this.groupsDropdownActive=!1)},switchUserGroupDetailsById:function(e){var s=this.userGroupMap[e];s?(this.currentUserGroupIsNewGroup=!1,this.showGroupDetails(s,null),this.groupsDropdownActive=!1):appLog("Cannot find user group: "+e)},saveWorkBeforeNav:function(e){var s=this,r={};appLog("modal"),r={type:"removeObject",selectedExportOption:"",title:"Discard unsaved changes?",text:"You have unsaved changes.  Cancel to return to group and save changes, or confirm to discard changes.",onConfirm:function(){return s.currentUserGroupChanged=!1,s.$router.push(e.name)}},this.$modal.show(r)},showModal:function(e){var s=this,r={};appLog("modal"),r={type:"removeObject",selectedExportOption:"",title:"Discard unsaved changes?",text:"You have unsaved changes.  Cancel to return to group and save changes, or confirm to discard changes.",onConfirm:function(){return s.switchUserGroupDetailsById(e)}},this.$modal.show(r)},sortUserGroupList:function(e){var s=this;e.sort((function(e,r){var t=s.doesAnyIdentityOwnObject(e),a=s.doesAnyIdentityOwnObject(r);return t!==a?a?1:-1:e.getName()>r.getName()?1:r.getName()>e.getName()?-1:0}))},buildUserGroupMap:function(e){this.userGroupMap={};var s,r=Object(i["a"])(e);try{for(r.s();!(s=r.n()).done;){var t=s.value;this.userGroupMap[t.shortId()]=t}}catch(a){r.e(a)}finally{r.f()}},buildUserGroupDisplayObjects:function(e){var s,r={doMap:{},doList:[]},t=Object(i["a"])(e);try{for(t.s();!(s=t.n()).done;){var a=s.value,o={};o.id=a.shortId(),o.name=a.getName(),a.memberOf&&""!==a.memberOf&&this.userGroupMap[a.memberOf]&&(o.memberOf=a.memberOf),o.subGroups=[],r.doMap[o.id]=o,r.doList.push(o)}}catch(n){t.e(n)}finally{t.f()}return r},assignUserGroupDisplayObjectsSubGroups:function(e){var s,r=Object(i["a"])(e.doList);try{for(r.s();!(s=r.n()).done;){var t=s.value;t.memberOf&&e.doMap[t.memberOf].subGroups.push(t)}}catch(a){r.e(a)}finally{r.f()}},addRootUserGroupsToUserGroupDisplayList:function(e){var s,r=Object(i["a"])(e.doList);try{for(r.s();!(s=r.n()).done;){var t=s.value;t.memberOf||this.userGroupDisplayList.push(t)}}catch(a){r.e(a)}finally{r.f()}},buildUserGroupDisplayList:function(e){this.userGroupDisplayList=[],this.userGroupDisplayMap={};var s=this.buildUserGroupDisplayObjects(e);this.assignUserGroupDisplayObjectsSubGroups(s),this.addRootUserGroupsToUserGroupDisplayList(s),this.userGroupDisplayMap=s.doMap},buildInitialGroupMembersDisplayData:function(){var e,s={gmList:[],gmMap:{}},r=Object(i["a"])(this.allPersonList);try{for(r.s();!(e=r.n()).done;){var t=e.value,a={};a.name=t.getName(),a.email=t.email,a.managerOf=[],a.memberOf=[],s.gmList.push(a),s.gmMap[t.getFingerprint()]=a}}catch(o){r.e(o)}finally{r.f()}return s},addMembershipData:function(e,s,r,t){if(r){var a,o=Object(i["a"])(r);try{for(o.s();!(a=o.n()).done;){var n=a.value,u=EcPk.fromPem(n).fingerprint();if(e[u]){var l={};l.name=t.getName(),l.id=t.shortId(),e[u][s].push(l)}}}catch(c){o.e(c)}finally{o.f()}}},fillOutMembershipData:function(e){for(var s=0,r=Object.keys(this.userGroupMap);s<r.length;s++){var t=r[s],a=this.userGroupMap[t];this.addMembershipData(e.gmMap,"managerOf",a.owner,a),this.addMembershipData(e.gmMap,"memberOf",a.reader,a)}},filterOutNonMembers:function(e){var s,r=Object(i["a"])(e.gmList);try{for(r.s();!(s=r.n()).done;){var t=s.value;(t.managerOf.length>0||t.memberOf.length>0)&&this.allGroupMembersList.push(t)}}catch(a){r.e(a)}finally{r.f()}},sortMembershipData:function(e){e.sort((function(e,s){return e.name>s.name?1:-1}))},sortGroupMemberListMembershipData:function(){var e,s=Object(i["a"])(this.allGroupMembersList);try{for(s.s();!(e=s.n()).done;){var r=e.value;this.sortMembershipData(r.managerOf),this.sortMembershipData(r.memberOf)}}catch(t){s.e(t)}finally{s.f()}},buildGroupMembersDisplayList:function(){this.allGroupMembersList=[];var e=this.buildInitialGroupMembersDisplayData();this.fillOutMembershipData(e),this.filterOutNonMembers(e),this.sortGroupMemberListMembershipData()},searchRepositoryForGroupsSuccess:function(e){var s=[];if(e&&e.length>0&&(s=e,this.sortUserGroupList(s)),this.buildUserGroupMap(s),this.buildUserGroupDisplayList(s),this.buildGroupMembersDisplayList(),this.userGroupIdToShowAfterReload&&this.userGroupIdToShowAfterReload.trim().length>0&&this.userGroupMap[this.userGroupIdToShowAfterReload]){var r=this.userGroupIdToShowAfterReload;this.userGroupIdToShowAfterReload="",this.showGroupDetailsById(r)}else this.showMemberListView();this.userGroupBusy=!1},searchRepositoryForGroupsFailure:function(e){appLog("Group search failure: "+e),this.userGroupBusy=!1},buildGroupListData:function(){var e={};e.size=this.GROUP_SEARCH_SIZE,EcOrganization.search(window.repo,"",this.searchRepositoryForGroupsSuccess,this.searchRepositoryForGroupsFailure,e)},sortAllPersonList:function(){this.allPersonList.sort((function(e,s){return e.getName()>s.getName()?1:s.getName()>e.getName()?-1:0}))},buildAllPersonMap:function(){this.allPersonMap={};var e,s=Object(i["a"])(this.allPersonList);try{for(s.s();!(e=s.n()).done;){var r=e.value;this.allPersonMap[r.shortId()]=r}}catch(t){s.e(t)}finally{s.f()}},fetchPersonListForDetailViewSuccess:function(e){this.allPersonList=e,this.sortAllPersonList(),this.buildAllPersonMap(),this.buildGroupListData()},fetchPersonListForDetailViewFailure:function(e){appLog("Person search failure: "+e),this.userGroupBusy=!1},buildUserGroupData:function(){this.userGroupBusy=!0;var e={};e.size=this.PERSON_SEARCH_SIZE,EcPerson.search(window.repo,"",this.fetchPersonListForDetailViewSuccess,this.fetchPersonListForDetailViewFailure,e)}},mounted:function(){this.buildUserGroupData()}},P=L,A=(r("7685"),Object(c["a"])(P,t,a,!1,null,null,null));s["default"]=A.exports},5883:function(e,s,r){},"61e0":function(e,s,r){"use strict";var t=r("334a"),a=r.n(t);a.a},7685:function(e,s,r){"use strict";var t=r("5883"),a=r.n(t);a.a},"8fdc":function(e,s,r){},df2f:function(e,s,r){},f7ca:function(e,s,r){"use strict";var t=r("df2f"),a=r.n(t);a.a}}]);
//# sourceMappingURL=userGroupEditor.2a97df3f.js.map