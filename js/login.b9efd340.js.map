{"version":3,"sources":["webpack:///./src/views/login/LegacyLogin.vue?cb17","webpack:///./src/views/login/CreateAccount.vue?1de3","webpack:///src/views/login/CreateAccount.vue","webpack:///./src/views/login/CreateAccount.vue?b1ad","webpack:///./src/views/login/CreateAccount.vue","webpack:///./src/views/login/CreateAccount.vue?0ea6","webpack:///./src/views/login/LegacyLogin.vue?517e","webpack:///src/views/login/LegacyLogin.vue","webpack:///./src/views/login/LegacyLogin.vue?4e15","webpack:///./src/views/login/LegacyLogin.vue","webpack:///./src/views/login/Login.vue?03bc","webpack:///src/views/login/Login.vue","webpack:///./src/views/login/Login.vue?bdde","webpack:///./src/views/login/Login.vue","webpack:///./src/mixins/cassApi.js","webpack:///./src/views/login/Login.vue?1570"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","class","createAccountBusy","_m","userCreated","createUserServerError","_e","_v","directives","name","rawName","value","expression","domProps","on","$event","target","composing","inputFirstName","inputLastName","inputEmail","inputUserName","inputPassword","inputPasswordConfirm","goToLogin","attemptAccountCreate","staticRenderFns","component","loginBusy","amCreatingAccount","amCreatingLinkedPerson","username","type","indexOf","_k","keyCode","key","attemptCassLogin","password","createLinkPersonName","createLinkPersonEmail","createAccountUsername","createAccountPassword","createAccountPasswordRetype","identityFetchFailed","configRetrieveFailed","loginParamsInvalid","_s","identityFailMsg","configFailMsg","setDataToBaseLogin","apiLoginEnabled","showCreateAccount","createNewAccount","linkPerson","goToStandardLogin","attemptExternalCassLogin","goToCreateAccount","goToLegacyLogin","cassApi","data","USER_PROFILE_SERVICE","USER_CREATE_SERVICE","USER_LOGIN_SERVICE","USER_LOGOUT_SERVICE","LOGOUT_REDIRECT_URL","window","location","origin","methods","parseCredentialsFromProfileResponse","profileResponse","pro","JSON","parse","responseText","credentials","email","performCreateUser","userInfo","responseCallback","oReq","XMLHttpRequest","addEventListener","x","currentTarget","withCredentials","serviceEndpoint","cassApiLocation","open","setRequestHeader","send","stringify","firstName","lastName","getUserProfile","redirectToExternalLoginPage","appLog","encodeURIComponent","$router","push","path","checkExternalLogoutStatus","logoutResponse","status","performExternalLogout","performApplicationLogout","EcIdentityManager","clearContacts","clearIdentities","clearPerson","$store","commit","addQueryParams","paramObj","getters","keys","EcObject","length","toAdd","each","val","EcArray","isArray","i","computed"],"mappings":"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","file":"js/login.b9efd340.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LegacyLogin.vue?vue&type=style&index=0&id=0bae2bec&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LegacyLogin.vue?vue&type=style&index=0&id=0bae2bec&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"section is-large\",attrs:{\"id\":\"createAccount\"}},[_c('div',{staticClass:\"modal\",class:[{'is-active': _vm.createAccountBusy}]},[_c('div',{staticClass:\"modal-background\"}),_vm._m(0)]),(!_vm.createAccountBusy && !_vm.userCreated && !_vm.createUserServerError)?_c('div',{staticClass:\"modal is-active\"},[_c('div',{staticClass:\"modal-card\"},[_vm._m(1),_c('section',{staticClass:\"modal-card-body\"},[_c('div',{staticClass:\"section\"},[_c('div',{staticClass:\"field\"},[_c('div',{staticClass:\"control\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"first name\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputFirstName),expression:\"inputFirstName\"}],staticClass:\"input\",attrs:{\"type\":\"text \"},domProps:{\"value\":(_vm.inputFirstName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.inputFirstName=$event.target.value}}})])]),_c('div',{staticClass:\"field\"},[_c('div',{staticClass:\"control\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"last name\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputLastName),expression:\"inputLastName\"}],staticClass:\"input\",attrs:{\"type\":\"text \"},domProps:{\"value\":(_vm.inputLastName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.inputLastName=$event.target.value}}})])]),_c('div',{staticClass:\"field\"},[_c('div',{staticClass:\"control\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"email\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputEmail),expression:\"inputEmail\"}],staticClass:\"input\",attrs:{\"type\":\"text \"},domProps:{\"value\":(_vm.inputEmail)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.inputEmail=$event.target.value}}})])]),_c('div',{staticClass:\"field\"},[_c('div',{staticClass:\"control\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"username\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputUserName),expression:\"inputUserName\"}],staticClass:\"input\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.inputUserName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.inputUserName=$event.target.value}}})])]),_c('div',{staticClass:\"field is-grouped\"},[_c('div',{staticClass:\"control is-expanded\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"password\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputPassword),expression:\"inputPassword\"}],staticClass:\"input\",attrs:{\"type\":\"password\"},domProps:{\"value\":(_vm.inputPassword)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.inputPassword=$event.target.value}}})]),_c('div',{staticClass:\"control is-expanded\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"confirm password\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputPasswordConfirm),expression:\"inputPasswordConfirm\"}],staticClass:\"input\",attrs:{\"type\":\"password\"},domProps:{\"value\":(_vm.inputPasswordConfirm)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.inputPasswordConfirm=$event.target.value}}})])])]),(_vm.createAccountInvalid)?_c('div',{staticClass:\"field has-text-danger\"},[_c('div',{staticClass:\"label has-text-danger\"},[_vm._v(\" Please correct the following errors: \")]),(_vm.usernameInvalid)?_c('div',{staticClass:\"is-size-6\"},[_vm._v(\" Username is required \")]):_vm._e(),(_vm.passwordInvalid)?_c('div',{staticClass:\"is-size-6\"},[_vm._v(\" Password is required \")]):_vm._e(),(_vm.passwordMismatch)?_c('div',{staticClass:\"is-size-6\"},[_vm._v(\" Passwords do not match \")]):_vm._e(),(_vm.firstNameInvalid)?_c('div',{staticClass:\"is-size-6\"},[_vm._v(\" First Name is required \")]):_vm._e(),(_vm.lastNameInvalid)?_c('div',{staticClass:\"is-size-6\"},[_vm._v(\" Last Name is required \")]):_vm._e(),(_vm.emailInvalid)?_c('div',{staticClass:\"is-size-6\"},[_vm._v(\" Valid email is required \")]):_vm._e(),(_vm.emailUnavailable)?_c('div',{staticClass:\"is-size-6\"},[_vm._v(\" That email is unavailable \")]):_vm._e(),(_vm.usernameUnavailable)?_c('div',{staticClass:\"is-size-6\"},[_vm._v(\" That username is unavailable \")]):_vm._e()]):_vm._e()]),_c('footer',{staticClass:\"modal-card-foot has-background-white\"},[_c('div',{staticClass:\"buttons is-spaced\"},[_c('div',{staticClass:\"button is-dark is-outlined\",on:{\"click\":_vm.goToLogin}},[_vm._m(2),_c('span',[_vm._v(\"cancel\")])]),_c('div',{staticClass:\"button is-dark is-primary\",on:{\"click\":_vm.attemptAccountCreate}},[_vm._m(3),_c('span',[_vm._v(\"create\")])])])])])]):_vm._e(),(!_vm.createAccountBusy && _vm.userCreated)?_c('div',{staticClass:\"modal is-active\"},[_c('div',{staticClass:\"modal-card\"},[_vm._m(4),_vm._m(5),_c('footer',{staticClass:\"modal-card-foot has-background-white\"},[_c('div',{staticClass:\"buttons is-spaced\"},[_c('div',{staticClass:\"button is-dark is-outlined\",on:{\"click\":_vm.goToLogin}},[_vm._m(6),_c('span',[_vm._v(\"ok\")])])])])])]):_vm._e(),(!_vm.createAccountBusy && _vm.createUserServerError)?_c('div',{staticClass:\"modal is-active\"},[_c('div',{staticClass:\"modal-card\"},[_vm._m(7),_vm._m(8),_c('footer',{staticClass:\"modal-card-foot has-background-white\"},[_c('div',{staticClass:\"buttons is-spaced\"},[_c('div',{staticClass:\"button is-dark is-outlined\",on:{\"click\":_vm.goToLogin}},[_vm._m(9),_c('span',[_vm._v(\"ok\")])])])])])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-content has-text-centered\"},[_c('span',{staticClass:\"icon is-large has-text-center has-text-link\"},[_c('i',{staticClass:\"fas fa-2x fa-spinner is-info fa-pulse\"})])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',{staticClass:\"modal-card-head has-text-centered has-background-primary\"},[_c('h3',{staticClass:\"modal-card-title is-size-2 has-text-centered has-text-white\"},[_vm._v(\" Create CaSS Account \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fa fa-times\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fa fa-sign-in-alt\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',{staticClass:\"modal-card-head has-text-centered has-background-success\"},[_c('h3',{staticClass:\"modal-card-title is-size-2 has-text-centered has-text-white\"},[_vm._v(\" Account Created \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"modal-card-body\"},[_c('p',[_vm._v(\"Your account has been successfully created. Please return to the login screen.\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fa fa-times\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',{staticClass:\"modal-card-head has-text-centered has-background-danger\"},[_c('h3',{staticClass:\"modal-card-title is-size-2 has-text-centered has-text-white\"},[_vm._v(\" Could Not Create Account \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"modal-card-body\"},[_c('p',[_vm._v(\"There was an error when attempting to create your account. Please contact the system administrator.\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fa fa-times\"})])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div\r\n        id=\"createAccount\"\r\n        class=\"section is-large\">\r\n        <!-- busy modal-->\r\n        <div\r\n            class=\"modal\"\r\n            :class=\"[{'is-active': createAccountBusy}]\">\r\n            <div class=\"modal-background\" />\r\n            <div class=\"modal-content has-text-centered\">\r\n                <span class=\"icon is-large has-text-center has-text-link\">\r\n                    <i class=\"fas fa-2x fa-spinner is-info fa-pulse\" />\r\n                </span>\r\n            </div>\r\n        </div>\r\n        <!-- create account content-->\r\n        <div\r\n            v-if=\"!createAccountBusy && !userCreated && !createUserServerError\"\r\n            class=\"modal is-active\">\r\n            <div class=\"modal-card\">\r\n                <header class=\"modal-card-head has-text-centered has-background-primary\">\r\n                    <h3 class=\"modal-card-title is-size-2 has-text-centered has-text-white\">\r\n                        Create CaSS Account\r\n                    </h3>\r\n                </header>\r\n                <section class=\"modal-card-body\">\r\n                    <!-- inputs -->\r\n                    <div class=\"section\">\r\n                        <div class=\"field\">\r\n                            <div class=\"control\">\r\n                                <label class=\"label\">first name</label>\r\n                                <input\r\n                                    class=\"input\"\r\n                                    type=\"text \"\r\n                                    v-model=\"inputFirstName\">\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"field\">\r\n                            <div class=\"control\">\r\n                                <label class=\"label\">last name</label>\r\n                                <input\r\n                                    class=\"input\"\r\n                                    type=\"text \"\r\n                                    v-model=\"inputLastName\">\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"field\">\r\n                            <div class=\"control\">\r\n                                <label class=\"label\">email</label>\r\n                                <input\r\n                                    class=\"input\"\r\n                                    type=\"text \"\r\n                                    v-model=\"inputEmail\">\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"field\">\r\n                            <div class=\"control\">\r\n                                <label class=\"label\">username</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    class=\"input\"\r\n                                    v-model=\"inputUserName\">\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"field is-grouped\">\r\n                            <div class=\"control is-expanded\">\r\n                                <label class=\"label\">password</label>\r\n                                <input\r\n                                    type=\"password\"\r\n                                    class=\"input\"\r\n                                    v-model=\"inputPassword\">\r\n                            </div>\r\n                            <div class=\"control is-expanded\">\r\n                                <label class=\"label\">confirm password</label>\r\n                                <input\r\n                                    class=\"input\"\r\n                                    type=\"password\"\r\n                                    v-model=\"inputPasswordConfirm\">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <!-- error messages -->\r\n                    <div\r\n                        class=\"field has-text-danger\"\r\n                        v-if=\"createAccountInvalid\">\r\n                        <div class=\"label has-text-danger\">\r\n                            Please correct the following errors:\r\n                        </div>\r\n                        <div\r\n                            class=\"is-size-6\"\r\n                            v-if=\"usernameInvalid\">\r\n                            Username is required\r\n                        </div>\r\n                        <div\r\n                            class=\"is-size-6\"\r\n                            v-if=\"passwordInvalid\">\r\n                            Password is required\r\n                        </div>\r\n                        <div\r\n                            class=\"is-size-6\"\r\n                            v-if=\"passwordMismatch\">\r\n                            Passwords do not match\r\n                        </div>\r\n                        <div\r\n                            class=\"is-size-6\"\r\n                            v-if=\"firstNameInvalid\">\r\n                            First Name is required\r\n                        </div>\r\n                        <div\r\n                            class=\"is-size-6\"\r\n                            v-if=\"lastNameInvalid\">\r\n                            Last Name is required\r\n                        </div>\r\n                        <div\r\n                            class=\"is-size-6\"\r\n                            v-if=\"emailInvalid\">\r\n                            Valid email is required\r\n                        </div>\r\n                        <div\r\n                            class=\"is-size-6\"\r\n                            v-if=\"emailUnavailable\">\r\n                            That email is unavailable\r\n                        </div>\r\n                        <div\r\n                            class=\"is-size-6\"\r\n                            v-if=\"usernameUnavailable\">\r\n                            That username is unavailable\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n                <footer class=\"modal-card-foot has-background-white\">\r\n                    <div class=\"buttons is-spaced\">\r\n                        <div\r\n                            class=\"button is-dark is-outlined\"\r\n                            @click=\"goToLogin\">\r\n                            <span class=\"icon\">\r\n                                <i class=\"fa fa-times\" />\r\n                            </span><span>cancel</span>\r\n                        </div>\r\n                        <div\r\n                            class=\"button is-dark is-primary\"\r\n                            @click=\"attemptAccountCreate\">\r\n                            <span class=\"icon\">\r\n                                <i class=\"fa fa-sign-in-alt\" />\r\n                            </span><span>create</span>\r\n                        </div>\r\n                    </div>\r\n                </footer>\r\n            </div>\r\n        </div>\r\n        <!-- create account notification-->\r\n        <div\r\n            v-if=\"!createAccountBusy && userCreated\"\r\n            class=\"modal is-active\">\r\n            <div class=\"modal-card\">\r\n                <header class=\"modal-card-head has-text-centered has-background-success\">\r\n                    <h3 class=\"modal-card-title is-size-2 has-text-centered has-text-white\">\r\n                        Account Created\r\n                    </h3>\r\n                </header>\r\n                <section class=\"modal-card-body\">\r\n                    <p>Your account has been successfully created.  Please return to the login screen.</p>\r\n                </section>\r\n                <footer class=\"modal-card-foot has-background-white\">\r\n                    <div class=\"buttons is-spaced\">\r\n                        <div\r\n                            class=\"button is-dark is-outlined\"\r\n                            @click=\"goToLogin\">\r\n                            <span class=\"icon\">\r\n                                <i class=\"fa fa-times\" />\r\n                            </span><span>ok</span>\r\n                        </div>\r\n                    </div>\r\n                </footer>\r\n            </div>\r\n        </div>\r\n        <!-- create account server error-->\r\n        <div\r\n            v-if=\"!createAccountBusy && createUserServerError\"\r\n            class=\"modal is-active\">\r\n            <div class=\"modal-card\">\r\n                <header class=\"modal-card-head has-text-centered has-background-danger\">\r\n                    <h3 class=\"modal-card-title is-size-2 has-text-centered has-text-white\">\r\n                        Could Not Create Account\r\n                    </h3>\r\n                </header>\r\n                <section class=\"modal-card-body\">\r\n                    <p>There was an error when attempting to create your account.  Please contact the system administrator.</p>\r\n                </section>\r\n                <footer class=\"modal-card-foot has-background-white\">\r\n                    <div class=\"buttons is-spaced\">\r\n                        <div\r\n                            class=\"button is-dark is-outlined\"\r\n                            @click=\"goToLogin\">\r\n                            <span class=\"icon\">\r\n                                <i class=\"fa fa-times\" />\r\n                            </span><span>ok</span>\r\n                        </div>\r\n                    </div>\r\n                </footer>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {cassApi} from '../../mixins/cassApi';\r\n\r\nexport default {\r\n    name: 'CreateAccount',\r\n    mixins: [cassApi],\r\n    data: () => ({\r\n        PERSON_SEARCH_SIZE: 10000,\r\n        createAccountBusy: false,\r\n        createAccountInvalid: false,\r\n        inputFirstName: '',\r\n        inputLastName: '',\r\n        inputUserName: '',\r\n        inputEmail: '',\r\n        inputPassword: '',\r\n        inputPasswordConfirm: '',\r\n        usernameInvalid: false,\r\n        usernameUnavailable: false,\r\n        passwordInvalid: false,\r\n        passwordMismatch: false,\r\n        firstNameInvalid: false,\r\n        lastNameInvalid: false,\r\n        emailInvalid: false,\r\n        emailUnavailable: false,\r\n        ecRemoteIdentMgr: null,\r\n        userCreated: false,\r\n        createUserServerError: false\r\n    }),\r\n    methods: {\r\n        setAllNewAccountValidationsChecksToValid() {\r\n            this.createAccountInvalid = false;\r\n            this.usernameInvalid = false;\r\n            this.usernameUnavailable = false;\r\n            this.passwordInvalid = false;\r\n            this.passwordMismatch = false;\r\n            this.firstNameInvalid = false;\r\n            this.lastNameInvalid = false;\r\n            this.emailInvalid = false;\r\n            this.emailUnavailable = false;\r\n        },\r\n        isValidEmail(email) {\r\n            let re = /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/igm;\r\n            if (re.test(email)) return true;\r\n            return false;\r\n        },\r\n        validateNewAccountData() {\r\n            if (!this.inputUserName || this.inputUserName.trim().equals('')) {\r\n                this.createAccountInvalid = true;\r\n                this.usernameInvalid = true;\r\n            }\r\n            if (!this.inputPassword || this.inputPassword.trim().equals('') ||\r\n                !this.inputPasswordConfirm || this.inputPasswordConfirm.trim().equals('')) {\r\n                this.createAccountInvalid = true;\r\n                this.passwordInvalid = true;\r\n            } else if (!this.inputPassword.equals(this.inputPasswordConfirm)) {\r\n                this.createAccountInvalid = true;\r\n                this.passwordMismatch = true;\r\n            }\r\n            if (!this.inputFirstName || this.inputFirstName.trim().equals('')) {\r\n                this.createAccountInvalid = true;\r\n                this.firstNameInvalid = true;\r\n            }\r\n            if (!this.inputLastName || this.inputLastName.trim().equals('')) {\r\n                this.createAccountInvalid = true;\r\n                this.lastNameInvalid = true;\r\n            }\r\n            if (!this.inputEmail || this.inputEmail.trim().equals('') || !this.isValidEmail(this.inputEmail)) {\r\n                this.createAccountInvalid = true;\r\n                this.emailInvalid = true;\r\n            }\r\n        },\r\n        checkCreateUserRequestStatus: function(createUserResponse) {\r\n            if (createUserResponse.status === 409) {\r\n                this.createAccountInvalid = true;\r\n                this.usernameUnavailable = true;\r\n                this.createUserServerError = false;\r\n                this.userCreated = false;\r\n            } else if (createUserResponse.status === 503) {\r\n                this.createUserServerError = true;\r\n                this.userCreated = false;\r\n            } else if (createUserResponse.status === 200) {\r\n                this.createUserServerError = false;\r\n                this.userCreated = true;\r\n            } else {\r\n                appLog('Unexpected create user response status: ' + createUserResponse.status);\r\n            }\r\n            this.createAccountBusy = false;\r\n        },\r\n        buildUserInfoObject: function() {\r\n            let userInfo = {};\r\n            userInfo.firstName = this.inputFirstName;\r\n            userInfo.lastName = this.inputLastName;\r\n            userInfo.username = this.inputUserName;\r\n            userInfo.password = this.inputPassword;\r\n            userInfo.email = this.inputEmail;\r\n            return userInfo;\r\n        },\r\n        performAccountCreation: function() {\r\n            this.performCreateUser(this.buildUserInfoObject(), this.checkCreateUserRequestStatus);\r\n        },\r\n        handleCheckUsernameFetchIdentitySuccess: function(obj) {\r\n            this.createAccountInvalid = true;\r\n            this.usernameUnavailable = true;\r\n            this.createAccountBusy = false;\r\n            EcIdentityManager.clearIdentities();\r\n            EcIdentityManager.clearContacts();\r\n        },\r\n        handleCheckUsernameFetchIdentityFailure: function(failMsg) {\r\n            if (failMsg && failMsg.toLowerCase().trim().equals('user does not exist.')) {\r\n                this.performAccountCreation();\r\n            } else {\r\n                this.createAccountInvalid = true;\r\n                this.usernameUnavailable = true;\r\n                this.createAccountBusy = false;\r\n                EcIdentityManager.clearIdentities();\r\n                EcIdentityManager.clearContacts();\r\n            }\r\n        },\r\n        handleCheckUsernameConfigureFromServerSuccess: function(obj) {\r\n            appLog(\"Fetching identity for username check...\");\r\n            // Creates the hashes for storage and retrieval of keys.\r\n            this.ecRemoteIdentMgr.startLogin(this.inputUserName, this.inputPassword);\r\n            // Retrieves the identities and encryption keys from the server.\r\n            this.ecRemoteIdentMgr.fetch(this.handleCheckUsernameFetchIdentitySuccess, this.handleCheckUsernameFetchIdentityFailure);\r\n        },\r\n        handleCheckUsernameConfigureFromServerFail: function(failMsg) {\r\n            this.createAccountBusy = false;\r\n            appLog('New account configure from server for username check failure: ' + msg);\r\n        },\r\n        checkForExistingUsername: function() {\r\n            appLog(\"Check if new account username already exists\");\r\n            this.ecRemoteIdentMgr = new EcRemoteIdentityManager();\r\n            this.ecRemoteIdentMgr.server = window.repo.selectedServer;\r\n            // Retrieves username and password salts from the serve\r\n            this.ecRemoteIdentMgr.configureFromServer(this.handleCheckUsernameConfigureFromServerSuccess, this.handleCheckUsernameConfigureFromServerFail);\r\n        },\r\n        searchPersonsForNewAccountSuccess(ecRemoteLda) {\r\n            appLog(\"New account person search success: \");\r\n            appLog(ecRemoteLda);\r\n            let emailExists = false;\r\n            for (let ecrld of ecRemoteLda) {\r\n                let ep = new EcPerson();\r\n                ep.copyFrom(ecrld);\r\n                if (this.inputEmail.equalsIgnoreCase(ep.email)) {\r\n                    emailExists = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (emailExists) {\r\n                this.createAccountInvalid = true;\r\n                this.emailUnavailable = true;\r\n                this.createAccountBusy = false;\r\n            } else this.checkForExistingUsername();\r\n        },\r\n        searchPersonsForNewAccountFailure(msg) {\r\n            // Search fails if the index doesn't exist yet.\r\n            this.checkForExistingUsername();\r\n        },\r\n        verifyEmailAddressForNewAccountAndGo() {\r\n            this.createAccountBusy = true;\r\n            let paramObj = {};\r\n            paramObj.size = this.PERSON_SEARCH_SIZE;\r\n            window.repo.searchWithParams(\"@type:Person AND email:\\\"\" + this.inputEmail + \"\\\"\", paramObj, null,\r\n                this.searchPersonsForNewAccountSuccess, this.searchPersonsForNewAccountFailure);\r\n        },\r\n        attemptAccountCreate() {\r\n            this.setAllNewAccountValidationsChecksToValid();\r\n            this.validateNewAccountData();\r\n            if (!this.createAccountInvalid) this.verifyEmailAddressForNewAccountAndGo();\r\n        },\r\n        goToLogin() {\r\n            this.createAccountBusy = false;\r\n            this.$router.push({path: '/login'});\r\n        }\r\n    },\r\n    mounted() {\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    @import '@/scss/variables.scss';\r\n    #createAccount {\r\n        position: fixed;\r\n        background-color: $light;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        height: 100vh;\r\n        width: 100vw;\r\n        .container {\r\n            height: 100%;\r\n        }\r\n        .columns {\r\n            height: 100%;\r\n        }\r\n        .container {\r\n        }\r\n        .modal-card {\r\n            width: 600px;\r\n            max-width: calc(100% - 1rem);\r\n        }\r\n        .card {\r\n            border-radius: 10px;\r\n            .card-header {\r\n                border-radius: 10px 10px 0px 0px;\r\n            }\r\n        }\r\n    }\r\n\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateAccount.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateAccount.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CreateAccount.vue?vue&type=template&id=2f1e5db8&scoped=true&\"\nimport script from \"./CreateAccount.vue?vue&type=script&lang=js&\"\nexport * from \"./CreateAccount.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CreateAccount.vue?vue&type=style&index=0&id=2f1e5db8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2f1e5db8\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateAccount.vue?vue&type=style&index=0&id=2f1e5db8&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateAccount.vue?vue&type=style&index=0&id=2f1e5db8&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"section is-large\",attrs:{\"id\":\"login\"}},[_c('div',{staticClass:\"modal\",class:[{'is-active': _vm.loginBusy}]},[_c('div',{staticClass:\"modal-background\"}),_vm._m(0)]),(!_vm.loginBusy)?_c('div',{staticClass:\"modal is-active\"},[_c('div',{staticClass:\"modal-card\"},[(!_vm.loginBusy)?_c('header',{staticClass:\"modal-card-head has-text-centered has-background-primary\"},[(_vm.amJustLoggingIn)?_c('h3',{staticClass:\"modal-card-title is-size-2 has-text-centered has-text-white\"},[_vm._v(\" Login to CaSS Authoring Tool \")]):_vm._e(),(_vm.amCreatingAccount)?_c('h3',{staticClass:\"modal-card-title is-size-2 has-text-centered has-text-white\"},[_vm._v(\" Create CaSS Authoring Tool User \")]):_vm._e(),(_vm.amCreatingLinkedPerson)?_c('h4',{staticClass:\"title is-size-2 has-text-centered has-text-white\"},[_vm._v(\" Link User Information \")]):_vm._e()]):_vm._e(),_c('section',{staticClass:\"modal-card-body\"},[(_vm.amCreatingAccount || _vm.amCreatingLinkedPerson)?_c('div',{staticClass:\"section\"},[(_vm.amCreatingLinkedPerson)?_c('p',[_vm._v(\" No matching user record could be found that matched your login information. Please provide the following: \")]):_vm._e()]):_vm._e(),(_vm.amJustLoggingIn)?_c('div',{staticClass:\"section\"},[_c('div',{staticClass:\"field\"},[_c('div',{staticClass:\"control\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"Username\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],staticClass:\"input\",attrs:{\"type\":\"text\",\"placeholder\":\"username\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.username=$event.target.value}}})])]),_c('div',{staticClass:\"field\"},[_c('div',{staticClass:\"control\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"Password\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],staticClass:\"input\",attrs:{\"type\":\"password\",\"placeholder\":\"password\"},domProps:{\"value\":(_vm.password)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.attemptCassLogin($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}})])])]):_vm._e(),_c('div',{staticClass:\"section\"},[(_vm.amCreatingAccount || _vm.amCreatingLinkedPerson)?_c('div',{staticClass:\"field\"},[_c('div',{staticClass:\"control\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"name\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.createLinkPersonName),expression:\"createLinkPersonName\"}],staticClass:\"input\",attrs:{\"type\":\"text \"},domProps:{\"value\":(_vm.createLinkPersonName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.createLinkPersonName=$event.target.value}}})])]):_vm._e(),(_vm.amCreatingAccount || _vm.amCreatingLinkedPerson)?_c('div',{staticClass:\"field\"},[_c('div',{staticClass:\"control\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"email\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.createLinkPersonEmail),expression:\"createLinkPersonEmail\"}],staticClass:\"input\",attrs:{\"type\":\"text \"},domProps:{\"value\":(_vm.createLinkPersonEmail)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.createLinkPersonEmail=$event.target.value}}})])]):_vm._e(),(_vm.amCreatingAccount)?_c('div',{staticClass:\"field\"},[_c('div',{staticClass:\"control\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"username\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.createAccountUsername),expression:\"createAccountUsername\"}],staticClass:\"input\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.createAccountUsername)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.createAccountUsername=$event.target.value}}})])]):_vm._e(),(_vm.amCreatingAccount)?_c('div',{staticClass:\"field is-grouped\"},[_c('div',{staticClass:\"control is-expanded\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"password\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.createAccountPassword),expression:\"createAccountPassword\"}],staticClass:\"input\",attrs:{\"type\":\"password\"},domProps:{\"value\":(_vm.createAccountPassword)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.createAccountPassword=$event.target.value}}})]),_c('div',{staticClass:\"control is-expanded\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"Confirm password\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.createAccountPasswordRetype),expression:\"createAccountPasswordRetype\"}],staticClass:\"input\",attrs:{\"type\":\"password\"},domProps:{\"value\":(_vm.createAccountPasswordRetype)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.createAccountPasswordRetype=$event.target.value}}})])]):_vm._e()]),(_vm.createAccountOrLinkPersonDataInvalid)?_c('div',{staticClass:\"field has-text-danger\"},[_c('div',{staticClass:\"label has-text-danger\"},[_vm._v(\" Please correct the following errors: \")]),(_vm.createAccountUsernameInvalid)?_c('div',{staticClass:\"is-size-6\"},[_vm._v(\" Username is required \")]):_vm._e(),(_vm.createAccountPasswordInvalid)?_c('div',{staticClass:\"is-size-6\"},[_vm._v(\" Password is required \")]):_vm._e(),(_vm.createAccountPasswordMismatch)?_c('div',{staticClass:\"is-size-6\"},[_vm._v(\" Passwords do not match \")]):_vm._e(),(_vm.createLinkPersonNameInvalid)?_c('div',{staticClass:\"is-size-6\"},[_vm._v(\" Name is required \")]):_vm._e(),(_vm.createLinkPersonEmailInvalid)?_c('div',{staticClass:\"is-size-6\"},[_vm._v(\" Valid email is required \")]):_vm._e(),(_vm.createLinkPersonEmailExists)?_c('div',{staticClass:\"is-size-6\"},[_vm._v(\" That email is already in use \")]):_vm._e(),(_vm.createAccountUsernameUnavailable)?_c('div',{staticClass:\"is-size-6\"},[_vm._v(\" That username is unavailable \")]):_vm._e()]):_vm._e(),(_vm.identityFetchFailed || _vm.configRetrieveFailed || _vm.loginParamsInvalid)?_c('div',{staticClass:\"section\"},[(_vm.identityFetchFailed)?_c('div',[_c('p',[_c('b',[_vm._v(\"Login failed: \"+_vm._s(_vm.identityFailMsg))])])]):_vm._e(),(_vm.configRetrieveFailed)?_c('div',[_c('p',[_c('b',[_vm._v(\"Could not retrieve configuration from selected server: \"+_vm._s(_vm.configFailMsg))])])]):_vm._e(),(_vm.loginParamsInvalid)?_c('div',[_vm._m(1)]):_vm._e()]):_vm._e()]),_c('footer',{staticClass:\"modal-card-foot has-background-white\"},[_c('div',{staticClass:\"buttons is-spaced\"},[(_vm.amCreatingLinkedPerson || _vm.amCreatingAccount)?_c('div',{staticClass:\"button is-dark is-outlined\",on:{\"click\":function($event){return _vm.setDataToBaseLogin(true)}}},[_vm._m(2),_c('span',[_vm._v(\"cancel\")])]):_vm._e(),(_vm.amJustLoggingIn)?[(!_vm.apiLoginEnabled)?_c('div',{staticClass:\"button is-outlined is-dark\",on:{\"click\":_vm.showCreateAccount}},[_vm._m(3),_c('span',[_vm._v(\"create account\")])]):_vm._e(),_c('div',{staticClass:\"button is-outlined is-primary\",on:{\"click\":_vm.attemptCassLogin}},[_vm._m(4),_c('span',[_vm._v(\"login\")])])]:_vm._e(),(_vm.amCreatingAccount)?_c('div',{staticClass:\"button is-expanded is-primary is-outlined\",on:{\"click\":_vm.createNewAccount}},[_vm._m(5),_c('span',[_vm._v(\"create\")])]):_vm._e(),(_vm.amCreatingLinkedPerson)?_c('div',{staticClass:\"button is-success is-outlined\",on:{\"click\":_vm.linkPerson}},[_vm._m(6),_c('span',[_vm._v(\"update\")])]):_vm._e()],2)]),(_vm.apiLoginEnabled)?_c('div',{staticClass:\"has-text-centered\"},[_c('a',{on:{\"click\":_vm.goToStandardLogin}},[_vm._v(\"Return to Standard Login\")])]):_vm._e()])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-content has-text-centered\"},[_c('span',{staticClass:\"icon is-large has-text-center has-text-link\"},[_c('i',{staticClass:\"fas fa-2x fa-spinner is-info fa-pulse\"})])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_c('b',[_vm._v(\"Login failed: Invalid Username/Password\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fa fa-times\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fa fa-plus\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fa fa-sign-in-alt\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fa fa-sign-in-alt\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fa fa-sign-in-alt\"})])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div\r\n        id=\"login\"\r\n        class=\"section is-large\">\r\n        <!-- busy modal-->\r\n        <div\r\n            class=\"modal\"\r\n            :class=\"[{'is-active': loginBusy}]\">\r\n            <div class=\"modal-background\" />\r\n            <div class=\"modal-content has-text-centered\">\r\n                <span class=\"icon is-large has-text-center has-text-link\">\r\n                    <i class=\"fas fa-2x fa-spinner is-info fa-pulse\" />\r\n                </span>\r\n            </div>\r\n        </div>\r\n        <!-- login content-->\r\n        <div\r\n            v-if=\"!loginBusy\"\r\n            class=\"modal is-active\">\r\n            <div class=\"modal-card\">\r\n                <header\r\n                    class=\"modal-card-head has-text-centered has-background-primary\"\r\n                    v-if=\"!loginBusy\">\r\n                    <h3\r\n                        v-if=\"amJustLoggingIn\"\r\n                        class=\"modal-card-title is-size-2 has-text-centered has-text-white\">\r\n                        Login to CaSS Authoring Tool\r\n                    </h3>\r\n                    <h3\r\n                        v-if=\"amCreatingAccount\"\r\n                        class=\"modal-card-title is-size-2 has-text-centered has-text-white\">\r\n                        Create CaSS Authoring Tool User\r\n                    </h3>\r\n                    <h4\r\n                        class=\"title is-size-2 has-text-centered has-text-white\"\r\n                        v-if=\"amCreatingLinkedPerson\">\r\n                        Link User Information\r\n                    </h4>\r\n                </header>\r\n                <section class=\"modal-card-body\">\r\n                    <div\r\n                        class=\"section\"\r\n                        v-if=\"amCreatingAccount || amCreatingLinkedPerson\">\r\n                        <p v-if=\"amCreatingLinkedPerson\">\r\n                            No matching user record could be found that matched your login information. Please provide the following:\r\n                        </p>\r\n                    </div>\r\n                    <!-- inputs -->\r\n                    <div\r\n                        class=\"section\"\r\n                        v-if=\"amJustLoggingIn\">\r\n                        <div class=\"field\">\r\n                            <div class=\"control\">\r\n                                <label class=\"label\">Username</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    class=\"input\"\r\n                                    v-model=\"username\"\r\n                                    placeholder=\"username\">\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"field\">\r\n                            <div class=\"control\">\r\n                                <label class=\"label\">Password</label>\r\n                                <input\r\n                                    type=\"password\"\r\n                                    class=\"input\"\r\n                                    v-model=\"password\"\r\n                                    placeholder=\"password\"\r\n                                    @keyup.enter=\"attemptCassLogin\">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <!-- inputs -->\r\n                    <div class=\"section\">\r\n                        <!-- name and email -->\r\n                        <div\r\n                            class=\"field\"\r\n                            v-if=\"amCreatingAccount || amCreatingLinkedPerson\">\r\n                            <div class=\"control\">\r\n                                <label class=\"label\">name</label>\r\n                                <input\r\n                                    class=\"input\"\r\n                                    type=\"text \"\r\n                                    v-model=\"createLinkPersonName\">\r\n                            </div>\r\n                        </div>\r\n                        <div\r\n                            v-if=\"amCreatingAccount || amCreatingLinkedPerson\"\r\n                            class=\"field\">\r\n                            <div class=\"control\">\r\n                                <label class=\"label\">email</label>\r\n                                <input\r\n                                    class=\"input\"\r\n                                    type=\"text \"\r\n                                    v-model=\"createLinkPersonEmail\">\r\n                            </div>\r\n                        </div>\r\n                        <div\r\n                            class=\"field\"\r\n                            v-if=\"amCreatingAccount\">\r\n                            <div class=\"control\">\r\n                                <label class=\"label\">username</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    class=\"input\"\r\n                                    v-model=\"createAccountUsername\">\r\n                            </div>\r\n                        </div>\r\n                        <!--  password -->\r\n                        <div\r\n                            class=\"field is-grouped\"\r\n                            v-if=\"amCreatingAccount\">\r\n                            <div class=\"control is-expanded\">\r\n                                <label class=\"label\">password</label>\r\n                                <input\r\n                                    type=\"password\"\r\n                                    class=\"input\"\r\n                                    v-model=\"createAccountPassword\">\r\n                            </div>\r\n                            <div class=\"control is-expanded\">\r\n                                <label class=\"label\">Confirm password</label>\r\n                                <input\r\n                                    class=\"input\"\r\n                                    type=\"password\"\r\n                                    v-model=\"createAccountPasswordRetype\">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <!-- error messages -->\r\n                    <div\r\n                        class=\"field has-text-danger\"\r\n                        v-if=\"createAccountOrLinkPersonDataInvalid\">\r\n                        <div class=\"label has-text-danger\">\r\n                            Please correct the following errors:\r\n                        </div>\r\n                        <div\r\n                            class=\"is-size-6\"\r\n                            v-if=\"createAccountUsernameInvalid\">\r\n                            Username is required\r\n                        </div>\r\n                        <div\r\n                            class=\"is-size-6\"\r\n                            v-if=\"createAccountPasswordInvalid\">\r\n                            Password is required\r\n                        </div>\r\n                        <div\r\n                            class=\"is-size-6\"\r\n                            v-if=\"createAccountPasswordMismatch\">\r\n                            Passwords do not match\r\n                        </div>\r\n                        <div\r\n                            class=\"is-size-6\"\r\n                            v-if=\"createLinkPersonNameInvalid\">\r\n                            Name is required\r\n                        </div>\r\n                        <div\r\n                            class=\"is-size-6\"\r\n                            v-if=\"createLinkPersonEmailInvalid\">\r\n                            Valid email is required\r\n                        </div>\r\n                        <div\r\n                            class=\"is-size-6\"\r\n                            v-if=\"createLinkPersonEmailExists\">\r\n                            That email is already in use\r\n                        </div>\r\n                        <div\r\n                            class=\"is-size-6\"\r\n                            v-if=\"createAccountUsernameUnavailable\">\r\n                            That username is unavailable\r\n                        </div>\r\n                    </div>\r\n                    <!-- error messages -->\r\n                    <div\r\n                        v-if=\"identityFetchFailed || configRetrieveFailed || loginParamsInvalid\"\r\n                        class=\"section\">\r\n                        <div v-if=\"identityFetchFailed\">\r\n                            <p><b>Login failed: {{ identityFailMsg }}</b></p>\r\n                        </div>\r\n                        <div v-if=\"configRetrieveFailed\">\r\n                            <p><b>Could not retrieve configuration from selected server: {{ configFailMsg }}</b></p>\r\n                        </div>\r\n                        <div v-if=\"loginParamsInvalid\">\r\n                            <p><b>Login failed: Invalid Username/Password</b></p>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n                <!-- footer with actions -->\r\n                <footer class=\"modal-card-foot has-background-white\">\r\n                    <div class=\"buttons is-spaced\">\r\n                        <div\r\n                            class=\"button is-dark is-outlined\"\r\n                            v-if=\"amCreatingLinkedPerson || amCreatingAccount\"\r\n                            @click=\"setDataToBaseLogin(true)\">\r\n                            <span class=\"icon\">\r\n                                <i class=\"fa fa-times\" />\r\n                            </span><span>cancel</span>\r\n                        </div>\r\n                        <template v-if=\"amJustLoggingIn\">\r\n                            <div\r\n                                v-if=\"!apiLoginEnabled\"\r\n                                class=\"button is-outlined is-dark\"\r\n                                @click=\"showCreateAccount\">\r\n                                <span class=\"icon\">\r\n                                    <i class=\"fa fa-plus\" />\r\n                                </span><span>create account</span>\r\n                            </div>\r\n                            <div\r\n                                class=\"button is-outlined is-primary\"\r\n                                @click=\"attemptCassLogin\">\r\n                                <span class=\"icon\">\r\n                                    <i class=\"fa fa-sign-in-alt\" />\r\n                                </span><span>login</span>\r\n                            </div>\r\n                        </template>\r\n                        <div\r\n                            class=\"button is-expanded is-primary is-outlined\"\r\n                            v-if=\"amCreatingAccount\"\r\n                            @click=\"createNewAccount\">\r\n                            <span class=\"icon\">\r\n                                <i class=\"fa fa-sign-in-alt\" />\r\n                            </span><span>create</span>\r\n                        </div>\r\n                        <div\r\n                            class=\"button is-success is-outlined\"\r\n                            v-if=\"amCreatingLinkedPerson\"\r\n                            @click=\"linkPerson\">\r\n                            <span class=\"icon\">\r\n                                <i class=\"fa fa-sign-in-alt\" />\r\n                            </span><span>update</span>\r\n                        </div>\r\n                    </div>\r\n                </footer>\r\n                <div\r\n                    v-if=\"apiLoginEnabled\"\r\n                    class=\"has-text-centered\">\r\n                    <a @click=\"goToStandardLogin\">Return to Standard Login</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'LegacyLogin',\r\n    data: () => ({\r\n        GROUP_SEARCH_SIZE: 10000,\r\n        PERSON_SEARCH_SIZE: 10000,\r\n        username: '',\r\n        password: '',\r\n        createAccountUsername: '',\r\n        createAccountPassword: '',\r\n        createAccountPasswordRetype: '',\r\n        createLinkPersonName: '',\r\n        createLinkPersonEmail: '',\r\n        loginParamsInvalid: false,\r\n        identityFetchFailed: false,\r\n        configRetrieveFailed: false,\r\n        loginBusy: false,\r\n        ecRemoteIdentMgr: {},\r\n        configFailMsg: '',\r\n        identityFailMsg: '',\r\n        amJustLoggingIn: true,\r\n        amCreatingAccount: false,\r\n        amCreatingLinkedPerson: false,\r\n        createAccountOrLinkPersonDataInvalid: false,\r\n        createAccountUsernameInvalid: false,\r\n        createAccountPasswordInvalid: false,\r\n        createAccountPasswordMismatch: false,\r\n        createLinkPersonNameInvalid: false,\r\n        createLinkPersonEmailInvalid: false,\r\n        createLinkPersonEmailExists: false,\r\n        createAccountUsernameUnavailable: false,\r\n        identityToLinkToPerson: {},\r\n        linkedPerson: {}\r\n    }),\r\n    methods: {\r\n        goToStandardLogin: function() {\r\n            this.loginBusy = false;\r\n            this.$router.push({path: '/login'});\r\n        },\r\n        goToAppHome: function() {\r\n            this.loginBusy = false;\r\n            this.$router.push({path: '/frameworks'});\r\n        },\r\n        addGroupIdentity(group) {\r\n            try {\r\n                // add all available group keys to identity manager\r\n                let groupPpkSet = group.getOrgKeys();\r\n                appLog(\"Adding group identities: \" + \"(\" + group.shortId() + \") - \" + group.getName() + \" - (\" + groupPpkSet.length + \") keys\");\r\n                for (let i = 0; i < groupPpkSet.length; i++) {\r\n                    let gPpk = groupPpkSet[i];\r\n                    let grpIdent = new EcIdentity();\r\n                    grpIdent.displayName = group.getName() + \" - key[\" + i + \"]\";\r\n                    grpIdent.ppk = gPpk;\r\n                    EcIdentityManager.addIdentityQuietly(grpIdent);\r\n                }\r\n            } catch (e) {\r\n                // TODO Problem with EcOrganization update and creating encrypted value when only a reader...\r\n                // Anticipated workaround....login as group owner and save it.\r\n                // console.error(\"TODO...fix this...needs FRITZ input!!!!: \" + e.toString());\r\n            }\r\n        },\r\n        searchRepositoryForGroupsSuccess(ecoa) {\r\n            let linkedPersonShortId = this.linkedPerson.shortId();\r\n            if (ecoa && ecoa.length > 0) {\r\n                for (let eco of ecoa) {\r\n                    if (eco.employee && eco.employee.length > 0) {\r\n                        for (let e of eco.employee) {\r\n                            if (e.equals(linkedPersonShortId)) {\r\n                                this.addGroupIdentity(eco);\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        searchRepositoryForGroupsFailure(msg) {\r\n            appLog(\"Group search failure: \" + msg);\r\n            this.goToAppHome();\r\n        },\r\n        addGroupIdentities: function() {\r\n            appLog(\" Adding group identities...\");\r\n            let paramObj = {};\r\n            paramObj.size = this.GROUP_SEARCH_SIZE;\r\n            EcOrganization.search(window.repo, '', this.searchRepositoryForGroupsSuccess, this.searchRepositoryForGroupsFailure, paramObj);\r\n            this.goToAppHome();\r\n        },\r\n        setDataToBaseLogin: function(clearIdentityManager) {\r\n            this.username = '';\r\n            this.password = '';\r\n            this.createAccountUsername = '';\r\n            this.createAccountPassword = '';\r\n            this.createAccountPasswordRetype = '';\r\n            this.createLinkPersonName = '';\r\n            this.createLinkPersonEmail = '';\r\n            this.loginParamsInvalid = false;\r\n            this.identityFetchFailed = false;\r\n            this.configRetrieveFailed = false;\r\n            this.configFailMsg = \"\";\r\n            this.identityFailMsg = \"\";\r\n            this.amCreatingAccount = false;\r\n            this.amCreatingLinkedPerson = false;\r\n            this.createAccountOrLinkPersonDataInvalid = false;\r\n            this.createAccountUsernameInvalid = false;\r\n            this.createAccountPasswordInvalid = false;\r\n            this.createAccountPasswordMismatch = false;\r\n            this.createLinkPersonNameInvalid = false;\r\n            this.createLinkPersonEmailInvalid = false;\r\n            this.createLinkPersonEmailExists = false;\r\n            this.createAccountUsernameUnavailable = false;\r\n            if (clearIdentityManager) {\r\n                this.ecRemoteIdentMgr = {};\r\n                EcIdentityManager.clearContacts();\r\n                EcIdentityManager.clearIdentities();\r\n                this.identityToLinkToPerson = {};\r\n                this.linkedPerson = {};\r\n            }\r\n            this.amJustLoggingIn = true;\r\n            this.loginBusy = false;\r\n        },\r\n        showCreateAccount: function() {\r\n            this.setDataToBaseLogin(true);\r\n            this.amJustLoggingIn = false;\r\n            this.amCreatingAccount = true;\r\n        },\r\n        showCreateLinkedPerson: function() {\r\n            this.setDataToBaseLogin(false);\r\n            this.amJustLoggingIn = false;\r\n            this.amCreatingLinkedPerson = true;\r\n        },\r\n        setAllNewAccountValidationsChecksToValid() {\r\n            this.createAccountOrLinkPersonDataInvalid = false;\r\n            this.createAccountUsernameInvalid = false;\r\n            this.createAccountPasswordInvalid = false;\r\n            this.createAccountPasswordMismatch = false;\r\n            this.createLinkPersonNameInvalid = false;\r\n            this.createLinkPersonEmailInvalid = false;\r\n            this.createLinkPersonEmailExists = false;\r\n            this.createAccountUsernameUnavailable = false;\r\n        },\r\n        isValidEmail(email) {\r\n            let re = /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/igm;\r\n            if (re.test(email)) return true;\r\n            return false;\r\n        },\r\n        validateNewAccountData() {\r\n            if (!this.createAccountUsername || this.createAccountUsername.trim().equals('')) {\r\n                this.createAccountOrLinkPersonDataInvalid = true;\r\n                this.createAccountUsernameInvalid = true;\r\n            }\r\n            if (!this.createAccountPassword || this.createAccountPassword.trim().equals('') ||\r\n                !this.createAccountPasswordRetype || this.createAccountPasswordRetype.trim().equals('')) {\r\n                this.createAccountOrLinkPersonDataInvalid = true;\r\n                this.createAccountPasswordInvalid = true;\r\n            } else if (!this.createAccountPassword.equals(this.createAccountPasswordRetype)) {\r\n                this.createAccountOrLinkPersonDataInvalid = true;\r\n                this.createAccountPasswordMismatch = true;\r\n            }\r\n            this.validateLinkPersonData();\r\n        },\r\n        handleCreatePersonSuccess() {\r\n            appLog(\"Person created.\");\r\n            if (this.amCreatingAccount) {\r\n                this.goToAppHome();\r\n            } else this.addGroupIdentities();\r\n        },\r\n        createPersonObjectToLinkToIdentity() {\r\n            appLog(\"Creating person object for identity...\");\r\n            let p = new Person();\r\n            p.assignId(window.repo.selectedServer, this.identityToLinkToPerson.ppk.toPk().fingerprint());\r\n            p.addOwner(this.identityToLinkToPerson.ppk.toPk());\r\n            p.name = this.createLinkPersonName;\r\n            p.email = this.createLinkPersonEmail;\r\n            appLog(p);\r\n            this.$store.commit('user/loggedOnPerson', p);\r\n            this.linkedPerson = p;\r\n            EcRepository.save(p, this.handleCreatePersonSuccess, this.handleAttemptLoginFetchIdentityFailure);\r\n        },\r\n        handleCreateAccountFetchIdentitySuccess() {\r\n            appLog(\"Creating new account identity object...\");\r\n            let ident = new EcIdentity();\r\n            ident.displayName = this.createLinkPersonName;\r\n            ident.ppk = EcPpk.generateKey();\r\n            EcIdentityManager.addIdentity(ident);\r\n            EcIdentityManager.saveContacts();\r\n            EcIdentityManager.saveIdentities();\r\n            this.identityToLinkToPerson = ident;\r\n            this.ecRemoteIdentMgr.commit(this.createPersonObjectToLinkToIdentity, this.handleAttemptLoginFetchIdentityFailure);\r\n        },\r\n        handleCreateAccountRemoteIdentityMgrCreateSuccess() {\r\n            appLog(\"Creating new account manager fetch...\");\r\n            this.ecRemoteIdentMgr.fetch(this.handleCreateAccountFetchIdentitySuccess, this.handleAttemptLoginFetchIdentityFailure);\r\n        },\r\n        handleCreateAccountConfigureFromServerSuccess: function(obj) {\r\n            appLog(\"EcRemoteIdentityManager creating...\");\r\n            appLog(\"Creating new account login...\");\r\n            this.ecRemoteIdentMgr.startLogin(this.createAccountUsername, this.createAccountPassword);\r\n            this.ecRemoteIdentMgr.create(this.handleCreateAccountRemoteIdentityMgrCreateSuccess, this.handleAttemptLoginFetchIdentityFailure);\r\n        },\r\n        createNewAccountIdentityAndPerson() {\r\n            appLog(\"Creating new account...\");\r\n            appLog(\"EcRemoteIdentityManager Configuring from server...\");\r\n            this.ecRemoteIdentMgr = new EcRemoteIdentityManager();\r\n            this.ecRemoteIdentMgr.server = window.repo.selectedServer;\r\n            this.ecRemoteIdentMgr.configureFromServer(this.handleCreateAccountConfigureFromServerSuccess, this.handleAttemptLoginConfigureFromServerFail);\r\n        },\r\n        handleCheckUsernameFetchIdentitySuccess: function(obj) {\r\n            appLog('handleCheckUsernameFetchIdentitySuccess !!!!');\r\n            this.createAccountOrLinkPersonDataInvalid = true;\r\n            this.createAccountUsernameUnavailable = true;\r\n            this.loginBusy = false;\r\n            EcIdentityManager.clearIdentities();\r\n            EcIdentityManager.clearContacts();\r\n        },\r\n        handleCheckUsernameFetchIdentityFailure: function(failMsg) {\r\n            appLog('handleCheckUsernameFetchIdentityFailure: ' + failMsg);\r\n            if (failMsg && failMsg.toLowerCase().trim().equals('user does not exist.')) {\r\n                this.createNewAccountIdentityAndPerson();\r\n            } else {\r\n                this.createAccountOrLinkPersonDataInvalid = true;\r\n                this.createAccountUsernameUnavailable = true;\r\n                this.loginBusy = false;\r\n                EcIdentityManager.clearIdentities();\r\n                EcIdentityManager.clearContacts();\r\n            }\r\n        },\r\n        handleCheckUsernameConfigureFromServerSuccess: function(obj) {\r\n            appLog(\"Fetching identity for username check...\");\r\n            this.ecRemoteIdentMgr.startLogin(this.createAccountUsername, this.createAccountPassword); // Creates the hashes for storage and retrieval of keys.\r\n            this.ecRemoteIdentMgr.fetch(this.handleCheckUsernameFetchIdentitySuccess, this.handleCheckUsernameFetchIdentityFailure); // Retrieves the identities and encryption keys from the server.\r\n        },\r\n        handleCheckUsernameConfigureFromServerFail: function(failMsg) {\r\n            this.loginBusy = false;\r\n            appLog('New account configure from server for username check failure: ' + msg);\r\n        },\r\n        checkForExistingUsername: function() {\r\n            appLog(\"Check if new account username already exists\");\r\n            this.ecRemoteIdentMgr = new EcRemoteIdentityManager();\r\n            this.ecRemoteIdentMgr.server = window.repo.selectedServer;\r\n            this.ecRemoteIdentMgr.configureFromServer(this.handleCheckUsernameConfigureFromServerSuccess, this.handleCheckUsernameConfigureFromServerFail); // Retrieves username and password salts from the serve\r\n        },\r\n        searchPersonsForNewAccountSuccess(ecRemoteLda) {\r\n            appLog(\"New account person search success: \");\r\n            appLog(ecRemoteLda);\r\n            let emailExists = false;\r\n            for (let ecrld of ecRemoteLda) {\r\n                let ep = new EcPerson();\r\n                ep.copyFrom(ecrld);\r\n                if (this.createLinkPersonEmail.equalsIgnoreCase(ep.email)) {\r\n                    emailExists = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (emailExists) {\r\n                this.createAccountOrLinkPersonDataInvalid = true;\r\n                this.createLinkPersonEmailExists = true;\r\n                this.loginBusy = false;\r\n            } else {\r\n                this.checkForExistingUsername();\r\n                // this.createNewAccountIdentityAndPerson();\r\n            }\r\n        },\r\n        searchPersonsForNewAccountFailure(msg) {\r\n            // Search fails if the index doesn't exist yet.\r\n            this.checkForExistingUsername();\r\n        },\r\n        verifyEmailAddressForNewAccountAndGo() {\r\n            this.loginBusy = true;\r\n            let paramObj = {};\r\n            paramObj.size = this.PERSON_SEARCH_SIZE;\r\n            window.repo.searchWithParams(\"@type:Person AND email:\\\"\" + this.createLinkPersonEmail + \"\\\"\", paramObj, null,\r\n                this.searchPersonsForNewAccountSuccess, this.searchPersonsForNewAccountFailure);\r\n        },\r\n        createNewAccount: function() {\r\n            this.setAllNewAccountValidationsChecksToValid();\r\n            this.validateNewAccountData();\r\n            if (!this.createAccountOrLinkPersonDataInvalid) this.verifyEmailAddressForNewAccountAndGo();\r\n        },\r\n        validateLinkPersonData() {\r\n            if (!this.createLinkPersonName || this.createLinkPersonName.trim().equals('')) {\r\n                this.createAccountOrLinkPersonDataInvalid = true;\r\n                this.createLinkPersonNameInvalid = true;\r\n            }\r\n            if (!this.createLinkPersonEmail || this.createLinkPersonEmail.trim().equals('') || !this.isValidEmail(this.createLinkPersonEmail)) {\r\n                this.createAccountOrLinkPersonDataInvalid = true;\r\n                this.createLinkPersonEmailInvalid = true;\r\n            }\r\n        },\r\n        searchPersonsForLinkPersonSuccess(ecRemoteLda) {\r\n            this.loginBusy = true;\r\n            let emailExists = false;\r\n            for (let ecrld of ecRemoteLda) {\r\n                let ep = new EcPerson();\r\n                ep.copyFrom(ecrld);\r\n                if (this.createLinkPersonEmail.equalsIgnoreCase(ep.email)) {\r\n                    emailExists = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (emailExists) {\r\n                this.createAccountOrLinkPersonDataInvalid = true;\r\n                this.createLinkPersonEmailExists = true;\r\n                this.loginBusy = false;\r\n            } else {\r\n                this.createPersonObjectToLinkToIdentity();\r\n            }\r\n        },\r\n        verifyEmailAddressForLinkPersonAndGo() {\r\n            appLog('Validating link person email...');\r\n            let paramObj = {};\r\n            paramObj.size = this.PERSON_SEARCH_SIZE;\r\n            window.repo.searchWithParams(\"@type:Person AND email:\\\"\" + this.createLinkPersonEmail + \"\\\"\", paramObj, null,\r\n                this.searchPersonsForLinkPersonSuccess, this.searchPersonsForNewAccountFailure);\r\n        },\r\n        linkPerson: function() {\r\n            this.setAllNewAccountValidationsChecksToValid();\r\n            this.validateLinkPersonData();\r\n            if (!this.createAccountOrLinkPersonDataInvalid) this.verifyEmailAddressForLinkPersonAndGo();\r\n        },\r\n        areLoginParamsValid: function() {\r\n            if (this.username == null || this.username.length === 0 || this.password == null || this.password.length === 0) {\r\n                this.loginParamsInvalid = true;\r\n                return false;\r\n            }\r\n            return true;\r\n        },\r\n        findLinkedPersonPersonSearchSuccess(ecRemoteLda) {\r\n            appLog(\"Linked person person search success: \");\r\n            appLog(ecRemoteLda);\r\n            this.identityToLinkToPerson = EcIdentityManager.ids[0];\r\n            let matchingPersonRecordFound = false;\r\n            for (let ecrld of ecRemoteLda) {\r\n                let ep = new EcPerson();\r\n                ep.copyFrom(ecrld);\r\n                if (ep.getGuid().equals(this.identityToLinkToPerson.ppk.toPk().fingerprint())) {\r\n                    matchingPersonRecordFound = true;\r\n                    this.$store.commit('user/loggedOnPerson', ep);\r\n                    this.linkedPerson = ep;\r\n                    appLog('Matching person record found: ');\r\n                    appLog(ep);\r\n                    EcIdentityManager.saveContacts();\r\n                    EcIdentityManager.saveIdentities();\r\n                }\r\n            }\r\n            if (matchingPersonRecordFound) this.addGroupIdentities();\r\n            else {\r\n                appLog('Matching person record NOT found');\r\n                this.showCreateLinkedPerson();\r\n            }\r\n        },\r\n        findLinkedPersonPersonSearchFailure(msg) {\r\n            this.loginBusy = false;\r\n            appLog('Linked person person search failure: ' + msg);\r\n        },\r\n        findLinkedPersonForIdentity: function() {\r\n            appLog(\"Finding linked person for identity...\");\r\n            let identFingerprint = EcIdentityManager.ids[0].ppk.toPk().fingerprint();\r\n            let paramObj = {};\r\n            paramObj.size = this.PERSON_SEARCH_SIZE;\r\n            window.repo.searchWithParams(\"@type:Person AND @id:\\\"\" + identFingerprint + \"\\\"\", paramObj, null,\r\n                this.findLinkedPersonPersonSearchSuccess, this.findLinkedPersonPersonSearchFailure);\r\n        },\r\n        handleAttemptLoginFetchIdentitySuccess: function(obj) {\r\n            if (!EcIdentityManager.ids || EcIdentityManager.ids.length <= 0) {\r\n                this.handleAttemptLoginFetchIdentityFailure('Login credentials valid but no identity could be found.');\r\n            } else this.findLinkedPersonForIdentity();\r\n        },\r\n        handleAttemptLoginFetchIdentityFailure: function(failMsg) {\r\n            this.identityFailMsg = failMsg;\r\n            this.identityFetchFailed = true;\r\n            this.loginBusy = false;\r\n        },\r\n        handleAttemptLoginConfigureFromServerSuccess: function(obj) {\r\n            appLog(\"Fetching identity...\");\r\n            this.ecRemoteIdentMgr.startLogin(this.username, this.password); // Creates the hashes for storage and retrieval of keys.\r\n            this.ecRemoteIdentMgr.fetch(this.handleAttemptLoginFetchIdentitySuccess, this.handleAttemptLoginFetchIdentityFailure); // Retrieves the identities and encryption keys from the server.\r\n        },\r\n        handleAttemptLoginConfigureFromServerFail: function(failMsg) {\r\n            this.configFailMsg = failMsg;\r\n            this.configRetrieveFailed = true;\r\n            this.loginBusy = false;\r\n        },\r\n        attemptCassLogin: function() {\r\n            this.loginParamsInvalid = false;\r\n            this.identityFetchFailed = false;\r\n            this.configRetrieveFailed = false;\r\n            if (this.areLoginParamsValid()) {\r\n                appLog(\"Attempting CaSS login....\");\r\n                this.loginBusy = true;\r\n                EcIdentityManager.clearContacts();\r\n                EcIdentityManager.clearIdentities();\r\n                this.ecRemoteIdentMgr = new EcRemoteIdentityManager();\r\n                this.ecRemoteIdentMgr.server = window.repo.selectedServer;\r\n                this.ecRemoteIdentMgr.configureFromServer(this.handleAttemptLoginConfigureFromServerSuccess, this.handleAttemptLoginConfigureFromServerFail); // Retrieves username and password salts from the serve\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n        legacyLoginEnabled: function() {\r\n            return this.$store.getters['featuresEnabled/legacyLoginEnabled'];\r\n        },\r\n        apiLoginEnabled: function() {\r\n            return this.$store.getters['featuresEnabled/apiLoginEnabled'];\r\n        }\r\n    },\r\n    mounted() {\r\n        this.setDataToBaseLogin(true);\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    @import '@/scss/variables.scss';\r\n#login {\r\n    position: fixed;\r\n    background-color: $light;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    height: 100vh;\r\n    width: 100vw;\r\n    .container {\r\n        height: 100%;\r\n    }\r\n    .columns {\r\n        height: 100%;\r\n    }\r\n    .container {\r\n    }\r\n    .modal-card {\r\n        width: 600px;\r\n        max-width: calc(100% - 1rem);\r\n    }\r\n    .card {\r\n        border-radius: 10px;\r\n        .card-header {\r\n            border-radius: 10px 10px 0px 0px;\r\n        }\r\n    }\r\n}\r\n\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LegacyLogin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LegacyLogin.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LegacyLogin.vue?vue&type=template&id=0bae2bec&scoped=true&\"\nimport script from \"./LegacyLogin.vue?vue&type=script&lang=js&\"\nexport * from \"./LegacyLogin.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LegacyLogin.vue?vue&type=style&index=0&id=0bae2bec&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0bae2bec\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"section is-large\",attrs:{\"id\":\"login\"}},[_c('div',{staticClass:\"modal\",class:[{'is-active': _vm.loginBusy}]},[_c('div',{staticClass:\"modal-background\"}),_vm._m(0)]),(!_vm.loginBusy)?_c('div',{staticClass:\"modal is-active\"},[_c('div',{staticClass:\"modal-card\"},[(!_vm.loginBusy)?_c('header',{staticClass:\"modal-card-head has-text-centered has-background-primary\"},[_c('h3',{staticClass:\"modal-card-title is-size-2 has-text-centered has-text-white\"},[_vm._v(\" Login to CaSS \")])]):_vm._e(),_c('section',{staticClass:\"modal-card-body\"},[_c('div',{staticClass:\"columns is-mobile is-multiline\"},[_c('div',{staticClass:\"column is-6\"},[_c('div',{staticClass:\"section box py-2 px-2\"},[_c('div',{staticClass:\"modal-card-body has-text-centered\"},[_c('div',{staticClass:\"button is-outlined is-primary\",on:{\"click\":_vm.attemptExternalCassLogin}},[_vm._m(1),_c('span',[_vm._v(\"login\")])])])])]),_c('div',{staticClass:\"column is-6\"},[_c('div',{staticClass:\"section box py-2 px-2\"},[_c('div',{staticClass:\"modal-card-body has-text-centered\"},[_c('div',{staticClass:\"button is-outlined is-dark\",on:{\"click\":_vm.goToCreateAccount}},[_vm._m(2),_c('span',[_vm._v(\"create account\")])])])])]),(_vm.identityFetchFailed || _vm.configRetrieveFailed || _vm.loginParamsInvalid)?_c('div',{staticClass:\"column is-12\"},[_c('div',{staticClass:\"panel is-warning py-2 px-2 has-text-danger\"},[_c('p',{staticClass:\"panel-heading\"},[_vm._v(\" Login failed \")]),(_vm.identityFetchFailed)?_c('div',{staticClass:\"panel-block\"},[_c('p',[_vm._v(\"Could not fetch identity: \"+_vm._s(_vm.identityFailMsg))])]):_vm._e(),(_vm.configRetrieveFailed)?_c('div',{staticClass:\"panel-block\"},[_c('p',[_vm._v(\"Could not retrieve configuration from selected server: \"+_vm._s(_vm.configFailMsg))])]):_vm._e(),(_vm.loginParamsInvalid)?_c('div',{staticClass:\"panel-block\"},[_c('p',[_vm._v(\"Login failed: Invalid Username/Password\")])]):_vm._e()])]):_vm._e(),(_vm.legacyLoginEnabled)?_c('div',{staticClass:\"column is-12 pt-4\"},[_c('div',{staticClass:\"section box p-2 has-text-centered\"},[_c('i',{staticClass:\"fas fa-exclamation-circle\"}),_vm._v(\" For accounts created in CaSS \"),_c('b',[_vm._v(\"1.3 and earlier\")]),_vm._v(\": \"),_c('a',{on:{\"click\":_vm.goToLegacyLogin}},[_vm._v(\"Legacy Login\")])])]):_vm._e()])])])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-content has-text-centered\"},[_c('span',{staticClass:\"icon is-large has-text-center has-text-link\"},[_c('i',{staticClass:\"fas fa-2x fa-spinner is-info fa-pulse\"})])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fa fa-sign-in-alt\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fa fa-plus\"})])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div\r\n        id=\"login\"\r\n        class=\"section is-large\">\r\n        <!-- busy modal-->\r\n        <div\r\n            class=\"modal\"\r\n            :class=\"[{'is-active': loginBusy}]\">\r\n            <div class=\"modal-background\" />\r\n            <div class=\"modal-content has-text-centered\">\r\n                <span class=\"icon is-large has-text-center has-text-link\">\r\n                    <i class=\"fas fa-2x fa-spinner is-info fa-pulse\" />\r\n                </span>\r\n            </div>\r\n        </div>\r\n        <!-- login content-->\r\n        <div\r\n            v-if=\"!loginBusy\"\r\n            class=\"modal is-active\">\r\n            <div class=\"modal-card\">\r\n                <header\r\n                    class=\"modal-card-head has-text-centered has-background-primary\"\r\n                    v-if=\"!loginBusy\">\r\n                    <h3 class=\"modal-card-title is-size-2 has-text-centered has-text-white\">\r\n                        Login to CaSS\r\n                    </h3>\r\n                </header>\r\n                <section class=\"modal-card-body\">\r\n                    <div class=\"columns is-mobile is-multiline\">\r\n                        <div class=\"column is-6\">\r\n                            <div class=\"section box py-2 px-2\">\r\n                                <div class=\"modal-card-body has-text-centered\">\r\n                                    <div\r\n                                        class=\"button is-outlined is-primary\"\r\n                                        @click=\"attemptExternalCassLogin\">\r\n                                        <span class=\"icon\">\r\n                                            <i class=\"fa fa-sign-in-alt\" />\r\n                                        </span><span>login</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"column is-6\">\r\n                            <div class=\"section box py-2 px-2\">\r\n                                <div class=\"modal-card-body has-text-centered\">\r\n                                    <div\r\n                                        class=\"button is-outlined is-dark\"\r\n                                        @click=\"goToCreateAccount\">\r\n                                        <span class=\"icon\">\r\n                                            <i class=\"fa fa-plus\" />\r\n                                        </span><span>create account</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <!-- error messages -->\r\n                        <div\r\n                            v-if=\"identityFetchFailed || configRetrieveFailed || loginParamsInvalid\"\r\n                            class=\"column is-12\">\r\n                            <div class=\"panel is-warning py-2 px-2 has-text-danger\">\r\n                                <p class=\"panel-heading\">\r\n                                    Login failed\r\n                                </p>\r\n                                <div\r\n                                    class=\"panel-block\"\r\n                                    v-if=\"identityFetchFailed\">\r\n                                    <p>Could not fetch identity: {{ identityFailMsg }}</p>\r\n                                </div>\r\n                                <div\r\n                                    class=\"panel-block\"\r\n                                    v-if=\"configRetrieveFailed\">\r\n                                    <p>Could not retrieve configuration from selected server: {{ configFailMsg }}</p>\r\n                                </div>\r\n                                <div\r\n                                    class=\"panel-block\"\r\n                                    v-if=\"loginParamsInvalid\">\r\n                                    <p>Login failed: Invalid Username/Password</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div\r\n                            class=\"column is-12 pt-4\"\r\n                            v-if=\"legacyLoginEnabled\">\r\n                            <div class=\"section box p-2 has-text-centered\">\r\n                                <i class=\"fas fa-exclamation-circle\" /> For accounts created in CaSS <b>1.3 and earlier</b>: <a @click=\"goToLegacyLogin\">Legacy Login</a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {cassApi} from '../../mixins/cassApi';\r\n\r\nexport default {\r\n    name: 'Login',\r\n    mixins: [cassApi],\r\n    data: () => ({\r\n        GROUP_SEARCH_SIZE: 10000,\r\n        PERSON_SEARCH_SIZE: 10000,\r\n        loginBusy: false,\r\n        ecRemoteIdentMgr: null,\r\n        identityFetchFailed: false,\r\n        configRetrieveFailed: false,\r\n        loginParamsInvalid: false,\r\n        identityFailMsg: '',\r\n        configFailMsg: '',\r\n        loginCredentials: null,\r\n        identityToLinkToPerson: null,\r\n        linkedPerson: null\r\n    }),\r\n    methods: {\r\n        forceLogout: function() {\r\n            this.redirectToExternalLogout();\r\n        },\r\n        goToAppHome: function() {\r\n            this.loginBusy = false;\r\n            this.$router.push({path: '/frameworks'});\r\n        },\r\n        goToLegacyLogin: function() {\r\n            this.loginBusy = false;\r\n            this.loginCredentials = null;\r\n            this.identityToLinkToPerson = null;\r\n            this.$router.push({path: '/legacyLogin'});\r\n        },\r\n        goToCreateAccount: function() {\r\n            this.loginBusy = false;\r\n            this.loginCredentials = null;\r\n            this.identityToLinkToPerson = null;\r\n            this.$router.push({path: '/createAccount'});\r\n        },\r\n        addGroupIdentity: function(group) {\r\n            try {\r\n                // add all available group keys to identity manager\r\n                let groupPpkSet = group.getOrgKeys();\r\n                appLog(\"Adding group identities: \" + \"(\" + group.shortId() + \") - \" + group.getName() + \" - (\" + groupPpkSet.length + \") keys\");\r\n                for (let i = 0; i < groupPpkSet.length; i++) {\r\n                    let gPpk = groupPpkSet[i];\r\n                    let grpIdent = new EcIdentity();\r\n                    grpIdent.displayName = group.getName() + \" - key[\" + i + \"]\";\r\n                    grpIdent.ppk = gPpk;\r\n                    EcIdentityManager.addIdentityQuietly(grpIdent);\r\n                }\r\n            } catch (e) {\r\n                // TODO Problem with EcOrganization update and creating encrypted value when only a reader...\r\n                // Anticipated workaround....login as group owner and save it.\r\n                // console.error(\"TODO...fix this...needs FRITZ input!!!!: \" + e.toString());\r\n            }\r\n        },\r\n        searchRepositoryForGroupsSuccess: function(ecoa) {\r\n            let linkedPersonShortId = this.linkedPerson.shortId();\r\n            if (ecoa && ecoa.length > 0) {\r\n                for (let eco of ecoa) {\r\n                    if (eco.employee && eco.employee.length > 0) {\r\n                        for (let e of eco.employee) {\r\n                            if (!EcObject.isObject(e) && e.equals(linkedPersonShortId)) {\r\n                                this.addGroupIdentity(eco);\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this.goToAppHome();\r\n        },\r\n        searchRepositoryForGroupsFailure: function(msg) {\r\n            appLog(\"Group search failure: \" + msg);\r\n            this.goToAppHome();\r\n        },\r\n        addGroupIdentities: function() {\r\n            appLog(\"Finding assigned groups...\");\r\n            let paramObj = {};\r\n            paramObj.size = this.GROUP_SEARCH_SIZE;\r\n            EcOrganization.search(window.repo, '', this.searchRepositoryForGroupsSuccess, this.searchRepositoryForGroupsFailure, paramObj);\r\n            // this.goToAppHome();\r\n        },\r\n        handleCreatePersonSuccess: function() {\r\n            appLog(\"Person created.\");\r\n            this.addGroupIdentities();\r\n        },\r\n        createPersonObjectForIdentity: function() {\r\n            appLog(\"Creating person object for identity...\");\r\n            let p = new Person();\r\n            p.assignId(window.repo.selectedServer, this.identityToLinkToPerson.ppk.toPk().fingerprint());\r\n            p.addOwner(this.identityToLinkToPerson.ppk.toPk());\r\n            p.name = this.loginCredentials.name;\r\n            p.email = this.loginCredentials.email;\r\n            this.$store.commit('user/loggedOnPerson', p);\r\n            this.linkedPerson = p;\r\n            EcRepository.save(p, this.handleCreatePersonSuccess, this.handleAttemptLoginFetchIdentityFailureNoCreateAccountCheck);\r\n        },\r\n        findLinkedPersonPersonSearchSuccess: function(ecRemoteLda) {\r\n            appLog(\"Linked person person search success: \");\r\n            appLog(ecRemoteLda);\r\n            this.identityToLinkToPerson = EcIdentityManager.ids[0];\r\n            let matchingPersonRecordFound = false;\r\n            for (let ecrld of ecRemoteLda) {\r\n                let ep = new EcPerson();\r\n                ep.copyFrom(ecrld);\r\n                if (ep.getGuid().equals(this.identityToLinkToPerson.ppk.toPk().fingerprint())) {\r\n                    matchingPersonRecordFound = true;\r\n                    this.$store.commit('user/loggedOnPerson', ep);\r\n                    this.linkedPerson = ep;\r\n                    appLog('Matching person record found: ');\r\n                    appLog(ep);\r\n                    EcIdentityManager.saveContacts();\r\n                    EcIdentityManager.saveIdentities();\r\n                }\r\n            }\r\n            if (matchingPersonRecordFound) this.addGroupIdentities();\r\n            else {\r\n                appLog('Matching person record NOT found');\r\n                this.createPersonObjectForIdentity();\r\n            }\r\n        },\r\n        findLinkedPersonPersonSearchFailure: function(msg) {\r\n            this.loginBusy = false;\r\n            appLog('Linked person person search failure: ' + msg);\r\n        },\r\n        findLinkedPersonForIdentity: function() {\r\n            appLog(\"Finding linked person for identity...\");\r\n            let identFingerprint = EcIdentityManager.ids[0].ppk.toPk().fingerprint();\r\n            let paramObj = {};\r\n            paramObj.size = this.PERSON_SEARCH_SIZE;\r\n            window.repo.searchWithParams(\"@type:Person AND @id:\\\"\" + identFingerprint + \"\\\"\", paramObj, null,\r\n                this.findLinkedPersonPersonSearchSuccess, this.findLinkedPersonPersonSearchFailure);\r\n        },\r\n        handleCreateAccountFetchIdentitySuccess: function() {\r\n            appLog(\"Creating new account identity object...\");\r\n            let ident = new EcIdentity();\r\n            ident.displayName = this.loginCredentials.name;\r\n            ident.ppk = EcPpk.generateKey();\r\n            EcIdentityManager.addIdentity(ident);\r\n            EcIdentityManager.saveContacts();\r\n            EcIdentityManager.saveIdentities();\r\n            this.identityToLinkToPerson = ident;\r\n            this.ecRemoteIdentMgr.commit(this.createPersonObjectForIdentity, this.handleAttemptLoginFetchIdentityFailureNoCreateAccountCheck);\r\n        },\r\n        handleCreateAccountRemoteIdentityMgrCreateSuccess: function() {\r\n            appLog(\"Creating new account manager fetch...\");\r\n            this.ecRemoteIdentMgr.fetch(this.handleCreateAccountFetchIdentitySuccess, this.handleAttemptLoginFetchIdentityFailureNoCreateAccountCheck);\r\n        },\r\n        handleCreateAccountConfigureFromServerSuccess: function(obj) {\r\n            appLog(\"Creating new account identity...\");\r\n            this.ecRemoteIdentMgr.startLogin(this.loginCredentials.username, this.loginCredentials.password);\r\n            this.ecRemoteIdentMgr.create(this.handleCreateAccountRemoteIdentityMgrCreateSuccess, this.handleAttemptLoginFetchIdentityFailureNoCreateAccountCheck);\r\n        },\r\n        createNewAccountIdentity: function() {\r\n            appLog(\"Creating new account...\");\r\n            appLog(\"EcRemoteIdentityManager Configuring from server...\");\r\n            this.ecRemoteIdentMgr = new EcRemoteIdentityManager();\r\n            this.ecRemoteIdentMgr.server = window.repo.selectedServer;\r\n            this.ecRemoteIdentMgr.configureFromServer(this.handleCreateAccountConfigureFromServerSuccess, this.handleAttemptLoginConfigureFromServerFail);\r\n        },\r\n        handleAttemptLoginFetchIdentityFailureNoCreateAccountCheck: function(failMsg) {\r\n            // this shouldn't happen, but don't want to cause an unexpected create loop\r\n            this.identityFailMsg = failMsg;\r\n            this.identityFetchFailed = true;\r\n            this.loginBusy = false;\r\n        },\r\n        handleAttemptLoginFetchIdentitySuccess: function(obj) {\r\n            if (!EcIdentityManager.ids || EcIdentityManager.ids.length <= 0) {\r\n                this.handleAttemptLoginFetchIdentityFailure('Login credentials valid but no identity could be found.');\r\n            } else this.findLinkedPersonForIdentity();\r\n        },\r\n        handleAttemptLoginFetchIdentityFailure: function(failMsg) {\r\n            if (failMsg && failMsg.toLowerCase().trim().equals('user does not exist.')) {\r\n                this.createNewAccountIdentity();\r\n            } else {\r\n                this.identityFailMsg = failMsg;\r\n                this.identityFetchFailed = true;\r\n                this.loginBusy = false;\r\n            }\r\n        },\r\n        handleAttemptLoginConfigureFromServerSuccess: function(obj) {\r\n            appLog(\"Fetching identity...\");\r\n            // Creates the hashes for storage and retrieval of keys.\r\n            this.ecRemoteIdentMgr.startLogin(this.loginCredentials.username, this.loginCredentials.password);\r\n            // Retrieves the identities and encryption keys from the server.\r\n            this.ecRemoteIdentMgr.fetch(this.handleAttemptLoginFetchIdentitySuccess, this.handleAttemptLoginFetchIdentityFailure);\r\n        },\r\n        handleAttemptLoginConfigureFromServerFail: function(failMsg) {\r\n            this.configFailMsg = failMsg;\r\n            this.configRetrieveFailed = true;\r\n            this.loginBusy = false;\r\n        },\r\n        performInternalCassLogin: function() {\r\n            appLog(\"Attempting CaSS login....\");\r\n            this.loginBusy = true;\r\n            this.identityToLinkToPerson = null;\r\n            EcIdentityManager.clearContacts();\r\n            EcIdentityManager.clearIdentities();\r\n            this.ecRemoteIdentMgr = new EcRemoteIdentityManager();\r\n            this.ecRemoteIdentMgr.server = window.repo.selectedServer;\r\n            // Retrieve username and password salts from the server\r\n            this.ecRemoteIdentMgr.configureFromServer(this.handleAttemptLoginConfigureFromServerSuccess, this.handleAttemptLoginConfigureFromServerFail);\r\n        },\r\n        attemptExternalCassLogin: function() {\r\n            this.redirectToExternalLoginPage();\r\n        },\r\n        handleUserProfileAlreadyLoaded: function(profileResponse) {\r\n            let co = this.parseCredentialsFromProfileResponse(profileResponse);\r\n            if (co.username && co.username.trim().length > 0 && co.password && co.password.trim().length > 0) {\r\n                this.loginCredentials = co;\r\n                this.performInternalCassLogin();\r\n            } else {\r\n                appLog(\"Unable to parse credentials from user profile response\");\r\n            }\r\n        },\r\n        checkUserProfileRequestStatus: function(profileResponse) {\r\n            if (profileResponse.status === 401) {\r\n                this.loginBusy = false;\r\n            } else if (profileResponse.status === 200) {\r\n                this.handleUserProfileAlreadyLoaded(profileResponse);\r\n            } else {\r\n                appLog('Unexpected user profile response status: ' + profileResponse.status);\r\n                this.loginBusy = false;\r\n            }\r\n        },\r\n        checkLoginStatus: function() {\r\n            this.loginBusy = true;\r\n            this.getUserProfile(this.checkUserProfileRequestStatus);\r\n        }\r\n    },\r\n    computed: {\r\n        legacyLoginEnabled: function() {\r\n            return this.$store.getters['featuresEnabled/legacyLoginEnabled'];\r\n        },\r\n        apiLoginEnabled: function() {\r\n            return this.$store.getters['featuresEnabled/apiLoginEnabled'];\r\n        }\r\n    },\r\n    mounted() {\r\n        if (!this.apiLoginEnabled) this.goToLegacyLogin();\r\n        else this.checkLoginStatus();\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    @import '@/scss/variables.scss';\r\n#login {\r\n    position: fixed;\r\n    background-color: $light;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    height: 100vh;\r\n    width: 100vw;\r\n    .container {\r\n        height: 100%;\r\n    }\r\n    .columns {\r\n        height: 100%;\r\n    }\r\n    .container {\r\n    }\r\n    .modal-card {\r\n        width: 600px;\r\n        max-width: calc(100% - 1rem);\r\n    }\r\n    .card {\r\n        border-radius: 10px;\r\n        .card-header {\r\n            border-radius: 10px 10px 0px 0px;\r\n        }\r\n    }\r\n}\r\n\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=a4d035f0&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=a4d035f0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a4d035f0\",\n  null\n  \n)\n\nexport default component.exports","export const cassApi = {\r\n    name: 'cassApi',\r\n    data: () => ({\r\n        USER_PROFILE_SERVICE: \"user/profile\",\r\n        USER_CREATE_SERVICE: \"user\",\r\n        USER_LOGIN_SERVICE: \"login\",\r\n        USER_LOGOUT_SERVICE: \"logout\",\r\n        LOGOUT_REDIRECT_URL: window.location.origin + \"/cass-editor/#/login\"\r\n    }),\r\n    methods: {\r\n        parseCredentialsFromProfileResponse: function(profileResponse) {\r\n            let pro = JSON.parse(profileResponse.responseText);\r\n            let credentials = {};\r\n            credentials.username = pro[\"preferred_username\"];\r\n            credentials.password = pro[\"cass_password\"];\r\n            if (pro[\"email\"]) {\r\n                credentials.email = pro[\"email\"];\r\n            } else {\r\n                credentials.email = \"n/a\";\r\n            }\r\n            if (pro[\"name\"]) {\r\n                credentials.name = pro[\"name\"];\r\n            } else if (pro[\"given_name\"] && pro[\"family_name\"]) {\r\n                credentials.name = pro[\"given_name\"] + \" \" + pro[\"family_name\"];\r\n            } else {\r\n                credentials.name = pro[\"preferred_username\"];\r\n            }\r\n            return credentials;\r\n        },\r\n        performCreateUser: function(userInfo, responseCallback) {\r\n            let oReq = new XMLHttpRequest();\r\n            oReq.addEventListener(\"load\", (x) => responseCallback(x.currentTarget));\r\n            oReq.withCredentials = true;\r\n            let serviceEndpoint = this.cassApiLocation + this.USER_CREATE_SERVICE;\r\n            oReq.open(\"POST\", serviceEndpoint);\r\n            oReq.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");\r\n            oReq.send(JSON.stringify({\r\n                username: userInfo.username,\r\n                password: userInfo.password,\r\n                email: userInfo.email,\r\n                firstName: userInfo.firstName,\r\n                lastName: userInfo.lastName\r\n            }));\r\n        },\r\n        getUserProfile: function(responseCallback) {\r\n            let oReq = new XMLHttpRequest();\r\n            oReq.addEventListener(\"load\", (x) => responseCallback(x.currentTarget));\r\n            oReq.withCredentials = true;\r\n            let serviceEndpoint = this.cassApiLocation + this.USER_PROFILE_SERVICE;\r\n            oReq.open(\"GET\", serviceEndpoint);\r\n            oReq.send();\r\n        },\r\n        redirectToExternalLoginPage: function() {\r\n            appLog(\"Redirecting to external login...\");\r\n            window.location = this.cassApiLocation + this.USER_LOGIN_SERVICE + \"?redirectUrl=\" + encodeURIComponent(window.location);\r\n        },\r\n        // OLD Logout\r\n        // redirectToExternalLogout: function() {\r\n        //     appLog(\"Redirecting to external logout...\");\r\n        //     window.location = this.cassApiLocation + this.USER_LOGOUT_SERVICE + \"?redirectUrl=\" + encodeURIComponent(this.LOGOUT_REDIRECT_URL + this.addQueryParams());\r\n        // },\r\n        goToLogin: function() {\r\n            if (this.apiLoginEnabled) {\r\n                this.$router.push({path: '/login'});\r\n            } else {\r\n                this.$router.push({path: '/legacyLogin'});\r\n            }\r\n        },\r\n        checkExternalLogoutStatus: function(logoutResponse) {\r\n            if (logoutResponse.status !== 200) {\r\n                appLog('Logout fired but returned an unexpected response code: ' + logoutResponse.status);\r\n            }\r\n            this.goToLogin();\r\n        },\r\n        performExternalLogout: function() {\r\n            appLog(\"Performing external logout...\");\r\n            let oReq = new XMLHttpRequest();\r\n            oReq.addEventListener(\"load\", (x) => this.checkExternalLogoutStatus(x.currentTarget));\r\n            oReq.withCredentials = true;\r\n            let serviceEndpoint = this.cassApiLocation + this.USER_LOGOUT_SERVICE;\r\n            oReq.open(\"GET\", serviceEndpoint);\r\n            oReq.send();\r\n        },\r\n        performApplicationLogout: function() {\r\n            appLog(\"Performing application logout...\");\r\n            EcIdentityManager.clearContacts();\r\n            EcIdentityManager.clearIdentities();\r\n            let clearPerson = {};\r\n            this.$store.commit('user/loggedOnPerson', clearPerson);\r\n            if (this.apiLoginEnabled) this.performExternalLogout();\r\n            else this.goToLogin();\r\n        },\r\n        addQueryParams: function() {\r\n            let paramObj = this.$store.getters['editor/queryParams'];\r\n            let keys = EcObject.keys(paramObj);\r\n            if (paramObj && keys.length) {\r\n                let toAdd = '?';\r\n                for (let each in keys) {\r\n                    if (each !== 0) {\r\n                        toAdd += \"&\";\r\n                    }\r\n                    let key = keys[each];\r\n                    let val = paramObj[key];\r\n                    if (EcArray.isArray(val)) {\r\n                        for (let i in val) {\r\n                            if (i !== 0) {\r\n                                toAdd += \"&\";\r\n                            }\r\n                            toAdd += (key + \"=\" + val[i]);\r\n                        }\r\n                    } else {\r\n                        toAdd += (key + \"=\" + val);\r\n                    }\r\n                }\r\n                return toAdd;\r\n            } else {\r\n                return '';\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n        cassApiLocation: function() {\r\n            return this.$store.getters['environment/cassApiLocation'];\r\n        },\r\n        apiLoginEnabled: function() {\r\n            return this.$store.getters['featuresEnabled/apiLoginEnabled'];\r\n        }\r\n    }\r\n};","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=a4d035f0&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=a4d035f0&lang=scss&scoped=true&\""],"sourceRoot":""}