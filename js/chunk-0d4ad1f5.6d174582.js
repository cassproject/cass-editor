(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d4ad1f5","chunk-83807946","chunk-83807946"],{"0dd5":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t._self._c;return e("modal-template",{attrs:{active:!0,type:"primary"},on:{close:function(e){return t.$emit("close")}}},[e("template",{slot:"modal-header"},[e("span",{staticClass:"title has-text-white"},[t._v("Logged Out")])]),e("template",{slot:"modal-body"},[e("div",{staticClass:"section has-background-white has-text-centered"},[e("p",[e("strong",[t._v("You have been logged out.")])])])]),e("template",{slot:"modal-foot"},[e("div",{staticClass:"buttons is-spaced"},[e("button",{staticClass:"button is-secondary is-outlined",on:{click:function(e){return t.$store.commit("app/closeModal")}}},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-times-circle"})]),e("span",[t._v("close")])]),e("button",{staticClass:"button is-primary is-outlined",on:{click:t.close}},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-sign-in-alt"})]),e("span",[t._v("login")])])])])],2)},n=[],s=o("af07"),i=o("f3d2"),r={name:"LogoutSuccessModal",mixins:[i["a"]],props:{isActive:Boolean},components:{ModalTemplate:s["a"]},methods:{close:function(){this.$store.commit("app/closeModal"),this.$store.getters["featuresEnabled/apiLoginEnabled"]?this.redirectToExternalLogout():this.goToLogin()}}},c=r,l=o("2877"),d=Object(l["a"])(c,a,n,!1,null,null,null);e["default"]=d.exports},"2f8b":function(t,e,o){},"840c":function(t,e,o){"use strict";o("2f8b")},"984b":function(t,e,o){},af07:function(t,e,o){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal cass-editor___modal",class:[{"is-active":t.active},"is-"+t.size,"cass-editor__modal--"+t.content],attrs:{id:"cass-modal"}},[e("div",{staticClass:"modal-background"}),e("div",{staticClass:"modal-card",class:"cass-editor__modal-card--"+t.size},[e("header",{staticClass:"modal-card-head is-size-4 has-text-weight-bold",class:["has-background-"+t.type,"has-text-"+t.fontColor]},[e("p",{staticClass:"modal-card-title"},[t._t("modal-header")],2),t.canClose?e("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(e){t.$store.commit("app/closeModal"),t.$emit("close")}}}):t._e()]),e("div",{staticClass:"modal-card-body has-text-dark"},[t._t("modal-body")],2),e("footer",{staticClass:"modal-card-foot has-background-white"},[t._t("modal-foot")],2)])])},n=[],s=(o("984b"),{name:"ModalTemplate",props:{canClose:{type:Boolean,default:!0},active:{type:Boolean,default:!1},type:{default:"primary",type:String},fontColor:{type:String,default:"white"},size:{type:String,default:"medium"},content:{defualt:"default",type:String}},data:function(){return{}},computed:{}}),i=s,r=(o("840c"),o("2877")),c=Object(r["a"])(i,a,n,!1,null,null,null);e["a"]=c.exports},f3d2:function(t,e,o){"use strict";o.d(e,"a",(function(){return a}));o("b64b"),o("b0c0"),o("e9c4"),o("14d9"),o("d3b7"),o("ddb0");var a={name:"cassApi",data:function(){return{USER_PROFILE_SERVICE:"user/profile",USER_CREATE_SERVICE:"user",USER_LOGIN_SERVICE:"login",USER_LOGOUT_SERVICE:"logout",LOGOUT_REDIRECT_URL:window.location.origin+"/cass-editor/#/login"}},methods:{parseCredentialsFromProfileResponse:function(t){var e=JSON.parse(t.responseText),o={};return o.username=e["preferred_username"],o.password=e["cass_password"],e["email"]?o.email=e["email"]:o.email="n/a",e["name"]?o.name=e["name"]:e["given_name"]&&e["family_name"]?o.name=e["given_name"]+" "+e["family_name"]:o.name=e["preferred_username"],o},performCreateUser:function(t,e){var o=new XMLHttpRequest;o.addEventListener("load",(function(t){return e(t.currentTarget)})),o.withCredentials=!0;var a=this.cassApiLocation+this.USER_CREATE_SERVICE;o.open("POST",a),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.send(JSON.stringify({username:t.username,password:t.password,email:t.email,firstName:t.firstName,lastName:t.lastName}))},getUserProfile:function(t){var e=new XMLHttpRequest;e.addEventListener("load",(function(e){return t(e.currentTarget)})),e.withCredentials=!0;var o=this.cassApiLocation+this.USER_PROFILE_SERVICE;e.open("GET",o),e.send()},redirectToExternalLogin:function(){appLog("Redirecting to external login..."),window.location=this.repositorySsoOptions.ssoLogin+"?redirectUrl="+encodeURIComponent(window.location)},redirectToExternalLogout:function(){appLog("Redirecting to external logout..."),window.location=this.repositorySsoOptions.ssoLogout+"?redirectUrl="+encodeURIComponent(window.location)},goToLogin:function(){this.apiLoginEnabled?this.$router.push({path:"/login"}):this.$router.push({path:"/legacyLogin"})},checkExternalLogoutStatus:function(t){200!==t.status&&appLog("Logout fired but returned an unexpected response code: "+t.status),this.goToLogin()},performExternalLogout:function(){var t=this;appLog("Performing external logout...");var e=new XMLHttpRequest;e.addEventListener("load",(function(e){return t.checkExternalLogoutStatus(e.currentTarget)})),e.withCredentials=!0;var o=this.cassApiLocation+this.USER_LOGOUT_SERVICE;e.open("GET",o),e.send()},performApplicationLogout:function(){appLog("Performing application logout..."),EcIdentityManager.default.clearContacts(),EcIdentityManager.default.clearIdentities();var t={};this.$store.commit("user/loggedOnPerson",t),this.$store.commit("app/showModal",{component:"LogoutSuccess"})},performApplicationLogin:function(){appLog("Performing application login..."),EcIdentityManager.default.clearContacts(),EcIdentityManager.default.clearIdentities();var t={};this.$store.commit("user/loggedOnPerson",t),this.apiLoginEnabled?this.redirectToExternalLogin():this.goToLogin()},addQueryParams:function(){var t=this.$store.getters["editor/queryParams"],e=EcObject.keys(t);if(t&&e.length){var o="?";for(var a in e){0!==a&&(o+="&");var n=e[a],s=t[n];if(EcArray.isArray(s))for(var i in s)0!==i&&(o+="&"),o+=n+"="+s[i];else o+=n+"="+s}return o}return""}},computed:{cassApiLocation:function(){return this.$store.getters["environment/cassApiLocation"]},repositorySsoOptions:function(){return this.$store.getters["user/repositorySsoOptions"]},apiLoginEnabled:function(){return this.$store.getters["featuresEnabled/apiLoginEnabled"]}}}}}]);
//# sourceMappingURL=chunk-0d4ad1f5.6d174582.js.map