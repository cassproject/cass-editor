(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a165d4e4","chunk-83807946","chunk-83807946"],{"26bb":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e._self._c;return t("modal-template",{attrs:{type:"danger",size:"small",active:!0},on:{close:e.closeModal}},[t("template",{slot:"modal-header"},[e._v(" Confirm Delete Concept ")]),t("template",{slot:"modal-body"},[t("section",[t("b",[e._v(" Warning! This action is permanent. ")])])]),t("template",{slot:"modal-foot"},[t("button",{staticClass:"is-danger is-outlined button",on:{click:function(t){return e.deleteItem()}}},[e._v(" Delete Concept ")]),t("button",{staticClass:"is-dark button",on:{click:function(t){return e.closeModal()}}},[e._v(" Cancel ")])])],2)},r=[],s=o("c7eb"),n=o("1da1"),i=(o("fb6a"),o("14d9"),o("b64b"),o("e9c4"),o("a434"),o("af07")),c=o("872c"),d={name:"DeleteConceptConfirm",components:{ModalTemplate:i["a"]},mixins:[c["a"]],computed:{obj:function(){return this.$store.getters["editor/itemToDelete"]},framework:function(){return this.$store.getters["editor/framework"]}},data:function(){return{editsToUndo:[]}},methods:{deleteItem:function(){this.deleteObject(this.obj),this.closeModal()},closeModal:function(){this.$store.commit("app/closeModal"),this.$store.commit("editor/setItemToDelete",{})},deleteObject:function(e){appLog("deleting "+e.id),this.deleteConceptInner(e),this.framework["schema:dateModified"]=(new Date).toISOString(),this.$store.commit("editor/selectedCompetency",null)},deleteConceptInner:function(){var e=Object(n["a"])(Object(s["a"])().mark((function e(t){var o,a,r,n,i,c;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=this,null==t["skos:broader"]){e.next=27;break}a=0;case 3:if(!(a<t["skos:broader"].length)){e.next=27;break}return e.prev=4,e.next=7,EcConcept.get(t["skos:broader"][a]);case 7:if(r=e.sent,n=r["skos:narrower"].slice(),EcArray.setRemove(r["skos:narrower"],t.shortId()),r["schema:dateModified"]=(new Date).toISOString(),o.editsToUndo.push({operation:"update",id:r.shortId(),fieldChanged:["skos:narrower"],initialValue:[n]}),!0!==o.$store.state.editor.private||!0===EcEncryptedValue.encryptOnSaveMap[r.id]){e.next=16;break}return e.next=15,EcEncryptedValue.toEncryptedValue(r);case 15:r=e.sent;case 16:return e.next=18,repo.saveTo(r);case 18:o.$store.commit("editor/framework",o.framework),e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](4),appError(e.t0);case 24:a++,e.next=3;break;case 27:if(null==t["skos:narrower"]){e.next=43;break}a=0;case 29:if(!(a<t["skos:narrower"].length)){e.next=43;break}return e.prev=30,e.next=33,EcConcept.get(t["skos:narrower"][a]);case 33:i=e.sent,o.deleteConceptInner(i),e.next=40;break;case 37:e.prev=37,e.t1=e["catch"](30),appError(e.t1);case 40:a++,e.next=29;break;case 43:if(null==t["skos:topConceptOf"]){e.next=62;break}if(e.prev=44,n=this.framework["skos:hasTopConcept"].slice(),EcArray.setRemove(this.framework["skos:hasTopConcept"],t.shortId()),o.editsToUndo.push({operation:"update",id:this.framework.shortId(),fieldChanged:["skos:hasTopConcept"],initialValue:[n]}),c=this.framework,c["schema:dateModified"]=(new Date).toISOString(),!0!==this.$store.state.editor.private||!0===EcEncryptedValue.encryptOnSaveMap[c.id]){e.next=54;break}return e.next=53,EcEncryptedValue.toEncryptedValue(c);case 53:c=e.sent;case 54:return e.next=56,repo.saveTo(c);case 56:o.$store.commit("editor/framework",o.framework),e.next=62;break;case 59:e.prev=59,e.t2=e["catch"](44),appError(e.t2);case 62:this.spitEvent("conceptDeleted",t.shortId(),"editFrameworkPage"),o.editsToUndo.push({operation:"delete",obj:t}),repo.deleteRegistered(t,(function(){o.$store.commit("editor/framework",o.framework),o.$store.commit("editor/addEditsToUndo",JSON.parse(JSON.stringify(o.editsToUndo))),o.editsToUndo.splice(0,o.editsToUndo.length)}),appError);case 65:case"end":return e.stop()}}),e,this,[[4,21],[30,37],[44,59]])})));function t(t){return e.apply(this,arguments)}return t}()}},l=d,p=o("2877"),u=Object(p["a"])(l,a,r,!1,null,null,null);t["default"]=u.exports},"2f8b":function(e,t,o){},"840c":function(e,t,o){"use strict";o("2f8b")},"984b":function(e,t,o){},af07:function(e,t,o){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal cass-editor___modal",class:[{"is-active":e.active},"is-"+e.size,"cass-editor__modal--"+e.content],attrs:{id:"cass-modal"}},[t("div",{staticClass:"modal-background"}),t("div",{staticClass:"modal-card",class:"cass-editor__modal-card--"+e.size},[t("header",{staticClass:"modal-card-head is-size-4 has-text-weight-bold",class:["has-background-"+e.type,"has-text-"+e.fontColor]},[t("p",{staticClass:"modal-card-title"},[e._t("modal-header")],2),e.canClose?t("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(t){e.$store.commit("app/closeModal"),e.$emit("close")}}}):e._e()]),t("div",{staticClass:"modal-card-body has-text-dark"},[e._t("modal-body")],2),t("footer",{staticClass:"modal-card-foot has-background-white"},[e._t("modal-foot")],2)])])},r=[],s=(o("984b"),{name:"ModalTemplate",props:{canClose:{type:Boolean,default:!0},active:{type:Boolean,default:!1},type:{default:"primary",type:String},fontColor:{type:String,default:"white"},size:{type:String,default:"medium"},content:{defualt:"default",type:String}},data:function(){return{}},computed:{}}),n=s,i=(o("840c"),o("2877")),c=Object(i["a"])(n,a,r,!1,null,null,null);t["a"]=c.exports}}]);
//# sourceMappingURL=chunk-a165d4e4.dc86e74e.js.map