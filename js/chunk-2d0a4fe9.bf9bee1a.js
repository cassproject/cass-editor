(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a4fe9"],{"098b":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"lode__thing",class:[e.editingClass,{"managing-assertions":e.managingAssertions},{highlighted:e.highlighted},{"show-all":"showAll"===e.filter},{"show-aligned":"showAligned"===e.filter},{"show-unaligned":"showUnaligned"===e.filter}]},[e._t("thingIcon"),i("div",{class:"Framework"!==e.shortType&&"Concept"!==e.shortType?"container":"container is-fluid is-paddingless is-marginless"},[e.clickToLoad?i("span",{staticClass:"click-to-load",attrs:{title:e.name?e.name:e.uri}},[i("span",{staticClass:"tag is-size-7 is-light",class:[{"is-link":e.competencyAsPropertyIsExternal},{"is-primary":!e.competencyAsPropertyIsExternal}]},[e._v(e._s(e.competencyAsPropertyType))]),i("span",{staticClass:"thing-as-property__text",class:e.competencyAsPropertyClass},[e._v(" "+e._s(e.name?e.name:e.uri)+" ")]),e.competencyAsPropertyIsExternal||"Level"===e.thingAsPropertyModalObject.type?e._e():i("div",{staticClass:"button  is-small is-outlined is-primary",on:{click:function(t){return e.goToCompetencyWithinThisFramework()}}},[i("span",{staticClass:"has-text-weight-bold"},[e._v("scroll to")]),e._m(0)]),"Competency"===e.thingAsPropertyModalObject.objectType||"Concept"===e.thingAsPropertyModalObject.objectType||"Level"===e.thingAsPropertyModalObject.objectType?i("button",{staticClass:"button  is-small is-outlined is-link",on:{click:e.clickShowDetails}},[i("span",{staticClass:"has-text-weight-bold"},[e._v("details")]),e._m(1)]):e._e()]):e.uriAndNameOnly?i("span",{staticClass:"thing-as-property__text",class:e.competencyAsPropertyClass,attrs:{title:e.name?e.name:e.uri}},[e._v(" "+e._s(e.name?e.name:e.uri)+" ")]):e.expandedThing?i("div",{class:["lode__"+e.shortType,e.hoverClass,{highlighted:e.highlighted}]},["ConceptScheme"===e.shortType||"Framework"===e.shortType&&"crosswalk"!==e.view?i("div",{staticClass:"hierarchy-item__buttons"},["crosswalk"!==e.view&&e.canEdit?i("div",{staticClass:"edit-button button is-small is-text has-text-primary",on:{click:function(t){return e.editNode()}}},[e._m(2)]):e._e(),e.showAddComments&&"framework"===e.view?i("div",{staticClass:"comment-button"},[i("div",{staticClass:"button is-text has-text-primary is-small",on:{click:e.handleClickAddComment}},[e._m(3)])]):e._e()]):e._e(),e.expandedThing["@id"]?i("a",{staticClass:"lode__type"},[e.shortType?i("span",{attrs:{title:e.type}},[e._v(" "+e._s(e.shortType)+" ")]):e._e()]):e.shortType?i("span",{staticClass:"lode__type",attrs:{title:e.type}},[e._v(e._s(e.shortType))]):e._e(),e._t("default"),i("div",{staticClass:"headings-group",class:{highlighted:e.highlighted}},e._l(e.headings,(function(t){return i("div",{key:t,staticClass:"lode__thing-heading"},[e.showAlwaysProperties&&e.alwaysProperties[t]?[e._l(e.alwaysProperties[t],(function(t,s){return i("Property",{key:s,attrs:{expandedThing:e.expandedThing,expandedProperty:s,schema:t,editingThing:e.editingThing,canEdit:!1,profile:e.profile},on:{"editing-property-event":function(t){return e.handleEditingEvent(t)},select:e.select}})})),e._t("frameworkTags")]:e.showPossibleProperties&&e.possibleProperties[t]?e._l(e.possibleProperties[t],(function(t,s){return i("Property",{key:s,attrs:{expandedThing:e.expandedThing,expandedProperty:s,schema:t,editingThing:e.editingThing,canEdit:e.allowPropertyEdits(s),profile:e.profile},on:{"editing-property-event":function(t){return e.handleEditingEvent(t)},select:e.select}})})):e.showViewProperties&&e.viewProperties[t]?e._l(e.viewProperties[t],(function(t,s){return i("Property",{key:s,attrs:{expandedThing:e.expandedThing,expandedProperty:s,schema:t,editingThing:e.editingThing,canEdit:e.allowPropertyEdits(s),profile:e.profile},on:{"editing-property-event":function(t){return e.handleEditingEvent(t)},select:e.select}})})):e._e()],2)})),0),e.managingAssertions?i("AssertionEditor",{attrs:{uri:e.uri||e.obj.id}}):e._e(),e._t("frameworkDetails")],2):e._e()])],2)},n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon is-small"},[i("i",{staticClass:"fa fa-external-link-alt"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon is-small"},[i("i",{staticClass:"fa fa-info"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"icon is-small"},[i("i",{staticClass:"fa fa-edit is-size-5"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"icon is-small"},[i("i",{staticClass:"fa fa-comment-medical is-size-5"})])}],r=(i("99af"),i("a15b"),i("a434"),i("b0c0"),i("a9e3"),i("b64b"),i("d3b7"),i("ac1f"),i("8a79"),i("5319"),i("1276"),i("2ca0"),i("ddb0"),i("96cf"),i("c964")),o=i("54f8"),a={name:"Thing",props:{expandInModal:{type:Boolean,default:!1},competencyAsPropertyType:{type:String,default:""},competencyAsPropertyObjectType:{type:String,default:""},obj:Object,children:Number,expandedObj:Object,uri:String,clickToLoad:Boolean,parentNotEditable:Boolean,profile:Object,highlightList:Array,childrenExpanded:{type:Boolean,default:!0},newFramework:Boolean,index:Number,cantMoveUp:Boolean,cantMoveDown:Boolean,cantMoveRight:Boolean,cantMoveLeft:Boolean,properties:String,editingNode:Boolean,containerType:String,view:{type:String,default:"framework"},subview:{type:String,default:""},filter:{type:String,default:"showAll"}},components:{Property:function(){return Promise.all([i.e("chunk-53caa434"),i.e("chunk-f3b8fe20")]).then(i.bind(null,"5e26"))},AssertionEditor:function(){return i.e("chunk-2d0cbec1").then(i.bind(null,"4c73"))}},data:function(){return{editingThing:!1,editingClass:"",hoverClass:"",expandedThing:null,originalThing:null,showAlways:!0,showPossible:!1,uriAndNameOnly:!1,name:null,skipConfigProperties:["alwaysProperties","headings","primaryProperties","secondaryProperties","tertiaryProperties","relationshipsHeading","relationshipsPriority"]}},created:function(){!1===this.clickToLoad&&this.load()},mounted:function(){this.expandInModal&&this.load(),this.uri&&this.$store.state.editor&&this.resolveNameFromUrl(this.uri),"secondary"===this.properties?(this.showAlways=!1,this.showPossible=null):"tertiary"===this.properties&&(this.showAlways=!1,this.showPossible=!0)},computed:{thingAsPropertyModalObject:function(){appLog("this parent",this.$parent.$parent.obj.name),appLog("Expanded thing: ",this.expandedThing);var e=this.$parent.$parent.obj.name;e||(e=this.$parent.$parent.obj["skos:prefLabel"]);var t={component:"Single",uri:this.uri,type:this.competencyAsPropertyType,objectType:this.competencyAsPropertyObjectType,parentName:e,canEdit:this.canEdit};return t},framework:function(){return this.$store.getters["editor/framework"]},thingAsPropertyIcon:function(){var e,t;return e="Level"===this.competencyAsPropertyObjectType?"level":""!==this.competencyAsPropertyType?this.competencyAsPropertyType:this.shortType,t="narrows"===e?"fa fa-less-than":"is enabled by"===e?"fa fa-toggle-on":"broadens"===e?"fa fa-less-than":"is equivalent to"===e?"fa fa-equals":"desires"===e?"fa fa-crosshairs":"requires"===e?"fa fa-asterisk":"Level"===e||"level"===e||"Level"===this.objectType||"level"===this.objectType?"fa fa-layer-group":"is related to"===e?"fa fa-sync":"similar to"===e?"fa fa-tilde":"fa fa-link",t},showAddComments:function(){return"true"!==this.$store.getters["editor/queryParams"].concepts&&this.$store.state.app.canAddComments},competencyAsPropertyClass:function(){return this.competencyAsPropertyIsExternal?"competency-as-property":""},showAlwaysProperties:function(){return!0===this.showAlways&&null!==this.expandedThing&&void 0!==this.expandedThing},showPossibleProperties:function(){return!0===this.showPossible&&null!=this.expandedThing&&void 0!==this.expandedThing},showViewProperties:function(){return!1===this.showAlways&&null===this.showPossible&&null!==this.expandedThing&&void 0!==this.expandedThing},headings:function(){return this.profile&&this.profile["headings"]&&0!==this.profile["headings"].length?this.profile["headings"]:[""]},minimizeButtonClass:function(){return!0===this.showAlways&&!1===this.showPossible?"is-text has-text-info ":"is-text has-text-dark"},allPropertiesButtonClass:function(){return!1===this.showAlways&&null===this.showPossible?"is-info has-text-white ":"is-text has-text-dark"},globalButtonClass:function(){return!1===this.showAlways&&!0===this.showPossible?"is-info has-text-white ":"is-text has-text-dark"},type:function(){return null==this.expandedThing?null:this.expandedThing["@type"][0]},competencyAsPropertyIsExternal:function(){var e=!0;if(this.framework)if("Level"===this.objectType&&this.framework.level){for(var t=0;t<this.framework.level.length;t++)if(this.framework.level[t]===this.uri)return e=!1,e}else if(this.framework.competency)for(var i=0;i<this.framework.competency.length;i++)if(this.framework.competency[i]===this.uri)return e=!1,e;return e},shortType:function(){return null==this.expandedThing?null:this.expandedThing["@type"][0].split("/").pop()},context:function(){var e=this.type.split("/");return e.pop(),e.join("/")},canEdit:function(){return!0!==this.parentNotEditable&&(!this.originalThing||!this.originalThing.canEditAny||this.originalThing.canEditAny(EcIdentityManager.default.getMyPks()))},schema:function(){var e=this.$store.state.lode.schemata[this.type];null==e&&(e=this.$store.state.lode.schemata[this.context]);var t={};if(null!==e&&void 0!==e)for(var i=0;i<e.length;i++){var s=e[i];t[s["@id"]]=s}return t},alwaysProperties:function(){var e={};if(this.profile&&this.profile["alwaysProperties"])return this.getPropertiesFromProfile(e,"alwaysProperties");if(this.profile&&this.profile["primaryProperties"])return this.getPropertiesFromProfile(e,"primaryProperties");for(var t=["http://schema.org/name","http://schema.org/description","http://purl.org/dc/terms/title","http://purl.org/dc/terms/description","http://www.w3.org/2004/02/skos/core#prefLabel","http://www.w3.org/2004/02/skos/core#definition"],i=0;i<t.length;i++){var s=t[i];if((null==this.profile||null!=this.profile&&void 0!==this.profile[s])&&null!=this.schema[s]&&(null!=this.expandedThing[s]&&0===this.expandedThing[s].length&&("http://schema.org/name"!==s&&"http://purl.org/dc/terms/title"!==s&&"http://www.w3.org/2004/02/skos/core#prefLabel"!==s||this.setUnknownName(s)),null!=this.expandedThing[s]&&0!==this.expandedThing[s].length)){var n="";null!=this.profile?(this.profile[s]["heading"]&&(n=this.profile[s]["heading"]),null!=e[n]&&void 0!==e[n]||(e[n]={}),e[n][s]=this.profile[s]):(null!=e[n]&&void 0!==e[n]||(e[n]={}),e[n][s]=this.schema[s])}}return e},viewProperties:function(){var e={};for(var t in this.alwaysProperties)for(var i in e[t]={},this.alwaysProperties[t])e[t][i]=this.alwaysProperties[t][i];if(this.profile&&this.profile["secondaryProperties"])return this.getPropertiesFromProfile(e,"secondaryProperties");for(var t in this.expandedThing)if("constructor"!==t&&"@id"!==t&&"@type"!==t&&"@context"!==t&&!t.endsWith("owner")&&!t.endsWith("reader")&&!t.endsWith("signature")&&(null==this.profile||void 0!==this.profile[t])&&null!=this.expandedThing[t]&&0!==this.expandedThing[t].length)if(null==this.profile)null==this.schema[t]||void 0===this.schema[t]?(null!=e[""]&&void 0!==e[""]||(e[""]={}),e[""][t]=this.$store.state.lode.schemaFallback[t]):(null!=e[""]&&void 0!==e[""]||(e[""]={}),e[""][t]=this.schema[t]);else{var s="";this.profile[t]["heading"]&&(s=this.profile[t]["heading"]),null!=e[s]&&void 0!==e[s]||(e[s]={}),e[s][t]=this.profile[t]}if(this.profile)for(var t in this.profile){s="";if(this.profile[t]["heading"]&&(s=this.profile[t]["heading"]),null==e[s]&&void 0===e[s]&&(e[s]={}),this.profile[t]["valuesIndexed"]){var n=this.profile[t]["valuesIndexed"];n=n(),n&&n[this.obj.shortId()]&&(e[s][t]=this.profile[t])}else null!=this.expandedThing[t]&&0!==this.expandedThing[t].length&&(e[s][t]=this.profile[t])}return e},possibleProperties:function(){var e={};for(var t in this.viewProperties)for(var i in e[t]={},this.viewProperties[t])e[t][i]=this.viewProperties[t][i];if(this.profile&&this.profile["tertiaryProperties"])return this.getPropertiesFromProfile(e,"tertiaryProperties");if(null!=this.profile){for(var t in this.profile)if(!EcArray.has(this.skipConfigProperties,t))if(this.profile["headings"]&&0!==this.profile["headings"].length){var s=this.profile[t]["heading"];null!=e[s]&&void 0!==e[s]||(e[s]={}),e[s][t]=this.profile[t]}else null!=e[""]&&void 0!==e[""]||(e[""]={}),e[""][t]=this.profile[t]}else for(var t in this.schema)"constructor"!==t&&"@id"!==t&&"@type"!==t&&"@context"!==t&&(t.endsWith("owner")||t.endsWith("reader")||t.endsWith("signature")||null!=this.profile&&void 0===this.profile[t]||void 0===this.schema[t]["@type"]&&void 0===this.schema[t]["http://schema.org/domainIncludes"]||null!=this.schema[t]["@type"]&&-1===this.schema[t]["@type"][0].indexOf("Property")||(null==this.schema[t]||void 0===this.schema[t]?(null!=e[""]&&void 0!==e[""]||(e[""]={}),e[""][t]=this.$store.state.lode.schemaFallback[t]):(null!=e[""]&&void 0!==e[""]||(e[""]={}),e[""][t]=this.schema[t])));return e},iconClass:function(){return"fas fa-"+this.shortType.toLowerCase()},highlighted:function(){if(this.highlightList)for(var e=0;e<this.highlightList.length;e++)if(this.obj.shortId()===this.highlightList[e]||this.obj.id===this.highlightList[e])return!0;return!1},changedObject:function(){return this.$store.state.editor?this.$store.state.editor.changedObject:null},managingAssertions:function(){return this.$store.getters["editor/manageAssertions"]&&"Competency"===this.shortType&&"framework"===this.$route.name}},methods:{clickShowDetails:function(){this.$store.commit("app/showModal",this.thingAsPropertyModalObject)},goToCompetencyWithinThisFramework:function(){this.$scrollTo("#scroll-"+this.uri.split("/").pop())},handleClickAddComment:function(){this.$store.commit("editor/setAddCommentAboutId",EcRemoteLinkedData.trimVersionFromUrl(this.expandedThing["@id"])),this.$store.commit("editor/setAddCommentType","new"),this.$store.commit("app/showModal",{component:"AddComment"})},editNode:function(){this.$emit("edit-node-event",!0)},handleEditingEvent:function(e){e?(this.editingClass="editing-competency",this.editingThing=!0,this.$emit("editing-thing",!0)):(this.editingClass="",this.editingThing=!1,this.$emit("editing-thing",!1))},showEnteredProperties:function(){this.showAlways=!1,this.showPossible=null},showGlobal:function(){this.showAlways=!1,this.showPossible=!0},emitExpandEvent:function(e){this.$emit("expand-event")},load:function(){var e=this;if(null!=this.uri)EcRepository.get(this.uri,(function(t){if(e.originalThing=t,EcObject.isObject(t)){var i=e.getAllTypes(t);null!=t.context&&void 0!==t.context&&i.push(t.context),(new EcAsyncHelper).each(i,(function(t,i){e.loadSchema(i,t)}),(function(){e.expand(t,(function(){}))}))}else e.resolveNameFromUrl(e.uri),e.uriAndNameOnly=!0}),(function(){e.resolveNameFromUrl(e.uri),e.uriAndNameOnly=!0}));else if(null!=this.expandedObj&&void 0!==this.expandedObj)this.loadSchema((function(){e.expandedThing=e.expandedObj}),this.expandedObj["@type"][0]);else if(this.obj){e.originalThing=this.obj;var t=e.getAllTypes(this.obj);null!=this.obj.context&&void 0!==this.obj.context&&t.push(this.obj.context),(new EcAsyncHelper).each(t,(function(t,i){setTimeout((function(){e.loadSchema(i,t)}),1e3)}),(function(){e.expand(e.obj,(function(){}))}))}},reactify:function(e){for(var t in e)if(EcArray.isArray(e[t])){var i,s=Object(o["a"])(e[t]);try{for(s.s();!(i=s.n()).done;){var n=i.value;EcObject.isObject(n)&&null!=n["@type"]&&this.reactify(n)}}catch(c){s.e(c)}finally{s.f()}}var r=null,a=e["@type"];EcArray.isArray(a)&&a.length>0&&(a=a[0]);r=this.$store.state.lode.objectModel[a];if(null!=r)for(var h in r)null==e[h]&&(e[h]=[]);if(this.profile)for(var l in this.profile)null!=e[l]||this.profile[l]["valuesIndexed"]||EcArray.has(this.skipConfigProperties,l)||(e[l]=[]);return e},expand:function(e,t){var i=this,s=JSON.parse(e.toJson());null!=s["@context"]&&s["@context"].startsWith("http://")&&(s["@context"]=s["@context"].replace("http://","https://")),null!=s["@context"]&&-1!==s["@context"].indexOf("skos")&&(s["@context"]="https://schema.cassproject.org/0.4/skos/"),jsonld.expand(s,(function(e,t){null==e?i.expandedThing=i.reactify(t[0]):appError(e)}))},loadSchema:function(e,t){var i=this;if(null==t&&(t=this.type),t.startsWith("http://schema.org/"))null!=e&&e();else if(-1!==t.indexOf("ConceptScheme")?t="https://schema.cassproject.org/0.4/skos/ConceptScheme":-1!==t.indexOf("Concept")?t="https://schema.cassproject.org/0.4/skos/Concept":-1!==t.indexOf("skos")&&(t="https://schema.cassproject.org/0.4/skos"),void 0===this.$store.state.lode.schemata[t]&&-1===t.indexOf("EncryptedValue")){var s=t;s+=-1!==t.indexOf("schema.org")?".jsonld":"",EcRemote.getExpectingObject("",s,(function(s){i.$store.commit("lode/rawSchemata",{id:t,obj:s}),jsonld.expand(s,(function(s,n){null==s?(i.$store.dispatch("lode/schemata",{id:t,obj:n}),null!=e&&e()):e()}))}),e)}else null!=e&&e()},add:function(e,t){var i=this;(new EcAsyncHelper).each(i.getAllTypes(t),(function(e,t){i.loadSchema(t,e)}),(function(){void 0!==i.expandedThing[e]&&null!=i.expandedThing[e]||(i.expandedThing[e]=[]),EcArray.isArray(i.expandedThing[e])||(i.expandedThing[e]=[i.expandedThing[e]]),null==t["@value"]?jsonld.expand(JSON.parse(t.toJson()),(function(t,s){null!=t?appError(t):i.expandedThing[e].push(i.reactify(s[0]))})):i.expandedThing[e].push(t)}))},remove:function(e,t){EcArray.isArray(this.expandedThing[e])||(this.expandedThing[e]=[this.expandedThing[e]]),this.expandedThing[e].splice(t,1),this.save()},update:function(e,t,i){null==t?this.expandedThing[e]=i:this.expandedThing[e][t]=i},save:function(){var e=this,t=this;while(null==e.expandedThing["@id"]||void 0===e.expandedThing["@id"])if(e=e.$parent.$parent,null==e.expandedThing)return"Could not save.";jsonld.compact(this.stripEmptyArrays(this.expandedThing),this.$store.state.lode.rawSchemata[this.context],function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(i,s){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!=i&&appError(i),!s){e.next=13;break}if(n=new EcRemoteLinkedData,n.copyFrom(s),n.context=t.context,n.signature&&!EcArray.isArray(n.signature)&&(n.signature=[n.signature]),delete n["@context"],n.owner&&!EcArray.isArray(n.owner)&&(n.owner=[n.owner]),!t.$store.state.editor||!0!==t.$store.state.editor.private||!0===EcEncryptedValue.encryptOnSaveMap[n.id]){e.next=12;break}return e.next=11,EcEncryptedValue.toEncryptedValue(n);case 11:n=e.sent;case 12:repo.saveTo(n,appLog,appError);case 13:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}())},stripEmptyArrays:function(e){if(EcArray.isArray(e)){if(0===e.length)return null;for(var t=0;t<e.length;t++)e[t]=this.stripEmptyArrays(e[t]),null==e[t]&&e.splice(t--,1)}else if(EcObject.isObject(e))for(var i in e){var s=this.stripEmptyArrays(e[i]);null==s&&delete e[i]}return e},getAllTypes:function(e,t){var i=[];if(null!=e&&null!=e.context&&(t=e.context),EcArray.isArray(e))for(var s=0;s<e.length;s++)i=i.concat(this.getAllTypes(e[s],t));else if(EcObject.isObject(e))for(var n in null!=e.type&&(null==e.context&&(e.context=t),i.push(e.context+(e.context.endsWith("/")?"":"/")+e.type)),null!=e["@type"]&&(null==e["@context"]&&(e["@context"]=t),-1===e["@type"].indexOf("schema:")&&i.push(e["@context"]+(e["@context"].endsWith("/")?"":"/")+e["@type"])),e)i=i.concat(this.getAllTypes(e[n],t));return i},removeObject:function(){this.$emit("remove-object",this.originalThing)},resolveNameFromUrl:function(e){var t=this;EcRepository.get(e,(function(e){var i=e.name;if(i||(i=e["skos:prefLabel"]),i=schema.Thing.getDisplayStringFrom(i),EcObject.isObject(i)){var s=Object.keys(i);i=i[s[0]]}t.name=i}),(function(i){t.get(e,null,null,(function(e){var i=null;if(e&&"<"!==e[0]&&(e=JSON.parse(e),e["ceterms:name"]?i=e["ceterms:name"]:e["ceasn:competencyText"]?i=e["ceasn:competencyText"]:e["name"]?i=e["name"]:e["schema:name"]?i=e["schema:name"]:e["title"]?i=e["title"]:e["skos:prefLabel"]?i=e["skos:prefLabel"]:e["title"]?i=e["title"]:e["@graph"]&&e["@graph"][0]&&(e["@graph"][0]["ceterms:name"]?i=e["@graph"][0]["ceterms:name"]:e["@graph"][0]["name"]?i=e["@graph"][0]["name"]:e["@graph"][0]["schema:name"]?i=e["@graph"][0]["schema:name"]:e["@graph"][0]["title"]?i=e["@graph"][0]["title"]:e["@graph"][0]["skos:prefLabel"]&&(i=e["@graph"][0]["skos:prefLabel"])),i=schema.Thing.getDisplayStringFrom(i),EcObject.isObject(i))){var s=Object.keys(i);i=i[s[0]]}t.name=i}),(function(e){appLog(e)}))}))},get:function(e,t,i,s,n){var r=EcRemote.urlAppend(e,t);r=EcRemote.upgradeHttpToHttps(r);var o=null;if("undefined"===typeof httpStatus){if(o=new XMLHttpRequest,o.open("GET",r,!0),null!=i)for(var a=EcObject.keys(i),h=0;h<a.length;h++)o.setRequestHeader(a[h],i[a[h]]);var l=o;o.onreadystatechange=function(){4===l.readyState&&200===l.status&&(null!=s?s(l.responseText):4===l.readyState&&null!=n&&n(l.responseText))}}null!=o&&(o["timeout"]=EcRemote.timeout),"undefined"!==typeof httpStatus?null!=s&&s(JSON.stringify(httpGet(r))):o.send()},allowPropertyEdits:function(e){return"@id"!==e&&"ctid"!==e&&"registryURL"!==e&&((!this.profile||!this.profile[e]||!0!==this.profile[e]["readOnly"])&&this.canEdit)},moveUp:function(){this.$emit("move-up",this.originalThing.shortId(),this.index)},moveDown:function(){this.$emit("move-down",this.originalThing.shortId(),this.index)},moveRight:function(){this.$emit("move-right",this.originalThing.shortId(),this.index)},moveLeft:function(){this.$emit("move-left",this.originalThing.shortId(),this.index)},displayHeading:function(e){if(!0===this.showAlways&&!1===this.showPossible){if(this.alwaysProperties[e]&&EcObject.keys(this.alwaysProperties[e]).length>0)return e}else if(!1===this.showAlways&&null==this.showPossible){if(this.viewProperties[e]&&EcObject.keys(this.viewProperties[e]).length>0)return e}else if(!0===this.showPossible&&EcObject.keys(this.possibleProperties[e]).length>0)return e;return null},select:function(e,t){this.$emit("select",e,t)},getPropertiesFromProfile:function(e,t){for(var i=0;i<this.profile[t].length;i++){var s=this.profile[t][i],n="";if(this.profile[s]["heading"]&&(n=this.profile[s]["heading"]),null==e[n]&&void 0===e[n]&&(e[n]={}),!this.$store.getters["editor/conceptMode"]||"http://www.w3.org/2004/02/skos/core#broader"!==s&&"http://www.w3.org/2004/02/skos/core#narrower"!==s)if(this.profile[s]["valuesIndexed"]){if("true"===this.$store.state.editor.queryParams.ceasnDataFields&&("hasChild"===s||"isChildOf"===s))continue;if("true"!==this.$store.state.editor.queryParams.ceasnDataFields&&("narrows"===s||"broadens"===s))continue;var r=this.profile[s]["valuesIndexed"];r=r(),r&&r[this.obj.shortId()]&&(e[n][s]=this.profile[s])}else null!=this.expandedThing[s]&&0!==this.expandedThing[s].length&&(e[n][s]=this.profile[s])}return e},setUnknownName:function(e){this.expandedThing[e]=[{"@value":"Unknown name"}]}},watch:{canEdit:function(){this.showAlways=!0,this.showPossible=!1},changedObject:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,i,s,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.changedObject||"importLight"!==this.view){e.next=5;break}this.load(),this.$store.commit("editor/changedObject",null),e.next=33;break;case 5:if(!this.changedObject||!(this.changedObject===this.uri||this.originalThing&&this.changedObject===this.originalThing.shortId())){e.next=33;break}if(this.uri&&this.resolveNameFromUrl(this.uri),t="Ec"+(this.obj?this.obj.type:this.shortType),"EcEncryptedValue"!==t){e.next=23;break}return i="Ec"+this.obj.encryptedType,e.next=12,EcRepository.get(this.changedObject);case 12:return s=e.sent,n=new window[i],e.t0=n,e.next=17,EcEncryptedValue.fromEncryptedValue(s);case 17:e.t1=e.sent,e.t0.copyFrom.call(e.t0,e.t1),this.obj=n,this.load(),e.next=32;break;case 23:if(!(t&&window[t]&&window[t].get)){e.next=31;break}return e.next=26,window[t].get(this.changedObject);case 26:r=e.sent,this.obj=r,this.load(),e.next=32;break;case 31:t&&window[t]&&appLog("Can't get type: "+t);case 32:this.$store.commit("editor/changedObject",null);case 33:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),properties:function(){"primary"===this.properties?(this.showAlways=!0,this.showPossible=!1):"secondary"===this.properties?(this.showAlways=!1,this.showPossible=null):"tertiary"===this.properties&&(this.showAlways=!1,this.showPossible=!0)},obj:function(){this.obj&&this.obj.shortId()!==this.originalThing.shortId()&&this.load()}}},h=a,l=i("2877"),c=Object(l["a"])(h,s,n,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0a4fe9.bf9bee1a.js.map