(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-208a03a5"],{"18a3":function(e,t,r){"use strict";var s=r("2eb6"),i=r.n(s);i.a},"2eb6":function(e,t,r){},"3dcd":function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"columns is-multiline"},[e.selectedFramework?e._e():r("div",{staticClass:"column is-12"},[r("SearchBar",{attrs:{filterSet:"basic",allowShowFrameworks:e.allowShowFrameworks,searchType:e.searchType}})],1),e.selectedFramework?e._e():r("div",{staticClass:"column is-12"},[e.$store.state.lode.competencySearchModalOpen?r("List",{attrs:{type:e.searchTypeToPassToList,view:"search",parent:e.parent,repo:e.repo,click:e.select,searchOptions:e.searchOptions,paramObj:e.paramObj,disallowEdits:!0,selectingCompetency:!0,selected:e.selectedIds,displayFirst:e.displayFirst,idsNotPermittedInSearch:e.idsNotPermittedInSearch}}):e._e()],1),e.selectedFramework&&!e.hierarchyLoaded?r("div",[e._m(0)]):e._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:e.hierarchyLoaded,expression:"hierarchyLoaded"}]},[e.selectedFramework?r("Thing",{attrs:{parent:e.parent,obj:e.selectedFramework,repo:e.repo,view:e.view,expandInModal:!0}}):e._e(),r("Hierarchy",{attrs:{parent:e.parent,container:e.selectedFramework,view:"competencySearch",containerType:"Framework",containerTypeGet:"EcFramework",containerNodeProperty:"competency",containerEdgeProperty:"relation",nodeType:"EcCompetency",edgeType:"EcAlignment",edgeRelationProperty:"relationType",edgeRelationLiteral:"narrows",edgeSourceProperty:"source",edgeTargetProperty:"target",viewOnly:!0,repo:e.repo,highlightList:null,properties:"primary"},on:{"done-loading-nodes":function(t){e.hierarchyLoaded=!0},"selected-array":e.selectedArrayEvent}})],1)])},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon is-large"},[r("i",{staticClass:"fa fa-spinner fa-2x fa-pulse"})])}],o=(r("4de4"),r("a434"),r("b0c0"),r("f3f3")),a=r("713e"),n=r("9418"),c=r("098b"),h=r("872c"),l=r("2f62"),d=r("6b9e"),p={name:"CompetencySearch",props:{parent:{type:String,default:""},isActive:Boolean,view:{type:String,default:"modal"},idsNotPermittedInSearch:{type:Array,default:null},allowShowFrameworks:{type:Boolean,default:!1},clearFramework:{type:Boolean,default:!1}},components:{List:a["a"],SearchBar:d["a"],Hierarchy:n["default"],Thing:c["default"]},mixins:[h["a"]],data:function(){return{repo:window.repo,selectedIds:[],displayFirst:[],showMine:!1,sortBy:null,selectedFramework:null,hierarchyLoaded:!1}},created:function(){this.sortBy=!0===this.$store.getters["editor/conceptMode"]||"Concept"===this.searchType?"dcterms:title.keyword":"name.keyword",this.$store.commit("app/searchTerm","")},beforeDestroy:function(){this.$store.commit("app/searchTerm","")},computed:Object(o["a"])(Object(o["a"])({},Object(l["c"])({selectedCompetency:function(e){return e.editor.selectedCompetency},framework:function(e){return e.editor.framework},queryParams:function(e){return e.editor.queryParams},addingProperty:function(e){return e.lode.addingProperty}})),{},{nameOfSelectedCompetency:function(){return this.selectedCompetency&&this.selectedCompetency.name?this.selectedCompetency.getName():this.selectedCompetency?c["default"].getDisplayStringFrom(this.selectedCompetency["skos:prefLabel"]):""},copyOrLink:function(){return this.$store.state.lode.copyOrLink},frameworkName:function(){return this.framework?this.framework.getName():""},searchOptions:function(){var e="";if(this.queryParams&&null!=this.queryParams.filter&&(e+=" AND ("+this.queryParams.filter+")"),(this.showMine||this.queryParams&&!0!==this.$store.getters["editor/conceptMode"]&&"mine"===this.queryParams.show||this.queryParams&&!0===this.$store.getters["editor/conceptMode"]&&"mine"===this.queryParams.conceptShow)&&EcIdentityManager.ids.length>0){e+=" AND (";for(var t=0;t<EcIdentityManager.ids.length;t++){0!==t&&(e+=" OR ");var r=EcIdentityManager.ids[t];e+='\\*owner:"'+r.ppk.toPk().toPem()+'"',e+=' OR \\*owner:"'+this.addNewlinesToId(r.ppk.toPk().toPem())+'"'}e+=")"}return e},paramObj:function(){var e={size:20},t=this.$store.getters["app/searchTerm"];if(t&&0!==t.length)delete e.sort;else{var r="name.keyword"===this.sortBy||"dcterms:title.keyword"===this.sortBy?"asc":"desc";e.sort='[ { "'+this.sortBy+'": {"order" : "'+r+'" , "unmapped_type" : "long",  "missing" : "_last"}} ]'}return EcIdentityManager.ids.length>0&&this.queryParams&&(!0!==this.$store.getters["editor/conceptMode"]&&"mine"===this.queryParams.show||!0===this.$store.getters["editor/conceptMode"]&&"mine"===this.queryParams.conceptShow)&&(e.ownership="me"),e},searchType:function(){return this.$store.state.lode.searchType},sortResults:function(){return this.$store.getters["app/sortResults"]},quickFilters:function(){return this.$store.getters["app/quickFilters"]},filteredQuickFilters:function(){if(this.quickFilters){var e=this.quickFilters.filter((function(e){return!0===e.checked}));return appLog("filtered value",e),e}return[]},searchFrameworksInCompetencySearch:function(){return this.$store.getters["app/searchFrameworksInCompetencySearch"]},searchTypeToPassToList:function(){return"Competency"===this.searchType&&this.searchFrameworksInCompetencySearch?"Framework":this.searchType}}),mounted:function(){if(this.displayFirst.splice(0,this.displayFirst.length),this.$store.commit("app/searchTerm",""),!this.copyOrLink&&"Competency"===this.searchType&&this.framework.competency)for(var e=0;e<this.framework.competency.length;e++)if(this.framework.competency[e]!==this.selectedCompetency.shortId()&&(!this.idsNotPermittedInSearch||0===this.idsNotPermittedInSearch.length||!EcArray.has(this.idsNotPermittedInSearch,this.framework.competency[e]))){var t=EcRepository.getBlocking(this.framework.competency[e]);t&&this.displayFirst.push(t)}if("Level"===this.searchType&&this.framework.level)for(e=0;e<this.framework.level.length;e++){t=EcRepository.getBlocking(this.framework.level[e]);t&&this.displayFirst.push(t)}},methods:{resetModal:function(){this.$store.commit("app/closeModal"),this.selectedIds=[]},selectedArrayEvent:function(e){if(this.selectedIds=e,this.copyOrLink&&"Level"!==this.searchType||this.$store.commit("editor/selectedCompetenciesAsProperties",this.selectedIds),"true"===this.queryParams.selectRelations&&this.framework.relation)for(var t=0;t<this.framework.relation.length;t++){var r=EcAlignment.getBlocking(this.framework.relation[t]);EcArray.has(selectedArray,r.target)&&("true"===this.queryParams.selectVerbose?e.push(JSON.parse(rld.toJson())):e.push(r.shortId()))}},select:function(e){if("Framework"===e.type)return this.selectFramework(e);EcArray.has(this.selectedIds,e.shortId())?EcArray.setRemove(this.selectedIds,e.shortId()):this.selectedIds.push(e.shortId()),this.copyOrLink&&"Level"!==this.searchType||this.$store.commit("editor/selectedCompetenciesAsProperties",this.selectedIds)},selectFramework:function(e){this.selectedFramework=e,this.$emit("selectFramework",e)},addNewlinesToId:function(e){e=e.substring(0,26)+"\n"+e.substring(26);var t=e.length,r=27;while(r+64<t)e=e.substring(0,r+64)+"\n"+e.substring(r+64),r+=65,t++;return e=e.substring(0,t-24)+"\n"+e.substring(t-24),e}},watch:{sortResults:function(){"lastEdited"===this.sortResults.id?(this.sortBy="schema:dateModified",this.displayFirst.splice(0,this.displayFirst.length)):(this.sortBy=!0===this.$store.getters["editor/conceptMode"]||"Concept"===this.searchType?"dcterms:title.keyword":"name.keyword",this.displayFirst.splice(0,this.displayFirst.length))},filteredQuickFilters:function(){this.showMine=!1;for(var e=0;e<this.filteredQuickFilters.length;e++)"ownedByMe"===this.filteredQuickFilters[e].id&&(this.showMine=!0,this.displayFirst.splice(0,this.displayFirst.length))},selectedIds:function(e){"search-modal"===this.parent&&this.$emit("setSelectedIds",e)},clearFramework:function(){this.clearFramework&&this.selectFramework(null)}}},m=p,y=(r("18a3"),r("2877")),u=Object(y["a"])(m,s,i,!1,null,null,null);t["a"]=u.exports}}]);
//# sourceMappingURL=chunk-208a03a5.bb7254ee.js.map