(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7730d321","chunk-f3b8fe20","chunk-f3b8fe20"],{"26bb":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("modal-template",{attrs:{type:"danger",size:"small",active:!0},on:{close:e.closeModal}},[o("template",{slot:"modal-header"},[e._v(" Confirm Delete Concept ")]),o("template",{slot:"modal-body"},[o("section",[o("b",[e._v(" Warning! This action is permanent. ")])])]),o("template",{slot:"modal-foot"},[o("button",{staticClass:"is-danger is-outlined button",on:{click:function(t){return e.deleteItem()}}},[e._v(" Delete Concept ")]),o("button",{staticClass:"is-dark button",on:{click:function(t){return e.closeModal()}}},[e._v(" Cancel ")])])],2)},r=[],s=(o("fb6a"),o("a434"),o("96cf"),o("c964")),n=o("af07"),i=o("872c"),c={name:"DeleteConceptConfirm",components:{ModalTemplate:n["a"]},mixins:[i["a"]],computed:{obj:function(){return this.$store.getters["editor/itemToDelete"]},framework:function(){return this.$store.getters["editor/framework"]}},data:function(){return{editsToUndo:[]}},methods:{deleteItem:function(){this.deleteObject(this.obj),this.closeModal()},closeModal:function(){this.$store.commit("app/closeModal"),this.$store.commit("editor/setItemToDelete",{})},deleteObject:function(e){appLog("deleting "+e.id),this.deleteConceptInner(e),this.framework["schema:dateModified"]=(new Date).toISOString(),this.$store.commit("editor/selectedCompetency",null)},deleteConceptInner:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var o,a,r,s,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=this,null==t["skos:broader"]){e.next=27;break}a=0;case 3:if(!(a<t["skos:broader"].length)){e.next=27;break}return e.prev=4,e.next=7,EcConcept.get(t["skos:broader"][a]);case 7:if(r=e.sent,s=r["skos:narrower"].slice(),EcArray.setRemove(r["skos:narrower"],t.shortId()),r["schema:dateModified"]=(new Date).toISOString(),o.editsToUndo.push({operation:"update",id:r.shortId(),fieldChanged:["skos:narrower"],initialValue:[s]}),!0!==o.$store.state.editor.private||!0===EcEncryptedValue.encryptOnSaveMap[r.id]){e.next=16;break}return e.next=15,EcEncryptedValue.toEncryptedValue(r);case 15:r=e.sent;case 16:return e.next=18,repo.saveTo(r);case 18:o.$store.commit("editor/framework",o.framework),e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](4),appError(e.t0);case 24:a++,e.next=3;break;case 27:if(null==t["skos:narrower"]){e.next=43;break}a=0;case 29:if(!(a<t["skos:narrower"].length)){e.next=43;break}return e.prev=30,e.next=33,EcConcept.get(t["skos:narrower"][a]);case 33:n=e.sent,o.deleteConceptInner(n),e.next=40;break;case 37:e.prev=37,e.t1=e["catch"](30),appError(e.t1);case 40:a++,e.next=29;break;case 43:if(null==t["skos:topConceptOf"]){e.next=62;break}if(e.prev=44,s=this.framework["skos:hasTopConcept"].slice(),EcArray.setRemove(this.framework["skos:hasTopConcept"],t.shortId()),o.editsToUndo.push({operation:"update",id:this.framework.shortId(),fieldChanged:["skos:hasTopConcept"],initialValue:[s]}),i=this.framework,i["schema:dateModified"]=(new Date).toISOString(),!0!==this.$store.state.editor.private||!0===EcEncryptedValue.encryptOnSaveMap[i.id]){e.next=54;break}return e.next=53,EcEncryptedValue.toEncryptedValue(i);case 53:i=e.sent;case 54:return e.next=56,repo.saveTo(i);case 56:o.$store.commit("editor/framework",o.framework),e.next=62;break;case 59:e.prev=59,e.t2=e["catch"](44),appError(e.t2);case 62:this.spitEvent("conceptDeleted",t.shortId(),"editFrameworkPage"),o.editsToUndo.push({operation:"delete",obj:t}),repo.deleteRegistered(t,(function(){o.$store.commit("editor/framework",o.framework),o.$store.commit("editor/addEditsToUndo",JSON.parse(JSON.stringify(o.editsToUndo))),o.editsToUndo.splice(0,o.editsToUndo.length)}),appError);case 65:case"end":return e.stop()}}),e,this,[[4,21],[30,37],[44,59]])})));function t(t){return e.apply(this,arguments)}return t}()}},d=c,l=o("2877"),p=Object(l["a"])(d,a,r,!1,null,null,null);t["default"]=p.exports},"984b":function(e,t,o){},a907:function(e,t,o){},ad86:function(e,t,o){"use strict";var a=o("a907"),r=o.n(a);r.a},af07:function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"modal cass-editor___modal",class:[{"is-active":e.active},"is-"+e.size,"cass-editor__modal--"+e.content],attrs:{id:"cass-modal"}},[o("div",{staticClass:"modal-background"}),o("div",{staticClass:"modal-card",class:"cass-editor__modal-card--"+e.size},[o("header",{staticClass:"modal-card-head is-size-4 has-text-weight-bold",class:["has-background-"+e.type,"has-text-"+e.fontColor]},[o("p",{staticClass:"modal-card-title"},[e._t("modal-header")],2),e.canClose?o("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(t){e.$store.commit("app/closeModal"),e.$emit("close")}}}):e._e()]),o("div",{staticClass:"modal-card-body has-text-dark"},[e._t("modal-body")],2),o("footer",{staticClass:"modal-card-foot has-background-white"},[e._t("modal-foot")],2)])])},r=[],s=(o("984b"),{name:"ModalTemplate",props:{canClose:{type:Boolean,default:!0},active:{type:Boolean,default:!1},type:{default:"primary",type:String},fontColor:{type:String,default:"white"},size:{type:String,default:"medium"},content:{defualt:"default",type:String}},data:function(){return{}},computed:{}}),n=s,i=(o("ad86"),o("2877")),c=Object(i["a"])(n,a,r,!1,null,null,null);t["a"]=c.exports}}]);
//# sourceMappingURL=chunk-7730d321.aa5f0747.js.map