(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pluginManager","chunk-2d0dab46","chunk-2d0dab46"],{"0162":function(t,i,e){"use strict";e.d(i,"a",(function(){return a}));e("caad"),e("a434"),e("b0c0"),e("b64b"),e("d3b7"),e("ac1f"),e("8a79"),e("2532"),e("3ca3"),e("1276"),e("ddb0"),e("2b3d");var n=e("54f8"),a={name:"pluginUtil",data:function(){return{PLUGIN_NAME_PARTS_DELIMITER:"/",DEFAULT_PLUGIN_LAUNCH_LOCATION:"main",DEFAULT_PLUGIN_LAUNCH_CATEGORY:"Plugins",PLUGIN_ENABLED_LS_KEY:"cassAuthoringToolPluginsEnabled",LOCAL_PLUGIN_LIST_KEY:"cassAuthoringToolLocalPlugins",mdPluginUrlList:[],mdPluginSuccessCallback:null,numPluginManifestsToGet:0,numPluginManifestsGotten:0,mdPluginCurrentUrl:"",pluginManifestData:{},pluginList:[],buildPluginListSuccessCallback:null}},methods:{isValidUrl:function(t){try{new URL(t)}catch(i){return!1}return!0},checkManifestDataForPlugin:function(){this.numPluginManifestsGotten>=this.numPluginManifestsToGet?this.mdPluginSuccessCallback():this.getManifestDataForPlugin(this.numPluginManifestsGotten)},concatenateRemainingPluginNameParts:function(t){for(var i="",e=2;e<t.length;e++)i+=t[e],e+1<t.length&&(i+=this.PLUGIN_NAME_PARTS_DELIMITER);return i},parsePluginManifestName:function(t){var i={},e=t.split(this.PLUGIN_NAME_PARTS_DELIMITER);return e.length>=3&&(e[0].toLowerCase().equals("screen")||e[0].toLowerCase().equals("main"))?(i.launchLocation=e[0],i.launchCategory=e[1],i.launchName=this.concatenateRemainingPluginNameParts(e)):(i.launchLocation=this.DEFAULT_PLUGIN_LAUNCH_LOCATION,i.launchCategory=this.DEFAULT_PLUGIN_LAUNCH_CATEGORY,i.launchName=t),i},buildShortcutsForPlugin:function(t,i){var e,a=Object(n["a"])(i.shortcuts);try{for(a.s();!(e=a.n()).done;){var s=e.value,l=this.parsePluginManifestName(s.name);if(l.launchUrl=t.scope+s.url,l.queryParams=[],s["query_params"]){var r,u=Object(n["a"])(s["query_params"]);try{for(u.s();!(r=u.n()).done;){var o=r.value;l.queryParams.push(o)}}catch(c){u.e(c)}finally{u.f()}}t.shortcuts.push(l)}}catch(c){a.e(c)}finally{a.f()}},buildDefaultShortcutForPlugin:function(t){var i=this.parsePluginManifestName(t.name);i.launchUrl=t.scope,t.shortcuts.push(i)},parsePluginManifest:function(t){var i={};return i.name=t.name,i.scope=t.scope,i.shortcuts=[],t.shortcuts&&t.shortcuts.length>0?this.buildShortcutsForPlugin(i,t):this.buildDefaultShortcutForPlugin(i),i},getManifestDataForPluginSuccess:function(t){var i={};try{i=this.parsePluginManifest(t),i.loaded=!0}catch(e){i.loaded=!1,i.error="Could not parse manifest"}i.pluginUrl=this.mdPluginCurrentUrl,this.pluginManifestData[this.mdPluginCurrentUrl]=i,this.numPluginManifestsGotten++,this.checkManifestDataForPlugin()},getManifestDataForPluginFailure:function(t){var i={};i.pluginUrl=this.mdPluginCurrentUrl,i.loaded=!1,i.error=t,this.pluginManifestData[this.mdPluginCurrentUrl]=i,this.numPluginManifestsGotten++,this.checkManifestDataForPlugin()},getManifestDataForPlugin:function(t){var i=this.mdPluginUrlList[t],e="";e=i.endsWith("/")?i+"manifest.json":i+"/manifest.json",this.mdPluginCurrentUrl=i,this.$http.get(e).then((function(t){this.getManifestDataForPluginSuccess(t.data)}),(function(t){this.getManifestDataForPluginFailure(t)}))},removeIrrelevantPluginEntriesFromManifestData:function(t){for(var i=Object.keys(this.pluginManifestData),e=0,n=i;e<n.length;e++){var a=n[e];t.includes(a)||delete this.pluginManifestData[a]}},buildManifestDataPluginUrlList:function(t){this.mdPluginUrlList=[];var i,e=Object.keys(this.pluginManifestData),a=Object(n["a"])(t);try{for(a.s();!(i=a.n()).done;){var s=i.value;e.includes(s)||this.mdPluginUrlList.push(s)}}catch(l){a.e(l)}finally{a.f()}},prepDataForManifestLoad:function(t){this.pluginManifestData&&0!==Object.keys(this.pluginManifestData).length?(this.removeIrrelevantPluginEntriesFromManifestData(t),this.buildManifestDataPluginUrlList(t)):(this.mdPluginUrlList=t,this.pluginManifestData={})},loadManifestDataForPluginUrlList:function(t,i){t&&0!==t.length?(this.mdPluginSuccessCallback=i,this.prepDataForManifestLoad(t),0===this.mdPluginUrlList.length?i():(this.numPluginManifestsToGet=this.mdPluginUrlList.length,this.numPluginManifestsGotten=0,this.getManifestDataForPlugin(0))):i()},getEnabledPluginUrlList:function(){if(this.pluginList&&0!==this.pluginList.length){var t,i=[],e=Object(n["a"])(this.pluginList);try{for(e.s();!(t=e.n()).done;){var a=t.value;a.isEnabled&&i.push(a.url)}}catch(s){e.e(s)}finally{e.f()}return i}return[]},getPluginEnabledMapFromLocalStorage:function(){var t=localStorage.getItem(this.PLUGIN_ENABLED_LS_KEY),i=null;return i=t?JSON.parse(t):{},i},getIsPluginEnabled:function(t){var i=this.getPluginEnabledMapFromLocalStorage();return!!i[t]&&i[t]},setPluginAsEnabled:function(t){var i=this.getPluginEnabledMapFromLocalStorage();i[t]=!0,localStorage.setItem(this.PLUGIN_ENABLED_LS_KEY,JSON.stringify(i))},setPluginAsDisabled:function(t){var i=this.getPluginEnabledMapFromLocalStorage();delete i[t],localStorage.setItem(this.PLUGIN_ENABLED_LS_KEY,JSON.stringify(i))},setAllPluginsAsDisabled:function(){localStorage.removeItem(this.PLUGIN_ENABLED_LS_KEY)},getPluginListFromLocalStorage:function(){var t=localStorage.getItem(this.LOCAL_PLUGIN_LIST_KEY),i=[];return i=t?JSON.parse(t):[],i},addLocalPlugin:function(t){var i=this.getPluginListFromLocalStorage();i.includes(t)||i.push(t),localStorage.setItem(this.LOCAL_PLUGIN_LIST_KEY,JSON.stringify(i))},removeLocalPlugin:function(t){var i=this.getPluginListFromLocalStorage();if(i.includes(t)){for(var e=0;e<i.length;e++)if(i[e].equals(t)){i.splice(e,1);break}localStorage.setItem(this.LOCAL_PLUGIN_LIST_KEY,JSON.stringify(i))}},getPluginsFromRepoSuccess:function(t){this.buildPluginListSuccessCallback()},getPluginsFromRepoFailure:function(){appLog("Plugin search failure: "+msg),this.buildPluginListSuccessCallback()},buildPluginListItemFromRepoPlugin:function(t){},getPluginsFromRepo:function(){this.getPluginsFromRepoSuccess(null)},buildPluginListItemFromCuratedPlugin:function(t){var i={};return i.id=t.id,i.url=t.url,i.isCurated=!0,i.isNew=!1,i.isOwned=!1,i.isEnabled=this.getIsPluginEnabled(t.id),i},buildPluginListItemFromLocalPlugin:function(t){var i={};return i.id=t,i.url=t,i.isCurated=!1,i.isNew=!1,i.isOwned=!0,i.isEnabled=this.getIsPluginEnabled(t),i},getPluginsFromCuratedList:function(){var t,i=Object(n["a"])(this.$store.getters["app/curatedPlugins"]);try{for(i.s();!(t=i.n()).done;){var e=t.value;this.pluginList.push(this.buildPluginListItemFromCuratedPlugin(e))}}catch(a){i.e(a)}finally{i.f()}},getPluginsFromLocalStorage:function(){var t,i=Object(n["a"])(this.getPluginListFromLocalStorage());try{for(i.s();!(t=i.n()).done;){var e=t.value;this.pluginList.push(this.buildPluginListItemFromLocalPlugin(e))}}catch(a){i.e(a)}finally{i.f()}},buildPluginList:function(t){this.buildPluginListSuccessCallback=t,this.pluginList=[],this.getPluginsFromCuratedList(),this.getPluginsFromLocalStorage(),this.getPluginsFromRepo()}},computed:{}}},"089b":function(t,i,e){"use strict";var n=e("4de4e"),a=e.n(n);a.a},"0cfa":function(t,i,e){"use strict";var n=e("8766"),a=e.n(n);a.a},"39b2":function(t,i,e){"use strict";var n=e("a2c0"),a=e.n(n);a.a},"4de4e":function(t,i,e){},"55c5":function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"plugin-manager"}},[e("div",{staticClass:"modal",class:[{"is-active":t.pluginManagerBusy}]},[e("div",{staticClass:"modal-background"}),t._m(0)]),e("div",{staticClass:"modal",class:[{"is-active":t.showConfirmDeletePluginModal}]},[e("div",{staticClass:"modal-background"}),e("div",{staticClass:"modal-card"},[e("header",{staticClass:"modal-card-head has-background-primary"},[t._m(1),e("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:t.cancelPluginDelete}})]),e("section",{staticClass:"modal-card-body"},[t._v(" Are you sure you wish to remove the plugin "),e("b",[t._v("'"+t._s(t.pluginToDelete.url)+"'")]),t._v("? ")]),e("footer",{staticClass:"modal-card-foot"},[e("div",{staticClass:"buttons is-spaced"},[e("button",{staticClass:"button is-dark is-outlined",on:{click:t.cancelPluginDelete}},[t._v(" Cancel ")]),e("button",{staticClass:"button is-outlined is-primary",on:{click:t.deletePlugin}},[t._v(" Remove ")])])])])]),t.pluginManagerBusy?t._e():e("div",{staticClass:"container"},[t._m(2),t.pluginManagerViewMode.equals("list")?e("div",{staticClass:"section"},[e("h4",{staticClass:"header is-size-3"},[t._v(" Plugins ")]),0===t.pluginList.length?e("div",[e("p",[t._v("No plugins are available.")])]):t._e(),t.pluginList.length>0?e("div",{staticClass:"table-container"},[e("table",{staticClass:"table is-hoverable is-fullwidth"},[t._m(3),e("tbody",t._l(t.pluginList,(function(i){return e("plugin-list-item",{key:JSON.stringify(i),attrs:{id:i.id,url:i.url,"is-curated":i.isCurated,"is-owned":i.isOwned},on:{"enable-plugin":t.enablePlugin,"disable-plugin":t.disablePlugin,"show-delete":t.showPluginDelete,"show-details":t.showPluginDetails}})})),1)])]):t._e(),e("div",{staticClass:"buttons is-right"},[e("div",{staticClass:"button is-outlined is-primary",attrs:{title:"Add New Plugin"},on:{click:t.addNewPlugin}},[t._m(4),e("span",[t._v(" add new plugin ")])])])]):t._e(),t.pluginManagerViewMode.equals("detail")?e("div",[e("plugin-details",{attrs:{plugin:t.currentPlugin,readOnly:t.currentPluginIsReadOnly},on:{save:t.saveCurrentPlugin,cancel:t.cancelEditCurrentPlugin,back:t.backFromEditCurrentPlugin}})],1):t._e()])])},a=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"modal-content has-text-centered"},[e("span",{staticClass:"icon is-large has-text-center has-text-link"},[e("i",{staticClass:"fas fa-2x fa-spinner is-info fa-pulse"})])])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("p",{staticClass:"modal-card-title"},[e("span",{staticClass:"title has-text-white"},[t._v(" Remove Plugin? ")])])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"section"},[e("h3",{staticClass:"title is-size-1"},[t._v(" Plugin Management ")]),e("p",{staticClass:"description"},[t._v(" Plugins provide the capability to add additional CaSS related tools in order to customize your UI. ")])])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("thead",[e("tr",[e("th",[t._v(" location ")]),e("th",{attrs:{title:"Curated/Managed by the CaSS Project"}},[t._v(" curated? ")]),e("th",[t._v(" enabled ")]),e("th")])])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-plus"})])}],s=e("54f8"),l=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("tr",[e("th",[e("b",[t._v(t._s(t.url))])]),e("td",[t.isCurated?e("span",{staticClass:"icon has-text-primary"},[e("i",{staticClass:"fa fa-check"})]):t._e()]),e("td",[e("div",{staticClass:"field"},[e("div",{staticClass:"control is-size-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.isPluginEnabled,expression:"isPluginEnabled"}],staticClass:"switch is-outlined",attrs:{id:t.id+"pluginEnabledSwitch",type:"checkbox",name:t.id+"pluginEnabledSwitch"},domProps:{checked:Array.isArray(t.isPluginEnabled)?t._i(t.isPluginEnabled,null)>-1:t.isPluginEnabled},on:{change:function(i){var e=t.isPluginEnabled,n=i.target,a=!!n.checked;if(Array.isArray(e)){var s=null,l=t._i(e,s);n.checked?l<0&&(t.isPluginEnabled=e.concat([s])):l>-1&&(t.isPluginEnabled=e.slice(0,l).concat(e.slice(l+1)))}else t.isPluginEnabled=a}}}),e("label",{attrs:{for:t.id+"pluginEnabledSwitch"}})])])]),e("td",[t.isOwned?e("div",{staticClass:"button is-outlined is-small is-primary",attrs:{title:"Manage plugin"},on:{click:function(i){return t.$emit("show-details",t.id)}}},[t._m(0)]):t._e(),t.isOwned?e("div",{staticClass:"button is-outlined is-small is-danger delete-btn",attrs:{title:"Delete plugin"},on:{click:function(i){return t.$emit("show-delete",t.id)}}},[t._m(1)]):t._e(),t.isOwned?t._e():e("div",{staticClass:"button is-outlined is-small is-primary",attrs:{title:"View plugin"},on:{click:function(i){return t.$emit("show-details",t.id)}}},[t._m(2)])])])},r=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-cog"})])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-trash"})])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-eye"})])}],u=e("0162"),o={name:"PluginListItem",mixins:[u["a"]],props:{id:{type:String,default:""},url:{type:String,default:""},isCurated:{type:Boolean,default:!1},isOwned:{type:Boolean,default:!1}},computed:{isPluginEnabled:{get:function(){return this.getIsPluginEnabled(this.id)},set:function(t){t?this.$emit("enable-plugin",this.id):this.$emit("disable-plugin",this.id)}}}},c=o,d=(e("39b2"),e("2877")),g=Object(d["a"])(c,l,r,!1,null,"3c4bcd9f",null),f=g.exports,h=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-3"},[e("nav",{class:t.panelClass},[e("p",{staticClass:"panel-heading"},[t._v(" Actions ")]),t.readOnly?e("div",{staticClass:"panel-block"},[e("div",{staticClass:"buttons is-fullwidth is-right"},[e("div",{staticClass:"button is-outlined is-primary",on:{click:function(i){return t.$emit("back")}}},[t._m(0),e("span",[t._v("back")])])])]):t._e(),t.readOnly?t._e():e("div",{staticClass:"panel-block"},[e("div",{staticClass:"button is-fullwidth is-outlined is-dark",on:{click:function(i){return t.$emit("cancel")}}},[t._m(1),e("span",[t._v("cancel")])])]),t.readOnly?t._e():e("div",{staticClass:"panel-block"},[e("div",{staticClass:"button is-fullwidth is-outlined is-primary",on:{click:t.validateCurrentPluginAndEmitSave}},[t._m(2),e("span",[t._v("save plugin")])])])])]),e("div",{staticClass:"column is-9"},[e("div",{staticClass:"section box px-4 py-4"},[e("h3",{staticClass:"is-size-3 title"},[t._v(" Plugin details ")]),e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Location: ")]),t.readOnly?e("div",[t._v(" "+t._s(t.plugin.url)+" ")]):t._e(),t.readOnly?t._e():e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.plugin.url,expression:"plugin.url"}],staticClass:"input",attrs:{type:"url"},domProps:{value:t.plugin.url},on:{input:function(i){i.target.composing||t.$set(t.plugin,"url",i.target.value)}}})])]),t.pluginInvalid?e("div",{staticClass:"errorColor"},[e("p",[t._v("Plugin is invalid:")]),t.pluginUrlInvalid?e("p",[t._v(" *A valid URL is required for a plugin ")]):t._e()]):t._e()]),e("div",{staticClass:"section box px-4 py-4"},[e("h3",{staticClass:"is-size-3 title"},[t._v(" Manifest information ")]),e("div",{staticClass:"field"},[t.manifestRequestBusy?e("div",[t._m(3)]):t._e(),t.manifestRequestBusy?t._e():e("div",[t.manifestLoaded?t._e():e("div",{staticClass:"manifestNotLoaded"},[t._m(4),e("br"),e("div",{staticClass:"buttons is-fullwidth is-left"},[e("div",{staticClass:"button is-outlined is-primary",on:{click:t.loadManifestData}},[t._m(5),e("span",[t._v("load manifest data")])])])]),t.manifestLoaded?e("div",[t.manifestError?e("div",[e("p",{staticClass:"errorColor"},[e("i",{staticClass:"fa fa-exclamation-triangle is-primary"}),t._v(" Manifest load error: "+t._s(t.manifestData.error)+" ")]),e("br"),e("div",{staticClass:"buttons is-fullwidth is-left"},[e("div",{staticClass:"button is-outlined is-primary",on:{click:t.loadManifestData}},[t._m(6),e("span",[t._v("retry")])])])]):t._e(),t.manifestError?t._e():e("div",{staticClass:"columns is-centered is-multiline"},[e("div",{staticClass:"column is-4"},[e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Name: ")]),e("div",[t._v(" "+t._s(t.manifestData.name)+" ")])])]),e("div",{staticClass:"column is-8"},[e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Scope: ")]),e("div",[t._v(" "+t._s(t.manifestData.scope)+" ")])])]),e("div",{staticClass:"column is-12"},[e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("Shortcuts: ")]),e("div",[e("table",{staticClass:"table is-hoverable is-fullwidth"},[t._m(7),e("tbody",t._l(t.manifestData.shortcuts,(function(i,n){return e("tr",{key:n},[e("td",[e("b",[t._v(t._s(i.launchName))])]),e("td",[t._v(" "+t._s(i.launchLocation)+" ")]),e("td",[t._v(" "+t._s(i.launchCategory)+" ")]),e("td",[t._v(" "+t._s(i.launchUrl)+" ")]),e("td",[e("ul",t._l(i.queryParams,(function(i){return e("li",{key:i},[t._v(" "+t._s(i.name)+"="+t._s(i.value)+" ")])})),0)])])})),0)])])])])])]):t._e()])])])])])])},m=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-arrow-left"})])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-arrow-left"})])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-save"})])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("span",{staticClass:"icon is-large has-text-center has-text-link"},[e("i",{staticClass:"fas fa-2x fa-spinner is-info fa-pulse"})])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("p",[e("i",{staticClass:"fa fa-exclamation-triangle is-primary"}),t._v(" Manifest data not loaded")])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-sync-alt"})])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-sync-alt"})])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("thead",[e("tr",[e("th",[t._v(" name ")]),e("th",[t._v(" location ")]),e("th",[t._v(" category/screen ")]),e("th",[t._v(" url ")]),e("th",[t._v(" query params ")]),e("th")])])}],p={mixins:[u["a"]],name:"PluginDetails",props:{plugin:{type:Object},readOnly:{type:Boolean,default:!0}},data:function(){return{panelClass:"panel",manifestLoaded:!1,manifestError:!1,manifestRequestBusy:!1,manifestData:{},pluginInvalid:!1,pluginUrlInvalid:!1}},methods:{loadManifestDataComplete:function(){this.manifestData=this.pluginManifestData[this.plugin.url],this.manifestData.loaded||(this.manifestError=!0),this.manifestLoaded=!0,this.manifestRequestBusy=!1},loadManifestData:function(){if(this.isValidUrl(this.plugin.url)){this.manifestRequestBusy=!0;var t=[];t.push(this.plugin.url),this.loadManifestDataForPluginUrlList(t,this.loadManifestDataComplete)}else appLog("invalid URL")},validatePluginFields:function(){this.isValidUrl(this.plugin.url)||(this.pluginInvalid=!0,this.pluginUrlInvalid=!0)},validateCurrentPluginAndEmitSave:function(){this.pluginInvalid=!1,this.pluginUrlInvalid=!1,this.validatePluginFields(),this.pluginInvalid||this.$emit("save")}},computed:{},mounted:function(){}},P=p,v=(e("0cfa"),Object(d["a"])(P,h,m,!1,null,"645e5b53",null)),b=v.exports,_=e("6d79"),C={mixins:[_["a"],u["a"]],props:{view:{default:"",type:String}},name:"PluginManager",components:{PluginListItem:f,PluginDetails:b},data:function(){return{pluginManagerBusy:!1,pluginManagerViewMode:"list",currentPlugin:{},showConfirmDeletePluginModal:!1,pluginToDelete:{}}},computed:{currentPluginIsReadOnly:function(){return!this.currentPlugin||!this.currentPlugin.isOwned||!this.currentPlugin.isOwned},curatedPlugins:function(){return this.$store.getters["app/curatedPlugins"]}},methods:{showListView:function(){this.pluginManagerViewMode="list"},showDetailView:function(){this.pluginManagerViewMode="detail"},backFromEditCurrentPlugin:function(){this.showListView()},cancelEditCurrentPlugin:function(){this.buildManagerPluginList(),this.showListView()},saveCurrentPlugin:function(){this.pluginManagerBusy=!0,this.addLocalPlugin(this.currentPlugin.url),this.setPluginAsEnabled(this.currentPlugin.url),this.currentPlugin={},this.buildManagerPluginList(),this.showListView(),this.$store.commit("app/pluginLastUpdate",Date.now())},deletePlugin:function(){this.pluginManagerBusy=!0,this.setPluginAsDisabled(this.pluginToDelete.url),this.removeLocalPlugin(this.pluginToDelete.url),this.pluginToDelete={},this.showConfirmDeletePluginModal=!1,this.buildManagerPluginList(),this.$store.commit("app/pluginLastUpdate",Date.now())},cancelPluginDelete:function(){this.pluginToDelete={},this.showConfirmDeletePluginModal=!1},setPluginToDelete:function(t){this.pluginToDelete=this.getPluginById(t)},showPluginDelete:function(t){this.setPluginToDelete(t),this.showConfirmDeletePluginModal=!0},enablePlugin:function(t){this.setPluginAsEnabled(t),this.$store.commit("app/pluginLastUpdate",Date.now())},disablePlugin:function(t){this.setPluginAsDisabled(t),this.$store.commit("app/pluginLastUpdate",Date.now())},disableAllPlugins:function(){this.setAllPluginsAsDisabled(),this.buildManagerPluginList(),this.$store.commit("app/pluginLastUpdate",Date.now())},getPluginById:function(t){var i,e=Object(s["a"])(this.pluginList);try{for(e.s();!(i=e.n()).done;){var n=i.value;if(n.id.equals(t))return n}}catch(a){e.e(a)}finally{e.f()}return null},setCurrentPlugin:function(t){this.currentPlugin=this.getPluginById(t)},showPluginDetails:function(t){this.setCurrentPlugin(t),this.showDetailView()},generateNewPluginObject:function(){var t={id:"newPluginId",url:"",isCurated:!1,isOwned:!0};return t},addNewPlugin:function(){this.currentPlugin=this.generateNewPluginObject(),this.showDetailView()},buildPluginListFinished:function(){this.pluginManagerBusy=!1},buildManagerPluginList:function(){this.pluginManagerBusy=!0,this.buildPluginList(this.buildPluginListFinished)}},updated:function(){},mounted:function(){this.buildManagerPluginList()},watch:{curatedPlugins:function(){this.buildManagerPluginList()}}},y=C,L=(e("089b"),Object(d["a"])(y,n,a,!1,null,"bbfcdff6",null));i["default"]=L.exports},"6d79":function(t,i,e){"use strict";e.d(i,"a",(function(){return s}));e("caad"),e("d3b7"),e("ac1f"),e("25f0"),e("2532"),e("841c");var n=e("54f8"),a=(e("96cf"),e("c964")),s={name:"cassUtil",data:function(){return{}},methods:{getOrganizationByEcPk:function(t,i,e){var s=t.toPem(),l={size:1e4};EcOrganization.search(window.repo,"",function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(a){var l,r,u,o,c,d,g;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:l=Object(n["a"])(a),t.prev=1,l.s();case 3:if((r=l.n()).done){t.next=34;break}return u=r.value,t.prev=5,t.next=8,u.getOrgKeys();case 8:o=t.sent,c=Object(n["a"])(o),t.prev=10,c.s();case 12:if((d=c.n()).done){t.next=19;break}if(g=d.value,!g||!g.toPk().toPem().equals(s)){t.next=17;break}return i(u),t.abrupt("return");case 17:t.next=12;break;case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](10),c.e(t.t0);case 24:return t.prev=24,c.f(),t.finish(24);case 27:t.next=32;break;case 29:t.prev=29,t.t1=t["catch"](5),e(t.t1.toString());case 32:t.next=3;break;case 34:t.next=39;break;case 36:t.prev=36,t.t2=t["catch"](1),l.e(t.t2);case 39:return t.prev=39,l.f(),t.finish(39);case 42:i(null);case 43:case"end":return t.stop()}}),t,null,[[1,36,39,42],[5,29],[10,21,24,27]])})));return function(i){return t.apply(this,arguments)}}(),(function(t){e(t)}),l)},getOrganizationEcPk:function(t){return Object(a["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,t.getCurrentOrgKey();case 3:return i.abrupt("return",i.sent.toPk());case 6:return i.prev=6,i.t0=i["catch"](0),i.abrupt("return",null);case 9:case"end":return i.stop()}}),i,null,[[0,6]])})))()},getPersonEcPk:function(t){var i=this.generateProbablePersonFingerprintFromShortId(t.shortId());if(t.owner){var e,a=Object(n["a"])(t.owner);try{for(a.s();!(e=a.n()).done;){var s=e.value,l=EcPk.fromPem(s);if(i.equals(l.fingerprint()))return l}}catch(r){a.e(r)}finally{a.f()}}return null},addAllOwnersFromObjectToObject:function(t,i){if(t&&t.owner){var e,a=Object(n["a"])(t.owner);try{for(a.s();!(e=a.n()).done;){var s=e.value,l=EcPk.fromPem(s);i.addOwner(l)}}catch(r){a.e(r)}finally{a.f()}}},setDefaultBrowserConfigId:function(t){localStorage.setItem("cassAuthoringToolDefaultBrowserConfigId",t)},removeDefaultBrowserConfig:function(){localStorage.removeItem("cassAuthoringToolDefaultBrowserConfigId")},getDefaultBrowserConfigId:function(){return localStorage.getItem("cassAuthoringToolDefaultBrowserConfigId")},getBooleanValue:function(t){return"boolean"===typeof t?t:"string"===typeof t&&!!t.equalsIgnoreCase("true")},addAllIdentityPksAsOwners:function(t){if(EcIdentityManager&&EcIdentityManager.default.ids&&EcIdentityManager.default.ids.length>0)for(var i=0;i<EcIdentityManager.default.ids.length;i++)t.addOwner(EcIdentityManager.default.ids[i].ppk.toPk())},isObjectOwnerless:function(t){return!t.owner||0===t.owner.length},doesAnyIdentityOwnObject:function(t){return!!this.isAdmin()||(null==t.canEditAny||t.canEditAny(EcIdentityManager.default.getMyPks()))},canEditAny:function(t){return!!this.isAdmin()||(null==t.canEditAny||t.canEditAny(EcIdentityManager.default.getMyPks()))},isAdmin:function(){return EcIdentityManager.default.ids.length>0&&null!=window.repo.adminKeys&&window.repo.adminKeys.length>0&&window.repo.adminKeys[0]===EcIdentityManager.default.ids[0].ppk.toPk().toPem()},generateProbablePersonFingerprintFromShortId:function(t){return t.substring(t.lastIndexOf("/")+1)},isPersonIdAnObjectOwner:function(t,i){if(!i.owner||0===i.owner.length)return!1;var e,a=this.generateProbablePersonFingerprintFromShortId(t),s=Object(n["a"])(i.owner);try{for(s.s();!(e=s.n()).done;){var l=e.value,r=EcPk.fromPem(l).fingerprint();if(r.equals(a))return!0}}catch(u){s.e(u)}finally{s.f()}return!1},isPersonIdAnObjectReader:function(t,i){if(!i.reader||0===i.reader.length)return!1;var e,a=this.generateProbablePersonFingerprintFromShortId(t),s=Object(n["a"])(i.reader);try{for(s.s();!(e=s.n()).done;){var l=e.value,r=EcPk.fromPem(l).fingerprint();if(r.equals(a))return!0}}catch(u){s.e(u)}finally{s.f()}return!1},areAnyIdentitiesThisPerson:function(t){var i=t.getFingerprint();if(EcIdentityManager&&EcIdentityManager.default.ids&&EcIdentityManager.default.ids.length>0)for(var e=0;e<EcIdentityManager.default.ids.length;e++)if(EcIdentityManager.default.ids[e].ppk.toPk().fingerprint().equals(i))return!0;return!1},isPersonalIdentityAnObjectOwner:function(t){if(this.isAdmin())return!0;if(!t.owner||0===t.owner.length)return!1;var i=this.getPersonalIdentityPk().toPem();return t.owner.includes(i)},getPersonalIdentityPk:function(){return EcIdentityManager&&EcIdentityManager.default.ids&&EcIdentityManager.default.ids.length>0?EcIdentityManager.default.ids[0].ppk.toPk():null},buildEcAlignmentsFromRemoteLinkedData:function(t){var i,e=[],a=Object(n["a"])(t);try{for(a.s();!(i=a.n()).done;){var s=i.value,l=new EcAlignment;l.copyFrom(s),e.push(l)}}catch(r){a.e(r)}finally{a.f()}return e}},computed:{amLoggedIn:function(){return!!(EcIdentityManager&&EcIdentityManager.default.ids&&EcIdentityManager.default.ids.length>0)}}}},8766:function(t,i,e){},a2c0:function(t,i,e){}}]);
//# sourceMappingURL=pluginManager.65d2d621.js.map