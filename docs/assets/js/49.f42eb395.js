(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{672:function(e,t,a){"use strict";a.r(t);var s=a(69),r=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"cass-installation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cass-installation"}},[e._v("#")]),e._v(" CaSS Installation")]),e._v(" "),t("p",[e._v("This is the installation guide for a CaSS instance. If you're just looking to work with an existing CaSS instance, you may be looking for the CaSS Library. See the "),t("a",{attrs:{href:"/dev/links-and-references"}},[e._v("Links")]),e._v(" section for more information.")]),e._v(" "),t("h2",{attrs:{id:"system-requirements"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#system-requirements"}},[e._v("#")]),e._v(" System Requirements")]),e._v(" "),t("ul",[t("li",[e._v("4 GB of ram (can work with 2 GB with additional configuration)\n"),t("ul",[t("li",[e._v("ElasticSearch 7: 2 GB (can be reduced to 1 GB)")])])]),e._v(" "),t("li",[e._v("At least 8 GB of hard drive space.")])]),e._v(" "),t("h2",{attrs:{id:"cass-version-requirements"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cass-version-requirements"}},[e._v("#")]),e._v(" CaSS Version Requirements")]),e._v(" "),t("p",[e._v("Minimum CaSS version selection for inclusion of CaSS Authoring Tools should be "),t("strong",[e._v("1.3")])]),e._v(" "),t("h2",{attrs:{id:"cat-cass-installation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cat-cass-installation"}},[e._v("#")]),e._v(" CAT/CaSS Installation")]),e._v(" "),t("h3",{attrs:{id:"linux-debian-ubuntu-amazon-and-other-fedora-derivatives"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-debian-ubuntu-amazon-and-other-fedora-derivatives"}},[e._v("#")]),e._v(" Linux (Debian, Ubuntu, Amazon and other Fedora derivatives)")]),e._v(" "),t("p",[e._v("CaSS can be installed on linux through our Bash install script.")]),e._v(" "),t("p",[e._v("Install and Upgrade")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("wget")]),e._v(" https://raw.githubusercontent.com/cassproject/CASS/master/scripts/cassInstall.sh\n "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("chmod")]),e._v(" +x cassInstall.sh\n "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" ./cassInstall.sh\n")])])]),t("h2",{attrs:{id:"docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[e._v("#")]),e._v(" Docker")]),e._v(" "),t("p",[e._v("Images for CASS are kept in Docker Hub under "),t("a",{attrs:{href:"https://hub.docker.com/r/cassproject/cass",target:"_blank",rel:"noopener noreferrer"}},[e._v("cassproject/cass"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("p",[e._v("The following command will run the CaSS Standalone server with an interactive prompt and expose it on port 80 on the local machine.")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-it")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-p80:80")]),e._v(" cassproject/cass\n")])])]),t("p",[e._v("Additionally, if you wish to use docker-compose or some other means of deploying CaSS in a constellation of servers, see "),t("a",{attrs:{href:"https://github.com/cassproject/CASS/blob/master/docker-compose.yml",target:"_blank",rel:"noopener noreferrer"}},[e._v("this docker-compose file"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("h2",{attrs:{id:"windows"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#windows"}},[e._v("#")]),e._v(" Windows")]),e._v(" "),t("p",[e._v("Windows installation uses "),t("a",{attrs:{href:"https://chocolatey.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Chocolatey"),t("OutboundLink")],1),e._v(" as a package manager. Chocolatey will be used to install all required CASS dependencies (maven, git, and elasticsearch).")]),e._v(" "),t("p",[e._v("If you would like to install these packages by hand or using another tool, please feel free.")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://chocolatey.org/packages/cass",target:"_blank",rel:"noopener noreferrer"}},[e._v("CASS Package on Chocolatey"),t("OutboundLink")],1)]),e._v(" "),t("h3",{attrs:{id:"once"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#once"}},[e._v("#")]),e._v(" Once")]),e._v(" "),t("p",[e._v("From an elevated powershell:")]),e._v(" "),t("div",{staticClass:"language-batch extra-class"},[t("pre",{pre:!0,attrs:{class:"language-batch"}},[t("code",[t("span",{pre:!0,attrs:{class:"token command"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Set")]),e._v("-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("3072")]),e._v("; iex ((New-Object System.Net.WebClient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(".DownloadString"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("'")]),e._v("https://community.chocolatey.org/install.ps1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token command"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("refreshenv")])]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token command"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("choco")]),e._v(" install "),t("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[e._v("-y")]),e._v(" cass")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token command"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("refreshenv")])]),e._v("\n")])])]),t("p",[e._v("Go to services, start "),t("code",[e._v("elasticsearch-service-x64")]),e._v(" and set it to start automatically.")]),e._v(" "),t("h3",{attrs:{id:"install-upgrade"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-upgrade"}},[e._v("#")]),e._v(" Install/Upgrade")]),e._v(" "),t("p",[e._v("Before upgrading, copy out the etc folder from the root directory of the CaSS installation. From an elevated command line:")]),e._v(" "),t("div",{staticClass:"language-batch extra-class"},[t("pre",{pre:!0,attrs:{class:"language-batch"}},[t("code",[t("span",{pre:!0,attrs:{class:"token command"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("choco")]),e._v(" install "),t("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[e._v("-y")]),e._v(" cass")]),e._v("\n")])])]),t("p",[e._v("Then copy the etc folder back in.")]),e._v(" "),t("h2",{attrs:{id:"setup"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setup"}},[e._v("#")]),e._v(" Setup")]),e._v(" "),t("ul",[t("li",[e._v("Set up a "),t("strong",[e._v("DNS endpoint")])]),e._v(" "),t("li",[e._v("Set up an "),t("strong",[e._v("HTTPS certificate")])]),e._v(" "),t("li",[e._v("Set up "),t("a",{attrs:{href:"https://weblogs.asp.net/owscott/creating-a-reverse-proxy-with-url-rewrite-for-iis",target:"_blank",rel:"noopener noreferrer"}},[e._v("IIS Reverse Proxy"),t("OutboundLink")],1),e._v(" "),t("ul",[t("li",[e._v("Reverse Proxy Endpoint: "),t("code",[e._v("https://<your cass domain>/ -> http://localhost:8080/cass/")])])])]),e._v(" "),t("li",[e._v("In your firewall, deny access to ports "),t("code",[e._v("9200")]),e._v(" and "),t("code",[e._v("8080")]),e._v(" to all machines except localhost.")])]),e._v(" "),t("h2",{attrs:{id:"post-installation-checklist"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#post-installation-checklist"}},[e._v("#")]),e._v(" Post-Installation Checklist")]),e._v(" "),t("ol",[t("li",[e._v("Ensure API is started and reachable through a desired endpoint")]),e._v(" "),t("li",[e._v("(e.g. "),t("code",[e._v("http://cass.<your_organization>.org/api/custom/")]),e._v(").")]),e._v(" "),t("li",[e._v("Note that all objects created will use this endpoint in their permanent locator, so make sure!")]),e._v(" "),t("li",[e._v("Ensure Website is reachable through a desired endpoint")]),e._v(" "),t("li",[e._v("(e.g. "),t("code",[e._v("http://cass.<your_organization>.org/")]),e._v(").")]),e._v(" "),t("li",[e._v("CASS attempts to auto-detect the endpoint for the server automatically. XSS or obscure endpoints may require additional configuration.")]),e._v(" "),t("li",[e._v("Set PM2 logs to rotate with the "),t("code",[e._v("npm run rotatelogs")]),e._v(" command. On Windows machines, we have found that it works better to change the rotatelogs command in the package.json file to "),t("code",[e._v("pm2 install @jessety/pm2-logrotate")]),e._v(" before running the npm command.")]),e._v(" "),t("li",[e._v("To get the process to restart when your Linux machine restarts, run "),t("code",[e._v("npm run pm2startup")]),e._v(", run the command the process tells you to, and run "),t("code",[e._v("npm run pm2save")]),e._v(". For Windows, an additional library is needed to configure this. We followed the instructions here: https://stackoverflow.com/a/42770772")])]),e._v(" "),t("h2",{attrs:{id:"testing-upgrade-and-installation-faq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#testing-upgrade-and-installation-faq"}},[e._v("#")]),e._v(" Testing, upgrade, and installation FAQ")]),e._v(" "),t("ol",[t("li",[e._v("Most errors will occur due to a lack of connectivity with the appropriate endpoint. Use the Browser Development Tools to ensure that requests are going to the correct location.")]),e._v(" "),t("li",[e._v("Check to ensure the environment variable "),t("code",[e._v("CASS_LOOPBACK")]),e._v(" is set to the endpoint of the server.")]),e._v(" "),t("li",[e._v("Apache requires proxy_http to function. If Apache fails to start up, the proxy_http module may not be enabled. In HTTPD, this is called "),t("code",[e._v("mod_proxy_http")]),e._v(".")]),e._v(" "),t("li",[e._v("The installer will not modify a current install of the Apache/HTTPD Web Server if proxy settings are being used (even from a previous install).")]),e._v(" "),t("li",[e._v("When upgrading from 0.1.0 -- If you get the error "),t("code",[e._v("HTTP Status 404 - /cass-0.0.1/")])]),e._v(" "),t("li",[e._v("Alter the apache conf files to use ProxyPass / "),t("code",[e._v("http://localhost:8080/cass/")]),e._v(", not ProxyPass / "),t("code",[e._v("http://localhost:8080/cass-0.0.1/")])]),e._v(" "),t("li",[e._v("After an upgrade, database incompatibilities may occur. You may export and import data before upgrades using the following web services:\n"),t("ul",[t("li",[t("code",[e._v("http://<endpoint>/skyrepo/util/backup?secret=[contents of skyId.secret in etc folder]")])]),e._v(" "),t("li",[t("code",[e._v("http://<endpoint>/skyrepo/util/restore?secret=[contents of skyId.secret in etc folder]")])])])]),e._v(" "),t("li",[e._v("If you are upgrading ElasticSearch from version 5 to 7, you'll need to first upgrade to 6 and start CaSS. Keep an eye on the logs, and after the data has finished reindexing, you can upgrade to 7.")])]),e._v(" "),t("h2",{attrs:{id:"troubleshooting"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting"}},[e._v("#")]),e._v(" Troubleshooting")]),e._v(" "),t("ol",[t("li",[t("strong",[e._v("Is ElasticSearch running?")]),e._v(" "),t("ul",[t("li",[e._v("If not, start it manually and ensure the service is configured to start automatically on boot.")])])]),e._v(" "),t("li",[t("strong",[e._v("Is PM2 running?")]),e._v(" "),t("ul",[t("li",[e._v("If not, start it manually and ensure the service is configured to start automatically on boot.")])])]),e._v(" "),t("li",[t("strong",[e._v("Can you access "),t("code",[e._v("http://<server ip>:8080/cass/")]),e._v("?")]),e._v(" "),t("ul",[t("li",[e._v("Make sure there are no conflicts on port 8080.")]),e._v(" "),t("li",[e._v("Verify that PM2 is running.")])])]),e._v(" "),t("li",[t("strong",[e._v("Can you access "),t("code",[e._v("http://<server ip>:8080/cass/api/")]),e._v(" with a response “Service does not exist”?")]),e._v(" "),t("ul",[t("li",[e._v("If the request hangs, ensure ElasticSearch is running and that it started without error (check the logs).")])])]),e._v(" "),t("li",[t("strong",[e._v("Can you access "),t("code",[e._v("http://<server ip>:8080/cass/api/data?q=*")]),e._v(" and receive a valid response (empty list or data array depending on the data in the system)?")]),e._v(" "),t("ul",[t("li",[e._v("If the request hangs, ensure ElasticSearch is running and that it started without error (check the logs).")])])]),e._v(" "),t("li",[t("strong",[e._v("Access your local CASS installation via browser "),t("code",[e._v("http://<server ip>:8080/cass/")]),e._v(", create a new user, and attempt to login.")]),e._v(" "),t("ul",[t("li",[e._v("Did the login complete?")]),e._v(" "),t("li",[e._v("Did the login icon in the left sidebar change to display your initials?")]),e._v(" "),t("li",[e._v("Did you gain new capabilities? (Assertions, Configuration -> Users and Groups)")]),e._v(" "),t("li",[e._v("If not, repeat the operations with browser developer tools enabled.  Watch the network stream and ensure the ‘login’, ‘create’, and ‘commit’ requests and responses are occurring without incident.")])])]),e._v(" "),t("li",[t("strong",[e._v("Create a framework.")]),e._v(" "),t("ul",[t("li",[e._v("Did it appear on the screen?\n"),t("ul",[t("li",[e._v("If not, repeat the operation with browser developer tools enabled.  Watch the network stream and ensure the framework creation POST occurred without incident.")])])])])]),e._v(" "),t("li",[t("strong",[e._v("Create a competency in the framework.")]),e._v(" "),t("ul",[t("li",[e._v("Did it appear in the framework?\n"),t("ul",[t("li",[e._v("If not, repeat the operation with browser developer tools enabled.  Watch the network stream and ensure the competency creation POST occurred without incident.")])])]),e._v(" "),t("li",[e._v("Delete the competency and framework.")])])]),e._v(" "),t("li",[t("strong",[e._v("Can you access "),t("code",[e._v("https://<server endpoint>/")]),e._v(" and view the website?")]),e._v(" "),t("ul",[t("li",[e._v("If not, can you access "),t("code",[e._v("http://<server endpoint>/")]),e._v(" (http vs. https) and view the website?\n"),t("ul",[t("li",[e._v("If so, verify the reverse proxy settings are applied to the HTTPS configuration.")]),e._v(" "),t("li",[e._v("If not, ensure the Apache2 server (or IIS) is working correctly (check the logs, debug the reverse proxy, etc.).")])])])])]),e._v(" "),t("li",[t("strong",[e._v("Can you access "),t("code",[e._v("https://<server endpoint>/api/")]),e._v("and get “Service does not exist”?")]),e._v(" "),t("ul",[t("li",[e._v("If not, ensure the Apache2 server (or IIS) is working correctly (check the logs, debug the reverse proxy, etc.).")])])])])])}),[],!1,null,null,null);t.default=r.exports}}]);